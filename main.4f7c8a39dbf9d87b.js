(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{2011:(ut,Ae,F)=>{"use strict";F.d(Ae,{hO:()=>Ge,xv:()=>ve,Dh:()=>ue,GT:()=>ye,cc:()=>xe,on:()=>$,pX:()=>oe});var d=F(5e3),j=F(127),O=F(5813);ut=F.hmd(ut);const ce=["ngOnDestroy"],oe=(de,Re,Oe,fe={})=>new Proxy(de,{get:(De,Ee)=>Oe.runOutsideAngular(()=>{var Ke;if(de[Ee])return(null===(Ke=null==fe?void 0:fe.spy)||void 0===Ke?void 0:Ke.get)&&fe.spy.get(Ee,de[Ee]),de[Ee];if(ce.indexOf(Ee)>-1)return()=>{};const ie=Re.toPromise().then(Je=>{const X=Je&&Je[Ee];return"function"==typeof X?X.bind(Je):X&&X.then?X.then(me=>Oe.run(()=>me)):Oe.run(()=>X)});return new Proxy(()=>{},{get:(Je,X)=>ie[X],apply:(Je,X,me)=>ie.then(ge=>{var be;const Ue=ge&&ge(...me);return(null===(be=null==fe?void 0:fe.spy)||void 0===be?void 0:be.apply)&&fe.spy.apply(Ee,me,Ue),Ue})})})}),ye=(de,Re)=>{Re.forEach(Oe=>{Object.getOwnPropertyNames(Oe.prototype||Oe).forEach(fe=>{Object.defineProperty(de.prototype,fe,Object.getOwnPropertyDescriptor(Oe.prototype||Oe,fe))})})};class se{constructor(Re){return Re}}const ue=new d.OlP("angularfire2.app.options"),ve=new d.OlP("angularfire2.app.name");function $(de,Re,Oe){const De="object"==typeof Oe&&Oe||{};De.name=De.name||"string"==typeof Oe&&Oe||"[DEFAULT]";const Ke=j.Z.apps.filter(ie=>ie&&ie.name===De.name)[0]||Re.runOutsideAngular(()=>j.Z.initializeApp(de,De));try{JSON.stringify(de)!==JSON.stringify(Ke.options)&&z("error",`${Ke.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ie){}return new se(Ke)}const z=(de,...Re)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[de](...Re)},ne={provide:se,useFactory:$,deps:[ue,d.R0b,[new d.FiY,ve]]};let Ge=(()=>{class de{constructor(Oe){j.Z.registerVersion("angularfire",O.q4.full,"core"),j.Z.registerVersion("angularfire",O.q4.full,"app-compat"),j.Z.registerVersion("angular",d.q4F.full,Oe.toString())}static initializeApp(Oe,fe){return{ngModule:de,providers:[{provide:ue,useValue:Oe},{provide:ve,useValue:fe}]}}}return de.\u0275fac=function(Oe){return new(Oe||de)(d.LFG(d.Lbi))},de.\u0275mod=d.oAB({type:de}),de.\u0275inj=d.cJS({providers:[ne]}),de})();function xe(de,Re,Oe,fe,De){const[,Ee,Ke]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===de)||[];if(Ee)return function Fe(de,Re){try{return de.toString()===Re.toString()}catch(Oe){return de===Re}}(De,Ke)||(Y("error",`${Re} was already initialized on the ${Oe} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),Y("warn",{is:De,was:Ke})),Ee;{const ie=fe();return globalThis.\u0275AngularfireInstanceCache.push([de,ie,De]),ie}}const He=!!ut.hot,Y=(de,...Re)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[de](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ae,F)=>{"use strict";F.d(Ae,{q4:()=>Ic,iC:()=>Os,fc:()=>Fn,HU:()=>sp,vb:()=>fr,JM:()=>Rs});var d=F(5e3),j=F(5867),O=F(5861),ce=F(9681),oe=F(2090),ye=F(4859),se=F(1877),ue=F(2940);const ve="@firebase/installations",$="0.5.5",ne=`w:${$}`,Ge="FIS_v2",Re=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Oe(C){return C instanceof oe.ZR&&C.code.includes("request-failed")}function fe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function De(C){return{token:C.token,requestStatus:2,expiresIn:ge(C.expiresIn),creationTime:Date.now()}}function Ee(C,S){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(C,S){const B=(yield S.json()).error;return Re.create("request-failed",{requestName:C,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function ie({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Je(C,{refreshToken:S}){const M=ie(C);return M.append("Authorization",function be(C){return`${Ge} ${C}`}(S)),M}function X(C){return me.apply(this,arguments)}function me(){return(me=(0,O.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function ge(C){return Number(C.replace("s","000"))}function Ue(C,S){return he.apply(this,arguments)}function he(){return(he=(0,O.Z)(function*(C,{fid:S}){const M=fe(C),le={method:"POST",headers:ie(C),body:JSON.stringify({fid:S,authVersion:Ge,appId:C.appId,sdkVersion:ne})},Le=yield X(()=>fetch(M,le));if(Le.ok){const Be=yield Le.json();return{fid:Be.fid||S,registrationStatus:2,refreshToken:Be.refreshToken,authToken:De(Be.authToken)}}throw yield Ee("Create Installation",Le)})).apply(this,arguments)}function Ct(C){return new Promise(S=>{setTimeout(S,C)})}const Hn=/^[cdef][\w-]{21}$/;function lt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function vi(C){return function ln(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Hn.test(M)?M:""}catch(C){return""}}function mn(C){return`${C.appName}!${C.appId}`}const Oi=new Map;function cn(C,S){const M=mn(C);On(M,S),function Xr(C,S){const M=function zi(){return!ci&&"BroadcastChannel"in self&&(ci=new BroadcastChannel("[Firebase] FID Change"),ci.onmessage=C=>{On(C.data.key,C.data.fid)}),ci}();M&&M.postMessage({key:C,fid:S}),function ws(){0===Oi.size&&ci&&(ci.close(),ci=null)}()}(M,S)}function On(C,S){const M=Oi.get(C);if(M)for(const B of M)B(S)}let ci=null;const Zn="firebase-installations-store";let Es=null;function vt(){return Es||(Es=(0,ue.openDb)("firebase-installations-database",1,C=>{0===C.oldVersion&&C.createObjectStore(Zn)})),Es}function nr(C,S){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(C,S){const M=mn(C),Q=(yield vt()).transaction(Zn,"readwrite"),le=Q.objectStore(Zn),Le=yield le.get(M);return yield le.put(S,M),yield Q.complete,(!Le||Le.fid!==S.fid)&&cn(C,S.fid),S})).apply(this,arguments)}function tn(C){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,O.Z)(function*(C){const S=mn(C),B=(yield vt()).transaction(Zn,"readwrite");yield B.objectStore(Zn).delete(S),yield B.complete})).apply(this,arguments)}function _t(C,S){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*(C,S){const M=mn(C),Q=(yield vt()).transaction(Zn,"readwrite"),le=Q.objectStore(Zn),Le=yield le.get(M),Be=S(Le);return void 0===Be?yield le.delete(M):yield le.put(Be,M),yield Q.complete,Be&&(!Le||Le.fid!==Be.fid)&&cn(C,Be.fid),Be})).apply(this,arguments)}function At(C){return un.apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(C){let S;const M=yield _t(C,B=>{const Q=bi(B),le=Mt(C,Q);return S=le.registrationPromise,le.installationEntry});return""===M.fid?{installationEntry:yield S}:{installationEntry:M,registrationPromise:S}})).apply(this,arguments)}function bi(C){return mo(C||{fid:lt(),registrationStatus:0})}function Mt(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Re.create("app-offline"))};const M={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},B=function ct(C,S){return et.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:B}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:go(C)}:{installationEntry:S}}function et(){return(et=(0,O.Z)(function*(C,S){try{return nr(C,yield Ue(C,S))}catch(M){throw Oe(M)&&409===M.customData.serverCode?yield tn(C):yield nr(C,{fid:S.fid,registrationStatus:0}),M}})).apply(this,arguments)}function go(C){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(C){let S=yield $t(C);for(;1===S.registrationStatus;)yield Ct(100),S=yield $t(C);if(0===S.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield At(C);return B||M}return S})).apply(this,arguments)}function $t(C){return _t(C,S=>{if(!S)throw Re.create("installation-not-found");return mo(S)})}function mo(C){return function ui(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function kn(C,S){return H.apply(this,arguments)}function H(){return(H=(0,O.Z)(function*({appConfig:C,platformLoggerProvider:S},M){const B=q(C,M),Q=Je(C,M),le=S.getImmediate({optional:!0});le&&Q.append("x-firebase-client",le.getPlatformInfoString());const Be={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:ne}})},nt=yield X(()=>fetch(B,Be));if(nt.ok)return De(yield nt.json());throw yield Ee("Generate Auth Token",nt)})).apply(this,arguments)}function q(C,{fid:S}){return`${fe(C)}/${S}/authTokens:generate`}function K(C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(C,S=!1){let M;const B=yield _t(C.appConfig,le=>{if(!di(le))throw Re.create("not-registered");const Le=le.authToken;if(!S&&wi(Le))return le;if(1===Le.requestStatus)return M=re(C,S),le;{if(!navigator.onLine)throw Re.create("app-offline");const Be=hi(le);return M=nn(C,Be),Be}});return M?yield M:B.authToken})).apply(this,arguments)}function re(C,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(C,S){let M=yield yt(C.appConfig);for(;1===M.authToken.requestStatus;)yield Ct(100),M=yield yt(C.appConfig);const B=M.authToken;return 0===B.requestStatus?K(C,S):B})).apply(this,arguments)}function yt(C){return _t(C,S=>{if(!di(S))throw Re.create("not-registered");return function ae(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function nn(C,S){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(C,S){try{const M=yield kn(C,S),B=Object.assign(Object.assign({},S),{authToken:M});return yield nr(C.appConfig,B),M}catch(M){if(!Oe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield nr(C.appConfig,B)}else yield tn(C.appConfig);throw M}})).apply(this,arguments)}function di(C){return void 0!==C&&2===C.registrationStatus}function wi(C){return 2===C.requestStatus&&!function Pt(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+36e5}(C)}function hi(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}function W(){return(W=(0,O.Z)(function*(C){const S=C,{installationEntry:M,registrationPromise:B}=yield At(S.appConfig);return B?B.catch(console.error):K(S).catch(console.error),M.fid})).apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(C,S=!1){const M=C;return yield dt(M.appConfig),(yield K(M,S)).token})).apply(this,arguments)}function dt(C){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(C){const{registrationPromise:S}=yield At(C);S&&(yield S)})).apply(this,arguments)}function Ja(C){return Re.create("missing-app-config-values",{valueName:C})}const yn="installations",Ut=C=>{const S=C.getProvider("app").getImmediate(),M=function Ni(C){if(!C||!C.options)throw Ja("App Configuration");if(!C.name)throw Ja("App Name");const S=["projectId","apiKey","appId"];for(const M of S)if(!C.options[M])throw Ja(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S);return{app:S,appConfig:M,platformLoggerProvider:(0,ce._getProvider)(S,"platform-logger"),_delete:()=>Promise.resolve()}},vn=C=>{const S=C.getProvider("app").getImmediate(),M=(0,ce._getProvider)(S,yn).getImmediate();return{getId:()=>function Z(C){return W.apply(this,arguments)}(M),getToken:Q=>function Se(C){return qe.apply(this,arguments)}(M,Q)}};(function vr(){(0,ce._registerComponent)(new ye.wA(yn,Ut,"PUBLIC")),(0,ce._registerComponent)(new ye.wA("installations-internal",vn,"PRIVATE"))})(),(0,ce.registerVersion)(ve,$),(0,ce.registerVersion)(ve,$,"esm2017");const Is="@firebase/remote-config",Qn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class lc{constructor(S,M,B,Q){this.client=S,this.storage=M,this.storageCache=B,this.logger=Q}isCachedDataFresh(S,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,Q=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${Q}.`),Q}fetch(S){var M=this;return(0,O.Z)(function*(){const[B,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(S.cacheMaxAgeMillis,B))return Q;S.eTag=Q&&Q.eTag;const le=yield M.client.fetch(S),Le=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Le.push(M.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Le),le})()}}function bo(C=navigator){return C.languages&&C.languages[0]||C.language}class wr{constructor(S,M,B,Q,le,Le){this.firebaseInstallations=S,this.sdkVersion=M,this.namespace=B,this.projectId=Q,this.apiKey=le,this.appId=Le}fetch(S){var M=this;return(0,O.Z)(function*(){const[B,Q]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Be={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},nt={sdk_version:M.sdkVersion,app_instance_id:B,app_instance_id_token:Q,app_id:M.appId,language_code:bo()},rn={method:"POST",headers:Be,body:JSON.stringify(nt)},hn=fetch(Le,rn),Wt=new Promise((Ns,Dr)=>{S.signal.addEventListener(()=>{const uh=new Error("The operation was aborted.");uh.name="AbortError",Dr(uh)})});let Fi;try{yield Promise.race([hn,Wt]),Fi=yield hn}catch(Ns){let Dr="fetch-client-network";throw"AbortError"===Ns.name&&(Dr="fetch-timeout"),Qn.create(Dr,{originalErrorMessage:Ns.message})}let Kt=Fi.status;const Tr=Fi.headers.get("ETag")||void 0;let Yo,Br;if(200===Fi.status){let Ns;try{Ns=yield Fi.json()}catch(Dr){throw Qn.create("fetch-client-parse",{originalErrorMessage:Dr.message})}Yo=Ns.entries,Br=Ns.state}if("INSTANCE_STATE_UNSPECIFIED"===Br?Kt=500:"NO_CHANGE"===Br?Kt=304:("NO_TEMPLATE"===Br||"EMPTY_CONFIG"===Br)&&(Yo={}),304!==Kt&&200!==Kt)throw Qn.create("fetch-status",{httpStatus:Kt});return{status:Kt,eTag:Tr,config:Yo}})()}}class rm{constructor(S,M){this.client=S,this.storage=M}fetch(S){var M=this;return(0,O.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:M,backoffCount:B}){var Q=this;return(0,O.Z)(function*(){yield function im(C,S){return new Promise((M,B)=>{const Q=Math.max(S-Date.now(),0),le=setTimeout(M,Q);C.addEventListener(()=>{clearTimeout(le),B(Qn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,M);try{const le=yield Q.client.fetch(S);return yield Q.storage.deleteThrottleMetadata(),le}catch(le){if(!function Bs(C){if(!(C instanceof oe.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(le))throw le;const Le={throttleEndTimeMillis:Date.now()+(0,oe.$s)(B),backoffCount:B+1};return yield Q.storage.setThrottleMetadata(Le),Q.attemptFetch(S,Le)}})()}}class Zd{constructor(S,M,B,Q,le){this.app=S,this._client=M,this._storageCache=B,this._storage=Q,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vu(C,S){const M=C.target.error||void 0;return Qn.create(S,{originalErrorMessage:M&&M.message})}const wo="app_namespace_store";class ma{constructor(S,M,B,Q=function Yd(){return new Promise((C,S)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=B=>{S(vu(B,"storage-open"))},M.onsuccess=B=>{C(B.target.result)},M.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(wo,{keyPath:"compositeKey"})}}catch(M){S(Qn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=S,this.appName=M,this.namespace=B,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var M=this;return(0,O.Z)(function*(){const B=yield M.openDbPromise;return new Promise((Q,le)=>{const Be=B.transaction([wo],"readonly").objectStore(wo),nt=M.createCompositeKey(S);try{const rn=Be.get(nt);rn.onerror=hn=>{le(vu(hn,"storage-get"))},rn.onsuccess=hn=>{const Wt=hn.target.result;Q(Wt?Wt.value:void 0)}}catch(rn){le(Qn.create("storage-get",{originalErrorMessage:rn&&rn.message}))}})})()}set(S,M){var B=this;return(0,O.Z)(function*(){const Q=yield B.openDbPromise;return new Promise((le,Le)=>{const nt=Q.transaction([wo],"readwrite").objectStore(wo),rn=B.createCompositeKey(S);try{const hn=nt.put({compositeKey:rn,value:M});hn.onerror=Wt=>{Le(vu(Wt,"storage-set"))},hn.onsuccess=()=>{le()}}catch(hn){Le(Qn.create("storage-set",{originalErrorMessage:hn&&hn.message}))}})})()}delete(S){var M=this;return(0,O.Z)(function*(){const B=yield M.openDbPromise;return new Promise((Q,le)=>{const Be=B.transaction([wo],"readwrite").objectStore(wo),nt=M.createCompositeKey(S);try{const rn=Be.delete(nt);rn.onerror=hn=>{le(vu(hn,"storage-delete"))},rn.onsuccess=()=>{Q()}}catch(rn){le(Qn.create("storage-delete",{originalErrorMessage:rn&&rn.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class am{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const M=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),Q=S.storage.getActiveConfig(),le=yield M;le&&(S.lastFetchStatus=le);const Le=yield B;Le&&(S.lastSuccessfulFetchTimestampMillis=Le);const Be=yield Q;Be&&(S.activeConfig=Be)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Qd(){return es.apply(this,arguments)}function es(){return(es=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(C){return!1}})).apply(this,arguments)}!function lm(){(0,ce._registerComponent)(new ye.wA("remote-config",function C(S,{instanceIdentifier:M}){const B=S.getProvider("app").getImmediate(),Q=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Qn.create("registration-window");if(!(0,oe.hl)())throw Qn.create("indexed-db-unavailable");const{projectId:le,apiKey:Le,appId:Be}=B.options;if(!le)throw Qn.create("registration-project-id");if(!Le)throw Qn.create("registration-api-key");if(!Be)throw Qn.create("registration-app-id");const nt=new ma(Be,B.name,M=M||"firebase"),rn=new am(nt),hn=new se.Yd(Is);hn.logLevel=se.in.ERROR;const Wt=new wr(Q,ce.SDK_VERSION,M,le,Le,Be),Fi=new rm(Wt,nt),Kt=new lc(Fi,nt,rn,hn),Tr=new Zd(B,Kt,rn,nt,hn);return function Tn(C){const S=(0,oe.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Tr),Tr},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Is,"0.3.4"),(0,ce.registerVersion)(Is,"0.3.4","esm2017")}();const il="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",Xd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sl="google.c.a.c_id",Wf="google.c.a.c_l",ol="google.c.a.ts",uc="google.c.a.e";var _a=(()=>{return(C=_a||(_a={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",_a;var C})();function Nr(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bu(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),Q=new Uint8Array(B.length);for(let le=0;le<B.length;++le)Q[le]=B.charCodeAt(le);return Q}const Dn="fcm_token_details_db",Kf="fcm_token_object_Store";function dc(C){return cl.apply(this,arguments)}function cl(){return cl=(0,O.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(Dn))return null;let S=null;return(yield(0,ue.openDb)(Dn,5,function(){var B=(0,O.Z)(function*(Q){var le;if(Q.oldVersion<2||!Q.objectStoreNames.contains(Kf))return;const Le=Q.transaction.objectStore(Kf),Be=yield Le.index("fcmSenderId").get(C);if(yield Le.clear(),Be)if(2===Q.oldVersion){const nt=Be;if(!nt.auth||!nt.p256dh||!nt.endpoint)return;S={token:nt.fcmToken,createTime:null!==(le=nt.createTime)&&void 0!==le?le:Date.now(),subscriptionOptions:{auth:nt.auth,p256dh:nt.p256dh,endpoint:nt.endpoint,swScope:nt.swScope,vapidKey:"string"==typeof nt.vapidKey?nt.vapidKey:Nr(nt.vapidKey)}}}else if(3===Q.oldVersion){const nt=Be;S={token:nt.fcmToken,createTime:nt.createTime,subscriptionOptions:{auth:Nr(nt.auth),p256dh:Nr(nt.p256dh),endpoint:nt.endpoint,swScope:nt.swScope,vapidKey:Nr(nt.vapidKey)}}}else if(4===Q.oldVersion){const nt=Be;S={token:nt.fcmToken,createTime:nt.createTime,subscriptionOptions:{auth:Nr(nt.auth),p256dh:Nr(nt.p256dh),endpoint:nt.endpoint,swScope:nt.swScope,vapidKey:Nr(nt.vapidKey)}}}});return function(Q){return B.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(Dn),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),Jd(S)?S:null}),cl.apply(this,arguments)}function Jd(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const ns="firebase-messaging-store";let wu=null;function Sn(){return wu||(wu=(0,ue.openDb)("firebase-messaging-database",1,C=>{0===C.oldVersion&&C.createObjectStore(ns)})),wu}function ya(C){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(C){const S=Ei(C),B=yield(yield Sn()).transaction(ns).objectStore(ns).get(S);if(B)return B;{const Q=yield dc(C.appConfig.senderId);if(Q)return yield bn(C,Q),Q}})).apply(this,arguments)}function bn(C,S){return ul.apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(C,S){const M=Ei(C),Q=(yield Sn()).transaction(ns,"readwrite");return yield Q.objectStore(ns).put(S,M),yield Q.complete,S})).apply(this,arguments)}function fc(C){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(C){const S=Ei(C),B=(yield Sn()).transaction(ns,"readwrite");yield B.objectStore(ns).delete(S),yield B.complete})).apply(this,arguments)}function Ei({appConfig:C}){return C.appId}const Jn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function As(C,S){return $i.apply(this,arguments)}function $i(){return($i=(0,O.Z)(function*(C,S){const M=yield js(C),B=va(S),Q={method:"POST",headers:M,body:JSON.stringify(B)};let le;try{le=yield(yield fetch(Ms(C.appConfig),Q)).json()}catch(Le){throw Jn.create("token-subscribe-failed",{errorInfo:Le})}if(le.error)throw Jn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw Jn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function Uo(C,S){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(C,S){const M=yield js(C),B=va(S.subscriptionOptions),Q={method:"PATCH",headers:M,body:JSON.stringify(B)};let le;try{le=yield(yield fetch(`${Ms(C.appConfig)}/${S.token}`,Q)).json()}catch(Le){throw Jn.create("token-update-failed",{errorInfo:Le})}if(le.error)throw Jn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw Jn.create("token-update-no-token");return le.token})).apply(this,arguments)}function dl(C,S){return is.apply(this,arguments)}function is(){return(is=(0,O.Z)(function*(C,S){const B={method:"DELETE",headers:yield js(C)};try{const le=yield(yield fetch(`${Ms(C.appConfig)}/${S}`,B)).json();if(le.error)throw Jn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(Q){throw Jn.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function Ms({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function js(C){return bt.apply(this,arguments)}function bt(){return(bt=(0,O.Z)(function*({appConfig:C,installations:S}){const M=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function va({p256dh:C,auth:S,endpoint:M,vapidKey:B}){const Q={web:{endpoint:M,auth:S,p256dh:C}};return B!==Xd&&(Q.web.applicationPubKey=B),Q}const th=6048e5;function pc(C){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,O.Z)(function*(C){const S=yield Nn(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:Nr(S.getKey("auth")),p256dh:Nr(S.getKey("p256dh"))},B=yield ya(C.firebaseDependencies);if(B){if(Bo(B.subscriptionOptions,M))return Date.now()>=B.createTime+th?Tu(C,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield dl(C.firebaseDependencies,B.token)}catch(Q){console.warn(Q)}return Bt(C.firebaseDependencies,M)}return Bt(C.firebaseDependencies,M)})).apply(this,arguments)}function hl(C){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,O.Z)(function*(C){const S=yield ya(C.firebaseDependencies);S&&(yield dl(C.firebaseDependencies,S.token),yield fc(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Tu(C,S){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*(C,S){try{const M=yield Uo(C.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:M,createTime:Date.now()});return yield bn(C.firebaseDependencies,B),M}catch(M){throw yield hl(C),M}})).apply(this,arguments)}function Bt(C,S){return Du.apply(this,arguments)}function Du(){return(Du=(0,O.Z)(function*(C,S){const B={token:yield As(C,S),createTime:Date.now(),subscriptionOptions:S};return yield bn(C,B),B.token})).apply(this,arguments)}function Nn(C,S){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bu(S)})})).apply(this,arguments)}function Bo(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}function Pr(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Su(C,S){if(!S.notification)return;C.notification={};const M=S.notification.title;M&&(C.notification.title=M);const B=S.notification.body;B&&(C.notification.body=B);const Q=S.notification.image;Q&&(C.notification.image=Q)}(S,C),function fl(C,S){!S.data||(C.data=S.data)}(S,C),function cm(C,S){if(!S.fcmOptions)return;C.fcmOptions={};const M=S.fcmOptions.link;M&&(C.fcmOptions.link=M);const B=S.fcmOptions.analytics_label;B&&(C.fcmOptions.analyticsLabel=B)}(S,C),S}function nh(C){return"object"==typeof C&&!!C&&sl in C}function jo(C,S){const M=[];for(let B=0;B<C.length;B++)M.push(C.charAt(B)),B<S.length&&M.push(S.charAt(B));return M.join("")}function ei(C){return Jn.create("missing-app-config-values",{valueName:C})}jo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),jo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hs{constructor(S,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function gc(C){if(!C||!C.options)throw ei("App Configuration Object");if(!C.name)throw ei("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const B of S)if(!M[B])throw ei(B);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:Q,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function pl(C){return Io.apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(il,{scope:ts}),C.swRegistration.update().catch(()=>{})}catch(S){throw Jn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function rs(C,S){return Au.apply(this,arguments)}function Au(){return(Au=(0,O.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield pl(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Jn.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function mc(C,S){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,O.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=Xd)})).apply(this,arguments)}function gl(){return(gl=(0,O.Z)(function*(C,S){if(!navigator)throw Jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Jn.create("permission-blocked");return yield mc(C,null==S?void 0:S.vapidKey),yield rs(C,null==S?void 0:S.serviceWorkerRegistration),pc(C)})).apply(this,arguments)}function wa(C,S,M){return xu.apply(this,arguments)}function xu(){return(xu=(0,O.Z)(function*(C,S,M){const B=ku(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[sl],message_name:M[Wf],message_time:M[ol],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ku(C){switch(C){case _a.NOTIFICATION_CLICKED:return"notification_open";case _a.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ml(){return(ml=(0,O.Z)(function*(C,S){const M=S.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===_a.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Pr(M)):C.onMessageHandler.next(Pr(M)));const B=M.data;nh(B)&&"1"===B[uc]&&(yield wa(C,M.messageType,B))})).apply(this,arguments)}const _l="@firebase/messaging",Ru=C=>{const S=new Hs(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Zf(C,S){return ml.apply(this,arguments)}(S,M)),S},Yf=C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:B=>function _c(C,S){return gl.apply(this,arguments)}(S,B)}};function Ea(){return xs.apply(this,arguments)}function xs(){return(xs=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Qf(){(0,ce._registerComponent)(new ye.wA("messaging",Ru,"PUBLIC")),(0,ce._registerComponent)(new ye.wA("messaging-internal",Yf,"PRIVATE")),(0,ce.registerVersion)(_l,"0.9.8"),(0,ce.registerVersion)(_l,"0.9.8","esm2017")}();const yl="analytics",Ho="firebase_id",Nu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yc="https://www.googletagmanager.com/gtag/js",Pi=new se.Yd("@firebase/analytics");function Pu(C){return Promise.all(C.map(S=>S.catch(M=>M)))}function Gs(C,S){const M=document.createElement("script");M.src=`${yc}?l=${C}&id=${S}`,M.async=!0,document.head.appendChild(M)}function Fu(C,S,M,B,Q,le){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,O.Z)(function*(C,S,M,B,Q,le){const Le=B[Q];try{if(Le)yield S[Le];else{const nt=(yield Pu(M)).find(rn=>rn.measurementId===Q);nt&&(yield S[nt.appId])}}catch(Be){Pi.error(Be)}C("config",Q,le)})).apply(this,arguments)}function zo(C,S,M,B,Q){return bl.apply(this,arguments)}function bl(){return(bl=(0,O.Z)(function*(C,S,M,B,Q){try{let le=[];if(Q&&Q.send_to){let Le=Q.send_to;Array.isArray(Le)||(Le=[Le]);const Be=yield Pu(M);for(const nt of Le){const rn=Be.find(Wt=>Wt.measurementId===nt),hn=rn&&S[rn.appId];if(!hn){le=[];break}le.push(hn)}}0===le.length&&(le=Object.values(S)),yield Promise.all(le),C("event",B,Q||{})}catch(le){Pi.error(le)}})).apply(this,arguments)}function cr(){const C=window.document.getElementsByTagName("script");for(const S of Object.values(C))if(S.src&&S.src.includes(yc))return S;return null}const Ci=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),sh=new class Er{constructor(S={},M=1e3){this.throttleMetadata=S,this.intervalMillis=M}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,M){this.throttleMetadata[S]=M}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function gt(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function An(C){return wl.apply(this,arguments)}function wl(){return(wl=(0,O.Z)(function*(C){var S;const{appId:M,apiKey:B}=C,Q={method:"GET",headers:gt(B)},le=Nu.replace("{app-id}",M),Le=yield fetch(le,Q);if(200!==Le.status&&304!==Le.status){let Be="";try{const nt=yield Le.json();(null===(S=nt.error)||void 0===S?void 0:S.message)&&(Be=nt.error.message)}catch(nt){}throw Ci.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:Be})}return Le.json()})).apply(this,arguments)}function Ca(C){return Go.apply(this,arguments)}function Go(){return(Go=(0,O.Z)(function*(C,S=sh,M){const{appId:B,apiKey:Q,measurementId:le}=C.options;if(!B)throw Ci.create("no-app-id");if(!Q){if(le)return{measurementId:le,appId:B};throw Ci.create("no-api-key")}const Le=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new $s;return setTimeout((0,O.Z)(function*(){Be.abort()}),void 0!==M?M:6e4),El({appId:B,apiKey:Q,measurementId:le},Le,Be,S)})).apply(this,arguments)}function El(C,S,M){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,O.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:M},B,Q=sh){const{appId:le,measurementId:Le}=C;try{yield Bu(B,S)}catch(Be){if(Le)return Pi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:le,measurementId:Le};throw Be}try{const Be=yield An(C);return Q.deleteThrottleMetadata(le),Be}catch(Be){if(!wn(Be)){if(Q.deleteThrottleMetadata(le),Le)return Pi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:le,measurementId:Le};throw Be}const nt=503===Number(Be.customData.httpStatus)?(0,oe.$s)(M,Q.intervalMillis,30):(0,oe.$s)(M,Q.intervalMillis),rn={throttleEndTimeMillis:Date.now()+nt,backoffCount:M+1};return Q.setThrottleMetadata(le,rn),Pi.debug(`Calling attemptFetch again in ${nt} millis`),El(C,rn,B,Q)}})).apply(this,arguments)}function Bu(C,S){return new Promise((M,B)=>{const Q=Math.max(S-Date.now(),0),le=setTimeout(M,Q);C.addEventListener(()=>{clearTimeout(le),B(Ci.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function wn(C){if(!(C instanceof oe.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}class $s{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function tt(){return ss.apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(){if(!(0,oe.hl)())return Pi.warn(Ci.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(C){return Pi.warn(Ci.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function $o(){return($o=(0,O.Z)(function*(C,S,M,B,Q,le,Le){var Be;const nt=Ca(C);nt.then(Kt=>{M[Kt.measurementId]=Kt.appId,C.options.measurementId&&Kt.measurementId!==C.options.measurementId&&Pi.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Kt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kt=>Pi.error(Kt)),S.push(nt);const rn=tt().then(Kt=>{if(Kt)return B.getId()}),[hn,Wt]=yield Promise.all([nt,rn]);cr()||Gs(le,hn.measurementId),Q("js",new Date);const Fi=null!==(Be=null==Le?void 0:Le.config)&&void 0!==Be?Be:{};return Fi.origin="firebase",Fi.update=!0,null!=Wt&&(Fi[Ho]=Wt),Q("config",hn.measurementId,Fi),hn.measurementId})).apply(this,arguments)}class Fr{constructor(S){this.app=S}_delete(){return delete ur[this.app.options.appId],Promise.resolve()}}let ur={},Pn=[];const ju={};let wc,Do,dr="dataLayer",oh=!1;function Ii(C,S,M){!function pi(){const C=[];if((0,oe.ru)()&&C.push("This is a browser extension environment."),(0,oe.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((B,Q)=>`(${Q+1}) ${B}`).join(" "),M=Ci.create("invalid-analytics-context",{errorInfo:S});Pi.warn(M.message)}}();const B=C.options.appId;if(!B)throw Ci.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Ci.create("no-api-key");Pi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ur[B])throw Ci.create("already-exists",{id:B});if(!oh){!function vc(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(dr);const{wrappedGtag:le,gtagCore:Le}=function iv(C,S,M,B,Q){let le=function(...Le){window[B].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(le=window[Q]),window[Q]=function ih(C,S,M,B){function le(){return(le=(0,O.Z)(function*(Le,Be,nt){try{"event"===Le?yield zo(C,S,M,Be,nt):"config"===Le?yield Fu(C,S,M,B,Be,nt):C("set",Be)}catch(rn){Pi.error(rn)}})).apply(this,arguments)}return function Q(Le,Be,nt){return le.apply(this,arguments)}}(le,C,S,M),{gtagCore:le,wrappedGtag:window[Q]}}(ur,Pn,ju,dr,"gtag");Do=le,wc=Le,oh=!0}return ur[B]=function Ia(C,S,M,B,Q,le,Le){return $o.apply(this,arguments)}(C,Pn,ju,S,wc,dr,M),new Fr(C)}function Wo(){return(Wo=(0,O.Z)(function*(C,S,M,B,Q){if(Q&&Q.global)C("event",M,B);else{const le=yield S;C("event",M,Object.assign(Object.assign({},B),{send_to:le}))}})).apply(this,arguments)}function tp(){return ah.apply(this,arguments)}function ah(){return(ah=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(C){return!1}})).apply(this,arguments)}const ip="@firebase/analytics";!function Ec(){(0,ce._registerComponent)(new ye.wA(yl,(S,{options:M})=>Ii(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ce._registerComponent)(new ye.wA("analytics-internal",function C(S){try{const M=S.getProvider(yl).getImmediate();return{logEvent:(B,Q,le)=>function Ta(C,S,M,B){C=(0,oe.m9)(C),function ti(C,S,M,B,Q){return Wo.apply(this,arguments)}(Do,ur[C.app.options.appId],S,M,B).catch(Q=>Pi.error(Q))}(M,B,Q,le)}}catch(M){throw Ci.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ce.registerVersion)(ip,"0.7.5"),(0,ce.registerVersion)(ip,"0.7.5","esm2017")}();var Il=F(4408),Ti=F(7565);const Tl=new class qs extends Ti.v{}(class lh extends Il.o{constructor(S,M){super(S,M),this.scheduler=S,this.work=M}schedule(S,M=0){return M>0?super.schedule(S,M):(this.delay=M,this.state=S,this.scheduler.flush(this),this)}execute(S,M){return M>0||this.closed?super.execute(S,M):this._execute(S,M)}requestAsyncId(S,M,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(S,M,B):S.flush(this)}});var Dl=F(4986),gi=F(8505),os=F(5363),Cc=F(9468);const Ic=new d.GfV("7.2.1"),hr="__angularfire_symbol__analyticsIsSupportedValue",Zo="__angularfire_symbol__analyticsIsSupported",Tc="__angularfire_symbol__remoteConfigIsSupportedValue",zu="__angularfire_symbol__remoteConfigIsSupported",ch="__angularfire_symbol__messagingIsSupportedValue",Da="__angularfire_symbol__messagingIsSupported";function Rs(C,S,M){if(S){if(1===S.length)return S[0];const le=S.filter(Le=>Le.app===M);if(1===le.length)return le[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[Zo]||(globalThis[Zo]=tp().then(C=>globalThis[hr]=C).catch(()=>globalThis[hr]=!1)),globalThis[Da]||(globalThis[Da]=Ea().then(C=>globalThis[ch]=C).catch(()=>globalThis[ch]=!1)),globalThis[zu]||(globalThis[zu]=Qd().then(C=>globalThis[Tc]=C).catch(()=>globalThis[Tc]=!1));const fr=(C,S)=>{const M=S?[S]:(0,j.C6)(),B=[];return M.forEach(Q=>{Q.container.getProvider(C).instances.forEach(Le=>{B.includes(Le)||B.push(Le)})}),B};function ot(){}class qt{constructor(S,M=Tl){this.zone=S,this.delegate=M}now(){return this.delegate.now()}schedule(S,M,B){const Q=this.zone;return this.delegate.schedule(function(Le){Q.runGuarded(()=>{S.apply(this,[Le])})},M,B)}}class Sl{constructor(S){this.zone=S,this.task=null}call(S,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ot,{},ot,ot)),M.pipe((0,gi.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sp=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new qt(Zone.current)),this.insideAngular=M.run(()=>new qt(Zone.current,Dl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Wi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Fn(C){return C.pipe((0,os.Q)(Wi().outsideAngular))}function Os(C){return Wi(),function we(C){return function(M){return(M=M.lift(new Sl(C.ngZone))).pipe((0,Cc.R)(C.outsideAngular),(0,os.Q)(C.insideAngular))}}(Wi())(C)}},4929:(ut,Ae,F)=>{"use strict";F.d(Ae,{$:()=>th,A:()=>z,E:()=>Ut,G:()=>lr,I:()=>Bs,K:()=>wi,L:()=>Qd,M:()=>Xd,N:()=>rl,P:()=>Ic,Q:()=>sl,R:()=>ip,T:()=>ts,U:()=>al,V:()=>_a,W:()=>Kf,X:()=>Ei,Y:()=>Jn,Z:()=>$i,_:()=>is,a:()=>Ci,a0:()=>Cu,a1:()=>Iu,a2:()=>Me,a3:()=>Du,a4:()=>ba,a5:()=>Pr,a6:()=>Su,a7:()=>cm,a8:()=>nh,a9:()=>Hs,aA:()=>Wt,aB:()=>we,aC:()=>yn,aG:()=>Er,aJ:()=>ol,aa:()=>Io,ab:()=>Au,ae:()=>gl,af:()=>xu,ag:()=>ku,aj:()=>eh,ak:()=>Xf,am:()=>Ou,an:()=>vc,ao:()=>Yn,ap:()=>X,aq:()=>Lt,ar:()=>dt,as:()=>Oe,at:()=>up,au:()=>dh,av:()=>fe,aw:()=>ie,ax:()=>ge,ay:()=>Pt,az:()=>Br,b:()=>cr,c:()=>N,d:()=>ot,e:()=>Rs,f:()=>C,g:()=>Le,h:()=>B,i:()=>qo,j:()=>rn,k:()=>Nl,l:()=>Ti,m:()=>uv,o:()=>ue,r:()=>Tl,s:()=>Il,u:()=>os,z:()=>xe});var d=F(5861),j=F(2090),O=F(9681),ce=F(655),oe=F(1877),ye=F(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},He=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),de=new oe.Yd("@firebase/auth");function Re(b,...m){de.logLevel<=oe.in.ERROR&&de.error(`Auth (${O.SDK_VERSION}): ${b}`,...m)}function Oe(b,...m){throw Ke(b,...m)}function fe(b,...m){return Ke(b,...m)}function De(b,m,_){const E=Object.assign(Object.assign({},Fe()),{[m]:_});return new j.LL("auth","Firebase",E).create(m,{appName:b.name})}function Ee(b,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Oe(b,"argument-error"),De(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(b,...m){if("string"!=typeof b){const _=m[0],E=[...m.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(_,...E)}return He.create(b,...m)}function ie(b,m,..._){if(!b)throw Ke(m,..._)}function Je(b){const m="INTERNAL ASSERTION FAILED: "+b;throw Re(m),new Error(m)}function X(b,m){b||Je(m)}const me=new Map;function ge(b){X(b instanceof Function,"Expected a class definition");let m=me.get(b);return m?(X(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,me.set(b,m),m)}function he(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Ct(){return"http:"===ln()||"https:"===ln()}function ln(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class lt{constructor(m,_){this.shortDelay=m,this.longDelay=_,X(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Hn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ct()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vi(b,m){X(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class mn{static initialize(m,_,E){this.fetchImpl=m,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Oi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cn=new lt(3e4,6e4);function Zt(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function dn(b,m,_,E){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(b,m,_,E,k={}){return Xr(b,k,(0,d.Z)(function*(){let L={},te={};E&&("GET"===m?te=E:L={body:JSON.stringify(E)});const Ne=(0,j.xO)(Object.assign({key:b.config.apiKey},te)).slice(1),st=yield b._getAdditionalHeaders();return st["Content-Type"]="application/json",b.languageCode&&(st["X-Firebase-Locale"]=b.languageCode),mn.fetch()(Or(b,b.config.apiHost,_,Ne),Object.assign({method:m,headers:st,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Xr(b,m,_){return ci.apply(this,arguments)}function ci(){return(ci=(0,d.Z)(function*(b,m,_){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},Oi),m);try{const k=new Jr(b),L=yield Promise.race([_(),k.promise]);k.clearNetworkTimeout();const te=yield L.json();if("needConfirmation"in te)throw Zn(b,"account-exists-with-different-credential",te);if(L.ok&&!("errorMessage"in te))return te;{const Ne=L.ok?te.errorMessage:te.error.message,[st,Et]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw Zn(b,"credential-already-in-use",te);if("EMAIL_EXISTS"===st)throw Zn(b,"email-already-in-use",te);const jt=E[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw De(b,jt,Et);Oe(b,jt)}}catch(k){if(k instanceof j.ZR)throw k;Oe(b,"network-request-failed")}})).apply(this,arguments)}function zi(b,m,_,E){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(b,m,_,E,k={}){const L=yield dn(b,m,_,E,k);return"mfaPendingCredential"in L&&Oe(b,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Or(b,m,_,E){const k=`${m}${_}?${E}`;return b.config.emulator?vi(b.config,k):`${b.config.apiScheme}://${k}`}class Jr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(fe(this.auth,"network-request-failed")),cn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zn(b,m,_){const E={appName:b.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const k=fe(b,m,E);return k.customData._tokenResponse=_,k}function vt(){return(vt=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function nr(b,m){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function tn(b,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function _t(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function un(){return(un=(0,d.Z)(function*(b,m=!1){const _=(0,j.m9)(b),E=yield _.getIdToken(m),k=Mt(E);ie(k&&k.exp&&k.auth_time&&k.iat,_.auth,"internal-error");const L="object"==typeof k.firebase?k.firebase:void 0,te=null==L?void 0:L.sign_in_provider;return{claims:k,token:E,authTime:_t(bi(k.auth_time)),issuedAtTime:_t(bi(k.iat)),expirationTime:_t(bi(k.exp)),signInProvider:te||null,signInSecondFactor:(null==L?void 0:L.sign_in_second_factor)||null}})).apply(this,arguments)}function bi(b){return 1e3*Number(b)}function Mt(b){const[m,_,E]=b.split(".");if(void 0===m||void 0===_||void 0===E)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,j.tV)(_);return k?JSON.parse(k):(Re("Failed to decode base64 JWT payload"),null)}catch(k){return Re("Caught error parsing JWT payload as JSON",k),null}}function et(b,m){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(b,m,_=!1){if(_)return m;try{return yield m}catch(E){throw E instanceof j.ZR&&Us(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}function Us({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class $t{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(m);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var m=this;return(0,d.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class mo{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=_t(this.lastLoginAt),this.creationTime=_t(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ui(b){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(b){var m;const _=b.auth,E=yield b.getIdToken(),k=yield et(b,tn(_,{idToken:E}));ie(null==k?void 0:k.users.length,_,"internal-error");const L=k.users[0];b._notifyReloadListener(L);const te=(null===(m=L.providerUserInfo)||void 0===m?void 0:m.length)?Ie(L.providerUserInfo):[],Ne=K(b.providerData,te),jt=!!b.isAnonymous&&!(b.email&&L.passwordHash||(null==Ne?void 0:Ne.length)),Ht={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Ne,metadata:new mo(L.createdAt,L.lastLoginAt),isAnonymous:jt};Object.assign(b,Ht)})).apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(b){const m=(0,j.m9)(b);yield ui(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function K(b,m){return[...b.filter(E=>!m.some(k=>k.providerId===E.providerId)),...m]}function Ie(b){return b.map(m=>{var{providerId:_}=m,E=(0,ce._T)(m,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ze(){return(Ze=(0,d.Z)(function*(b,m){const _=yield Xr(b,{},(0,d.Z)(function*(){const E=(0,j.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:k,apiKey:L}=b.config,te=Or(b,k,"/v1/token",`key=${L}`),Ne=yield b._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(te,{method:"POST",headers:Ne,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class yt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ie(m.idToken,"internal-error"),ie(void 0!==m.idToken,"internal-error"),ie(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function ct(b){const m=Mt(b);return ie(m,"internal-error"),ie(void 0!==m.exp,"internal-error"),ie(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var E=this;return(0,d.Z)(function*(){return ie(!E.accessToken||E.refreshToken,m,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(m,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var E=this;return(0,d.Z)(function*(){const{accessToken:k,refreshToken:L,expiresIn:te}=yield function re(b,m){return Ze.apply(this,arguments)}(m,_);E.updateTokensAndExpiration(k,L,Number(te))})()}updateTokensAndExpiration(m,_,E){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(m,_){const{refreshToken:E,accessToken:k,expirationTime:L}=_,te=new yt;return E&&(ie("string"==typeof E,"internal-error",{appName:m}),te.refreshToken=E),k&&(ie("string"==typeof k,"internal-error",{appName:m}),te.accessToken=k),L&&(ie("number"==typeof L,"internal-error",{appName:m}),te.expirationTime=L),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new yt,this.toJSON())}_performRefresh(){return Je("not implemented")}}function nn(b,m){ie("string"==typeof b||void 0===b,"internal-error",{appName:m})}class _n{constructor(m){var{uid:_,auth:E,stsTokenManager:k}=m,L=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new mo(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,d.Z)(function*(){const E=yield et(_,_.stsTokenManager.getToken(_.auth,m));return ie(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(m){return function At(b){return un.apply(this,arguments)}(this,m)}reload(){return function H(b){return q.apply(this,arguments)}(this)}_assign(m){this!==m&&(ie(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new _n(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var E=this;return(0,d.Z)(function*(){let k=!1;m.idToken&&m.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(m),k=!0),_&&(yield ui(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var m=this;return(0,d.Z)(function*(){const _=yield m.getIdToken();return yield et(m,function Es(b,m){return vt.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var E,k,L,te,Ne,st,Et,jt;const Ht=null!==(E=_.displayName)&&void 0!==E?E:void 0,Un=null!==(k=_.email)&&void 0!==k?k:void 0,xo=null!==(L=_.phoneNumber)&&void 0!==L?L:void 0,Aa=null!==(te=_.photoURL)&&void 0!==te?te:void 0,mh=null!==(Ne=_.tenantId)&&void 0!==Ne?Ne:void 0,Zu=null!==(st=_._redirectEventId)&&void 0!==st?st:void 0,ym=null!==(Et=_.createdAt)&&void 0!==Et?Et:void 0,dv=null!==(jt=_.lastLoginAt)&&void 0!==jt?jt:void 0,{uid:_h,emailVerified:yh,isAnonymous:vh,providerData:pp,stsTokenManager:bh}=_;ie(_h&&bh,m,"internal-error");const gp=yt.fromJSON(this.name,bh);ie("string"==typeof _h,m,"internal-error"),nn(Ht,m.name),nn(Un,m.name),ie("boolean"==typeof yh,m,"internal-error"),ie("boolean"==typeof vh,m,"internal-error"),nn(xo,m.name),nn(Aa,m.name),nn(mh,m.name),nn(Zu,m.name),nn(ym,m.name),nn(dv,m.name);const Mc=new _n({uid:_h,auth:m,email:Un,emailVerified:yh,displayName:Ht,isAnonymous:vh,photoURL:Aa,phoneNumber:xo,tenantId:mh,stsTokenManager:gp,createdAt:ym,lastLoginAt:dv});return pp&&Array.isArray(pp)&&(Mc.providerData=pp.map(Yu=>Object.assign({},Yu))),Zu&&(Mc._redirectEventId=Zu),Mc}static _fromIdTokenResponse(m,_,E=!1){return(0,d.Z)(function*(){const k=new yt;k.updateFromServerResponse(_);const L=new _n({uid:_.localId,auth:m,stsTokenManager:k,isAnonymous:E});return yield ui(L),L})()}}const wi=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var k=this;return(0,d.Z)(function*(){k.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const k=E.storage[_];return void 0===k?null:k})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return b.type="NONE",b})();function Pt(b,m,_){return`firebase:${b}:${m}:${_}`}class hi{constructor(m,_,E){this.persistence=m,this.auth=_,this.userKey=E;const{config:k,name:L}=this.auth;this.fullUserKey=Pt(this.userKey,k.apiKey,L),this.fullPersistenceKey=Pt("persistence",k.apiKey,L),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,d.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_n._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,d.Z)(function*(){if(_.persistence===m)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new hi(ge(wi),m,E);const k=(yield Promise.all(_.map(function(){var Et=(0,d.Z)(function*(jt){if(yield jt._isAvailable())return jt});return function(jt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let L=k[0]||ge(wi);const te=Pt(E,m.config.apiKey,m.name);let Ne=null;for(const Et of _)try{const jt=yield Et._get(te);if(jt){const Ht=_n._fromJSON(m,jt);Et!==L&&(Ne=Ht),L=Et;break}}catch(jt){}const st=k.filter(Et=>Et._shouldAllowMigration);return L._shouldAllowMigration&&st.length?(L=st[0],Ne&&(yield L._set(te,Ne.toJSON())),yield Promise.all(_.map(function(){var Et=(0,d.Z)(function*(jt){if(jt!==L)try{yield jt._remove(te)}catch(Ht){}});return function(jt){return Et.apply(this,arguments)}}())),new hi(L,m,E)):new hi(L,m,E)})()}}function ae(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(qe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Z(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(xt(m))return"Blackberry";if(Gt(m))return"Webos";if(W(m))return"Safari";if((m.includes("chrome/")||Se(m))&&!m.includes("edge/"))return"Chrome";if(dt(m))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Z(b=(0,j.z$)()){return/firefox\//i.test(b)}function W(b=(0,j.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Se(b=(0,j.z$)()){return/crios\//i.test(b)}function qe(b=(0,j.z$)()){return/iemobile/i.test(b)}function dt(b=(0,j.z$)()){return/android/i.test(b)}function xt(b=(0,j.z$)()){return/blackberry/i.test(b)}function Gt(b=(0,j.z$)()){return/webos/i.test(b)}function Lt(b=(0,j.z$)()){return/iphone|ipad|ipod/i.test(b)}function Yn(b=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function ir(b=(0,j.z$)()){return Lt(b)||dt(b)||Gt(b)||xt(b)||/windows phone/i.test(b)||qe(b)}function Ni(b,m=[]){let _;switch(b){case"Browser":_=ae((0,j.z$)());break;case"Worker":_=`${ae((0,j.z$)())}-${b}`;break;default:_=b}const E=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${E}`}class Ja{constructor(m,_){this.app=m,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ye(this),this.idTokenSubscription=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=He,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(m,_){var E=this;return _&&(this._popupRedirectResolver=ge(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var k,L;if(!E._deleted&&(E.persistenceManager=yield hi.create(E,m),!E._deleted)){if(null===(k=E._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(te){}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(L=E.currentUser)||void 0===L?void 0:L.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,d.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_)}})()}initializeCurrentUser(m){var _=this;return(0,d.Z)(function*(){var E;let k=yield _.assertedPersistence.getCurrentUser();if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const L=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,te=null==k?void 0:k._redirectEventId,Ne=yield _.tryRedirectSignIn(m);(!L||L===te)&&(null==Ne?void 0:Ne.user)&&(k=Ne.user)}return k?k._redirectEventId?(ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)):_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(k){yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,d.Z)(function*(){try{yield ui(m)}catch(E){if("auth/network-request-failed"!==E.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function ht(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,d.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,d.Z)(function*(){const E=m?(0,j.m9)(m):null;return E&&ie(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(m){var _=this;return(0,d.Z)(function*(){if(!_._deleted)return m&&ie(_.tenantId===m.tenantId,_,"tenant-id-mismatch"),_.queue((0,d.Z)(function*(){yield _.directlySetCurrentUser(m),_.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,d.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(ge(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new j.LL("auth","Firebase",m())}onAuthStateChanged(m,_,E){return this.registerStateListener(this.authStateSubscription,m,_,E)}onIdTokenChanged(m,_,E){return this.registerStateListener(this.idTokenSubscription,m,_,E)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var E=this;return(0,d.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(_);return null===m?k.removeCurrentUser():k.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=m&&ge(m)||_._popupRedirectResolver;ie(E,_,"argument-error"),_.redirectPersistenceManager=yield hi.create(_,[ge(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,d.Z)(function*(){var E,k;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===m?_._currentUser:(null===(k=_.redirectUser)||void 0===k?void 0:k._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,d.Z)(function*(){if(m===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,E,k){if(this._deleted)return()=>{};const L="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(te,this,"internal-error"),te.then(()=>L(this.currentUser)),"function"==typeof _?m.addObserver(_,E,k):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Ni(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,d.Z)(function*(){const _={"X-Client-Version":m.clientVersion};return m.app.options.appId&&(_["X-Firebase-gmpid"]=m.app.options.appId),_})()}}function yn(b){return(0,j.m9)(b)}class Ye{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,j.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ut(b,m,_){const E=yn(b);ie(E._canInitEmulator,E,"emulator-config-failed"),ie(/^https?:\/\//.test(m),E,"invalid-emulator-scheme");const k=!!(null==_?void 0:_.disableWarnings),L=vn(m),{host:te,port:Ne}=function vr(b){const m=vn(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const L=k[1];return{host:L,port:Is(E.substr(L.length+1))}}{const[L,te]=E.split(":");return{host:L,port:Is(te)}}}(m);E.config.emulator={url:`${L}//${te}${null===Ne?"":`:${Ne}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:te,port:Ne,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function fi(){function b(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function vn(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function Is(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class lr{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return Je("not implemented")}_getIdTokenResponse(m){return Je("not implemented")}_linkToIdToken(m,_){return Je("not implemented")}_getReauthenticationResolver(m){return Je("not implemented")}}function In(b,m){return _o.apply(this,arguments)}function _o(){return(_o=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:resetPassword",Zt(b,m))})).apply(this,arguments)}function Qn(b,m){return kt.apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function rc(b,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:update",Zt(b,m))})).apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(b,m){return zi(b,"POST","/v1/accounts:signInWithPassword",Zt(b,m))})).apply(this,arguments)}function Xn(b,m){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:sendOobCode",Zt(b,m))})).apply(this,arguments)}function el(b,m){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(b,m){return Xn(b,m)})).apply(this,arguments)}function Tn(b,m){return oc.apply(this,arguments)}function oc(){return(oc=(0,d.Z)(function*(b,m){return Xn(b,m)})).apply(this,arguments)}function tl(b,m){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(b,m){return Xn(b,m)})).apply(this,arguments)}function Ts(b,m){return ac.apply(this,arguments)}function ac(){return(ac=(0,d.Z)(function*(b,m){return Xn(b,m)})).apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(b,m){return zi(b,"POST","/v1/accounts:signInWithEmailLink",Zt(b,m))})).apply(this,arguments)}function yu(){return(yu=(0,d.Z)(function*(b,m){return zi(b,"POST","/v1/accounts:signInWithEmailLink",Zt(b,m))})).apply(this,arguments)}class lc extends lr{constructor(m,_,E,k=null){super("password",E),this._email=m,this._password=_,this._tenantId=k}static _fromEmailAndPassword(m,_){return new lc(m,_,"password")}static _fromEmailAndCode(m,_,E=null){return new lc(m,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function sc(b,m){return vo.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Wd(b,m){return Ds.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Oe(m,"internal-error")}})()}_linkToIdToken(m,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Qn(m,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ss(b,m){return yu.apply(this,arguments)}(m,{idToken:_,email:E._email,oobCode:E._password});default:Oe(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function bo(b,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(b,m){return zi(b,"POST","/v1/accounts:signInWithIdp",Zt(b,m))})).apply(this,arguments)}class Bs extends lr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Bs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Oe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:k}=_,L=(0,ce._T)(_,["providerId","signInMethod"]);if(!E||!k)return null;const te=new Bs(E,k);return te.idToken=L.idToken||void 0,te.accessToken=L.accessToken||void 0,te.secret=L.secret,te.nonce=L.nonce,te.pendingToken=L.pendingToken||null,te}_getIdTokenResponse(m){return bo(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,bo(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,bo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,j.xO)(_)}return m}}function rm(b,m){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:sendVerificationCode",Zt(b,m))})).apply(this,arguments)}function Zd(){return(Zd=(0,d.Z)(function*(b,m){return zi(b,"POST","/v1/accounts:signInWithPhoneNumber",Zt(b,m))})).apply(this,arguments)}function wo(){return(wo=(0,d.Z)(function*(b,m){const _=yield zi(b,"POST","/v1/accounts:signInWithPhoneNumber",Zt(b,m));if(_.temporaryProof)throw Zn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const sm={USER_NOT_FOUND:"user-not-found"};function Yd(){return(Yd=(0,d.Z)(function*(b,m){return zi(b,"POST","/v1/accounts:signInWithPhoneNumber",Zt(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),sm)})).apply(this,arguments)}class ma extends lr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new ma({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new ma({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function qf(b,m){return Zd.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function vu(b,m){return wo.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function om(b,m){return Yd.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:E,verificationCode:k}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:E,code:k}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:E,phoneNumber:k,temporaryProof:L}=m;return E||_||k||L?new ma({verificationId:_,verificationCode:E,phoneNumber:k,temporaryProof:L}):null}}class nl{constructor(m){var _,E,k,L,te,Ne;const st=(0,j.zd)((0,j.pd)(m)),Et=null!==(_=st.apiKey)&&void 0!==_?_:null,jt=null!==(E=st.oobCode)&&void 0!==E?E:null,Ht=function am(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=st.mode)&&void 0!==k?k:null);ie(Et&&jt&&Ht,"argument-error"),this.apiKey=Et,this.operation=Ht,this.code=jt,this.continueUrl=null!==(L=st.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(te=st.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Ne=st.tenantId)&&void 0!==Ne?Ne:null}static parseLink(m){const _=function lm(b){const m=(0,j.zd)((0,j.pd)(b)).link,_=m?(0,j.zd)((0,j.pd)(m)).deep_link_id:null,E=(0,j.zd)((0,j.pd)(b)).deep_link_id;return(E?(0,j.zd)((0,j.pd)(E)).link:null)||E||_||m||b}(m);try{return new nl(_)}catch(E){return null}}}let Qd=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,E){return lc._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const k=nl.parseLink(E);return ie(k,"argument-error"),lc._fromEmailAndCode(_,k.code,k.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class es{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class il extends es{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ts extends il{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),Bs._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ie(m.idToken||m.accessToken,"argument-error"),Bs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ts.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ts.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:L,nonce:te,providerId:Ne}=m;if(!E&&!k&&!_&&!L||!Ne)return null;try{return new ts(Ne)._credential({idToken:_,accessToken:E,nonce:te,pendingToken:L})}catch(st){return null}}}let Xd=(()=>{class b extends il{constructor(){super("facebook.com")}static credential(_){return Bs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(E){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),rl=(()=>{class b extends il{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return Bs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:k}=_;if(!E&&!k)return null;try{return b.credential(E,k)}catch(L){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),sl=(()=>{class b extends il{constructor(){super("github.com")}static credential(_){return Bs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(E){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class ol extends lr{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return bo(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,bo(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,bo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:k,pendingToken:L}=_;return E&&k&&L&&E===k?new ol(E,L):null}static _create(m,_){return new ol(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class al extends es{constructor(m){ie(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return al.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return al.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=ol.fromJSON(m);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:E}=m;if(!_||!E)return null;try{return ol._create(E,_)}catch(k){return null}}}let _a=(()=>{class b extends il{constructor(){super("twitter.com")}static credential(_,E){return Bs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=_;if(!E||!k)return null;try{return b.credential(E,k)}catch(L){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Nr(b,m){return bu.apply(this,arguments)}function bu(){return(bu=(0,d.Z)(function*(b,m){return zi(b,"POST","/v1/accounts:signUp",Zt(b,m))})).apply(this,arguments)}class Dn{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,E,k=!1){return(0,d.Z)(function*(){const L=yield _n._fromIdTokenResponse(m,E,k),te=ll(E);return new Dn({user:L,providerId:te,_tokenResponse:E,operationType:_})})()}static _forOperation(m,_,E){return(0,d.Z)(function*(){yield m._updateTokensIfNecessary(E,!0);const k=ll(E);return new Dn({user:m,providerId:k,_tokenResponse:E,operationType:_})})()}}function ll(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Kf(b){return dc.apply(this,arguments)}function dc(){return(dc=(0,d.Z)(function*(b){var m;const _=yn(b);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new Dn({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield Nr(_,{returnSecureToken:!0}),k=yield Dn._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class cl extends j.ZR{constructor(m,_,E,k){var L;super(_.code,_.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,cl.prototype),this.customData={appName:m.name,tenantId:null!==(L=m.tenantId)&&void 0!==L?L:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(m,_,E,k){return new cl(m,_,E,k)}}function Jd(b,m,_,E){return("reauthenticate"===m?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?cl._fromErrorAndOperation(b,L,m,E):L})}function hc(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function eh(b,m){return ns.apply(this,arguments)}function ns(){return(ns=(0,d.Z)(function*(b,m){const _=(0,j.m9)(b);yield ya(!0,_,m);const{providerUserInfo:E}=yield nr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),k=hc(E||[]);return _.providerData=_.providerData.filter(L=>k.has(L.providerId)),k.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function wu(b,m){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,d.Z)(function*(b,m,_=!1){const E=yield et(b,m._linkToIdToken(b.auth,yield b.getIdToken()),_);return Dn._forOperation(b,"link",E)})).apply(this,arguments)}function ya(b,m,_){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(b,m,_){yield ui(m);const k=!1===b?"provider-already-linked":"no-such-provider";ie(hc(m.providerData).has(_)===b,m.auth,k)})).apply(this,arguments)}function bn(b,m){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(b,m,_=!1){const{auth:E}=b,k="reauthenticate";try{const L=yield et(b,Jd(E,k,m,b),_);ie(L.idToken,E,"internal-error");const te=Mt(L.idToken);ie(te,E,"internal-error");const{sub:Ne}=te;return ie(b.uid===Ne,E,"user-mismatch"),Dn._forOperation(b,k,L)}catch(L){throw"auth/user-not-found"===(null==L?void 0:L.code)&&Oe(E,"user-mismatch"),L}})).apply(this,arguments)}function fc(b,m){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(b,m,_=!1){const E="signIn",k=yield Jd(b,E,m),L=yield Dn._fromIdTokenResponse(b,E,k);return _||(yield b._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Ei(b,m){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,d.Z)(function*(b,m){return fc(yn(b),m)})).apply(this,arguments)}function Jn(b,m){return As.apply(this,arguments)}function As(){return(As=(0,d.Z)(function*(b,m){const _=(0,j.m9)(b);return yield ya(!1,_,m.providerId),wu(_,m)})).apply(this,arguments)}function $i(b,m){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(b,m){return bn((0,j.m9)(b),m)})).apply(this,arguments)}function Co(b,m){return dl.apply(this,arguments)}function dl(){return(dl=(0,d.Z)(function*(b,m){return zi(b,"POST","/v1/accounts:signInWithCustomToken",Zt(b,m))})).apply(this,arguments)}function is(b,m){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(b,m){const _=yn(b),E=yield Co(_,{token:m,returnSecureToken:!0}),k=yield Dn._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class js{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?bt._fromServerResponse(m,_):Oe(m,"internal-error")}}class bt extends js{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new bt(_)}}function va(b,m,_){var E;ie((null===(E=_.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),ie(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function th(b,m,_){return pc.apply(this,arguments)}function pc(){return(pc=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b),k={requestType:"PASSWORD_RESET",email:m};_&&va(E,k,_),yield Tn(E,k)})).apply(this,arguments)}function Cu(b,m,_){return hl.apply(this,arguments)}function hl(){return(hl=(0,d.Z)(function*(b,m,_){yield In((0,j.m9)(b),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Iu(b,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,d.Z)(function*(b,m){yield rc((0,j.m9)(b),{oobCode:m})})).apply(this,arguments)}function Me(b,m){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,d.Z)(function*(b,m){const _=(0,j.m9)(b),E=yield In(_,{oobCode:m}),k=E.requestType;switch(ie(k,_,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(E.mfaInfo,_,"internal-error");default:ie(E.email,_,"internal-error")}let L=null;return E.mfaInfo&&(L=js._fromServerResponse(yn(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:L},operation:k}})).apply(this,arguments)}function Du(b,m){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(b,m){const{data:_}=yield Me((0,j.m9)(b),m);return _.email})).apply(this,arguments)}function ba(b,m,_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(b,m,_){const E=yn(b),k=yield Nr(E,{returnSecureToken:!0,email:m,password:_}),L=yield Dn._fromIdTokenResponse(E,"signIn",k);return yield E._updateCurrentUser(L.user),L})).apply(this,arguments)}function Pr(b,m,_){return Ei((0,j.m9)(b),Qd.credential(m,_))}function Su(b,m,_){return fl.apply(this,arguments)}function fl(){return(fl=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b),k={requestType:"EMAIL_SIGNIN",email:m};ie(_.handleCodeInApp,E,"argument-error"),_&&va(E,k,_),yield tl(E,k)})).apply(this,arguments)}function cm(b,m){const _=nl.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function nh(b,m,_){return jo.apply(this,arguments)}function jo(){return(jo=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b),k=Qd.credentialWithLink(m,_||he());return ie(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ei(E,k)})).apply(this,arguments)}function gc(b,m){return ei.apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:createAuthUri",Zt(b,m))})).apply(this,arguments)}function Hs(b,m){return pl.apply(this,arguments)}function pl(){return(pl=(0,d.Z)(function*(b,m){const E={identifier:m,continueUri:Ct()?he():"http://localhost"},{signinMethods:k}=yield gc((0,j.m9)(b),E);return k||[]})).apply(this,arguments)}function Io(b,m){return rs.apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(b,m){const _=(0,j.m9)(b),k={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&va(_.auth,k,m);const{email:L}=yield el(_.auth,k);L!==b.email&&(yield b.reload())})).apply(this,arguments)}function Au(b,m,_){return mc.apply(this,arguments)}function mc(){return(mc=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};_&&va(E.auth,L,_);const{email:te}=yield Ts(E.auth,L);te!==b.email&&(yield b.reload())})).apply(this,arguments)}function Mu(b,m){return _c.apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(b,m){return dn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function gl(b,m){return wa.apply(this,arguments)}function wa(){return(wa=(0,d.Z)(function*(b,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const E=(0,j.m9)(b),L={idToken:yield E.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},te=yield et(E,Mu(E.auth,L));E.displayName=te.displayName||null,E.photoURL=te.photoUrl||null;const Ne=E.providerData.find(({providerId:st})=>"password"===st);Ne&&(Ne.displayName=E.displayName,Ne.photoURL=E.photoURL),yield E._updateTokensIfNecessary(te)})).apply(this,arguments)}function xu(b,m){return Zf((0,j.m9)(b),m,null)}function ku(b,m){return Zf((0,j.m9)(b),null,m)}function Zf(b,m,_){return ml.apply(this,arguments)}function ml(){return(ml=(0,d.Z)(function*(b,m,_){const{auth:E}=b,L={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(L.email=m),_&&(L.password=_);const te=yield et(b,Qn(E,L));yield b._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class To{constructor(m,_,E={}){this.isNewUser=m,this.providerId=_,this.profile=E}}class Ru extends To{constructor(m,_,E,k){super(m,_,E),this.username=k}}class Yf extends To{constructor(m,_){super(m,"facebook.com",_)}}class Qf extends Ru{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Ea extends To{constructor(m,_){super(m,"google.com",_)}}class xs extends Ru{constructor(m,_,E){super(m,"twitter.com",_,E)}}function Xf(b){const{user:m,_tokenResponse:_}=b;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function _l(b){var m,_;if(!b)return null;const{providerId:E}=b,k=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},L=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&(null==b?void 0:b.idToken)){const te=null===(_=null===(m=Mt(b.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new To(L,"anonymous"!==te&&"custom"!==te?te:null)}if(!E)return null;switch(E){case"facebook.com":return new Yf(L,k);case"github.com":return new Qf(L,k);case"google.com":return new Ea(L,k);case"twitter.com":return new xs(L,k,b.screenName||null);case"custom":case"anonymous":return new To(L,null);default:return new To(L,E,k)}}(_)}class Ho{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new Ho("enroll",m)}static _fromMfaPendingCredential(m){return new Ho("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,E;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ho._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(E=m.multiFactorSession)||void 0===E?void 0:E.idToken)return Ho._fromIdtoken(m.multiFactorSession.idToken)}return null}}class vl{constructor(m,_,E){this.session=m,this.hints=_,this.signInResolver=E}static _fromError(m,_){const E=yn(m),k=_.customData._serverResponse,L=(k.mfaInfo||[]).map(Ne=>js._fromServerResponse(E,Ne));ie(k.mfaPendingCredential,E,"internal-error");const te=Ho._fromMfaPendingCredential(k.mfaPendingCredential);return new vl(te,L,function(){var Ne=(0,d.Z)(function*(st){const Et=yield st._process(E,te);delete k.mfaInfo,delete k.mfaPendingCredential;const jt=Object.assign(Object.assign({},k),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(_.operationType){case"signIn":const Ht=yield Dn._fromIdTokenResponse(E,_.operationType,jt);return yield E._updateCurrentUser(Ht.user),Ht;case"reauthenticate":return ie(_.user,E,"internal-error"),Dn._forOperation(_.user,_.operationType,jt);default:Oe(E,"internal-error")}});return function(st){return Ne.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,d.Z)(function*(){return _.signInResolver(m)})()}}function Ou(b,m){var _;const E=(0,j.m9)(b),k=m;return ie(m.customData.operationType,E,"argument-error"),ie(null===(_=k.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),vl._fromError(E,k)}function Nu(b,m){return dn(b,"POST","/v2/accounts/mfaEnrollment:start",Zt(b,m))}class Pu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>js._fromServerResponse(m.auth,E)))})}static _fromUser(m){return new Pu(m)}getSession(){var m=this;return(0,d.Z)(function*(){return Ho._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var E=this;return(0,d.Z)(function*(){const k=m,L=yield E.getSession(),te=yield et(E.user,k._process(E.user.auth,L,_));return yield E.user._updateTokensIfNecessary(te),E.user.reload()})()}unenroll(m){var _=this;return(0,d.Z)(function*(){const E="string"==typeof m?m:m.uid,k=yield _.user.getIdToken(),L=yield et(_.user,function Pi(b,m){return dn(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(b,m))}(_.user.auth,{idToken:k,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:te})=>te!==E),yield _.user._updateTokensIfNecessary(L);try{yield _.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const Gs=new WeakMap;function vc(b){const m=(0,j.m9)(b);return Gs.has(m)||Gs.set(m,Pu._fromUser(m)),Gs.get(m)}const Fu="__sak";class Lu{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Fu,"1"),this.storage.removeItem(Fu),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const cr=(()=>{class b extends Lu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function zo(){const b=(0,j.z$)();return W(b)||Lt(b)}()&&function Cs(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=ir(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),L=this.localCache[E];k!==L&&_(E,L,k)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((Ne,st,Et)=>{this.notifyListeners(Ne,Et)});const k=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ne=this.storage.getItem(k);if(_.newValue!==Ne)null!==_.newValue?this.storage.setItem(k,_.newValue):this.storage.removeItem(k);else if(this.localCache[k]===_.newValue&&!E)return}const L=()=>{const Ne=this.storage.getItem(k);!E&&this.localCache[k]===Ne||this.notifyListeners(k,Ne)},te=this.storage.getItem(k);!function Vt(){return(0,j.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?L():setTimeout(L,10)}notifyListeners(_,E){this.localCache[_]=E;const k=this.listeners[_];if(k)for(const L of Array.from(k))L(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var k=()=>super._set,L=this;return(0,d.Z)(function*(){yield k().call(L,_,E),L.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,k=this;return(0,d.Z)(function*(){const L=yield E().call(k,_);return k.localCache[_]=JSON.stringify(L),L})()}_remove(_){var E=()=>super._remove,k=this;return(0,d.Z)(function*(){yield E().call(k,_),delete k.localCache[_]})()}}return b.type="LOCAL",b})(),Ci=(()=>{class b extends Lu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return b.type="SESSION",b})();let rh=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(L=>L.isListeningto(_));if(E)return E;const k=new b(_);return this.receivers.push(k),k}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const k=_,{eventId:L,eventType:te,data:Ne}=k.data,st=E.handlersMap[te];if(!(null==st?void 0:st.size))return;k.ports[0].postMessage({status:"ack",eventId:L,eventType:te});const Et=Array.from(st).map(function(){var Ht=(0,d.Z)(function*(Un){return Un(k.origin,Ne)});return function(Un){return Ht.apply(this,arguments)}}()),jt=yield function Vu(b){return Promise.all(b.map(function(){var m=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return m.apply(this,arguments)}}()))}(Et);k.ports[0].postMessage({status:"done",eventId:L,eventType:te,response:jt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Er(b="",m=10){let _="";for(let E=0;E<m;E++)_+=Math.floor(10*Math.random());return b+_}class sh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,E=50){var k=this;return(0,d.Z)(function*(){const L="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let te,Ne;return new Promise((st,Et)=>{const jt=Er("",20);L.port1.start();const Ht=setTimeout(()=>{Et(new Error("unsupported_event"))},E);Ne={messageChannel:L,onMessage(Un){const xo=Un;if(xo.data.eventId===jt)switch(xo.data.status){case"ack":clearTimeout(Ht),te=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),st(xo.data.response);break;default:clearTimeout(Ht),clearTimeout(te),Et(new Error("invalid_response"))}}},k.handlers.add(Ne),L.port1.addEventListener("message",Ne.onMessage),k.target.postMessage({eventType:m,eventId:jt,data:_},[L.port2])}).finally(()=>{Ne&&k.removeMessageHandler(Ne)})})()}}function gt(){return window}function wl(){return void 0!==gt().WorkerGlobalScope&&"function"==typeof gt().importScripts}function Go(){return(Go=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Bu="firebaseLocalStorageDb",$s="firebaseLocalStorage",tt="fbase_key";class ss{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ia(b,m){return b.transaction([$s],m?"readwrite":"readonly").objectStore($s)}function Fr(){const b=indexedDB.open(Bu,1);return new Promise((m,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore($s,{keyPath:tt})}catch(k){_(k)}}),b.addEventListener("success",(0,d.Z)(function*(){const E=b.result;E.objectStoreNames.contains($s)?m(E):(E.close(),yield function $o(){const b=indexedDB.deleteDatabase(Bu);return new ss(b).toPromise()}(),m(yield Fr()))}))})}function ur(b,m,_){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(b,m,_){const E=Ia(b,!0).put({[tt]:m,value:_});return new ss(E).toPromise()})).apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(b,m){const _=Ia(b,!1).get(m),E=yield new ss(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function bc(b,m){const _=Ia(b,!0).delete(m);return new ss(_).toPromise()}const qo=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Fr()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let k=0;for(;;)try{const L=yield E._openDb();return yield _(L)}catch(L){if(k++>3)throw L;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return wl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=rh._getInstance(function Uu(){return wl()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(k,L){return{keyProcessed:(yield _._poll()).includes(L.key)}});return function(k,L){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(k,L){return["keyChanged"]});return function(k,L){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,k;if(_.activeServiceWorker=yield function Ca(){return Go.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new sh(_.activeServiceWorker);const L=yield _.sender._send("ping",{},800);!L||(null===(E=L[0])||void 0===E?void 0:E.fulfilled)&&(null===(k=L[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function El(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Fr();return yield ur(_,Fu,"1"),yield bc(_,Fu),!0}catch(_){}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var k=this;return(0,d.Z)(function*(){return k._withPendingWrite((0,d.Z)(function*(){return yield k._withRetries(L=>ur(L,_,E)),k.localCache[_]=E,k.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const k=yield E._withRetries(L=>function ju(b,m){return dr.apply(this,arguments)}(L,_));return E.localCache[_]=k,k})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(k=>bc(k,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(te=>{const Ne=Ia(te,!1).getAll();return new ss(Ne).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const k=[],L=new Set;for(const{fbase_key:te,value:Ne}of E)L.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(Ne)&&(_.notifyListeners(te,Ne),k.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!L.has(te)&&(_.notifyListeners(te,null),k.push(te));return k})()}notifyListeners(_,E){this.localCache[_]=E;const k=this.listeners[_];if(k)for(const L of Array.from(k))L(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function pi(b,m){return dn(b,"POST","/v2/accounts/mfaSignIn:start",Zt(b,m))}function Wo(){return(Wo=(0,d.Z)(function*(b){return(yield dn(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function So(b){return new Promise((m,_)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=m,E.onerror=k=>{const L=fe("internal-error");L.customData=k,_(L)},E.type="text/javascript",E.charset="UTF-8",function ks(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(E)})}function Lr(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Dt=1e12;class Ao{constructor(m){this.auth=m,this.counter=Dt,this._widgets=new Map}render(m,_){const E=this.counter;return this._widgets.set(E,new Cr(m,this.auth.name,_||{})),this.counter++,E}reset(m){var _;const E=m||Dt;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Dt))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(m||Dt))||void 0===E||E.execute(),""})()}}class Cr{constructor(m,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof m?document.getElementById(m):m;ie(k,"argument-error",{appName:_}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ep(b){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ir=Lr("rcb"),tp=new lt(3e4,6e4);class Rn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gt().grecaptcha}load(m,_=""){return ie(function dm(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(gt().grecaptcha):new Promise((E,k)=>{const L=gt().setTimeout(()=>{k(fe(m,"network-request-failed"))},tp.get());gt()[Ir]=()=>{gt().clearTimeout(L),delete gt()[Ir];const Ne=gt().grecaptcha;if(!Ne)return void k(fe(m,"internal-error"));const st=Ne.render;Ne.render=(Et,jt)=>{const Ht=st(Et,jt);return this.counter++,Ht},this.hostLanguage=_,E(Ne)},So(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Ir,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(L),k(fe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!gt().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class np{load(m){return(0,d.Z)(function*(){return new Ao(m)})()}clearedOneInstance(){}}const Hu="recaptcha",Ta={theme:"light",type:"image"};class ip{constructor(m,_=Object.assign({},Ta),E){this.parameters=_,this.type=Hu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(E),this.isInvisible="invisible"===this.parameters.size,ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof m?document.getElementById(m):m;ie(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new np:new Rn,this.validateStartingState()}verify(){var m=this;return(0,d.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),E=m.getAssertedRecaptcha();return E.getResponse(_)||new Promise(L=>{const te=Ne=>{!Ne||(m.tokenChangeListeners.delete(te),L(Ne))};m.tokenChangeListeners.add(te),m.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof m)m(_);else if("string"==typeof m){const E=gt()[m];"function"==typeof E&&E(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,d.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,d.Z)(function*(){ie(Ct()&&!wl(),m.auth,"internal-error"),yield function Cl(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function ti(b){return Wo.apply(this,arguments)}(m.auth);ie(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ec{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=ma._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Il(b,m,_){return lh.apply(this,arguments)}function lh(){return(lh=(0,d.Z)(function*(b,m,_){const E=yn(b),k=yield Dl(E,m,(0,j.m9)(_));return new Ec(k,L=>Ei(E,L))})).apply(this,arguments)}function Ti(b,m,_){return qs.apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b);yield ya(!1,E,"phone");const k=yield Dl(E.auth,m,(0,j.m9)(_));return new Ec(k,L=>Jn(E,L))})).apply(this,arguments)}function Tl(b,m,_){return rp.apply(this,arguments)}function rp(){return(rp=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b),k=yield Dl(E.auth,m,(0,j.m9)(_));return new Ec(k,L=>$i(E,L))})).apply(this,arguments)}function Dl(b,m,_){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(b,m,_){var E;const k=yield _.verify();try{let L;if(ie("string"==typeof k,b,"argument-error"),ie(_.type===Hu,b,"argument-error"),L="string"==typeof m?{phoneNumber:m}:m,"session"in L){const te=L.session;if("phoneNumber"in L)return ie("enroll"===te.type,b,"internal-error"),(yield Nu(b,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{ie("signin"===te.type,b,"internal-error");const Ne=(null===(E=L.multiFactorHint)||void 0===E?void 0:E.uid)||L.multiFactorUid;return ie(Ne,b,"missing-multi-factor-info"),(yield pi(b,{mfaPendingCredential:te.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield rm(b,{phoneNumber:L.phoneNumber,recaptchaToken:k});return te}}finally{_._reset()}})).apply(this,arguments)}function os(b,m){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,d.Z)(function*(b,m){yield wu((0,j.m9)(b),m)})).apply(this,arguments)}let Ic=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=yn(_)}verifyPhoneNumber(_,E){return Dl(this.auth,_,(0,j.m9)(E))}static credential(_,E){return ma._fromVerification(_,E)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:k}=_;return E&&k?ma._fromTokenResponse(E,k):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function hr(b,m){return m?ge(m):(ie(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Zo extends lr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return bo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return bo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return bo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Tc(b){return fc(b.auth,new Zo(b),b.bypassAuthState)}function zu(b){const{auth:m,user:_}=b;return ie(_,m,"internal-error"),bn(_,new Zo(b),b.bypassAuthState)}function ch(b){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(b){const{auth:m,user:_}=b;return ie(_,m,"internal-error"),wu(_,new Zo(b),b.bypassAuthState)})).apply(this,arguments)}class Mo{constructor(m,_,E,k,L=!1){this.auth=m,this.resolver=E,this.user=k,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,d.Z)(function*(E,k){m.pendingPromise={resolve:E,reject:k};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(L){m.reject(L)}});return function(E,k){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:L,tenantId:te,error:Ne,type:st}=m;if(Ne)return void _.reject(Ne);const Et={auth:_.auth,requestUri:E,sessionId:k,tenantId:te||void 0,postBody:L||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(st)(Et))}catch(jt){_.reject(jt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Tc;case"linkViaPopup":case"linkViaRedirect":return ch;case"reauthViaPopup":case"reauthViaRedirect":return zu;default:Oe(this.auth,"internal-error")}}resolve(m){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ur=new lt(2e3,1e4);function N(b,m,_){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(b,m,_){const E=yn(b);Ee(b,m,es);const k=hr(E,_);return new Sl(E,"signInViaPopup",m,k).executeNotNull()})).apply(this,arguments)}function Rs(b,m,_){return fr.apply(this,arguments)}function fr(){return(fr=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b);Ee(E.auth,m,es);const k=hr(E.auth,_);return new Sl(E.auth,"reauthViaPopup",m,k,E).executeNotNull()})).apply(this,arguments)}function ot(b,m,_){return qt.apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b);Ee(E.auth,m,es);const k=hr(E.auth,_);return new Sl(E.auth,"linkViaPopup",m,k,E).executeNotNull()})).apply(this,arguments)}let Sl=(()=>{class b extends Mo{constructor(_,E,k,L,te){super(_,E,L,te),this.provider=k,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return ie(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){X(1===_.filter.length,"Popup operations only handle one event");const E=Er();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(k=>{_.reject(k)}),_.resolver._isIframeWebStorageSupported(_.auth,k=>{k||_.reject(fe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,k;this.pollId=(null===(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Ur.get())};_()}}return b.currentPopupAction=null,b})();const Wi=new Map;class Al extends Mo{constructor(m,_,E=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=Wi.get(_.auth._key());if(!E){try{const L=(yield function Ws(b,m){return Fn.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;E=()=>Promise.resolve(L)}catch(k){E=()=>Promise.reject(k)}Wi.set(_.auth._key(),E)}return _.bypassAuthState||Wi.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(E,m);if("unknown"!==m.type){if(m.eventId){const k=yield E.auth._redirectUserForId(m.eventId);if(k)return E.user=k,_().call(E,m);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Fn(){return(Fn=(0,d.Z)(function*(b,m){const _=Ks(m),E=Ml(b);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(_));return yield E._remove(_),k})).apply(this,arguments)}function hm(b,m){return Os.apply(this,arguments)}function Os(){return(Os=(0,d.Z)(function*(b,m){return Ml(b)._set(Ks(m),"true")})).apply(this,arguments)}function we(){Wi.clear()}function Ml(b){return ge(b._redirectPersistence)}function Ks(b){return Pt("pendingRedirect",b.config.apiKey,b.name)}function C(b,m,_){return function S(b,m,_){return M.apply(this,arguments)}(b,m,_)}function M(){return(M=(0,d.Z)(function*(b,m,_){const E=yn(b);Ee(b,m,es);const k=hr(E,_);return yield hm(k,E),k._openRedirect(E,m,"signInViaRedirect")})).apply(this,arguments)}function B(b,m,_){return function Q(b,m,_){return le.apply(this,arguments)}(b,m,_)}function le(){return(le=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b);Ee(E.auth,m,es);const k=hr(E.auth,_);yield hm(k,E.auth);const L=yield Kt(E);return k._openRedirect(E.auth,m,"reauthViaRedirect",L)})).apply(this,arguments)}function Le(b,m,_){return function Be(b,m,_){return nt.apply(this,arguments)}(b,m,_)}function nt(){return(nt=(0,d.Z)(function*(b,m,_){const E=(0,j.m9)(b);Ee(E.auth,m,es);const k=hr(E.auth,_);yield ya(!1,E,m.providerId),yield hm(k,E.auth);const L=yield Kt(E);return k._openRedirect(E.auth,m,"linkViaRedirect",L)})).apply(this,arguments)}function rn(b,m){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(b,m){return yield yn(b)._initializationPromise,Wt(b,m,!1)})).apply(this,arguments)}function Wt(b,m){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,d.Z)(function*(b,m,_=!1){const E=yn(b),k=hr(E,m),te=yield new Al(E,k,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield E._persistUserIfCurrent(te.user),yield E._setRedirectUser(null,m)),te})).apply(this,arguments)}function Kt(b){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(b){const m=Er(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class Br{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(m,E)&&(_=!0,this.sendToConsumer(m,E),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function uh(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dr(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var E;if(m.error&&!Dr(m)){const k=(null===(E=m.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(fe(this.auth,k))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const E=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&E}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ns(m))}saveEventToCache(m){this.cachedEventUids.add(Ns(m)),this.lastProcessedEventTime=Date.now()}}function Ns(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function Dr({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===(null==m?void 0:m.code)}function dh(b){return xl.apply(this,arguments)}function xl(){return(xl=(0,d.Z)(function*(b,m={}){return dn(b,"GET","/v1/projects",m)})).apply(this,arguments)}const kl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,op=/^https?/;function Gu(){return(Gu=(0,d.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield dh(b);for(const _ of m)try{if(Di(_))return}catch(E){}Oe(b,"unauthorized-domain")})).apply(this,arguments)}function Di(b){const m=he(),{protocol:_,hostname:E}=new URL(m);if(b.startsWith("chrome-extension://")){const te=new URL(b);return""===te.hostname&&""===E?"chrome-extension:"===_&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===E}if(!op.test(_))return!1;if(kl.test(b))return E===b;const k=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const Dc=new lt(3e4,6e4);function ap(){const b=gt().___jsl;if(null==b?void 0:b.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Sc=null;function pm(b){return Sc=Sc||function fm(b){return new Promise((m,_)=>{var E,k,L;function te(){ap(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ap(),_(fe(b,"network-request-failed"))},timeout:Dc.get()})}if(null===(k=null===(E=gt().gapi)||void 0===E?void 0:E.iframes)||void 0===k?void 0:k.Iframe)m(gapi.iframes.getContext());else{if(!(null===(L=gt().gapi)||void 0===L?void 0:L.load)){const Ne=Lr("iframefcb");return gt()[Ne]=()=>{gapi.load?te():_(fe(b,"network-request-failed"))},So(`https://apis.google.com/js/api.js?onload=${Ne}`).catch(st=>_(st))}te()}}).catch(m=>{throw Sc=null,m})}(b),Sc}const rv=new lt(5e3,15e3),ov={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hh(b){const m=b.config;ie(m.authDomain,b,"auth-domain-config-required");const _=m.emulator?vi(m,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,E={apiKey:m.apiKey,appName:b.name,v:O.SDK_VERSION},k=Qo.get(b.config.apiHost);k&&(E.eid=k);const L=b._getFrameworks();return L.length&&(E.fw=L.join(",")),`${_}?${(0,j.xO)(E).slice(1)}`}function fh(){return fh=(0,d.Z)(function*(b){const m=yield pm(b),_=gt().gapi;return ie(_,b,"internal-error"),m.open({where:document.body,url:hh(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ov,dontclear:!0},E=>new Promise(function(){var k=(0,d.Z)(function*(L,te){yield E.restyle({setHideOnLeave:!1});const Ne=fe(b,"network-request-failed"),st=gt().setTimeout(()=>{te(Ne)},rv.get());function Et(){gt().clearTimeout(st),L(E)}E.ping(Et).then(Et,()=>{te(Ne)})});return function(L,te){return k.apply(this,arguments)}}()))}),fh.apply(this,arguments)}const av={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qu{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function up(b,m,_,E,k,L){ie(b.config.authDomain,b,"auth-domain-config-required"),ie(b.config.apiKey,b,"invalid-api-key");const te={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:E,v:O.SDK_VERSION,eventId:k};if(m instanceof es){m.setDefaultLanguage(b.languageCode),te.providerId=m.providerId||"",(0,j.xb)(m.getCustomParameters())||(te.customParameters=JSON.stringify(m.getCustomParameters()));for(const[st,Et]of Object.entries(L||{}))te[st]=Et}if(m instanceof il){const st=m.getScopes().filter(Et=>""!==Et);st.length>0&&(te.scopes=st.join(","))}b.tenantId&&(te.tid=b.tenantId);const Ne=te;for(const st of Object.keys(Ne))void 0===Ne[st]&&delete Ne[st];return`${function cv({config:b}){return b.emulator?vi(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,j.xO)(Ne).slice(1)}`}const Ki="webStorageSupport",Nl=class as{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ci,this._completeRedirectFn=Wt}_openPopup(m,_,E,k){var L=this;return(0,d.Z)(function*(){var te;X(null===(te=L.eventManagers[m._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Ne=up(m,_,E,he(),k);return function gm(b,m,_,E=500,k=600){const L=Math.max((window.screen.availHeight-k)/2,0).toString(),te=Math.max((window.screen.availWidth-E)/2,0).toString();let Ne="";const st=Object.assign(Object.assign({},av),{width:E.toString(),height:k.toString(),top:L,left:te}),Et=(0,j.z$)().toLowerCase();_&&(Ne=Se(Et)?"_blank":_),Z(Et)&&(m=m||"http://localhost",st.scrollbars="yes");const jt=Object.entries(st).reduce((Un,[xo,Aa])=>`${Un}${xo}=${Aa},`,"");if(function yr(b=(0,j.z$)()){var m;return Lt(b)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Et)&&"_self"!==Ne)return function Ol(b,m){const _=document.createElement("a");_.href=b,_.target=m;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(m||"",Ne),new qu(null);const Ht=window.open(m||"",Ne,jt);ie(Ht,b,"popup-blocked");try{Ht.focus()}catch(Un){}return new qu(Ht)}(m,Ne,Er())})()}_openRedirect(m,_,E,k){var L=this;return(0,d.Z)(function*(){return yield L._originValidation(m),function An(b){gt().location.href=b}(up(m,_,E,he(),k)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:k,promise:L}=this.eventManagers[_];return k?Promise.resolve(k):(X(L,"If manager is not set, promise should be"),L)}const E=this.initAndGetManager(m);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(m){var _=this;return(0,d.Z)(function*(){const E=yield function Sa(b){return fh.apply(this,arguments)}(m),k=new Br(m);return E.register("authEvent",L=>(ie(null==L?void 0:L.authEvent,m,"invalid-auth-event"),{status:k.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:k},_.iframes[m._key()]=E,k})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Ki,{type:Ki},k=>{var L;const te=null===(L=null==k?void 0:k[0])||void 0===L?void 0:L[Ki];void 0!==te&&_(!!te),Oe(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Sr(b){return Gu.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return ir()||W()||Lt()}};class dp extends class Ac{constructor(m){this.factorId=m}_process(m,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,E);case"signin":return this._finalizeSignIn(m,_.credential);default:return Je("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new dp(m)}_finalizeEnroll(m,_,E){return function yc(b,m){return dn(b,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(b,m))}(m,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Ii(b,m){return dn(b,"POST","/v2/accounts/mfaSignIn:finalize",Zt(b,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uv=(()=>{class b{constructor(){}static assertion(_){return dp._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var Wu="@firebase/auth";class hp{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(E=>{var k;m((null===(k=E)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function fp(b){(0,O._registerComponent)(new ye.wA("auth",(m,{options:_})=>{const E=m.getProvider("app").getImmediate(),{apiKey:k,authDomain:L}=E.options;return(te=>{ie(k&&!k.includes(":"),"invalid-api-key",{appName:te.name}),ie(!(null==L?void 0:L.includes(":")),"argument-error",{appName:te.name});const Ne={apiKey:k,authDomain:L,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ni(b)},st=new Ja(te,Ne);return function Ue(b,m){const _=(null==m?void 0:m.persistence)||[],E=(Array.isArray(_)?_:[_]).map(ge);(null==m?void 0:m.errorMap)&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(E,null==m?void 0:m.popupRedirectResolver)}(st,_),st})(E)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,E)=>{m.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ye.wA("auth-internal",m=>{const _=yn(m.getProvider("auth").getImmediate());return new hp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Wu,"0.19.9",function gh(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,O.registerVersion)(Wu,"0.19.9","esm2017")}("Browser")},2090:(ut,Ae,F)=>{"use strict";F.d(Ae,{BH:()=>Ge,LL:()=>he,ZR:()=>Ue,gQ:()=>Zn,zI:()=>me,hu:()=>j,g5:()=>O,US:()=>ye,tV:()=>ve,h$:()=>se,$s:()=>$t,r3:()=>Zt,Sg:()=>xe,ne:()=>Es,p$:()=>$,vZ:()=>ci,ZB:()=>z,gK:()=>_t,pd:()=>Jr,m9:()=>kn,z$:()=>Fe,GJ:()=>cn,jU:()=>de,ru:()=>Re,d:()=>fe,xb:()=>On,w1:()=>De,hl:()=>Je,uI:()=>He,UG:()=>Y,Yr:()=>Ke,b$:()=>Oe,G6:()=>ie,Mn:()=>Ee,w9:()=>Oi,cI:()=>Hn,UI:()=>Xr,xO:()=>ws,zd:()=>Or,DV:()=>dn,ug:()=>Mt,dS:()=>bi,Pz:()=>ht,Dv:()=>Gi,Wj:()=>At,lb:()=>un,eu:()=>X});const j=function(H,q){if(!H)throw O(q)},O=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},ce=function(H){const q=[];let K=0;for(let Ie=0;Ie<H.length;Ie++){let re=H.charCodeAt(Ie);re<128?q[K++]=re:re<2048?(q[K++]=re>>6|192,q[K++]=63&re|128):55296==(64512&re)&&Ie+1<H.length&&56320==(64512&H.charCodeAt(Ie+1))?(re=65536+((1023&re)<<10)+(1023&H.charCodeAt(++Ie)),q[K++]=re>>18|240,q[K++]=re>>12&63|128,q[K++]=re>>6&63|128,q[K++]=63&re|128):(q[K++]=re>>12|224,q[K++]=re>>6&63|128,q[K++]=63&re|128)}return q},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,q){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let re=0;re<H.length;re+=3){const Ze=H[re],yt=re+1<H.length,nn=yt?H[re+1]:0,_n=re+2<H.length,di=_n?H[re+2]:0;let hi=(15&nn)<<2|di>>6,ae=63&di;_n||(ae=64,yt||(hi=64)),Ie.push(K[Ze>>2],K[(3&Ze)<<4|nn>>4],K[hi],K[ae])}return Ie.join("")},encodeString(H,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(H):this.encodeByteArray(ce(H),q)},decodeString(H,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(H):function(H){const q=[];let K=0,Ie=0;for(;K<H.length;){const re=H[K++];if(re<128)q[Ie++]=String.fromCharCode(re);else if(re>191&&re<224){const Ze=H[K++];q[Ie++]=String.fromCharCode((31&re)<<6|63&Ze)}else if(re>239&&re<365){const _n=((7&re)<<18|(63&H[K++])<<12|(63&H[K++])<<6|63&H[K++])-65536;q[Ie++]=String.fromCharCode(55296+(_n>>10)),q[Ie++]=String.fromCharCode(56320+(1023&_n))}else{const Ze=H[K++],yt=H[K++];q[Ie++]=String.fromCharCode((15&re)<<12|(63&Ze)<<6|63&yt)}}return q.join("")}(this.decodeStringToByteArray(H,q))},decodeStringToByteArray(H,q){this.init_();const K=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let re=0;re<H.length;){const Ze=K[H.charAt(re++)],nn=re<H.length?K[H.charAt(re)]:0;++re;const di=re<H.length?K[H.charAt(re)]:64;++re;const Pt=re<H.length?K[H.charAt(re)]:64;if(++re,null==Ze||null==nn||null==di||null==Pt)throw Error();Ie.push(Ze<<2|nn>>4),64!==di&&(Ie.push(nn<<4&240|di>>2),64!==Pt&&Ie.push(di<<6&192|Pt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},se=function(H){const q=ce(H);return ye.encodeByteArray(q,!0)},ue=function(H){return se(H).replace(/\./g,"")},ve=function(H){try{return ye.decodeString(H,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function $(H){return z(void 0,H)}function z(H,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return q}for(const K in q)!q.hasOwnProperty(K)||!ne(K)||(H[K]=z(H[K],q[K]));return H}function ne(H){return"__proto__"!==H}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,K)=>{this.resolve=q,this.reject=K})}wrapCallback(q){return(K,Ie)=>{K?this.reject(K):this.resolve(Ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(K):q(K,Ie))}}}function xe(H,q){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=q||"demo-project",re=H.iat||0,Ze=H.sub||H.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:re,exp:re+3600,auth_time:re,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(yt)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function de(){return"object"==typeof self&&self.self===self}function Re(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Oe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fe(){return Fe().indexOf("Electron/")>=0}function De(){const H=Fe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ee(){return Fe().indexOf("MSAppHost/")>=0}function Ke(){return!1}function ie(){return!Y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Je(){return"object"==typeof indexedDB}function X(){return new Promise((H,q)=>{try{let K=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(Ie);re.onsuccess=()=>{re.result.close(),K||self.indexedDB.deleteDatabase(Ie),H(!0)},re.onupgradeneeded=()=>{K=!1},re.onerror=()=>{var Ze;q((null===(Ze=re.error)||void 0===Ze?void 0:Ze.message)||"")}}catch(K){q(K)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ue extends Error{constructor(q,K,Ie){super(K),this.code=q,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(q,K,Ie){this.service=q,this.serviceName=K,this.errors=Ie}create(q,...K){const Ie=K[0]||{},re=`${this.service}/${q}`,Ze=this.errors[q],yt=Ze?function Ct(H,q){return H.replace(ln,(K,Ie)=>{const re=q[Ie];return null!=re?String(re):`<${Ie}?>`})}(Ze,Ie):"Error";return new Ue(re,`${this.serviceName}: ${yt} (${re}).`,Ie)}}const ln=/\{\$([^}]+)}/g;function Hn(H){return JSON.parse(H)}function ht(H){return JSON.stringify(H)}const lt=function(H){let q={},K={},Ie={},re="";try{const Ze=H.split(".");q=Hn(ve(Ze[0])||""),K=Hn(ve(Ze[1])||""),re=Ze[2],Ie=K.d||{},delete K.d}catch(Ze){}return{header:q,claims:K,data:Ie,signature:re}},Oi=function(H){const K=lt(H).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},cn=function(H){const q=lt(H).claims;return"object"==typeof q&&!0===q.admin};function Zt(H,q){return Object.prototype.hasOwnProperty.call(H,q)}function dn(H,q){if(Object.prototype.hasOwnProperty.call(H,q))return H[q]}function On(H){for(const q in H)if(Object.prototype.hasOwnProperty.call(H,q))return!1;return!0}function Xr(H,q,K){const Ie={};for(const re in H)Object.prototype.hasOwnProperty.call(H,re)&&(Ie[re]=q.call(K,H[re],re,H));return Ie}function ci(H,q){if(H===q)return!0;const K=Object.keys(H),Ie=Object.keys(q);for(const re of K){if(!Ie.includes(re))return!1;const Ze=H[re],yt=q[re];if(zi(Ze)&&zi(yt)){if(!ci(Ze,yt))return!1}else if(Ze!==yt)return!1}for(const re of Ie)if(!K.includes(re))return!1;return!0}function zi(H){return null!==H&&"object"==typeof H}function ws(H){const q=[];for(const[K,Ie]of Object.entries(H))Array.isArray(Ie)?Ie.forEach(re=>{q.push(encodeURIComponent(K)+"="+encodeURIComponent(re))}):q.push(encodeURIComponent(K)+"="+encodeURIComponent(Ie));return q.length?"&"+q.join("&"):""}function Or(H){const q={};return H.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[re,Ze]=Ie.split("=");q[decodeURIComponent(re)]=decodeURIComponent(Ze)}}),q}function Jr(H){const q=H.indexOf("?");if(!q)return"";const K=H.indexOf("#",q);return H.substring(q,K>0?K:void 0)}class Zn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,K){K||(K=0);const Ie=this.W_;if("string"==typeof q)for(let Pt=0;Pt<16;Pt++)Ie[Pt]=q.charCodeAt(K)<<24|q.charCodeAt(K+1)<<16|q.charCodeAt(K+2)<<8|q.charCodeAt(K+3),K+=4;else for(let Pt=0;Pt<16;Pt++)Ie[Pt]=q[K]<<24|q[K+1]<<16|q[K+2]<<8|q[K+3],K+=4;for(let Pt=16;Pt<80;Pt++){const hi=Ie[Pt-3]^Ie[Pt-8]^Ie[Pt-14]^Ie[Pt-16];Ie[Pt]=4294967295&(hi<<1|hi>>>31)}let di,wi,re=this.chain_[0],Ze=this.chain_[1],yt=this.chain_[2],nn=this.chain_[3],_n=this.chain_[4];for(let Pt=0;Pt<80;Pt++){Pt<40?Pt<20?(di=nn^Ze&(yt^nn),wi=1518500249):(di=Ze^yt^nn,wi=1859775393):Pt<60?(di=Ze&yt|nn&(Ze|yt),wi=2400959708):(di=Ze^yt^nn,wi=3395469782);const hi=(re<<5|re>>>27)+di+_n+wi+Ie[Pt]&4294967295;_n=nn,nn=yt,yt=4294967295&(Ze<<30|Ze>>>2),Ze=re,re=hi}this.chain_[0]=this.chain_[0]+re&4294967295,this.chain_[1]=this.chain_[1]+Ze&4294967295,this.chain_[2]=this.chain_[2]+yt&4294967295,this.chain_[3]=this.chain_[3]+nn&4294967295,this.chain_[4]=this.chain_[4]+_n&4294967295}update(q,K){if(null==q)return;void 0===K&&(K=q.length);const Ie=K-this.blockSize;let re=0;const Ze=this.buf_;let yt=this.inbuf_;for(;re<K;){if(0===yt)for(;re<=Ie;)this.compress_(q,re),re+=this.blockSize;if("string"==typeof q){for(;re<K;)if(Ze[yt]=q.charCodeAt(re),++yt,++re,yt===this.blockSize){this.compress_(Ze),yt=0;break}}else for(;re<K;)if(Ze[yt]=q[re],++yt,++re,yt===this.blockSize){this.compress_(Ze),yt=0;break}}this.inbuf_=yt,this.total_+=K}digest(){const q=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let re=this.blockSize-1;re>=56;re--)this.buf_[re]=255&K,K/=256;this.compress_(this.buf_);let Ie=0;for(let re=0;re<5;re++)for(let Ze=24;Ze>=0;Ze-=8)q[Ie]=this.chain_[re]>>Ze&255,++Ie;return q}}function Es(H,q){const K=new vt(H,q);return K.subscribe.bind(K)}class vt{constructor(q,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{q(this)}).catch(Ie=>{this.error(Ie)})}next(q){this.forEachObserver(K=>{K.next(q)})}error(q){this.forEachObserver(K=>{K.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,K,Ie){let re;if(void 0===q&&void 0===K&&void 0===Ie)throw new Error("Missing Observer.");re=function jn(H,q){if("object"!=typeof H||null===H)return!1;for(const K of q)if(K in H&&"function"==typeof H[K])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:K,complete:Ie},void 0===re.next&&(re.next=tn),void 0===re.error&&(re.error=tn),void 0===re.complete&&(re.complete=tn);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch(yt){}}),this.observers.push(re),Ze}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,q)}sendOne(q,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{K(this.observers[q])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}const Gi=function(H,q,K,Ie){let re;if(Ie<q?re="at least "+q:Ie>K&&(re=0===K?"none":"no more than "+K),re)throw new Error(H+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+re+".")};function _t(H,q){return`${H} failed: ${q} argument `}function At(H,q,K,Ie){if((!Ie||K)&&"function"!=typeof K)throw new Error(_t(H,q)+"must be a valid function.")}function un(H,q,K,Ie){if((!Ie||K)&&("object"!=typeof K||null===K))throw new Error(_t(H,q)+"must be a valid context object.")}const bi=function(H){const q=[];let K=0;for(let Ie=0;Ie<H.length;Ie++){let re=H.charCodeAt(Ie);if(re>=55296&&re<=56319){const Ze=re-55296;Ie++,j(Ie<H.length,"Surrogate pair missing trail surrogate."),re=65536+(Ze<<10)+(H.charCodeAt(Ie)-56320)}re<128?q[K++]=re:re<2048?(q[K++]=re>>6|192,q[K++]=63&re|128):re<65536?(q[K++]=re>>12|224,q[K++]=re>>6&63|128,q[K++]=63&re|128):(q[K++]=re>>18|240,q[K++]=re>>12&63|128,q[K++]=re>>6&63|128,q[K++]=63&re|128)}return q},Mt=function(H){let q=0;for(let K=0;K<H.length;K++){const Ie=H.charCodeAt(K);Ie<128?q++:Ie<2048?q+=2:Ie>=55296&&Ie<=56319?(q+=4,K++):q+=3}return q};function $t(H,q=1e3,K=2){const Ie=q*Math.pow(K,H),re=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+re)}function kn(H){return H&&H._delegate?H._delegate:H}},7917:(ut,Ae,F)=>{"use strict";var d=F(5e3);let j=null;function O(){return j}const se=new d.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ve(){return(0,d.LFG)(z)}()},providedIn:"platform"}),n})();const $=new d.OlP("Location Initialized");let z=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const i=O().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=O().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){ne()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){ne()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ge(){return new z((0,d.LFG)(se))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let Y=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function de(n){const e=(0,d.LFG)(se).location;return new Oe((0,d.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Re=new d.OlP("appBaseHref");let Oe=(()=>{class n extends Y{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+He(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const c=this.prepareExternalUrl(r+He(s));this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,s){const c=this.prepareExternalUrl(r+He(s));this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(Re,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),fe=(()=>{class n extends Y{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=xe(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let c=this.prepareExternalUrl(r+He(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,s){let c=this.prepareExternalUrl(r+He(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(Re,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n{constructor(t,i){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Fe(ie(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+He(i))}normalize(t){return n.stripTrailingSlash(function Ke(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=He,n.joinWithSlash=xe,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(d.LFG(Y),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ee(){return new De((0,d.LFG)(Y),(0,d.LFG)(ue))}()},providedIn:"root"}),n})();function ie(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Zero=0]="Zero",me[me.One=1]="One",me[me.Two=2]="Two",me[me.Few=3]="Few",me[me.Many=4]="Many",me[me.Other=5]="Other",me))();const Jr=d.kL8;class In{}let Qn=(()=>{class n extends In{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(Jr(i||this.locale)(t)){case me.Zero:return"zero";case me.One:return"one";case me.Two:return"two";case me.Few:return"few";case me.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class vo{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xn=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new vo(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,c),Lo(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Lo(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Lo(n,e){n.context.$implicit=e.item}let zn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Tn{constructor(){this.$implicit=null,this.ngIf=null}}function oc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class im{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Bs{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}onDestroy(e){}}const rm=new Bs,Kd=new im;let qf=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if((0,d.QGY)(t))return rm;if((0,d.F4k)(t))return Kd;throw function wr(n,e){return new d.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1}),n})(),uc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:In,useClass:Qn}]}),n})();const al="browser";function Dn(n){return n===al}function ll(n){return"server"===n}let Jd=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new hc((0,d.LFG)(se),window)}),n})();class hc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ns(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=eh(this.window.history)||eh(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function eh(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Vo extends class ya extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){j||(j=n)}(new Vo)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ul(){return bn=bn||document.querySelector("base"),bn?bn.getAttribute("href"):null}();return null==t?null:function Eo(n){fc=fc||document.createElement("a"),fc.setAttribute("href",n);const e=fc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){bn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function rc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let fc,bn=null;const Ei=new d.OlP("TRANSITION_ID"),Jn=[{provide:d.ip1,useFactory:function Eu(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const i=O(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ei,se,d.zs3],multi:!0}];class As{static init(){(0,d.VLi)(new As)}addToWindow(e){d.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(i=>{const r=d.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const h=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let $i=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Uo=new d.OlP("EventManagerPlugins");let Co=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Uo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class dl{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=O().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let is=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ms=(()=>{class n extends is{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(js),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(js))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function js(n){O().remove(n)}const bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},va=/%COMP%/g;function Me(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Me(n,r,t):(r=r.replace(va,n),t.push(r))}return t}function Bt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Nn=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ba(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case d.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Su(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case d.ifc.ShadowDom:return new fl(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Me(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Co),d.LFG(Ms),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ba{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=bt[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=bt[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,i,r&d.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Bt(i)):this.eventManager.addEventListener(e,t,Bt(i))}}class Su extends ba{constructor(e,t,i,r){super(e),this.component=i;const s=Me(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Iu(n){return"_ngcontent-%COMP%".replace(va,n)}(r+"-"+i.id),this.hostAttr=function Tu(n){return"_nghost-%COMP%".replace(va,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class fl extends ba{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Me(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let cm=(()=>{class n extends dl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const nh=["alt","control","meta","shift"],gc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ei={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Hs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let pl=(()=>{class n extends dl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="";if(nh.forEach(p=>{const y=i.indexOf(p);y>-1&&(i.splice(y,1),c+=p+".")}),c+=s,0!=i.length||0===s.length)return null;const h={};return h.domEventName=r,h.fullKey=c,h}static getEventFullKey(t){let i="",r=function Io(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ei.hasOwnProperty(e)&&(e=ei[e]))}return gc[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),nh.forEach(s=>{s!=r&&Hs[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const _c=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:al},{provide:d.g9A,useValue:function rs(){Vo.makeCurrent(),As.init()},multi:!0},{provide:se,useFactory:function mc(){return(0,d.RDi)(document),document},deps:[]}]),gl=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Au(){return new d.qLn},deps:[]},{provide:Uo,useClass:cm,multi:!0,deps:[se,d.R0b,d.Lbi]},{provide:Uo,useClass:pl,multi:!0,deps:[se]},{provide:Nn,useClass:Nn,deps:[Co,Ms,d.AFp]},{provide:d.FYo,useExisting:Nn},{provide:is,useExisting:Ms},{provide:Ms,useClass:Ms,deps:[se]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:Co,useClass:Co,deps:[Uo,d.R0b]},{provide:class Sn{},useClass:$i,deps:[]}];let wa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Ei,useExisting:d.AFp},Jn]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:gl,imports:[uc,d.hGG]}),n})();"undefined"!=typeof window&&window;let zo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):d.LFG(ih),i},providedIn:"root"}),n})(),ih=(()=>{class n extends zo{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case d.q3G.NONE:return i;case d.q3G.HTML:return(0,d.qzn)(i,"HTML")?(0,d.z3N)(i):(0,d.EiD)(this._doc,String(i)).toString();case d.q3G.STYLE:return(0,d.qzn)(i,"Style")?(0,d.z3N)(i):i;case d.q3G.SCRIPT:if((0,d.qzn)(i,"Script"))return(0,d.z3N)(i);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.yhl)(i),(0,d.qzn)(i,"URL")?(0,d.z3N)(i):(0,d.mCW)(String(i));case d.q3G.RESOURCE_URL:if((0,d.qzn)(i,"ResourceURL"))return(0,d.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function bl(n){return new ih(n.get(se))}(d.LFG(d.zs3)),i},providedIn:"root"}),n})();function cr(n){return null!=n&&"false"!=`${n}`}function um(n,e=0){return function Ci(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Vu(n){return Array.isArray(n)?n:[n]}function Er(n){return n instanceof d.SBq?n.nativeElement:n}var gt=F(7579),An=F(8306);const{isArray:wl}=Array,{getPrototypeOf:Ca,prototype:Go,keys:El}=Object;function Uu(n){if(1===n.length){const e=n[0];if(wl(e))return{args:e,keys:null};if(function Bu(n){return n&&"object"==typeof n&&Ca(n)===Go}(e)){const t=El(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var wn=F(8996),$s=F(4671),tt=F(4004);const{isArray:ss}=Array;function $o(n){return(0,tt.U)(e=>function Ia(n,e){return ss(e)?n(...e):n(e)}(n,e))}var Fr=F(3269);function ur(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var Pn=F(5403),ju=F(9672);function dr(...n){const e=(0,Fr.yG)(n),t=(0,Fr.jO)(n),{args:i,keys:r}=Uu(n);if(0===i.length)return(0,wn.D)([],e);const s=new An.y(function bc(n,e,t=$s.y){return i=>{wc(e,()=>{const{length:r}=n,s=new Array(r);let c=r,h=r;for(let p=0;p<r;p++)wc(e,()=>{const y=(0,wn.D)(n[p],e);let I=!1;y.subscribe((0,Pn.x)(i,D=>{s[p]=D,I||(I=!0,h--),h||i.next(t(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,e,r?c=>ur(r,c):$s.y));return t?s.pipe($o(t)):s}function wc(n,e,t){n?(0,ju.f)(t,n,e):e()}var Do=F(8189);function qo(...n){return function oh(){return(0,Do.J)(1)}()((0,wn.D)(n,(0,Fr.yG)(n)))}var pi=F(5698),Ii=F(4482);function ti(n,e){return(0,Ii.e)((t,i)=>{let r=0;t.subscribe((0,Pn.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Wo(n){return ti((e,t)=>n<=t)}var ks=F(4986);function So(n,e=ks.z){return(0,Ii.e)((t,i)=>{let r=null,s=null,c=null;const h=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function p(){const y=c+n,I=e.now();if(I<y)return r=this.schedule(void 0,y-I),void i.add(r);h()}t.subscribe((0,Pn.x)(i,y=>{s=y,c=e.now(),r||(r=e.schedule(p,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{s=r=null}))})}function Lr(...n){const e=(0,Fr.yG)(n);return(0,Ii.e)((t,i)=>{(e?qo(n,t,e):qo(n,t)).subscribe(i)})}var Vr=F(8421),Ko=F(5032);function Dt(n){return(0,Ii.e)((e,t)=>{(0,Vr.Xf)(n).subscribe((0,Pn.x)(t,()=>t.complete(),Ko.Z)),!t.closed&&e.subscribe(t)})}let Ao;try{Ao="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Ao=!1}let Rn,Hu,Ta,Ec,Cr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Dn(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ao)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function np(n){return function dm(){if(null==Rn&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Rn=!0}))}finally{Rn=Rn||!1}return Rn}()?n:!!n.capture}function Cl(){if("object"!=typeof document||!document)return 0;if(null==Hu){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),Hu=0,0===n.scrollLeft&&(n.scrollLeft=1,Hu=0===n.scrollLeft?1:2),n.remove()}return Hu}function qs(n){return n.composedPath?n.composedPath()[0]:n.target}let rp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Dl=new Set;let gi,os=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ic}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Cc(n){if(!Dl.has(n))try{gi||(gi=document.createElement("style"),gi.setAttribute("type","text/css"),document.head.appendChild(gi)),gi.sheet&&(gi.sheet.insertRule(`@media ${n} {body{ }}`,0),Dl.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ic(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let hr=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new gt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Zo(Vu(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=dr(Zo(Vu(t)).map(c=>this._registerQuery(c).observable));return s=qo(s.pipe((0,pi.q)(1)),s.pipe(Wo(1),So(0))),s.pipe((0,tt.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new An.y(c=>{const h=p=>this._zone.run(()=>c.next(p));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(Lr(i),(0,tt.U)(({matches:c})=>({query:t,matches:c})),Dt(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(os),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zo(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const Tc_Handset="(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)";var zu=F(6063);class ch extends gt.x{constructor(e=1/0,t=1/0,i=zu.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;t||(i.push(e),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!e.closed;c+=i?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=t.now();let h=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)h=p;h&&i.splice(0,h+1)}}}var Da=F(3099);function Mo(n,e,t){var i,r;let s,c=!1;return n&&"object"==typeof n?(s=null!==(i=n.bufferSize)&&void 0!==i?i:1/0,e=null!==(r=n.windowTime)&&void 0!==r?r:1/0,c=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,Da.B)({connector:()=>new ch(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}var Ur=F(4929),N=F(2090),$n=F(9681),Rs=F(1877),fr=F(4859);function ot(...n){const e=(0,Fr.yG)(n);return(0,wn.D)(n,e)}var qt=F(5813);function Sl(){return(0,Ii.e)((n,e)=>{let t,i=!1;n.subscribe((0,Pn.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}function sp(n,e,t,i,r){return(s,c)=>{let h=t,p=e,y=0;s.subscribe((0,Pn.x)(c,I=>{const D=y++;p=h?n(p,I,D):(h=!0,I),i&&c.next(p)},r&&(()=>{h&&c.next(p),c.complete()})))}}function Wi(n,e){return(0,Ii.e)(sp(n,e,arguments.length>=2,!0))}function Al(n,e=$s.y){return n=null!=n?n:Ws,(0,Ii.e)((t,i)=>{let r,s=!0;t.subscribe((0,Pn.x)(i,c=>{const h=e(c);(s||!n(r,h))&&(s=!1,r=h,i.next(c))}))})}function Ws(n,e){return n===e}var C,Fn=F(2011),Os=(F(5881),F(3942)),we=F(5861),Ml="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ks={},S=S||{},M=Ml||self;function B(){}function Q(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function le(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Be="closure_uid_"+(1e9*Math.random()>>>0),nt=0;function rn(n,e,t){return n.call.apply(n.bind,arguments)}function hn(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Wt(n,e,t){return(Wt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rn:hn).apply(null,arguments)}function Fi(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Kt(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[r].apply(i,c)}}function Tr(){this.s=this.s,this.o=this.o}var Br={};Tr.prototype.s=!1,Tr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Le(n){return Object.prototype.hasOwnProperty.call(n,Be)&&n[Be]||(n[Be]=++nt)}(this);delete Br[n]}},Tr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ns=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Dr=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&e.call(t,r[s],s,n)};function dh(n){return Array.prototype.concat.apply([],arguments)}function xl(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function kl(n){return/^[\s\xa0]*$/.test(n)}var Di,op=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Sr(n,e){return-1!=n.indexOf(e)}function Gu(n,e){return n<e?-1:n>e?1:0}e:{var Dc=M.navigator;if(Dc){var ap=Dc.userAgent;if(ap){Di=ap;break e}}Di=""}function fm(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function Sc(n){const e={};for(const t in n)e[t]=n[t];return e}var pm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rv(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<pm.length;s++)t=pm[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function lp(n){return lp[" "](n),n}lp[" "]=B;var Rl,n,ov=Sr(Di,"Opera"),Qo=Sr(Di,"Trident")||Sr(Di,"MSIE"),hh=Sr(Di,"Edge"),Sa=hh||Qo,fh=Sr(Di,"Gecko")&&!(Sr(Di.toLowerCase(),"webkit")&&!Sr(Di,"Edge"))&&!(Sr(Di,"Trident")||Sr(Di,"MSIE"))&&!Sr(Di,"Edge"),av=Sr(Di.toLowerCase(),"webkit")&&!Sr(Di,"Edge");function lv(){var n=M.document;return n?n.documentMode:void 0}e:{var $u="",ph=(n=Di,fh?/rv:([^\);]+)(\)|;)/.exec(n):hh?/Edge\/([\d\.]+)/.exec(n):Qo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):av?/WebKit\/(\S+)/.exec(n):ov?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ph&&($u=ph?ph[1]:""),Qo){var qu=lv();if(null!=qu&&qu>parseFloat($u)){Rl=String(qu);break e}}Rl=$u}var gm={};var up=M.document&&Qo&&(lv()||parseInt(Rl,10))||void 0,cv=function(){if(!M.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{M.addEventListener("test",B,e),M.removeEventListener("test",B,e)}catch(t){}return n}();function Ki(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function as(n,e){if(Ki.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fh){e:{try{lp(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Nl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&as.Z.h.call(this)}}Ki.prototype.h=function(){this.defaultPrevented=!0},Kt(as,Ki);var Nl={2:"touch",3:"pen",4:"mouse"};as.prototype.h=function(){as.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ac="closure_listenable_"+(1e6*Math.random()|0),dp=0;function uv(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++dp,this.ca=this.fa=!1}function Wu(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ku(n){this.src=n,this.g={},this.h=0}function hp(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=Ns(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Wu(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function gh(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==i)return r}return-1}Ku.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=gh(n,e,i,r);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new uv(e,this.src,s,!!i,r)).fa=t,n.push(e)),e};var fp="closure_lm_"+(1e6*Math.random()|0),_m={};function b(n,e,t,i,r){if(i&&i.once)return E(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)b(n,e[s],t,i,r);return null}return t=jt(t),n&&n[Ac]?n.N(e,t,le(i)?!!i.capture:!!i,r):m(n,e,t,!1,i,r)}function m(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var c=le(r)?!!r.capture:!!r,h=st(n);if(h||(n[fp]=h=new Ku(n)),(t=h.add(e,t,i,c,s)).proxy)return t;if(i=function _(){var e=Ne;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)cv||(r=c),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(te(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function E(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)E(n,e[s],t,i,r);return null}return t=jt(t),n&&n[Ac]?n.O(e,t,le(i)?!!i.capture:!!i,r):m(n,e,t,!0,i,r)}function k(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)k(n,e[s],t,i,r);else i=le(i)?!!i.capture:!!i,t=jt(t),n&&n[Ac]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=gh(s=n.g[e],t,i,r))&&(Wu(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=st(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gh(e,t,i,r)),(t=-1<n?e[n]:null)&&L(t))}function L(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ac])hp(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(te(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=st(e))?(hp(t,n),0==t.h&&(t.src=null,e[fp]=null)):Wu(n)}}}function te(n){return n in _m?_m[n]:_m[n]="on"+n}function Ne(n,e){if(n.ca)n=!0;else{e=new as(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&L(n),n=t.call(i,e)}return n}function st(n){return(n=n[fp])instanceof Ku?n:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function jt(n){return"function"==typeof n?n:(n[Et]||(n[Et]=function(e){return n.handleEvent(e)}),n[Et])}function Ht(){Tr.call(this),this.i=new Ku(this),this.P=this,this.I=null}function Un(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Ki(e,n);else if(e instanceof Ki)e.target=e.target||n;else{var r=e;rv(e=new Ki(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];r=xo(c,i,!0,e)&&r}if(r=xo(c=e.g=n,i,!0,e)&&r,r=xo(c,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=xo(c=e.g=t[s],i,!1,e)&&r}function xo(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ca&&c.capture==t){var h=c.listener,p=c.ia||c.src;c.fa&&hp(n.i,c),r=!1!==h.call(p,i)&&r}}return r&&!i.defaultPrevented}Kt(Ht,Tr),Ht.prototype[Ac]=!0,Ht.prototype.removeEventListener=function(n,e,t,i){k(this,n,e,t,i)},Ht.prototype.M=function(){if(Ht.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Wu(t[i]);delete n.g[e],n.h--}}this.I=null},Ht.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Ht.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Aa=M.JSON.stringify;function mh(){var n=gp;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var vh,ym=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new dv,n=>n.reset());class dv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _h(n){M.setTimeout(()=>{throw n},0)}function yh(n,e){vh||function pp(){var n=M.Promise.resolve(void 0);vh=function(){n.then(Mc)}}(),bh||(vh(),bh=!0),gp.add(n,e)}var bh=!1,gp=new class Zu{constructor(){this.h=this.g=null}add(e,t){const i=ym.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function Mc(){for(var n;n=mh();){try{n.h.call(n.g)}catch(t){_h(t)}var e=ym;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bh=!1}function Yu(n,e){Ht.call(this),this.h=n||1,this.g=e||M,this.j=Wt(this.kb,this),this.l=Date.now()}function mp(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function hv(n,e,t){if("function"==typeof n)t&&(n=Wt(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Wt(n.handleEvent,n)}return 2147483647<Number(e)?-1:M.setTimeout(n,e||0)}function Si(n){n.g=hv(()=>{n.g=null,n.i&&(n.i=!1,Si(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kt(Yu,Ht),(C=Yu.prototype).da=!1,C.S=null,C.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Un(this,"tick"),this.da&&(mp(this),this.start()))}},C.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},C.M=function(){Yu.Z.M.call(this),mp(this),delete this.g};class vS extends Tr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Si(this)}M(){super.M(),this.g&&(M.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _p(n){Tr.call(this),this.h=n,this.g={}}Kt(_p,Tr);var vm=[];function fv(n,e,t,i){Array.isArray(t)||(t&&(vm[0]=t.toString()),t=vm);for(var r=0;r<t.length;r++){var s=b(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function TE(n){fm(n.g,function(e,t){this.g.hasOwnProperty(t)&&L(e)},n),n.g={}}function bm(){this.g=!0}function wh(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function YR(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return Aa(t)}catch(h){return e}}(n,t)+(i?" "+i:"")})}_p.prototype.M=function(){_p.Z.M.call(this),TE(this)},_p.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bm.prototype.Aa=function(){this.g=!1},bm.prototype.info=function(){};var Xo={},jr=null;function Eh(){return jr=jr||new Ht}function pv(n){Ki.call(this,Xo.Ma,n)}function Ch(n){const e=Eh();Un(e,new pv(e,n))}function Ar(n,e){Ki.call(this,Xo.STAT_EVENT,n),this.stat=e}function rr(n){const e=Eh();Un(e,new Ar(e,n))}function wm(n,e){Ki.call(this,Xo.Na,n),this.size=e}function yp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return M.setTimeout(function(){n()},e)}Xo.Ma="serverreachability",Kt(pv,Ki),Xo.STAT_EVENT="statevent",Kt(Ar,Ki),Xo.Na="timingevent",Kt(wm,Ki);var Em={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},gv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mv(){}function DE(){}mv.prototype.h=null;var vp,Ih={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function yv(){Ki.call(this,"d")}function vv(){Ki.call(this,"c")}function Cm(){}function bp(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new _p(this),this.P=ES,this.W=new Yu(n=Sa?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Im}function Im(){this.i=null,this.g="",this.h=!1}Kt(yv,Ki),Kt(vv,Ki),Kt(Cm,mv),Cm.prototype.g=function(){return new XMLHttpRequest},Cm.prototype.i=function(){return{}},vp=new Cm;var ES=45e3,bv={},xc={};function wv(n,e,t){n.K=1,n.v=Nc(Oc(e)),n.s=t,n.U=!0,SE(n,null)}function SE(n,e){n.F=Date.now(),Th(n),n.A=Oc(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),UE(t.h,"t",i),n.C=0,t=n.l.H,n.h=new Im,n.g=XE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new vS(Wt(n.Ia,n,n.g),n.O)),fv(n.V,n.g,"readystatechange",n.gb),e=n.H?Sc(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ch(1),function bS(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var I=y[0];y=y[1];var D=I.split("_");c=2<=D.length&&"type"==D[1]?c+(I+"=")+y+"&":c+(I+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function AE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ME(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=CS(n,t),r==xc){4==e&&(n.o=4,rr(14),i=!1),wh(n.j,n.m,null,"[Incomplete Response]");break}if(r==bv){n.o=4,rr(15),wh(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}wh(n.j,n.m,r,null),Dm(n,r)}AE(n)&&r!=xc&&r!=bv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,rr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Rv(e),e.L=!0,rr(11))):(wh(n.j,n.m,t,"[Invalid Chunked Response]"),Qu(n),wp(n))}function CS(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?xc:(t=Number(e.substring(t,i)),isNaN(t)?bv:(i+=1)+t>e.length?xc:(e=e.substr(i,t),n.C=i+t,e))}function Th(n){n.Y=Date.now()+n.P,xE(n,n.P)}function xE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=yp(Wt(n.eb,n),e)}function Tm(n){n.B&&(M.clearTimeout(n.B),n.B=null)}function wp(n){0==n.l.G||n.I||Ov(n.l,n)}function Qu(n){Tm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,mp(n.W),TE(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Dm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Iv(t.i,n)))if(t.I=n.N,!n.J&&Iv(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=yp(Wt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Dp(t),Ps(t)}kv(t),rr(18)}if(1>=HE(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else xa(t,11)}else if((n.J||t.g==n)&&Dp(t),!kl(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const I=y[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.K=i=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const P=n.g;if(P){const U=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=i.i;!s.g&&(Sr(U,"spdy")||Sr(U,"quic")||Sr(U,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Mm(s,s.h),s.h=null))}if(i.D){const J=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(i.sa=J,qn(i.F,i.D,J))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((i=t).oa=Pv(i,i.H?i.la:null,i.W),c.J){Tv(i.i,c);var h=c,p=i.K;p&&h.setTimeout(p),h.B&&(Tm(h),Th(h)),i.g=c}else QE(i);0<t.l.length&&Um(t)}else"stop"!=y[0]&&"close"!=y[0]||xa(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?xa(t,7):Mv(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}Ch(4)}catch(y){}}function Ev(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Q(n)||"string"==typeof n)Dr(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Q(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=function kE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Q(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}}function Dh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Dh)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function kc(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];Hr(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)Hr(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function Hr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(C=bp.prototype).setTimeout=function(n){this.P=n},C.gb=function(n){n=n.target;const e=this.L;e&&3==Ma(n)?e.l():this.Ia(n)},C.Ia=function(n){try{if(n==this.g)e:{const I=Ma(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>I)&&(3!=I||Sa||this.g&&(this.h.h||this.g.ga()||xS(this.g)))){this.I||4!=I||7==e||Ch(8==e||0>=D?3:2),Tm(this);var t=this.g.ba();this.N=t;t:if(AE(this)){var i=xS(this.g);n="";var r=i.length,s=4==Ma(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qu(this),wp(this);var c="";break t}this.h.i=new M.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function wS(n,e,t,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kl(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,rr(12),Qu(this),wp(this);break e}wh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dm(this,t)}this.U?(ME(this,I,c),Sa&&this.i&&3==I&&(fv(this.V,this.W,"tick",this.fb),this.W.start())):(wh(this.j,this.m,c,null),Dm(this,c)),4==I&&Qu(this),this.i&&!this.I&&(4==I?Ov(this.l,this):(this.i=!1,Th(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,rr(12)):(this.o=0,rr(13)),Qu(this),wp(this)}}}catch(I){}},C.fb=function(){if(this.g){var n=Ma(this.g),e=this.g.ga();this.C<e.length&&(Tm(this),ME(this,n,e),this.i&&4!=n&&Th(this))}},C.cancel=function(){this.I=!0,Qu(this)},C.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ZR(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ch(3),rr(17)),Qu(this),this.o=2,wp(this)):xE(this,this.Y-n)},(C=Dh.prototype).R=function(){kc(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},C.T=function(){return kc(this),this.g.concat()},C.get=function(n,e){return Hr(this.h,n)?this.h[n]:e},C.set=function(n,e){Hr(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},C.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],s=this.get(r);n.call(e,s,r,this)}};var IS=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Rc){this.g=void 0!==e?e:n.g,Zs(this,n.j),this.s=n.s,Sh(this,n.i),Ah(this,n.m),this.l=n.l,e=n.h;var t=new ed;t.i=e.i,e.g&&(t.g=new Dh(e.g),t.h=e.h),RE(this,t),this.o=n.o}else n&&(t=String(n).match(IS))?(this.g=!!e,Zs(this,t[1]||"",!0),this.s=Xu(t[2]||""),Sh(this,t[3]||"",!0),Ah(this,t[4]),this.l=Xu(t[5]||"",!0),RE(this,t[6]||"",!0),this.o=Xu(t[7]||"")):(this.g=!!e,this.h=new ed(null,this.g))}function Oc(n){return new Rc(n)}function Zs(n,e,t){n.j=t?Xu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Sh(n,e,t){n.i=t?Xu(e,!0):e}function Ah(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function RE(n,e,t){e instanceof ed?(n.h=e,function SS(n,e){e&&!n.j&&(Pc(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(LE(this,i),UE(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ju(e,FE)),n.h=new ed(e,n.g))}function qn(n,e,t){n.h.set(e,t)}function Nc(n){return qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Xu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ju(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,PE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ju(e,TS,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ju(e,TS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ju(t,"/"==t.charAt(0)?Cv:Mh,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ju(t,DS)),n.join("")};var TS=/[#\/\?@]/g,Mh=/[#\?:]/g,Cv=/[#\?]/g,FE=/[#\?@]/g,DS=/#/g;function ed(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pc(n){n.g||(n.g=new Dh,n.h=0,n.i&&function QR(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function LE(n,e){Pc(n),e=xh(n,e),Hr(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Hr((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&kc(n)))}function VE(n,e){return Pc(n),e=xh(n,e),Hr(n.g.h,e)}function UE(n,e,t){LE(n,e),0<t.length&&(n.i=null,n.g.set(xh(n,e),xl(t)),n.h+=t.length)}function xh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Sm(n){this.l=n||jE,n=M.PerformanceNavigationTiming?0<(n=M.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(M.g&&M.g.Ea&&M.g.Ea()&&M.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(C=ed.prototype).add=function(n,e){Pc(this),this.i=null,n=xh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},C.forEach=function(n,e){Pc(this),this.g.forEach(function(t,i){Dr(t,function(r){n.call(e,r,i,this)},this)},this)},C.T=function(){Pc(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],s=0;s<r.length;s++)t.push(e[i]);return t},C.R=function(n){Pc(this);var e=[];if("string"==typeof n)VE(this,n)&&(e=dh(e,this.g.get(xh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=dh(e,n[t])}return e},C.set=function(n,e){return Pc(this),this.i=null,VE(this,n=xh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},C.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},C.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var c=r;""!==i[s]&&(c+="="+encodeURIComponent(String(i[s]))),n.push(c)}}return this.i=n.join("&")};var jE=10;function Am(n){return!!n.h||!!n.g&&n.g.size>=n.j}function HE(n){return n.h?1:n.g?n.g.size:0}function Iv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mm(n,e){n.g?n.g.add(e):n.h=e}function Tv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Fc(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return xl(n.i)}function xm(){}function zE(){this.g=new xm}function AS(n,e,t){const i=t||"";try{Ev(n,function(r,s){let c=r;le(r)&&(c=Aa(r)),e.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Rm(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function kh(n){this.l=n.$b||null,this.j=n.ib||!1}function Ep(n,e){Ht.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Om,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sm.prototype.cancel=function(){if(this.i=Fc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},xm.prototype.stringify=function(n){return M.JSON.stringify(n,void 0)},xm.prototype.parse=function(n){return M.JSON.parse(n,void 0)},Kt(kh,mv),kh.prototype.g=function(){return new Ep(this.l,this.j)},kh.prototype.i=function(n){return function(){return n}}({}),Kt(Ep,Ht);var Om=0;function Nm(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Rh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Lc(n)}function Lc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(C=Ep.prototype).open=function(n,e){if(this.readyState!=Om)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Lc(this)},C.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||M).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},C.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rh(this)),this.readyState=Om},C.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Lc(this)),this.g&&(this.readyState=3,Lc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==M.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nm(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},C.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rh(this):Lc(this),3==this.readyState&&Nm(this)}},C.Ua=function(n){this.g&&(this.response=this.responseText=n,Rh(this))},C.Ta=function(n){this.g&&(this.response=n,Rh(this))},C.ha=function(){this.g&&Rh(this)},C.setRequestHeader=function(n,e){this.v.append(n,e)},C.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},C.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ep.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Pm=M.JSON.parse;function Li(n){Ht.call(this),this.headers=new Dh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fm,this.K=this.L=!1}Kt(Li,Ht);var Fm="",GE=/^https?$/i,Dv=["POST","PUT"];function MS(n){return"content-type"==n.toLowerCase()}function Sv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$E(n),Ip(n)}function $E(n){n.D||(n.D=!0,Un(n,"complete"),Un(n,"error"))}function qE(n){if(n.h&&void 0!==S&&(!n.C[1]||4!=Ma(n)||2!=n.ba()))if(n.v&&4==Ma(n))hv(n.Fa,0,n);else if(Un(n,"readystatechange"),4==Ma(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===h){var r=String(n.H).match(IS)[1]||null;if(!r&&M.self&&M.self.location){var s=M.self.location.protocol;r=s.substr(0,s.length-1)}i=!GE.test(r?r.toLowerCase():"")}t=i}if(t)Un(n,"complete"),Un(n,"success");else{n.m=6;try{var c=2<Ma(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",$E(n)}}finally{Ip(n)}}}function Ip(n,e){if(n.g){Lm(n);const t=n.g,i=n.C[0]?B:null;n.g=null,n.C=null,e||Un(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function Lm(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(M.clearTimeout(n.A),n.A=null)}function Ma(n){return n.g?n.g.readyState:0}function xS(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Fm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Av(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function WE(n){let e="";return fm(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):qn(n,e,t))}function Oh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function KE(n){this.za=0,this.l=[],this.h=new bm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Oh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Oh("baseRetryDelayMs",5e3,n),this.$a=Oh("retryDelaySeedMs",1e4,n),this.Ya=Oh("forwardChannelMaxRetries",2,n),this.ra=Oh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Sm(n&&n.concurrentRequestLimit),this.Ca=new zE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Mv(n){if(ZE(n),3==n.G){var e=n.V++,t=Oc(n.F);qn(t,"SID",n.J),qn(t,"RID",e),qn(t,"TYPE","terminate"),Tp(n,t),(e=new bp(n,n.h,e,void 0)).K=2,e.v=Nc(Oc(t)),t=!1,M.navigator&&M.navigator.sendBeacon&&(t=M.navigator.sendBeacon(e.v.toString(),"")),!t&&M.Image&&((new Image).src=e.v,t=!0),t||(e.g=XE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Th(e)}ko(n)}function Ps(n){n.g&&(Rv(n),n.g.cancel(),n.g=null)}function ZE(n){Ps(n),n.u&&(M.clearTimeout(n.u),n.u=null),Dp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&M.clearTimeout(n.m),n.m=null)}function Vm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Um(n)}function Um(n){Am(n.i)||n.m||(n.m=!0,yh(n.Ha,n),n.C=0)}function YE(n,e){var t;t=e?e.m:n.V++;const i=Oc(n.F);qn(i,"SID",n.J),qn(i,"RID",t),qn(i,"AID",n.U),Tp(n,i),n.o&&n.s&&Av(i,n.o,n.s),t=new bp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=xv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Mm(n.i,t),wv(t,i,e)}function Tp(n,e){n.j&&Ev({},function(t,i){qn(e,i,t)})}function xv(n,e,t){t=Math.min(n.l.length,t);var i=n.j?Wt(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let y=r[p].h;const I=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),h=!1;else try{AS(I,c,"req"+y+"_")}catch(D){i&&i(I)}}if(h){i=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function QE(n){n.g||n.u||(n.Y=1,yh(n.Ga,n),n.A=0)}function kv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=yp(Wt(n.Ga,n),Nv(n,n.A)),n.A++,0))}function Rv(n){null!=n.B&&(M.clearTimeout(n.B),n.B=null)}function Nt(n){n.g=new bp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Oc(n.oa);qn(e,"RID","rpc"),qn(e,"SID",n.J),qn(e,"CI",n.N?"0":"1"),qn(e,"AID",n.U),Tp(n,e),qn(e,"TYPE","xmlhttp"),n.o&&n.s&&Av(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Nc(Oc(e)),t.s=null,t.U=!0,SE(t,n)}function Dp(n){null!=n.v&&(M.clearTimeout(n.v),n.v=null)}function Ov(n,e){var t=null;if(n.g==e){Dp(n),Rv(n),n.g=null;var i=2}else{if(!Iv(n.i,e))return;t=e.D,Tv(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Un(i=Eh(),new wm(i,t,e,r)),Um(n)}else QE(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function kS(n,e){return!(HE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=yp(Wt(n.Ha,n,e),Nv(n,n.C)),n.C++,0)))}(n,e)||2==i&&kv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:xa(n,5);break;case 4:xa(n,10);break;case 3:xa(n,6);break;default:xa(n,2)}}function Nv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function xa(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=Wt(n.jb,n);t||(t=new Rc("//www.google.com/images/cleardot.gif"),M.location&&"http"==M.location.protocol||Zs(t,"https"),Nc(t)),function km(n,e){const t=new bm;if(M.Image){const i=new Image;i.onload=Fi(Rm,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Fi(Rm,t,i,"TestLoadImage: error",!1,e),i.onabort=Fi(Rm,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Fi(Rm,t,i,"TestLoadImage: timeout",!1,e),M.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else rr(2);n.G=0,n.j&&n.j.va(e),ko(n),ZE(n)}function ko(n){n.G=0,n.I=-1,n.j&&((0!=Fc(n.i).length||0!=n.l.length)&&(n.i.i.length=0,xl(n.l),n.l.length=0),n.j.ua())}function Pv(n,e,t){let i=function OE(n){return n instanceof Rc?Oc(n):new Rc(n,void 0)}(t);if(""!=i.i)e&&Sh(i,e+"."+i.i),Ah(i,i.m);else{const r=M.location;i=function NE(n,e,t,i){var r=new Rc(null,void 0);return n&&Zs(r,n),e&&Sh(r,e),t&&Ah(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&fm(n.aa,function(r,s){qn(i,s,r)}),t=n.sa,(e=n.D)&&t&&qn(i,e,t),qn(i,"VER",n.ma),Tp(n,i),i}function XE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Li(t&&n.Ba&&!n.qa?new kh({ib:!0}):n.qa)).L=n.H,e}function Bm(){}function Ro(){if(Qo&&!(10<=Number(up)))throw Error("Environmental error: no available transport.")}function ls(n,e){Ht.call(this),this.g=new KE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!kl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kl(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Sp(this)}function Fv(n){yv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jm(){vv.call(this),this.status=1}function Sp(n){this.g=n}(C=Li.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vp.g(),this.C=function _v(n){return n.h||(n.h=n.i())}(this.u?this.u:vp),this.g.onreadystatechange=Wt(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Sv(this,s)}n=t||"";const r=new Dh(this.headers);i&&Ev(i,function(s,c){r.set(c,s)}),i=function uh(n){e:{var e=MS;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=M.FormData&&n instanceof M.FormData,!(0<=Ns(Dv,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Lm(this),0<this.B&&((this.K=function Cp(n){return Qo&&function Ol(){return function sv(n){var e=gm;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=op(String(Rl)).split("."),t=op("9").split("."),i=Math.max(e.length,t.length);for(let c=0;0==n&&c<i;c++){var r=e[c]||"",s=t[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=Gu(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||Gu(0==r[2].length,0==s[2].length)||Gu(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wt(this.pa,this)):this.A=hv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Sv(this,s)}},C.pa=function(){void 0!==S&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Un(this,"timeout"),this.abort(8))},C.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Un(this,"complete"),Un(this,"abort"),Ip(this))},C.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ip(this,!0)),Li.Z.M.call(this)},C.Fa=function(){this.s||(this.F||this.v||this.l?qE(this):this.cb())},C.cb=function(){qE(this)},C.ba=function(){try{return 2<Ma(this)?this.g.status:-1}catch(n){return-1}},C.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},C.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Pm(e)}},C.Da=function(){return this.m},C.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(C=KE.prototype).ma=8,C.G=1,C.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},C.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new bp(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=Sc(s),rv(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xv(this,r,e),qn(t=Oc(this.F),"RID",n),qn(t,"CVER",22),this.D&&qn(t,"X-HTTP-Session-Id",this.D),Tp(this,t),this.o&&s&&Av(t,this.o,s),Mm(this.i,r),this.Ra&&qn(t,"TYPE","init"),this.ja?(qn(t,"$req",e),qn(t,"SID","null"),r.$=!0,wv(r,t,null)):wv(r,t,e),this.G=2}}else 3==this.G&&(n?YE(this,n):0==this.l.length||Am(this.i)||YE(this))},C.Ga=function(){if(this.u=null,Nt(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=yp(Wt(this.bb,this),n)}},C.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rr(10),Ps(this),Nt(this))},C.ab=function(){null!=this.v&&(this.v=null,Ps(this),kv(this),rr(19))},C.jb=function(n){n?(this.h.info("Successfully pinged google.com"),rr(2)):(this.h.info("Failed to ping google.com"),rr(1))},(C=Bm.prototype).xa=function(){},C.wa=function(){},C.va=function(){},C.ua=function(){},C.Oa=function(){},Ro.prototype.g=function(n,e){return new ls(n,e)},Kt(ls,Ht),ls.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),yh(Wt(n.hb,n,e))),rr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Pv(n,null,n.W),Um(n)},ls.prototype.close=function(){Mv(this.g)},ls.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Vm(this.g,e)}else this.v?((e={}).__data__=Aa(n),Vm(this.g,e)):Vm(this.g,n)},ls.prototype.M=function(){this.g.j=null,delete this.j,Mv(this.g),delete this.g,ls.Z.M.call(this)},Kt(Fv,yv),Kt(jm,vv),Kt(Sp,Bm),Sp.prototype.xa=function(){Un(this.g,"a")},Sp.prototype.wa=function(n){Un(this.g,new Fv(n))},Sp.prototype.va=function(n){Un(this.g,new jm(n))},Sp.prototype.ua=function(){Un(this.g,"b")},Ro.prototype.createWebChannel=Ro.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,Em.NO_ERROR=0,Em.TIMEOUT=8,Em.HTTP_ERROR=6,gv.COMPLETE="complete",DE.EventType=Ih,Ih.OPEN="a",Ih.CLOSE="b",Ih.ERROR="c",Ih.MESSAGE="d",Ht.prototype.listen=Ht.prototype.N,Li.prototype.listenOnce=Li.prototype.O,Li.prototype.getLastError=Li.prototype.La,Li.prototype.getLastErrorCode=Li.prototype.Da,Li.prototype.getStatus=Li.prototype.ba,Li.prototype.getResponseJson=Li.prototype.Qa,Li.prototype.getResponseText=Li.prototype.ga,Li.prototype.send=Li.prototype.ea;var JE=Ks.createWebChannelTransport=function(){return new Ro},XR=Ks.getStatEventTarget=function(){return Eh()},Nh=Ks.ErrorCode=Em,Hm=Ks.EventType=gv,Lv=Ks.Event=Xo,zm=Ks.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Vv=Ks.FetchXmlHttpFactory=kh,Uv=Ks.WebChannel=DE,RS=Ks.XhrIo=Li;const eC="@firebase/firestore";class Mr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");let Ph="9.6.7";const Pl=new Rs.Yd("@firebase/firestore");function tC(){return Pl.logLevel}function ze(n,...e){if(Pl.logLevel<=Rs.in.DEBUG){const t=e.map(Bv);Pl.debug(`Firestore (${Ph}): ${n}`,...t)}}function Vi(n,...e){if(Pl.logLevel<=Rs.in.ERROR){const t=e.map(Bv);Pl.error(`Firestore (${Ph}): ${n}`,...t)}}function Fh(n,...e){if(Pl.logLevel<=Rs.in.WARN){const t=e.map(Bv);Pl.warn(`Firestore (${Ph}): ${n}`,...t)}}function Bv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${Ph}) INTERNAL ASSERTION FAILED: `+n;throw Vi(e),new Error(e)}function Rt(n,e){n||pt()}function Xe(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class NS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mr.UNAUTHENTICATED))}shutdown(){}}class tO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nO{constructor(e){this.t=e,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let c=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new xr,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,we.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new xr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Rt("string"==typeof i.accessToken),new NS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Mr(e)}}class Vc{constructor(e,t,i){this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class jv{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new Vc(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=s=>{null!=s.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new nC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.I(i),this.T=i=>t.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Hv(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}Fs.A=-1;class sC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=Hv(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function Ft(n,e){return n<e?-1:n>e?1:0}function td(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function oC(n){return n+"\0"}class Zi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zi.fromMillis(Date.now())}static fromDate(e){return Zi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Zi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Zi(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function zv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function aC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Fl{constructor(e,t,i){void 0===t?t=0:t>e.length&&pt(),void 0===i?i=e.length-t:i>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Fl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fl?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),c=t.get(r);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends Fl{construct(e,t,i){return new Yt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Pe(_e.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const Gv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mi extends Fl{construct(e,t,i){return new mi(e,t,i)}static isValidIdentifier(e){return Gv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mi(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Pe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const h=e[r];if("\\"===h){if(r+1===e.length)throw new Pe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Pe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else"`"===h?(c=!c,r++):"."!==h||c?(i+=h,r++):(s(),r++)}if(s(),c)throw new Pe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mi(t)}static emptyPath(){return new mi([])}}class ka{constructor(e){this.fields=e,e.sort(mi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return td(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new sr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const lC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ll(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=lC.exec(n);if(Rt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ni(n.seconds),nanos:ni(n.nanos)}}function ni(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Vl(n){return"string"==typeof n?sr.fromBase64String(n):sr.fromUint8Array(n)}function Gm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ap(n){const e=n.mapValue.fields.__previous_value__;return Gm(e)?Ap(e):e}function Mp(n){const e=Ll(n.mapValue.fields.__local_write_time__.timestampValue);return new Zi(e.seconds,e.nanos)}class cC{constructor(e,t,i,r,s,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Vh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vh&&e.projectId===this.projectId&&e.database===this.database}}function Uc(n){return null==n}function Uh(n){return 0===n&&1/n==-1/0}function uC(n){return"number"==typeof n&&Number.isInteger(n)&&!Uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(Yt.fromString(e))}static fromName(e){return new rt(Yt.fromString(e).popFirst(5))}static empty(){return new rt(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new Yt(e.slice()))}}const PS={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function id(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gm(n)?4:10:pt()}function _i(n,e){if(n===e)return!0;const t=id(n);if(t!==id(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mp(n).isEqual(Mp(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ll(i.timestampValue),c=Ll(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Vl(n.bytesValue).isEqual(Vl(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return ni(i.geoPointValue.latitude)===ni(r.geoPointValue.latitude)&&ni(i.geoPointValue.longitude)===ni(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return ni(i.integerValue)===ni(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=ni(i.doubleValue),c=ni(r.doubleValue);return s===c?Uh(s)===Uh(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return td(n.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(zv(s)!==zv(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!_i(s[h],c[h])))return!1;return!0}(n,e);default:return pt()}var r}function xp(n,e){return void 0!==(n.values||[]).find(t=>_i(t,e))}function Bh(n,e){if(n===e)return 0;const t=id(n),i=id(e);if(t!==i)return Ft(t,i);switch(t){case 0:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(r,s){const c=ni(r.integerValue||r.doubleValue),h=ni(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return FS(n.timestampValue,e.timestampValue);case 4:return FS(Mp(n),Mp(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(r,s){const c=Vl(r),h=Vl(s);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const c=r.split("/"),h=s.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Ft(c[p],h[p]);if(0!==y)return y}return Ft(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const c=Ft(ni(r.latitude),ni(s.latitude));return 0!==c?c:Ft(ni(r.longitude),ni(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const c=r.values||[],h=s.values||[];for(let p=0;p<c.length&&p<h.length;++p){const y=Bh(c[p],h[p]);if(y)return y}return Ft(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){const c=r.fields||{},h=Object.keys(c),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let I=0;I<h.length&&I<y.length;++I){const D=Ft(h[I],y[I]);if(0!==D)return D;const x=Bh(c[h[I]],p[y[I]]);if(0!==x)return x}return Ft(h.length,y.length)}(n.mapValue,e.mapValue);default:throw pt()}}function FS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=Ll(n),i=Ll(e),r=Ft(t.seconds,i.seconds);return 0!==r?r:Ft(t.nanos,i.nanos)}function kp(n){return $m(n)}function $m(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Ll(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Vl(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=$m(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const h of r)c?c=!1:s+=",",s+=`${h}:${$m(i.fields[h])}`;return s+"}"}(n.mapValue):pt();var e}function $v(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qv(n){return!!n&&"integerValue"in n}function jh(n){return!!n&&"arrayValue"in n}function Wv(n){return!!n&&"nullValue"in n}function dC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qm(n){return!!n&&"mapValue"in n}function Rp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nd(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Rp(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rp(n.arrayValue.values[t]);return e}return Object.assign({},n)}class kr{constructor(e){this.value=e}static empty(){return new kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rp(t)}setAll(e){let t=mi.emptyPath(),i={},r=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=h.popLast()}c?i[h.lastSegment()]=Rp(c):r.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());qm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];qm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){nd(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new kr(Rp(this.value))}}function hC(n){const e=[];return nd(n.fields,(t,i)=>{const r=new mi([t]);if(qm(i)){const s=hC(i.mapValue).fields;if(0===s.length)e.push(r);else for(const c of s)e.push(r.child(c))}else e.push(r)}),new ka(e)}class ii{constructor(e,t,i,r,s,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(e){return new ii(e,0,St.min(),St.min(),kr.empty(),0)}static newFoundDocument(e,t,i){return new ii(e,1,t,St.min(),i,0)}static newNoDocument(e,t){return new ii(e,2,t,St.min(),kr.empty(),0)}static newUnknownDocument(e,t){return new ii(e,3,t,St.min(),kr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ii&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ii(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let Kv=(()=>{class n{constructor(t,i,r,s){this.indexId=t,this.collectionGroup=i,this.fields=r,this.indexState=s}}return n.UNKNOWN_ID=-1,n})();class Wm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hh(0,Op.min())}}class Op{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Op(St.min(),rt.empty(),-1)}}class LS{constructor(e,t=null,i=[],r=[],s=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=h,this.P=null}}function Jo(n,e=null,t=[],i=[],r=null,s=null,c=null){return new LS(n,e,t,i,r,s,c)}function rd(n){const e=Xe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+kp(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Uc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>kp(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>kp(i)).join(",")),e.P=t}return e.P}function Km(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!Qv(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!_i(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fC(n.startAt,e.startAt)&&fC(n.endAt,e.endAt)}function Zv(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class zr extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,i):new US(e,t,i):"array-contains"===t?new HS(e,i):"in"===t?new zS(e,i):"not-in"===t?new Ym(e,i):"array-contains-any"===t?new Yv(e,i):new zr(e,t,i)}static v(e,t,i){return"in"===t?new BS(e,i):new jS(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Bh(t,this.value)):null!==t&&id(this.value)===id(t)&&this.V(Bh(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class US extends zr{constructor(e,t,i){super(e,t,i),this.key=rt.fromName(i.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.V(t)}}class BS extends zr{constructor(e,t){super(e,"in",t),this.keys=Zm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jS extends zr{constructor(e,t){super(e,"not-in",t),this.keys=Zm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Zm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>rt.fromName(i.referenceValue))}class HS extends zr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jh(t)&&xp(t.arrayValue,this.value)}}class zS extends zr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xp(this.value.arrayValue,t)}}class Ym extends zr{constructor(e,t){super(e,"not-in",t)}matches(e){if(xp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xp(this.value.arrayValue,t)}}class Yv extends zr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>xp(this.value.arrayValue,i))}}class zh{constructor(e,t){this.position=e,this.inclusive=t}}class Bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Qv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Xv(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],c=n.position[r];if(i=s.field.isKeyField()?rt.comparator(rt.fromName(c.referenceValue),t.key):Bh(c,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function fC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_i(n.position[t],e.position[t]))return!1;return!0}class Ul{constructor(e,t=null,i=[],r=[],s=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function Qm(n,e,t,i,r,s,c,h){return new Ul(n,e,t,i,r,s,c,h)}function Np(n){return new Ul(n)}function Xm(n){return!Uc(n.limit)&&"F"===n.limitType}function Pp(n){return!Uc(n.limit)&&"L"===n.limitType}function Jm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function e_(n){for(const e of n.filters)if(e.S())return e.field;return null}function t_(n){return null!==n.collectionGroup}function sd(n){const e=Xe(n);if(null===e.D){e.D=[];const t=e_(e),i=Jm(e);if(null!==t&&null===i)t.isKeyField()||e.D.push(new Bc(t)),e.D.push(new Bc(mi.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Bc(mi.keyField(),s))}}}return e.D}function Yi(n){const e=Xe(n);if(!e.C)if("F"===e.limitType)e.C=Jo(e.path,e.collectionGroup,sd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of sd(e))t.push(new Bc(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new zh(e.endAt.position,!e.endAt.inclusive):null,r=e.startAt?new zh(e.startAt.position,!e.startAt.inclusive):null;e.C=Jo(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.C}function Fp(n,e,t){return new Ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lp(n,e){return Km(Yi(n),Yi(e))&&n.limitType===e.limitType}function pC(n){return`${rd(Yi(n))}|lt:${n.limitType}`}function gC(n){return`Query(target=${function VS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${kp(i.value)}`;var i}).join(", ")}]`),Uc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>kp(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>kp(t)).join(",")),`Target(${e})`}(Yi(n))}; limitType=${n.limitType})`}function Vp(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):rt.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,c){const h=Xv(r,s,c);return r.inclusive?h<=0:h<0}(t.startAt,sd(t),i)||t.endAt&&!function(r,s,c){const h=Xv(r,s,c);return r.inclusive?h>=0:h>0}(t.endAt,sd(t),i)));var t,i}function Jv(n){return(e,t)=>{let i=!1;for(const r of sd(n)){const s=eb(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function eb(n,e,t){const i=n.field.isKeyField()?rt.comparator(e.key,t.key):function(r,s,c){const h=s.data.field(r),p=c.data.field(r);return null!==h&&null!==p?Bh(h,p):pt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return pt()}}function Gh(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function mC(n){return{integerValue:""+n}}function n_(n,e){return uC(e)?mC(e):Gh(n,e)}class Up{constructor(){this._=void 0}}function _C(n,e,t){return n instanceof jc?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof od?bC(n,e):n instanceof Hc?ad(n,e):function(i,r){const s=vC(i,r),c=wC(s)+wC(i.k);return qv(s)&&qv(i.k)?mC(c):Gh(i.O,c)}(n,e)}function yC(n,e,t){return n instanceof od?bC(n,e):n instanceof Hc?ad(n,e):t}function vC(n,e){return n instanceof ld?qv(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class jc extends Up{}class od extends Up{constructor(e){super(),this.elements=e}}function bC(n,e){const t=EC(e);for(const i of n.elements)t.some(r=>_i(r,i))||t.push(i);return{arrayValue:{values:t}}}class Hc extends Up{constructor(e){super(),this.elements=e}}function ad(n,e){let t=EC(e);for(const i of n.elements)t=t.filter(r=>!_i(r,i));return{arrayValue:{values:t}}}class ld extends Up{constructor(e,t){super(),this.O=e,this.k=t}}function wC(n){return ni(n.integerValue||n.doubleValue)}function EC(n){return jh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ra{constructor(e,t){this.field=e,this.transform=t}}class $S{constructor(e,t){this.version=e,this.transformResults=t}}class Qi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qi}static exists(e){return new Qi(void 0,e)}static updateTime(e){return new Qi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function i_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cs{}function tb(n,e,t){n instanceof Bp?function(i,r,s){const c=i.value.clone(),h=TC(i.fieldTransforms,r,s.transformResults);c.setAll(h),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof cd?function(i,r,s){if(!i_(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=TC(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(IC(i)),h.setAll(c),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function r_(n,e,t){var r;n instanceof Bp?function(i,r,s){if(!i_(i.precondition,r))return;const c=i.value.clone(),h=rb(i.fieldTransforms,s,r);c.setAll(h),r.convertToFoundDocument(ib(r),c).setHasLocalMutations()}(n,e,t):n instanceof cd?function(i,r,s){if(!i_(i.precondition,r))return;const c=rb(i.fieldTransforms,s,r),h=r.data;h.setAll(IC(i)),h.setAll(c),r.convertToFoundDocument(ib(r),h).setHasLocalMutations()}(n,e,t):i_(n.precondition,r=e)&&r.convertToNoDocument(St.min())}function CC(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=vC(i.transform,r||null);null!=s&&(null==t&&(t=kr.empty()),t.set(i.field,s))}return t||null}function nb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&td(t,i,(r,s)=>function GS(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof od&&i instanceof od||t instanceof Hc&&i instanceof Hc?td(t.elements,i.elements,_i):t instanceof ld&&i instanceof ld?_i(t.k,i.k):t instanceof jc&&i instanceof jc);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}function ib(n){return n.isFoundDocument()?n.version:St.min()}class Bp extends cs{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}}class cd extends cs{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function IC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function TC(n,e,t){const i=new Map;Rt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],c=s.transform,h=e.data.field(s.field);i.set(s.field,yC(c,h,t[r]))}return i}function rb(n,e,t){const i=new Map;for(const r of n){const s=r.transform,c=t.data.field(r.field);i.set(r.field,_C(s,c,e))}return i}class s_ extends cs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class o_ extends cs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class qS{constructor(e){this.count=e}}var Xi,gn;function WS(n){switch(n){default:return pt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function a_(n){if(void 0===n)return Vi("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Xi.OK:return _e.OK;case Xi.CANCELLED:return _e.CANCELLED;case Xi.UNKNOWN:return _e.UNKNOWN;case Xi.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Xi.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Xi.INTERNAL:return _e.INTERNAL;case Xi.UNAVAILABLE:return _e.UNAVAILABLE;case Xi.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Xi.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Xi.NOT_FOUND:return _e.NOT_FOUND;case Xi.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Xi.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Xi.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Xi.ABORTED:return _e.ABORTED;case Xi.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Xi.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Xi.DATA_LOSS:return _e.DATA_LOSS;default:return pt()}}(gn=Xi||(Xi={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class Ui{constructor(e,t){this.comparator=e,this.root=t||pr.EMPTY}insert(e,t){return new Ui(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new Ui(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jp(this.root,e,this.comparator,!1)}getReverseIterator(){return new jp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jp(this.root,e,this.comparator,!0)}}class jp{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pr{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:pr.RED,this.left=null!=r?r:pr.EMPTY,this.right=null!=s?s:pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new pr(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return pr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1,pr.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new pr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yi{constructor(e){this.comparator=e,this.data=new Ui(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oo(this.data.getIterator())}getIteratorFrom(e){return new Oo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof yi)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yi(this.comparator);return t.data=e,t}}class Oo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hp(n){return n.hasNext()?n.getNext():void 0}const iO=new Ui(rt.comparator);function Ys(){return iO}const DC=new Ui(rt.comparator);function l_(){return DC}const KS=new Ui(rt.comparator),rO=new yi(rt.comparator);function En(...n){let e=rO;for(const t of n)e=e.add(t);return e}const sb=new yi(Ft);function c_(){return sb}class ud{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,zp.createSynthesizedTargetChangeForCurrentChange(e,t)),new ud(St.min(),i,c_(),Ys(),En())}}class zp{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new zp(sr.EMPTY_BYTE_STRING,t,En(),En(),En())}}class u_{constructor(e,t,i,r){this.M=e,this.removedTargetIds=t,this.key=i,this.$=r}}class SC{constructor(e,t){this.targetId=e,this.F=t}}class AC{constructor(e,t,i=sr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class MC{constructor(){this.B=0,this.L=dd(),this.U=sr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=En(),t=En(),i=En();return this.L.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:pt()}}),new zp(this.U,this.q,e,t,i)}J(){this.K=!1,this.L=dd()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class ZS{constructor(e){this.nt=e,this.st=new Map,this.it=Ys(),this.rt=Gp(),this.ot=new yi(Ft)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const i=this.lt(t);switch(e.state){case 0:this.ft(t)&&i.W(e.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(t);break;case 3:this.ft(t)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),i.W(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((i,r)=>{this.ft(r)&&t(r)})}_t(e){const t=e.targetId,i=e.F.count,r=this.wt(t);if(r){const s=r.target;if(Zv(s))if(0===i){const c=new rt(s.path);this.at(t,c,ii.newNoDocument(c,St.min()))}else Rt(1===i);else this.gt(t)!==i&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,c)=>{const h=this.wt(c);if(h){if(s.current&&Zv(h.target)){const p=new rt(h.target.path);null!==this.it.get(p)||this.It(c,p)||this.at(c,p,ii.newNoDocument(p,e))}s.j&&(t.set(c,s.H()),s.J())}});let i=En();this.rt.forEach((s,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.it.forEach((s,c)=>c.setReadTime(e));const r=new ud(e,t,this.ot,this.it,i);return this.it=Ys(),this.rt=Gp(),this.ot=new yi(Ft),r}ut(e,t){if(!this.ft(e))return;const i=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,i),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,i){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),i&&(this.it=this.it.insert(t,i))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new MC,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new yi(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new MC),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Gp(){return new Ui(rt.comparator)}function dd(){return new Ui(rt.comparator)}const YS={asc:"ASCENDING",desc:"DESCENDING"},$p={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class QS{constructor(e,t){this.databaseId=e,this.N=t}}function qp(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d_(n,e){return n.N?e.toBase64():e.toUint8Array()}function Oa(n,e){return qp(n,e.toTimestamp())}function Ai(n){return Rt(!!n),St.fromTimestamp(function(e){const t=Ll(e);return new Zi(t.seconds,t.nanos)}(n))}function gr(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function zc(n){const e=Yt.fromString(n);return Rt(ub(e)),e}function Gc(n,e){return gr(n.databaseId,e.path)}function Bi(n,e){const t=zc(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(fd(t))}function Wp(n,e){return gr(n.databaseId,e)}function hd(n){const e=zc(n);return 4===e.length?Yt.emptyPath():fd(e)}function Na(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fd(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pd(n,e,t){return{name:Gc(n,e),fields:t.value.mapValue.fields}}function gd(n,e,t){const i=Bi(n,e.name),r=Ai(e.updateTime),s=new kr({mapValue:{fields:e.fields}}),c=ii.newFoundDocument(i,r,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Pa(n,e){let t;if(e instanceof Bp)t={update:pd(n,e.key,e.value)};else if(e instanceof s_)t={delete:Gc(n,e.key)};else if(e instanceof cd)t={update:pd(n,e.key,e.data),updateMask:PC(e.fieldMask)};else{if(!(e instanceof o_))return pt();t={verify:Gc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof jc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof od)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Hc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ld)return{fieldPath:s.field.canonicalString(),increment:c.k};throw pt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:Oa(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:pt()),t;var r}function $c(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Qi.updateTime(Ai(r.updateTime)):void 0!==r.exists?Qi.exists(r.exists):Qi.none():Qi.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,c){let h=null;"setToServerValue"in c?(Rt("REQUEST_TIME"===c.setToServerValue),h=new jc):"appendMissingElements"in c?h=new od(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Hc(c.removeAllFromArray.values||[]):"increment"in c?h=new ld(s,c.increment):pt();const p=mi.fromServerFormat(c.fieldPath);return new Ra(p,h)}(n,r)):[];var r;if(e.update){const r=Bi(n,e.update.name),s=new kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ka((e.updateMask.fieldPaths||[]).map(y=>mi.fromServerFormat(y)));return new cd(r,s,c,t,i)}return new Bp(r,s,t,i)}if(e.delete){const r=Bi(n,e.delete);return new s_(r,t)}if(e.verify){const r=Bi(n,e.verify);return new o_(r,t)}return pt()}function ob(n,e){return{documents:[Wp(n,e.path)]}}function ab(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Wp(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Wp(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(I=>function(D){if("=="===D.op){if(dC(D.value))return{unaryFilter:{field:md(D.field),op:"IS_NAN"}};if(Wv(D.value))return{unaryFilter:{field:md(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(dC(D.value))return{unaryFilter:{field:md(D.field),op:"IS_NOT_NAN"}};if(Wv(D.value))return{unaryFilter:{field:md(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:md(D.field),op:OC(D.op),value:D.value}}}(I));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:md((I=y).field),direction:RC(I.dir)};var I})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(y=e.limit,n.N||Uc(y)?y:{value:y});var y,h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function lb(n){let e=hd(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Rt(1===i);const I=t.from[0];I.allDescendants?r=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=cb(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(I=>{return new Bc(Wh((D=I).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(I){let D;return D="object"==typeof I?I.value:I,Uc(D)?null:D}(t.limit));let p=null;var I;t.startAt&&(p=new zh((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new zh(I.values||[],!I.before)}(t.endAt)),Qm(e,r,c,s,h,"F",p,y)}function cb(n){return n?void 0!==n.unaryFilter?[XS(n)]:void 0!==n.fieldFilter?[NC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>cb(e)).reduce((e,t)=>e.concat(t)):pt():[]}function RC(n){return YS[n]}function OC(n){return $p[n]}function md(n){return{fieldPath:n.canonicalString()}}function Wh(n){return mi.fromServerFormat(n.fieldPath)}function NC(n){return zr.create(Wh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function XS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Wh(n.unaryFilter.field);return zr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Wh(n.unaryFilter.field);return zr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wh(n.unaryFilter.field);return zr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Wh(n.unaryFilter.field);return zr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function PC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ub(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function mr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=db(e)),e=JS(n.get(t),e);return db(e)}function JS(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function db(n){return n+"\x01\x01"}function Fa(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&pt(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let p;0===r.length?p=h:(r+=h,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:pt()}s=c+2}return new Yt(i)}class FC{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Qs{constructor(e,t,i){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=i}}Qs.store="owner",Qs.key="owner";class qc{constructor(e,t,i){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=i}}qc.store="mutationQueues",qc.keyPath="userId";class ri{constructor(e,t,i,r,s){this.userId=e,this.batchId=t,this.localWriteTimeMs=i,this.baseMutations=r,this.mutations=s}}ri.store="mutations",ri.keyPath="batchId",ri.userMutationsIndex="userMutationsIndex",ri.userMutationsKeyPath=["userId","batchId"];class Gr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,mr(t)]}static key(e,t,i){return[e,mr(t),i]}}Gr.store="documentMutations",Gr.PLACEHOLDER=new Gr;class hb{constructor(e,t){this.path=e,this.readTime=t}}class fb{constructor(e,t){this.path=e,this.version=t}}class Mi{constructor(e,t,i,r,s,c){this.unknownDocument=e,this.noDocument=t,this.document=i,this.hasCommittedMutations=r,this.readTime=s,this.parentPath=c}}Mi.store="remoteDocuments",Mi.readTimeIndex="readTimeIndex",Mi.readTimeIndexPath="readTime",Mi.collectionReadTimeIndex="collectionReadTimeIndex",Mi.collectionReadTimeIndexPath=["parentPath","readTime"];class Bl{constructor(e){this.byteSize=e}}Bl.store="remoteDocumentGlobal",Bl.key="remoteDocumentGlobalKey";class Xs{constructor(e,t,i,r,s,c,h){this.targetId=e,this.canonicalId=t,this.readTime=i,this.resumeToken=r,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=c,this.query=h}}Xs.store="targets",Xs.keyPath="targetId",Xs.queryTargetsIndexName="queryTargetsIndex",Xs.queryTargetsKeyPath=["canonicalId","targetId"];class $r{constructor(e,t,i){this.targetId=e,this.path=t,this.sequenceNumber=i}}$r.store="targetDocuments",$r.keyPath=["targetId","path"],$r.documentTargetsIndex="documentTargetsIndex",$r.documentTargetsKeyPath=["path","targetId"];class Js{constructor(e,t,i,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=i,this.targetCount=r}}Js.key="targetGlobalKey",Js.store="targetGlobal";class Wc{constructor(e,t){this.collectionId=e,this.parent=t}}Wc.store="collectionParents",Wc.keyPath=["collectionId","parent"];class Kc{constructor(e,t,i,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=i,this.inForeground=r}}Kc.store="clientMetadata",Kc.keyPath="clientId";class Kh{constructor(e,t,i){this.bundleId=e,this.createTime=t,this.version=i}}Kh.store="bundles",Kh.keyPath="bundleId";class ea{constructor(e,t,i){this.name=e,this.readTime=t,this.bundledQuery=i}}ea.store="namedQueries",ea.keyPath="name";class eo{constructor(e,t,i){this.indexId=e,this.collectionGroup=t,this.fields=i}}eo.store="indexConfiguration",eo.keyPath="indexId",eo.collectionGroupIndex="collectionGroupIndex",eo.collectionGroupIndexPath="collectionGroup";class to{constructor(e,t,i,r,s,c){this.indexId=e,this.uid=t,this.sequenceNumber=i,this.readTime=r,this.documentKey=s,this.largestBatchId=c}}to.store="indexState",to.keyPath=["indexId","uid"],to.sequenceNumberIndex="sequenceNumberIndex",to.sequenceNumberIndexPath=["uid","sequenceNumber"];class No{constructor(e,t,i,r,s){this.indexId=e,this.uid=t,this.arrayValue=i,this.directionalValue=r,this.documentKey=s}}No.store="indexEntries",No.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],No.documentKeyIndex="documentKeyIndex",No.documentKeyIndexPath=["indexId","uid","documentKey"];class or{constructor(e,t,i,r,s,c){this.userId=e,this.collectionPath=t,this.documentId=i,this.collectionGroup=r,this.largestBatchId=s,this.overlayMutation=c}}or.store="documentOverlays",or.keyPath=["userId","collectionPath","documentId"],or.collectionPathOverlayIndex="collectionPathOverlayIndex",or.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],or.collectionGroupOverlayIndex="collectionGroupOverlayIndex",or.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const Kp=[qc.store,ri.store,Gr.store,Mi.store,Xs.store,Qs.store,Js.store,$r.store,Kc.store,Bl.store,Wc.store,Kh.store,ea.store],LC=[...Kp,or.store],VC=[...LC,eo.store,to.store,No.store],UC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(t){return Ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,i)=>{t(e)})}static reject(e){return new Ce((t,i)=>{i(e)})}static waitFor(e){return new Ce((t,i)=>{let r=0,s=0,c=!1;e.forEach(h=>{++r,h.next(()=>{++s,c&&s===r&&t()},p=>i(p))}),c=!0,s===r&&t()})}static or(e){let t=Ce.resolve(!1);for(const i of e)t=t.next(r=>r?Ce.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}}class h_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new xr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Zp(e,t.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=Yp(i.target.error);this.At.reject(new Zp(e,r))}}static open(e,t,i,r){try{return new h_(t,e.transaction(r,i))}catch(s){throw new Zp(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new HC(t)}}class ta{constructor(e,t,i){this.name=e,this.version=t,this.bt=i,12.2===ta.vt((0,N.z$)())&&Vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),jl(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,N.hl)())return!1;if(ta.St())return!0;const e=(0,N.z$)(),t=ta.vt(e),i=0<t&&t<10,r=ta.Dt(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}xt(e){var t=this;return(0,we.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new Zp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;r("VersionError"===h.name?new Pe(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Pe(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Zp(e,h))},s.onupgradeneeded=c=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=i=>t.Ot(i)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,we.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.xt(e);const p=h_.open(s.db,e,c?"readonly":"readwrite",i),y=r(p).next(I=>(p.Pt(),I)).catch(I=>(p.abort(I),Ce.reject(I))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&h<3;if(ze("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jC{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return jl(this.$t.delete())}}class Zp extends Pe{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zc(n){return"IndexedDbTransactionError"===n.name}class HC{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),jl(i)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),jl(this.store.add(e))}get(e){return jl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),jl(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),jl(this.store.count())}qt(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.Kt(r,(c,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new Ce((s,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}Gt(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(s,c,h)=>h.delete())}Qt(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.Kt(r,t)}Wt(e){const t=this.cursor({});return new Ce((i,r)=>{t.onerror=s=>{const c=Yp(s.target.error);r(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():i()}):i()}})}Kt(e,t){const i=[];return new Ce((r,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void r();const p=new jC(h),y=t(h.primaryKey,h.value,p);if(y instanceof Ce){const I=y.catch(D=>(p.done(),Ce.reject(D)));i.push(I)}p.isDone?r():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>Ce.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.jt?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jl(n){return new Ce((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=Yp(i.target.error);t(r)}})}let eA=!1;function Yp(n){const e=ta.vt((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eA||(eA=!0,setTimeout(()=>{throw i},0)),i}}return n}class zC extends BC{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Rr(n,e){const t=Xe(n);return ta.Nt(t.zt,e)}class _d{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&tb(s,e,i[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&r_(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&r_(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const i=e.get(t.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(St.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),En())}isEqual(e){return this.batchId===e.batchId&&td(this.mutations,e.mutations,(t,i)=>nb(t,i))&&td(this.baseMutations,e.baseMutations,(t,i)=>nb(t,i))}}class f_{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Rt(e.mutations.length===i.length);let r=KS;const s=e.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new f_(e,t,i,r)}}class Qp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class La{constructor(e,t,i,r,s=St.min(),c=St.min(),h=sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new La(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class GC{constructor(e){this.Ht=e}}function Xp(n,e){let t;if(e.document)t=gd(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=rt.fromSegments(e.noDocument.path),r=Hl(e.noDocument.readTime);t=ii.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const i=rt.fromSegments(e.unknownDocument.path),r=Hl(e.unknownDocument.version);t=ii.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime($C(e.readTime)),t}function Jp(n,e){const t=eg(e.readTime),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const r={name:Gc(c=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:qp(c,h.version.toTimestamp())};return new Mi(null,null,r,e.hasCommittedMutations,t,i)}var c,h;if(e.isNoDocument()){const r=e.key.path.toArray(),s=yd(e.version),c=e.hasCommittedMutations;return new Mi(null,new hb(r,s),null,c,t,i)}if(e.isUnknownDocument()){const r=e.key.path.toArray(),s=yd(e.version);return new Mi(new fb(r,s),null,null,!0,t,i)}return pt()}function eg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $C(n){const e=new Zi(n[0],n[1]);return St.fromTimestamp(e)}function yd(n){const e=n.toTimestamp();return new FC(e.seconds,e.nanoseconds)}function Hl(n){const e=new Zi(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Yc(n,e){const t=(e.baseMutations||[]).map(s=>$c(n.Ht,s));for(let s=0;s<e.mutations.length-1;++s){const c=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(c.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>$c(n.Ht,s)),r=Zi.fromMillis(e.localWriteTimeMs);return new _d(e.batchId,r,t,i)}function Zh(n){const e=Hl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hl(n.lastLimboFreeSnapshotVersion):St.min();let i;var r;return void 0!==n.query.documents?(Rt(1===(r=n.query).documents.length),i=Yi(Np(hd(r.documents[0])))):i=Yi(lb(n.query)),new La(i,n.targetId,0,n.lastListenSequenceNumber,e,t,sr.fromBase64String(n.resumeToken))}function pb(n,e){const t=yd(e.snapshotVersion),i=yd(e.lastLimboFreeSnapshotVersion);let r;r=Zv(e.target)?ob(n.Ht,e.target):ab(n.Ht,e.target);const s=e.resumeToken.toBase64();return new Xs(e.targetId,rd(e.target),t,s,e.sequenceNumber,i,r)}function tg(n){const e=lb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Fp(e,e.limit,"L"):e}function p_(n,e){return new Qp(e.largestBatchId,$c(n.Ht,e.overlayMutation))}function gb(n,e){const t=e.path.lastSegment();return[n,mr(e.path.popLast()),t]}class mb{getBundleMetadata(e,t){return g_(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Hl(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return g_(e).put({bundleId:(i=t).id,createTime:yd(Ai(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return qC(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:tg(r.bundledQuery),readTime:Hl(r.readTime)};var r})}saveNamedQuery(e,t){return qC(e).put({name:(i=t).name,readTime:yd(Ai(i.readTime)),bundledQuery:i.bundledQuery});var i}}function g_(n){return Rr(n,Kh.store)}function qC(n){return Rr(n,ea.store)}class m_{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new m_(e,t.uid||"")}getOverlay(e,t){return Yh(e).get(gb(this.userId,t)).next(i=>i?p_(this.O,i):null)}saveOverlays(e,t,i){const r=[];return i.forEach(s=>{const c=new Qp(t,s);r.push(this.Yt(e,c))}),Ce.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(c=>r.add(mr(c.getCollectionPath())));const s=[];return r.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(Yh(e).Gt(or.collectionPathOverlayIndex,h))}),Ce.waitFor(s)}getOverlaysForCollection(e,t,i){const r=new Map,s=mr(t),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Yh(e).qt(or.collectionPathOverlayIndex,c).next(h=>{for(const p of h){const y=p_(this.O,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=new Map;let c;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yh(e).Qt({index:or.collectionGroupOverlayIndex,range:h},(p,y,I)=>{const D=p_(this.O,y);s.size<r||D.largestBatchId===c?(s.set(D.getKey(),D),c=D.largestBatchId):I.done()}).next(()=>s)}Yt(e,t){return Yh(e).put(function(i,r,s){const[c,h,p]=gb(r,s.mutation.key);return new or(r,h,p,s.mutation.key.getCollectionGroup(),s.largestBatchId,Pa(i.Ht,s.mutation))}(this.O,this.userId,t))}}function Yh(n){return Rr(n,or.store)}class Qh{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(ni(e.integerValue));else if("doubleValue"in e){const i=ni(e.doubleValue);isNaN(i)?this.ee(t,13):(this.ee(t,15),Uh(i)?t.ne(0):t.ne(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ee(t,20),"string"==typeof i?t.se(i):(t.se(`${i.seconds||""}`),t.ne(i.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Vl(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?_i(e,PS)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):pt()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const i=e.fields||{};this.ee(t,55);for(const r of Object.keys(i))this.ie(r,t),this.Zt(i[r],t)}ae(e,t){const i=e.values||[];this.ee(t,50);for(const r of i)this.Zt(r,t)}ce(e,t){this.ee(t,37),rt.fromName(e).path.forEach(i=>{this.ee(t,60),this.he(i,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function WC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function KC(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=WC(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Qh.le=new Qh;class ZC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.de(i.value),i=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.me(i.value),i=t.next();this.ge()}ye(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{const r=t.codePointAt(0);this.de(240|r>>>18),this.de(128|63&r>>>12),this.de(128|63&r>>>6),this.de(128|63&r)}}this._e()}pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{const r=t.codePointAt(0);this.me(240|r>>>18),this.me(128|63&r>>>12),this.me(128|63&r>>>6),this.me(128|63&r)}}this.ge()}Ie(e){const t=this.Ee(e),i=KC(t);this.Te(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ae(e){const t=this.Ee(e),i=KC(t);this.Te(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class YC{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class _b{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class __{constructor(){this.Se=new ZC,this.De=new YC(this.Se),this.Ce=new _b(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class y_{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}}function v_(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:(t=yb(n.arrayValue,e.arrayValue),0!==t?t:yb(n.directionalValue,e.directionalValue)))}function yb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class QC{constructor(){this.xe=new b_}addToCollectionParentIndex(e,t){return this.xe.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t,i){return Ce.resolve(En())}getFieldIndex(e,t){return Ce.resolve(null)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}updateCollectionGroup(e,t,i){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class b_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new yi(Yt.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new yi(Yt.comparator)).toArray()}}class XC{constructor(e){this.user=e,this.ke=new b_,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const s={collectionId:i,parent:mr(r)};return vb(e).put(s)}return Ce.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[oC(t),""],!1,!0);return vb(e).qt(r).next(s=>{for(const c of s){if(c.collectionId!==t)break;i.push(Fa(c.parent))}return i})}addFieldIndex(e,t){const i=bb(e),r=new eo((s=t).indexId,s.collectionGroup,s.fields.map(c=>[c.fieldPath.canonicalString(),c.kind]));var s;return delete r.indexId,i.add(r).next()}deleteFieldIndex(e,t){const i=bb(e),r=w_(e),s=ng(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,i){return Ce.resolve(En())}getFieldIndex(e,t){return Ce.resolve(null)}Oe(e,t){const i=new __;for(const r of e.fields.filter(c=>2!==c.kind)){const s=t.data.field(r.fieldPath);if(null==s)return null;const c=i.Ne(r.kind);Qh.le.Xt(s,c)}return i.Ve()}Me(e){const t=new __;return Qh.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const i=bb(e),r=w_(e);return(t?i.qt(eo.collectionGroupIndex,IDBKeyRange.bound(t,t)):i.qt()).next(s=>{const c=[];return Ce.forEach(s,h=>r.get([h.indexId,this.uid]).next(p=>{c.push(function(y,I){const D=I?new Hh(I.sequenceNumber,new Op(Hl(I.readTime),new rt(Fa(I.documentKey)),I.largestBatchId)):Hh.empty(),x=y.fields.map(([P,U])=>new Wm(mi.fromServerFormat(P),U));return new Kv(y.indexId,y.collectionGroup,x,D)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>i.indexState.sequenceNumber-r.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=bb(e),s=w_(e);return this.$e(e).next(c=>r.qt(eo.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>Ce.forEach(h,p=>{return s.put(new to(p.indexId,this.user.uid||"",c,yd((x=i).readTime),mr(x.documentKey.path),x.largestBatchId));var x})))}updateIndexEntries(e,t){const i=new Map;return Ce.forEach(t,(r,s)=>{const c=i.get(r.collectionGroup);return(c?Ce.resolve(c):this.getFieldIndexes(e,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),Ce.forEach(h,p=>this.Fe(e,r,p).next(y=>{const I=this.Be(s,p);return y.isEqual(I)?Ce.resolve():this.Le(e,s,y,I)}))))})}Ue(e,t,i){return ng(e).put(new No(i.indexId,this.uid,i.arrayValue,i.directionalValue,mr(t.key.path)))}qe(e,t,i){return ng(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,mr(t.key.path)])}Fe(e,t,i){const r=ng(e);let s=new yi(v_);return r.Qt({index:No.documentKeyIndex,range:IDBKeyRange.only([i.indexId,this.uid,mr(t.path)])},(c,h)=>{s=s.add(new y_(i.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}Be(e,t){let i=new yi(v_);const r=this.Oe(t,e);if(null==r)return i;const s=t.fields.find(h=>2===h.kind);if(null!=s){const c=e.data.field(s.fieldPath);if(jh(c))for(const h of c.arrayValue.values||[])i=i.add(new y_(t.indexId,e.key,this.Me(h),r))}else i=i.add(new y_(t.indexId,e.key,new Uint8Array,r));return i}Le(e,t,i,r){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(c,h,p,y,I){const D=c.getIterator(),x=h.getIterator();let P=Hp(D),U=Hp(x);for(;P||U;){let J=!1,pe=!1;if(P&&U){const $e=p(P,U);$e<0?pe=!0:$e>0&&(J=!0)}else null!=P?pe=!0:J=!0;J?(y(U),U=Hp(x)):pe?(I(P),P=Hp(D)):(P=Hp(D),U=Hp(x))}}(i,r,v_,c=>{s.push(this.Ue(e,t,c))},c=>{s.push(this.qe(e,t,c))}),Ce.waitFor(s)}$e(e){let t=1;return w_(e).Qt({index:to.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}}function vb(n){return Rr(n,Wc.store)}function ng(n){return Rr(n,No.store)}function bb(n){return Rr(n,eo.store)}function w_(n){return Rr(n,to.store)}const JC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class us{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new us(e,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eI(n,e,t){const i=n.store(ri.store),r=n.store(Gr.store),s=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=i.Qt({range:c},(I,D,x)=>(h++,x.delete()));s.push(p.next(()=>{Rt(1===h)}));const y=[];for(const I of t.mutations){const D=Gr.key(e,I.key.path,t.batchId);s.push(r.delete(D)),y.push(I.key)}return Ce.waitFor(s).next(()=>y)}function xi(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}us.DEFAULT_COLLECTION_PERCENTILE=10,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,us.DEFAULT=new us(41943040,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),us.DISABLED=new us(-1,0,0);class E_{constructor(e,t,i,r){this.userId=e,this.O=t,this.indexManager=i,this.referenceDelegate=r,this.Ke={}}static Jt(e,t,i,r){Rt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new E_(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qc(e).Qt({index:ri.userMutationsIndex,range:i},(r,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=vd(e),c=Qc(e);return c.add({}).next(h=>{Rt("number"==typeof h);const p=new _d(h,t,i,r),y=function(x,P,U){const J=U.baseMutations.map($e=>Pa(x.Ht,$e)),pe=U.mutations.map($e=>Pa(x.Ht,$e));return new ri(P,U.batchId,U.localWriteTime.toMillis(),J,pe)}(this.O,this.userId,p),I=[];let D=new yi((x,P)=>Ft(x.canonicalString(),P.canonicalString()));for(const x of r){const P=Gr.key(this.userId,x.key.path,h);D=D.add(x.key.path.popLast()),I.push(c.put(y)),I.push(s.put(P,Gr.PLACEHOLDER))}return D.forEach(x=>{I.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Ke[h]=p.keys()}),Ce.waitFor(I).next(()=>p)})}lookupMutationBatch(e,t){return Qc(e).get(t).next(i=>i?(Rt(i.userId===this.userId),Yc(this.O,i)):null)}Ge(e,t){return this.Ke[t]?Ce.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Ke[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Qc(e).Qt({index:ri.userMutationsIndex,range:r},(c,h,p)=>{h.userId===this.userId&&(Rt(h.batchId>=i),s=Yc(this.O,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Qc(e).Qt({index:ri.userMutationsIndex,range:t,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qc(e).qt(ri.userMutationsIndex,t).next(i=>i.map(r=>Yc(this.O,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Gr.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return vd(e).Qt({range:r},(c,h,p)=>{const[y,I,D]=c,x=Fa(I);if(y===this.userId&&t.path.isEqual(x))return Qc(e).get(D).next(P=>{if(!P)throw pt();Rt(P.userId===this.userId),s.push(Yc(this.O,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new yi(Ft);const r=[];return t.forEach(s=>{const c=Gr.prefixForPath(this.userId,s.path),h=IDBKeyRange.lowerBound(c),p=vd(e).Qt({range:h},(y,I,D)=>{const[x,P,U]=y,J=Fa(P);x===this.userId&&s.path.isEqual(J)?i=i.add(U):D.done()});r.push(p)}),Ce.waitFor(r).next(()=>this.je(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=Gr.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(s);let h=new yi(Ft);return vd(e).Qt({range:c},(p,y,I)=>{const[D,x,P]=p,U=Fa(x);D===this.userId&&i.isPrefixOf(U)?U.length===r&&(h=h.add(P)):I.done()}).next(()=>this.je(e,h))}je(e,t){const i=[],r=[];return t.forEach(s=>{r.push(Qc(e).get(s).next(c=>{if(null===c)throw pt();Rt(c.userId===this.userId),i.push(Yc(this.O,c))}))}),Ce.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return eI(e.zt,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),Ce.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ce.resolve();const i=IDBKeyRange.lowerBound(Gr.prefixForUser(this.userId)),r=[];return vd(e).Qt({range:i},(s,c,h)=>{if(s[0]===this.userId){const p=Fa(s[1]);r.push(p)}else h.done()}).next(()=>{Rt(0===r.length)})})}containsKey(e,t){return tI(e,this.userId,t)}We(e){return nI(e).get(this.userId).next(t=>t||new qc(this.userId,-1,""))}}function tI(n,e,t){const i=Gr.prefixForPath(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return vd(n).Qt({range:s,jt:!0},(h,p,y)=>{const[I,D,x]=h;I===e&&D===r&&(c=!0),y.done()}).next(()=>c)}function Qc(n){return Rr(n,ri.store)}function vd(n){return Rr(n,Gr.store)}function nI(n){return Rr(n,qc.store)}class Xc{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Xc(0)}static Je(){return new Xc(-1)}}class iI{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const i=new Xc(t.highestTargetId);return t.highestTargetId=i.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>St.fromTimestamp(new Zi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Ye(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Xe(e,r)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(i=>(i.targetCount+=1,this.tn(t,i),this.Xe(e,i))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>na(e).delete(t.targetId)).next(()=>this.Ye(e)).next(i=>(Rt(i.targetCount>0),i.targetCount-=1,this.Xe(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return na(e).Qt((c,h)=>{const p=Zh(h);p.sequenceNumber<=t&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(e,p)))}).next(()=>Ce.waitFor(s)).next(()=>r)}forEachTarget(e,t){return na(e).Qt((i,r)=>{const s=Zh(r);t(s)})}Ye(e){return rI(e).get(Js.key).next(t=>(Rt(null!==t),t))}Xe(e,t){return rI(e).put(Js.key,t)}Ze(e,t){return na(e).put(pb(this.O,t))}tn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const i=rd(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return na(e).Qt({range:r,index:Xs.queryTargetsIndexName},(c,h,p)=>{const y=Zh(h);Km(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Jc(e);return t.forEach(c=>{const h=mr(c.path);r.push(s.put(new $r(i,h))),r.push(this.referenceDelegate.addReference(e,i,c))}),Ce.waitFor(r)}removeMatchingKeys(e,t,i){const r=Jc(e);return Ce.forEach(t,s=>{const c=mr(s.path);return Ce.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Jc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Jc(e);let s=En();return r.Qt({range:i,jt:!0},(c,h,p)=>{const y=Fa(c[1]),I=new rt(y);s=s.add(I)}).next(()=>s)}containsKey(e,t){const i=mr(t.path),r=IDBKeyRange.bound([i],[oC(i)],!1,!0);let s=0;return Jc(e).Qt({index:$r.documentTargetsIndex,jt:!0,range:r},([c,h],p,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}Tt(e,t){return na(e).get(t).next(i=>i?Zh(i):null)}}function na(n){return Rr(n,Xs.store)}function rI(n){return Rr(n,Js.store)}function Jc(n){return Rr(n,$r.store)}function eu(n){return wb.apply(this,arguments)}function wb(){return wb=(0,we.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==UC)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),wb.apply(this,arguments)}function Eb([n,e],[t,i]){const r=Ft(n,t);return 0===r?Ft(e,i):r}class sO{constructor(e){this.en=e,this.buffer=new yi(Eb),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Eb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const i=this.on?3e5:6e4;ze("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,we.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(r){Zc(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield eu(r)}yield t.un(e)}))}}class Ib{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return Ce.resolve(Fs.A);const i=new sO(t);return this.an.forEachTarget(e,r=>i.rn(r.sequenceNumber)).next(()=>this.an.ln(e,r=>i.rn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.an.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(JC)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JC):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let i,r,s,c,h,p,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,c=Date.now(),this.nthSequenceNumber(e,r))).next(D=>(i=D,h=Date.now(),this.removeTargets(e,i,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(D=>(y=Date.now(),tC()<=Rs.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-I}ms\n\tDetermined least recently used ${r} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-I}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class Va{constructor(e,t){this.db=e,this.garbageCollector=new Ib(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}dn(e){let t=0;return this.ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(i,r)=>t(r))}addReference(e,t,i){return C_(e,i)}removeReference(e,t,i){return C_(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return C_(e,t)}wn(e,t){return function(i,r){let s=!1;return nI(i).Wt(c=>tI(i,c,r).next(h=>(h&&(s=!0),Ce.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this._n(e,(c,h)=>{if(h<=t){const p=this.wn(e,c).next(y=>{if(!y)return s++,i.getEntry(e,c).next(()=>(i.removeEntry(c,St.min()),Jc(e).delete([0,mr(c.path)])))});r.push(p)}}).next(()=>Ce.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return C_(e,t)}_n(e,t){const i=Jc(e);let r,s=Fs.A;return i.Qt({index:$r.documentTargetsIndex},([c,h],{path:p,sequenceNumber:y})=>{0===c?(s!==Fs.A&&t(new rt(Fa(r)),s),s=y,r=p):s=Fs.A}).next(()=>{s!==Fs.A&&t(new rt(Fa(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function C_(n,e){return Jc(n).put((i=n.currentSequenceNumber,new $r(0,mr(e.path),i)));var i}class Xh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0!==r){for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t])}else this.inner[i]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),!0;return!1}forEach(e){nd(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return aC(this.inner)}}class ia{constructor(){this.changes=new Xh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ii.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?Ce.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ra{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return zl(e).put(I_(t),i)}removeEntry(e,t){const i=zl(e),r=I_(t);return i.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.mn(e,i)))}getEntry(e,t){return zl(e).get(I_(t)).next(i=>this.gn(t,i))}yn(e,t){return zl(e).get(I_(t)).next(i=>({document:this.gn(t,i),size:xi(i)}))}getEntries(e,t){let i=Ys();return this.pn(e,t,(r,s)=>{const c=this.gn(r,s);i=i.insert(r,c)}).next(()=>i)}In(e,t){let i=Ys(),r=new Ui(rt.comparator);return this.pn(e,t,(s,c)=>{const h=this.gn(s,c);i=i.insert(s,h),r=r.insert(s,xi(c))}).next(()=>({documents:i,En:r}))}pn(e,t,i){if(t.isEmpty())return Ce.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),s=t.getIterator();let c=s.getNext();return zl(e).Qt({range:r},(h,p,y)=>{const I=rt.fromSegments(h);for(;c&&rt.comparator(c,I)<0;)i(c,null),c=s.getNext();c&&c.isEqual(I)&&(i(c,p),c=s.hasNext()?s.getNext():null),c?y.Ut(c.path.toArray()):y.done()}).next(()=>{for(;c;)i(c,null),c=s.hasNext()?s.getNext():null})}getAll(e,t,i){let r=Ys();const s=t.length+1,c={};if(i.isEqual(St.min())){const h=t.toArray();c.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),p=eg(i);c.range=IDBKeyRange.lowerBound([h,p],!0),c.index=Mi.collectionReadTimeIndex}return zl(e).Qt(c,(h,p,y)=>{if(h.length!==s)return;const I=this.gn(rt.fromSegments(h),p);t.isPrefixOf(I.key.path)?r=r.insert(I.key,I):y.done()}).next(()=>r)}newChangeBuffer(e){return new sa(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Tb(e).get(Bl.key).next(t=>(Rt(!!t),t))}mn(e,t){return Tb(e).put(Bl.key,t)}gn(e,t){if(t){const i=Xp(this.O,t);if(!i.isNoDocument()||!i.version.isEqual(St.min()))return i}return ii.newInvalidDocument(e)}}class sa extends ia{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new Xh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new yi((s,c)=>Ft(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.An.get(s);if(c.isValidDocument()){const p=Jp(this.Tn.O,c);r=r.add(s.path.popLast()),i+=xi(p)-h,t.push(this.Tn.addEntry(e,s,p))}else if(i-=h,this.trackRemovals){const p=Jp(this.Tn.O,c.convertToNoDocument(St.min()));t.push(this.Tn.addEntry(e,s,p))}else t.push(this.Tn.removeEntry(e,s))}),r.forEach(s=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Tn.updateMetadata(e,i)),Ce.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(i=>(this.An.set(t,i.size),i.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:i,En:r})=>(r.forEach((s,c)=>{this.An.set(s,c)}),i))}}function Tb(n){return Rr(n,Bl.store)}function zl(n){return Rr(n,Mi.store)}function I_(n){return n.path.toArray()}class tA{constructor(e){this.O=e}kt(e,t,i,r){const s=new h_("createOrUpgrade",t);var h;i<1&&r>=1&&(e.createObjectStore(Qs.store),(h=e).createObjectStore(qc.store,{keyPath:qc.keyPath}),h.createObjectStore(ri.store,{keyPath:ri.keyPath,autoIncrement:!0}).createIndex(ri.userMutationsIndex,ri.userMutationsKeyPath,{unique:!0}),h.createObjectStore(Gr.store),sI(e),function(h){h.createObjectStore(Mi.store)}(e));let c=Ce.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore($r.store),h.deleteObjectStore(Xs.store),h.deleteObjectStore(Js.store)}(e),sI(e)),c=c.next(()=>function(h){const p=h.store(Js.store),y=new Js(0,0,St.min().toTimestamp(),0);return p.put(Js.key,y)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(h,p){return p.store(ri.store).qt().next(y=>{h.deleteObjectStore(ri.store),h.createObjectStore(ri.store,{keyPath:ri.keyPath,autoIncrement:!0}).createIndex(ri.userMutationsIndex,ri.userMutationsKeyPath,{unique:!0});const I=p.store(ri.store),D=y.map(x=>I.put(x));return Ce.waitFor(D)})}(e,s))),c=c.next(()=>{!function(h){h.createObjectStore(Kc.store,{keyPath:Kc.keyPath})}(e)})),i<5&&r>=5&&(c=c.next(()=>this.Rn(s))),i<6&&r>=6&&(c=c.next(()=>(function(h){h.createObjectStore(Bl.store)}(e),this.Pn(s)))),i<7&&r>=7&&(c=c.next(()=>this.bn(s))),i<8&&r>=8&&(c=c.next(()=>this.vn(e,s))),i<9&&r>=9&&(c=c.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const p=h.objectStore(Mi.store);p.createIndex(Mi.readTimeIndex,Mi.readTimeIndexPath,{unique:!1}),p.createIndex(Mi.collectionReadTimeIndex,Mi.collectionReadTimeIndexPath,{unique:!1})}(t)})),i<10&&r>=10&&(c=c.next(()=>this.Vn(s))),i<11&&r>=11&&(c=c.next(()=>{(function(h){h.createObjectStore(Kh.store,{keyPath:Kh.keyPath})})(e),function(h){h.createObjectStore(ea.store,{keyPath:ea.keyPath})}(e)})),i<12&&r>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore(or.store,{keyPath:or.keyPath});p.createIndex(or.collectionPathOverlayIndex,or.collectionPathOverlayIndexPath,{unique:!1}),p.createIndex(or.collectionGroupOverlayIndex,or.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),i<13&&r>=13&&(c=c.next(()=>{!function(h){h.createObjectStore(eo.store,{keyPath:eo.keyPath,autoIncrement:!0}).createIndex(eo.collectionGroupIndex,eo.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(to.store,{keyPath:to.keyPath}).createIndex(to.sequenceNumberIndex,to.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(No.store,{keyPath:No.keyPath}).createIndex(No.documentKeyIndex,No.documentKeyIndexPath,{unique:!1})}(e)})),c}Pn(e){let t=0;return e.store(Mi.store).Qt((i,r)=>{t+=xi(r)}).next(()=>{const i=new Bl(t);return e.store(Bl.store).put(Bl.key,i)})}Rn(e){const t=e.store(qc.store),i=e.store(ri.store);return t.qt().next(r=>Ce.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.qt(ri.userMutationsIndex,c).next(h=>Ce.forEach(h,p=>{Rt(p.userId===s.userId);const y=Yc(this.O,p);return eI(e,s.userId,y).next(()=>{})}))}))}bn(e){const t=e.store($r.store),i=e.store(Mi.store);return e.store(Js.store).get(Js.key).next(r=>{const s=[];return i.Qt((c,h)=>{const p=new Yt(c),y=[0,mr(p)];s.push(t.get(y).next(I=>I?Ce.resolve():t.put(new $r(0,mr(p),r.highestListenSequenceNumber))))}).next(()=>Ce.waitFor(s))})}vn(e,t){e.createObjectStore(Wc.store,{keyPath:Wc.keyPath});const i=t.store(Wc.store),r=new b_,s=c=>{if(r.add(c)){const h=c.lastSegment(),p=c.popLast();return i.put({collectionId:h,parent:mr(p)})}};return t.store(Mi.store).Qt({jt:!0},(c,h)=>{const p=new Yt(c);return s(p.popLast())}).next(()=>t.store(Gr.store).Qt({jt:!0},([c,h,p],y)=>{const I=Fa(h);return s(I.popLast())}))}Vn(e){const t=e.store(Xs.store);return t.Qt((i,r)=>{const s=Zh(r),c=pb(this.O,s);return t.put(c)})}}function sI(n){n.createObjectStore($r.store,{keyPath:$r.keyPath}).createIndex($r.documentTargetsIndex,$r.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Xs.store,{keyPath:Xs.keyPath}).createIndex(Xs.queryTargetsIndexName,Xs.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Js.store)}const Db="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ig{constructor(e,t,i,r,s,c,h,p,y,I,D=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Sn=s,this.window=c,this.document=h,this.Dn=y,this.Cn=I,this.schemaVersion=D,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=x=>Promise.resolve(),!ig.Vt())throw new Pe(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Va(this,r),this.Bn=t+"main",this.O=new GC(p),this.Ln=new ta(this.Bn,this.schemaVersion,new tA(this.O)),this.Un=new iI(this.referenceDelegate,this.O),this.qn=new ra(this.O),this.Kn=new mb,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===I&&Vi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(_e.FAILED_PRECONDITION,Db);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Fs(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var i=(0,we.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,we.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>T_(e).put(new Kc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(Zc(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return Gl(e).get(Qs.key).next(t=>Ce.resolve(this.ts(t)))}es(e){return T_(e).delete(this.clientId)}ns(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Rr(i,Kc.store);return r.qt().next(s=>{const c=e.rs(s,18e5),h=s.filter(p=>-1===c.indexOf(p));return Ce.forEach(h,p=>r.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const i of t)e.Gn.removeItem(e.os(i.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?Ce.resolve(!0):Gl(e).get(Qs.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Pe(_e.FAILED_PRECONDITION,Db);return!1}}return!(!this.networkEnabled||!this.inForeground)||T_(e).qt().next(i=>void 0===this.rs(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Qs.store,Kc.store],t=>{const i=new zC(t,Fs.A);return e.Xn(i).next(()=>e.es(i))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(i=>this.ss(i.updateTimeMs,t)&&!this.cs(i.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>T_(e).qt().next(t=>this.rs(t,18e5).map(i=>i.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return E_.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new XC(e)}getDocumentOverlayCache(e){return m_.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,i){ze("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=13===(c=this.schemaVersion)?VC:12===c?LC:11===c?Kp:void pt();var c;let h;return this.Ln.runTransaction(e,r,s,p=>(h=new zC(p,this.Nn?this.Nn.next():Fs.A),"readwrite-primary"===t?this.Jn(h).next(y=>!!y||this.Yn(h)).next(y=>{if(!y)throw Vi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Pe(_e.FAILED_PRECONDITION,UC);return i(h)}).next(y=>this.Zn(h).next(()=>y)):this._s(h).next(()=>i(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}_s(e){return Gl(e).get(Qs.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(_e.FAILED_PRECONDITION,Db)})}Zn(e){const t=new Qs(this.clientId,this.allowTabSynchronization,Date.now());return Gl(e).put(Qs.key,t)}static Vt(){return ta.Vt()}Xn(e){const t=Gl(e);return t.get(Qs.key).next(i=>this.ts(i)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete(Qs.key)):Ce.resolve())}ss(e,t){const i=Date.now();return!(e<i-t||e>i&&(Vi(`Detected an update time that is in the future: ${e} > ${i}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const i=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return ze("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Vi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Vi("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gl(n){return Rr(n,Qs.store)}function T_(n){return Rr(n,Kc.store)}function D_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class nA{constructor(e,t){this.progress=e,this.ws=t}}class oI{constructor(e,t,i){this.qn=e,this.gs=t,this.indexManager=i}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(i=>this.ps(e,t,i))}ps(e,t,i){return this.qn.getEntry(e,t).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}Is(e,t){e.forEach((i,r)=>{for(const s of t)s.applyToLocalView(r)})}Es(e,t){return this.qn.getEntries(e,t).next(i=>this.Ts(e,i).next(()=>i))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>this.Is(t,i))}As(e,t,i){return rt.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Rs(e,t.path):t_(t)?this.Ps(e,t,i):this.bs(e,t,i);var r}Rs(e,t){return this.ys(e,new rt(t)).next(i=>{let r=l_();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ps(e,t,i){const r=t.collectionGroup;let s=l_();return this.indexManager.getCollectionParents(e,r).next(c=>Ce.forEach(c,h=>{const p=(y=t,I=h.child(r),new Ul(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.bs(e,p,i).next(y=>{y.forEach((I,D)=>{s=s.insert(I,D)})})}).next(()=>s))}bs(e,t,i){let r;return this.qn.getAll(e,t.path,i).next(s=>(r=s,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const c of s)for(const h of c.mutations){const p=h.key;let y=r.get(p);null==y&&(y=ii.newInvalidDocument(p),r=r.insert(p,y)),r_(h,y,c.localWriteTime),y.isFoundDocument()||(r=r.remove(p))}}).next(()=>(r.forEach((s,c)=>{Vp(t,c)||(r=r.remove(s))}),r))}}class S_{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.vs=i,this.Vs=r}static Ss(e,t){let i=En(),r=En();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new S_(e,t.fromCache,i,r)}}class rg{Ds(e){this.Cs=e}As(e,t,i,r){return 0===(s=t).filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())||i.isEqual(St.min())?this.Ns(e,t):this.Cs.Es(e,r).next(s=>{const c=this.xs(t,s);return(Xm(t)||Pp(t))&&this.ks(t.limitType,c,r,i)?this.Ns(e,t):(tC()<=Rs.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gC(t)),this.Cs.As(e,t,i).next(h=>(c.forEach(p=>{h=h.insert(p.key,p)}),h)))});var s}xs(e,t){let i=new yi(Jv(e));return t.forEach((r,s)=>{Vp(e,s)&&(i=i.add(s))}),i}ks(e,t,i,r){if(i.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ns(e,t){return tC()<=Rs.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",gC(t)),this.Cs.As(e,t,St.min())}}class iA{constructor(e,t,i,r){this.persistence=e,this.Os=t,this.O=r,this.Ms=new Ui(Ft),this.$s=new Xh(s=>rd(s),Km),this.Fs=St.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(i)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new oI(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Sb(n,e,t,i){return new iA(n,e,t,i)}function Ab(n,e){return sg.apply(this,arguments)}function sg(){return sg=(0,we.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.gs.getAllMutationBatches(i).next(s=>(r=s,t.Ls(e),t.gs.getAllMutationBatches(i))).next(s=>{const c=[],h=[];let p=En();for(const y of r){c.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}for(const y of s){h.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}return t.Us.Es(i,p).next(y=>({qs:y,removedBatchIds:c,addedBatchIds:h}))})})}),sg.apply(this,arguments)}function Mb(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const I=p.batch,D=I.keys();let x=Ce.resolve();return D.forEach(P=>{x=x.next(()=>y.getEntry(h,P)).next(U=>{const J=p.docVersions.get(P);Rt(null!==J),U.version.compareTo(J)<0&&(I.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),y.addEntry(U)))})}),x.next(()=>c.gs.removeMutationBatch(h,I))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.gs.performConsistencyCheck(i)).next(()=>t.Us.Es(i,r))})}function xb(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function aI(n,e){const t=Xe(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach((y,I)=>{const D=r.get(I);if(!D)return;h.push(t.Un.removeMatchingKeys(s,y.removedDocuments,I).next(()=>t.Un.addMatchingKeys(s,y.addedDocuments,I)));let x=D.withSequenceNumber(s.currentSequenceNumber);var P,U,J;e.targetMismatches.has(I)?x=x.withResumeToken(sr.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),r=r.insert(I,x),U=x,J=y,(0===(P=D).resumeToken.approximateByteSize()||U.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(s,x))});let p=Ys();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(kb(s,c,e.documentUpdates).next(y=>{p=y})),!i.isEqual(St.min())){const y=t.Un.getLastRemoteSnapshotVersion(s).next(I=>t.Un.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(y)}return Ce.waitFor(h).next(()=>c.apply(s)).next(()=>t.Us.Ts(s,p)).next(()=>p)}).then(s=>(t.Ms=r,s))}function kb(n,e,t){let i=En();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let s=Ys();return t.forEach((c,h)=>{const p=r.get(c);h.isNoDocument()&&h.version.isEqual(St.min())?(e.removeEntry(c,h.readTime),s=s.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(h),s=s.insert(c,h)):ze("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),s})}function lI(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(i,e)))}function bd(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Un.getTargetData(i,e).next(s=>s?(r=s,Ce.resolve(r)):t.Un.allocateTargetId(i).next(c=>(r=new La(e,c,0,i.currentSequenceNumber),t.Un.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ms.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.$s.set(e,i.targetId)),i})}function wd(n,e,t){return A_.apply(this,arguments)}function A_(){return A_=(0,we.Z)(function*(n,e,t){const i=Xe(n),r=i.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Zc(c))throw c;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.$s.delete(r.target)}),A_.apply(this,arguments)}function og(n,e,t){const i=Xe(n);let r=St.min(),s=En();return i.persistence.runTransaction("Execute query","readonly",c=>function(h,p,y){const I=Xe(h),D=I.$s.get(y);return void 0!==D?Ce.resolve(I.Ms.get(D)):I.Un.getTargetData(p,y)}(i,c,Yi(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Un.getMatchingKeysForTargetId(c,h.targetId).next(p=>{s=p})}).next(()=>i.Os.As(c,e,t?r:St.min(),t?s:En())).next(h=>({documents:h,Ks:s})))}function cI(n,e){const t=Xe(n),i=Xe(t.Un),r=t.Ms.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.Tt(s,e).next(c=>c?c.target:null))}function uI(n){const e=Xe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(i,r,s){const c=Xe(i);let h=Ys(),p=eg(s);const y=zl(r),I=IDBKeyRange.lowerBound(p,!0);return y.Qt({index:Mi.readTimeIndex,range:I},(D,x)=>{const P=Xp(c.O,x);h=h.insert(P.key,P),p=x.readTime}).next(()=>({ws:h,readTime:$C(p)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:i})=>(e.Fs=i,t))}function Rb(){return Rb=(0,we.Z)(function*(n){const e=Xe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(i){const r=zl(i);let s=St.min();return r.Qt({index:Mi.readTimeIndex,reverse:!0},(c,h,p)=>{h.readTime&&(s=$C(h.readTime)),p.done()}).next(()=>s)}(t)).then(t=>{e.Fs=t})}),Rb.apply(this,arguments)}function Ob(){return Ob=(0,we.Z)(function*(n,e,t,i){const r=Xe(n);let s=En(),c=Ys();for(const y of t){const I=e.Gs(y.metadata.name);y.document&&(s=s.add(I));const D=e.js(y);D.setReadTime(e.Qs(y.metadata.readTime)),c=c.insert(I,D)}const h=r.Bs.newChangeBuffer({trackRemovals:!0}),p=yield bd(r,(y=i,Yi(Np(Yt.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>kb(y,h,c).next(I=>(h.apply(y),I)).next(I=>r.Un.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.Un.addMatchingKeys(y,s,p.targetId)).next(()=>r.Us.Ts(y,I)).next(()=>I)))}),Ob.apply(this,arguments)}function oA(n,e){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,we.Z)(function*(n,e,t=En()){const i=yield bd(n,Yi(tg(e.bundledQuery))),r=Xe(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=Ai(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Kn.saveNamedQuery(s,e);const h=i.withResumeToken(sr.EMPTY_BYTE_STRING,c);return r.Ms=r.Ms.insert(h.targetId,h),r.Un.updateTargetData(s,h).next(()=>r.Un.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Un.addMatchingKeys(s,t,i.targetId)).next(()=>r.Kn.saveNamedQuery(s,e))})}),Nb.apply(this,arguments)}class aA{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var i;return this.Ws.set(t.id,{id:(i=t).id,version:i.version,createTime:Ai(i.createTime)}),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(i=t).name,query:tg(i.bundledQuery),readTime:Ai(i.readTime)}),Ce.resolve();var i}}class lA{constructor(){this.overlays=new Ui(rt.comparator),this.Hs=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}saveOverlays(e,t,i){return i.forEach(r=>{this.Yt(e,t,r)}),Ce.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Hs.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Hs.delete(i)),Ce.resolve()}getOverlaysForCollection(e,t,i){const r=new Map,s=t.length+1,c=new rt(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return Ce.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Ui((y,I)=>y-I);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let I=s.get(y.largestBatchId);null===I&&(I=new Map,s=s.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const h=new Map,p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,I)=>h.set(I,y)),!(h.size>=r)););return Ce.resolve(h)}Yt(e,t,i){if(null===i)return;const r=this.overlays.get(i.key);null!==r&&this.Hs.get(r.largestBatchId).delete(i.key),this.overlays=this.overlays.insert(i.key,new Qp(t,i));let s=this.Hs.get(t);void 0===s&&(s=new Set,this.Hs.set(t,s)),s.add(i.key)}}class Pb{constructor(){this.Js=new yi(_r.Ys),this.Xs=new yi(_r.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const i=new _r(e,t);this.Js=this.Js.add(i),this.Xs=this.Xs.add(i)}ti(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ei(new _r(e,t))}ni(e,t){e.forEach(i=>this.removeReference(i,t))}si(e){const t=new rt(new Yt([])),i=new _r(t,e),r=new _r(t,e+1),s=[];return this.Xs.forEachInRange([i,r],c=>{this.ei(c),s.push(c.key)}),s}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new rt(new Yt([])),i=new _r(t,e),r=new _r(t,e+1);let s=En();return this.Xs.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new _r(e,0),i=this.Js.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class _r{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return rt.comparator(e.key,t.key)||Ft(e.oi,t.oi)}static Zs(e,t){return Ft(e.oi,t.oi)||rt.comparator(e.key,t.key)}}class cA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new yi(_r.Ys)}checkEmpty(e){return Ce.resolve(0===this.gs.length)}addMutationBatch(e,t,i,r){const s=this.ci;this.ci++;const c=new _d(s,t,i,r);this.gs.push(c);for(const h of r)this.ui=this.ui.add(new _r(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Ce.resolve(c)}lookupMutationBatch(e,t){return Ce.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.hi(t+1),s=r<0?0:r;return Ce.resolve(this.gs.length>s?this.gs[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return Ce.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new _r(t,0),r=new _r(t,Number.POSITIVE_INFINITY),s=[];return this.ui.forEachInRange([i,r],c=>{const h=this.ai(c.oi);s.push(h)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new yi(Ft);return t.forEach(r=>{const s=new _r(r,0),c=new _r(r,Number.POSITIVE_INFINITY);this.ui.forEachInRange([s,c],h=>{i=i.add(h.oi)})}),Ce.resolve(this.li(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;rt.isDocumentKey(s)||(s=s.child(""));const c=new _r(new rt(s),0);let h=new yi(Ft);return this.ui.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(p.oi)),!0)},c),Ce.resolve(this.li(h))}li(e){const t=[];return e.forEach(i=>{const r=this.ai(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Rt(0===this.fi(t.batchId,"removed")),this.gs.shift();let i=this.ui;return Ce.forEach(t.mutations,r=>{const s=new _r(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ui=i})}Qe(e){}containsKey(e,t){const i=new _r(t,0),r=this.ui.firstAfterOrEqual(i);return Ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Ce.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class uA{constructor(e){this.di=e,this.docs=new Ui(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,c=this.di(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Ce.resolve(i?i.document.mutableCopy():ii.newInvalidDocument(t))}getEntries(e,t){let i=Ys();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ii.newInvalidDocument(r))}),Ce.resolve(i)}getAll(e,t,i){let r=Ys();const s=new rt(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||p.readTime.compareTo(i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return Ce.resolve(r)}_i(e,t){return Ce.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new dA(this)}getSize(e){return Ce.resolve(this.size)}}class dA extends ia{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Tn.addEntry(e,r)):this.Tn.removeEntry(i)}),Ce.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class hA{constructor(e){this.persistence=e,this.wi=new Xh(t=>rd(t),Km),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.mi=0,this.gi=new Pb,this.targetCount=0,this.yi=Xc.He()}forEachTarget(e,t){return this.wi.forEach((i,r)=>t(r)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.mi&&(this.mi=t),Ce.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Xc(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Ze(t),Ce.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.wi.forEach((c,h)=>{h.sequenceNumber<=t&&null===i.get(h.targetId)&&(this.wi.delete(c),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),Ce.waitFor(s).next(()=>r)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const i=this.wi.get(t)||null;return Ce.resolve(i)}addMatchingKeys(e,t,i){return this.gi.ti(t,i),Ce.resolve()}removeMatchingKeys(e,t,i){this.gi.ni(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(c=>{s.push(r.markPotentiallyOrphaned(e,c))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const i=this.gi.ri(t);return Ce.resolve(i)}containsKey(e,t){return Ce.resolve(this.gi.containsKey(t))}}class fA{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Fs(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new hA(this),this.indexManager=new QC,this.qn=new uA(i=>this.referenceDelegate.Ii(i)),this.O=new GC(t),this.Kn=new aA(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.pi[e.toKey()];return i||(i=new cA(t,this.referenceDelegate),this.pi[e.toKey()]=i),i}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,i){ze("MemoryPersistence","Starting transaction:",e);const r=new pA(this.Nn.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.Ti(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,t){return Ce.or(Object.values(this.pi).map(i=>()=>i.containsKey(e,t)))}}class pA extends BC{constructor(e){super(),this.currentSequenceNumber=e}}class M_{constructor(e){this.persistence=e,this.Ri=new Pb,this.Pi=null}static bi(e){return new M_(e)}get vi(){if(this.Pi)return this.Pi;throw pt()}addReference(e,t,i){return this.Ri.addReference(i,t),this.vi.delete(i.toString()),Ce.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.vi.add(i.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(r=>this.vi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.vi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.vi,i=>{const r=rt.fromPath(i);return this.Vi(e,r).next(s=>{s||t.removeEntry(r,St.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(i=>{i?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function Fb(n,e){return`firestore_clients_${n}_${e}`}function Lb(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function x_(n,e){return`firestore_targets_${n}_${e}`}class ag{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Si(e,t,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Pe(r.error.code,r.error.message))),c?new ag(e,t,r.state,s):(Vi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Si(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Pe(i.error.code,i.error.message))),s?new Jh(e,i.state,r):(Vi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=c_();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=uC(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new lg(e,s):(Vi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class k_{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new k_(t.clientId,t.onlineState):(Vi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class R_{constructor(){this.activeTargetIds=c_()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O_{constructor(e,t,i,r,s){this.window=e,this.Sn=t,this.persistenceKey=i,this.xi=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Ui(Ft),this.started=!1,this.$i=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Fi=Fb(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new R_),this.Li=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.ds();for(const r of t){if(r===e.xi)continue;const s=e.getItem(Fb(e.persistenceKey,r));if(s){const c=lg.Si(r,s);c&&(e.Mi=e.Mi.insert(c.clientId,c))}}e.ji();const i=e.storage.getItem(e.Ki);if(i){const r=e.Qi(i);r&&e.Wi(r)}for(const r of e.$i)e.Oi(r);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,i){this.Hi(e,t,i),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(x_(this.persistenceKey,e));if(i){const r=Jh.Si(e,i);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(x_(this.persistenceKey,e))}updateQueryState(e,t,i){this.Xi(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Ji(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const i=e;if(i.storageArea===this.storage){if(ze("SharedClientState","EVENT",i.key,i.newValue),i.key===this.Fi)return void Vi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==i.key)if(t.Li.test(i.key)){if(null==i.newValue){const r=t.er(i.key);return t.nr(r,null)}{const r=t.sr(i.key,i.newValue);if(r)return t.nr(r.clientId,r)}}else if(t.Ui.test(i.key)){if(null!==i.newValue){const r=t.ir(i.key,i.newValue);if(r)return t.rr(r)}}else if(t.qi.test(i.key)){if(null!==i.newValue){const r=t.cr(i.key,i.newValue);if(r)return t.ur(r)}}else if(i.key===t.Ki){if(null!==i.newValue){const r=t.Qi(i.newValue);if(r)return t.Wi(r)}}else if(i.key===t.Bi){const r=function(s){let c=Fs.A;if(null!=s)try{const h=JSON.parse(s);Rt("number"==typeof h),c=h}catch(h){Vi("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(i.newValue);r!==Fs.A&&t.sequenceNumberHandler(r)}else if(i.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(i)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,i){const r=new ag(this.currentUser,e,t,i),s=Lb(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Di())}Ji(e){const t=Lb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,i){const r=x_(this.persistenceKey,e),s=new Jh(e,t,i);this.setItem(r,s.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const i=this.er(e);return lg.Si(i,t)}ir(e,t){const i=this.Ui.exec(e),r=Number(i[1]);return ag.Si(new Mr(void 0!==i[2]?i[2]:null),r,t)}cr(e,t){const i=this.qi.exec(e),r=Number(i[1]);return Jh.Si(r,t)}Qi(e){return k_.Si(e)}rr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const i=t?this.Mi.insert(e,t):this.Mi.remove(e),r=this.zi(this.Mi),s=this.zi(i),c=[],h=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.dr(c,h).then(()=>{this.Mi=i})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=c_();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class N_{constructor(){this._r=new R_,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,i){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new R_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Ed{mr(e){}shutdown(){}}class dI{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const gA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ef{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class oO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,i,r,s){const c=this.$r(e,t);ze("RestConnection","Sending: ",c,i);const h={};return this.Fr(h,r,s),this.Br(e,c,h,i).then(p=>(ze("RestConnection","Received: ",p),p),p=>{throw Fh("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",i),p})}Lr(e,t,i,r,s){return this.Mr(e,t,i,r,s)}Fr(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ph,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}$r(e,t){return`${this.kr}/v1/${t}:${gA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,i,r){return new Promise((s,c)=>{const h=new RS;h.listenOnce(Hm.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Nh.NO_ERROR:const y=h.getResponseJson();ze("Connection","XHR received:",JSON.stringify(y)),s(y);break;case Nh.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),c(new Pe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:const I=h.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',I,"response text:",h.getResponseText()),I>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const x=function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(U)>=0?U:_e.UNKNOWN}(D.status);c(new Pe(x,D.message))}else c(new Pe(_e.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Pe(_e.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(r);h.send(t,"POST",p,i,15)})}Ur(e,t,i){const r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=JE(),c=XR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Vv({})),this.Fr(h.initMessageHeaders,t,i),(0,N.uI)()||(0,N.b$)()||(0,N.d)()||(0,N.w1)()||(0,N.Mn)()||(0,N.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");ze("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let I=!1,D=!1;const x=new ef({Ar:U=>{D?ze("Connection","Not sending because WebChannel is closed:",U):(I||(ze("Connection","Opening WebChannel transport."),y.open(),I=!0),ze("Connection","WebChannel sending:",U),y.send(U))},Rr:()=>y.close()}),P=(U,J,pe)=>{U.listen(J,$e=>{try{pe($e)}catch(Qe){setTimeout(()=>{throw Qe},0)}})};return P(y,Uv.EventType.OPEN,()=>{D||ze("Connection","WebChannel transport opened.")}),P(y,Uv.EventType.CLOSE,()=>{D||(D=!0,ze("Connection","WebChannel transport closed"),x.Cr())}),P(y,Uv.EventType.ERROR,U=>{D||(D=!0,Fh("Connection","WebChannel transport errored:",U),x.Cr(new Pe(_e.UNAVAILABLE,"The operation could not be completed")))}),P(y,Uv.EventType.MESSAGE,U=>{var J;if(!D){const pe=U.data[0];Rt(!!pe);const $e=pe,Qe=$e.error||(null===(J=$e[0])||void 0===J?void 0:J.error);if(Qe){ze("Connection","WebChannel received error:",Qe);const it=Qe.status;let Ve=function(Bn){const Ri=Xi[Bn];if(void 0!==Ri)return a_(Ri)}(it),en=Qe.message;void 0===Ve&&(Ve=_e.INTERNAL,en="Unknown error status: "+it+" with message "+Qe.message),D=!0,x.Cr(new Pe(Ve,en)),y.close()}else ze("Connection","WebChannel received:",pe),x.Nr(pe)}}),P(c,Lv.STAT_EVENT,U=>{U.stat===zm.PROXY?ze("Connection","Detected buffering proxy"):U.stat===zm.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.Dr()},0),x}}function P_(){return"undefined"!=typeof window?window:null}function Vb(){return"undefined"!=typeof document?document:null}function tf(n){return new QS(n,!0)}class F_{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Sn=e,this.timerId=t,this.qr=i,this.Kr=r,this.Gr=s,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),i=Math.max(0,Date.now()-this.Wr),r=Math.max(0,t-i);r>0&&ze("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,r,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class mA{constructor(e,t,i,r,s,c,h,p){this.Sn=e,this.Xr=i,this.Zr=r,this.eo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new F_(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,we.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,we.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var i=this;return(0,we.Z)(function*(){i._o(),i.wo(),i.ro.cancel(),i.no++,4!==e?i.ro.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Vi(t.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),i.ro.zr()):t&&t.code===_e.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.mo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.no===t&&this.po(i,r)},i=>{e(()=>{const r=new Pe(_e.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Io(r)})})}po(e,t){const i=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{i(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(r=>{i(()=>this.Io(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}uo(){var e=this;this.state=5,this.ro.Hr((0,we.Z)(function*(){e.state=0,e.start()}))}Io(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class It extends mA{constructor(e,t,i,r,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.O=s}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function qh(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:pt(),r=e.targetChange.targetIds||[],s=function(p,y){return p.N?(Rt(void 0===y||"string"==typeof y),sr.fromBase64String(y||"")):(Rt(void 0===y||y instanceof Uint8Array),sr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const y=void 0===p.code?_e.UNKNOWN:a_(p.code);return new Pe(y,p.message||"")}(c);t=new AC(i,r,s,h||null)}else if("documentChange"in e){const i=e.documentChange,r=Bi(n,i.document.name),s=Ai(i.document.updateTime),c=new kr({mapValue:{fields:i.document.fields}}),h=ii.newFoundDocument(r,s,c);t=new u_(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const i=e.documentDelete,r=Bi(n,i.document),s=i.readTime?Ai(i.readTime):St.min(),c=ii.newNoDocument(r,s);t=new u_([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const i=e.documentRemove,r=Bi(n,i.document);t=new u_([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return pt();{const i=e.filter,s=new qS(i.count||0);t=new SC(i.targetId,s)}}var p;return t}(this.O,e),i=function(r){if(!("targetChange"in r))return St.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?St.min():s.readTime?Ai(s.readTime):St.min()}(e);return this.listener.To(t,i)}Ao(e){const t={};t.database=Na(this.O),t.addTarget=function(r,s){let c;const h=s.target;return c=Zv(h)?{documents:ob(r,h)}:{query:ab(r,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=d_(r,s.resumeToken):s.snapshotVersion.compareTo(St.min())>0&&(c.readTime=qp(r,s.snapshotVersion.toTimestamp())),c}(this.O,e);const i=function kC(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.fo(t)}Ro(e){const t={};t.database=Na(this.O),t.removeTarget=e,this.fo(t)}}class _A extends mA{constructor(e,t,i,r,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.O=s,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function xC(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(i,r){let s=Ai(i.updateTime?i.updateTime:r);return s.isEqual(St.min())&&(s=Ai(r)),new $S(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Ai(e.commitTime);return this.listener.Vo(i,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=Na(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Pa(this.O,i))};this.fo(t)}}class yA extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=i,this.O=r,this.Co=!1}No(){if(this.Co)throw new Pe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,i){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.eo.Mr(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(_e.UNKNOWN,r.toString())})}Lr(e,t,i){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.eo.Lr(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(_e.UNKNOWN,r.toString())})}terminate(){this.Co=!0}}class vA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Vi(t),this.Oo=!1):ze("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class L_{constructor(e,t,i,r,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=s,this.jo.mr(h=>{i.enqueueAndForget((0,we.Z)(function*(){var p;ql(c)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,we.Z)(function*(y){const I=Xe(y);I.Ko.add(4),yield $l(I),I.Qo.set("Unknown"),I.Ko.delete(4),yield cg(I)}),function(y){return p.apply(this,arguments)})(c))}))}),this.Qo=new vA(i,r)}}function cg(n){return nf.apply(this,arguments)}function nf(){return nf=(0,we.Z)(function*(n){if(ql(n))for(const e of n.Go)yield e(!0)}),nf.apply(this,arguments)}function $l(n){return si.apply(this,arguments)}function si(){return si=(0,we.Z)(function*(n){for(const e of n.Go)yield e(!1)}),si.apply(this,arguments)}function Ub(n,e){const t=Xe(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),U_(t)?V_(t):dg(t).co()&&Bb(t,e))}function rf(n,e){const t=Xe(n),i=dg(t);t.qo.delete(e),i.co()&&hI(t,e),0===t.qo.size&&(i.co()?i.ho():ql(t)&&t.Qo.set("Unknown"))}function Bb(n,e){n.Wo.Z(e.targetId),dg(n).Ao(e)}function hI(n,e){n.Wo.Z(e),dg(n).Ro(e)}function V_(n){n.Wo=new ZS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),dg(n).start(),n.Qo.Mo()}function U_(n){return ql(n)&&!dg(n).oo()&&n.qo.size>0}function ql(n){return 0===Xe(n).Ko.size}function jb(n){n.Wo=void 0}function bA(n){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,we.Z)(function*(n){n.qo.forEach((e,t)=>{Bb(n,e)})}),Hb.apply(this,arguments)}function wA(n,e){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,we.Z)(function*(n,e){jb(n),U_(n)?(n.Qo.Bo(e),V_(n)):n.Qo.set("Unknown")}),Cd.apply(this,arguments)}function EA(n,e,t){return zb.apply(this,arguments)}function zb(){return zb=(0,we.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof AC&&2===e.state&&e.cause)try{yield(i=(0,we.Z)(function*(r,s){const c=s.cause;for(const h of s.targetIds)r.qo.has(h)&&(yield r.remoteSyncer.rejectListen(h,c),r.qo.delete(h),r.Wo.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield B_(n,i)}else if(e instanceof u_?n.Wo.ct(e):e instanceof SC?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(St.min()))try{const i=yield xb(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const c=r.Wo.yt(s);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.qo.get(p);y&&r.qo.set(p,y.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const p=r.qo.get(h);if(!p)return;r.qo.set(h,p.withResumeToken(sr.EMPTY_BYTE_STRING,p.snapshotVersion)),hI(r,h);const y=new La(p.target,h,1,p.sequenceNumber);Bb(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){ze("RemoteStore","Failed to raise snapshot:",i),yield B_(n,i)}var i}),zb.apply(this,arguments)}function B_(n,e,t){return sf.apply(this,arguments)}function sf(){return sf=(0,we.Z)(function*(n,e,t){if(!Zc(e))throw e;n.Ko.add(1),yield $l(n),n.Qo.set("Offline"),t||(t=()=>xb(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield cg(n)}))}),sf.apply(this,arguments)}function Gb(n,e){return e().catch(t=>B_(n,t,e))}function Id(n){return j_.apply(this,arguments)}function j_(){return j_=(0,we.Z)(function*(n){const e=Xe(n),t=Wl(e);let i=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;CA(e);)try{const r=yield lI(e.localStore,i);if(null===r){0===e.Uo.length&&t.ho();break}i=r.batchId,ug(e,r)}catch(r){yield B_(e,r)}af(e)&&fI(e)}),j_.apply(this,arguments)}function CA(n){return ql(n)&&n.Uo.length<10}function ug(n,e){n.Uo.push(e);const t=Wl(n);t.co()&&t.bo&&t.vo(e.mutations)}function af(n){return ql(n)&&!Wl(n).oo()&&n.Uo.length>0}function fI(n){Wl(n).start()}function IA(n){return $b.apply(this,arguments)}function $b(){return $b=(0,we.Z)(function*(n){Wl(n).Do()}),$b.apply(this,arguments)}function pI(n){return H_.apply(this,arguments)}function H_(){return H_=(0,we.Z)(function*(n){const e=Wl(n);for(const t of n.Uo)e.vo(t.mutations)}),H_.apply(this,arguments)}function gI(n,e,t){return qb.apply(this,arguments)}function qb(){return qb=(0,we.Z)(function*(n,e,t){const i=n.Uo.shift(),r=f_.from(i,e,t);yield Gb(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Id(n)}),qb.apply(this,arguments)}function mI(n,e){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,we.Z)(function*(n,e){var t;e&&Wl(n).bo&&(yield(t=(0,we.Z)(function*(i,r){if(WS(s=r.code)&&s!==_e.ABORTED){const c=i.Uo.shift();Wl(i).ao(),yield Gb(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield Id(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),af(n)&&fI(n)}),Wb.apply(this,arguments)}function _I(n,e){return yI.apply(this,arguments)}function yI(){return yI=(0,we.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const i=ql(t);t.Ko.add(3),yield $l(t),i&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield cg(t)}),yI.apply(this,arguments)}function vI(n,e){return bI.apply(this,arguments)}function bI(){return bI=(0,we.Z)(function*(n,e){const t=Xe(n);e?(t.Ko.delete(2),yield cg(t)):e||(t.Ko.add(2),yield $l(t),t.Qo.set("Unknown"))}),bI.apply(this,arguments)}function dg(n){return n.zo||(n.zo=function(e,t,i){const r=Xe(e);return r.No(),new It(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,i)}(n.datastore,n.asyncQueue,{Pr:bA.bind(null,n),vr:wA.bind(null,n),To:EA.bind(null,n)}),n.Go.push(function(){var e=(0,we.Z)(function*(t){t?(n.zo.ao(),U_(n)?V_(n):n.Qo.set("Unknown")):(yield n.zo.stop(),jb(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Wl(n){return n.Ho||(n.Ho=function(e,t,i){const r=Xe(e);return r.No(),new _A(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,i)}(n.datastore,n.asyncQueue,{Pr:IA.bind(null,n),vr:mI.bind(null,n),So:pI.bind(null,n),Vo:gI.bind(null,n)}),n.Go.push(function(){var e=(0,we.Z)(function*(t){t?(n.Ho.ao(),yield Id(n)):(yield n.Ho.stop(),n.Uo.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class lf{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,i,r,s){const c=Date.now()+i,h=new lf(e,t,c,r,s);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cf(n,e){if(Vi("AsyncQueue",`${e}: ${n}`),Zc(n))return new Pe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class uf{constructor(e){this.comparator=e?(t,i)=>e(t,i)||rt.comparator(t.key,i.key):(t,i)=>rt.comparator(t.key,i.key),this.keyedMap=l_(),this.sortedSet=new Ui(this.comparator)}static emptySet(e){return new uf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new uf;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Kb{constructor(){this.Jo=new Ui(rt.comparator)}track(e){const t=e.doc.key,i=this.Jo.get(t);i?0!==e.type&&3===i.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==i.type?this.Jo=this.Jo.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Jo=this.Jo.remove(t):1===e.type&&2===i.type?this.Jo=this.Jo.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):pt():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,i)=>{e.push(i)}),e}}class Ua{constructor(e,t,i,r,s,c,h,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new Ua(e,t,uf.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class TA{constructor(){this.Xo=void 0,this.listeners=[]}}class DA{constructor(){this.queries=new Xh(e=>pC(e),Lp),this.onlineState="Unknown",this.Zo=new Set}}function Zb(n,e){return Yb.apply(this,arguments)}function Yb(){return Yb=(0,we.Z)(function*(n,e){const t=Xe(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new TA),r)try{s.Xo=yield t.onListen(i)}catch(c){const h=cf(c,`Initialization of query '${gC(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,s),s.listeners.push(e),e.tc(t.onlineState),s.Xo&&e.ec(s.Xo)&&tu(t)}),Yb.apply(this,arguments)}function Qb(n,e){return z_.apply(this,arguments)}function z_(){return z_=(0,we.Z)(function*(n,e){const t=Xe(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),z_.apply(this,arguments)}function SA(n,e){const t=Xe(n);let i=!1;for(const r of e){const c=t.queries.get(r.query);if(c){for(const h of c.listeners)h.ec(r)&&(i=!0);c.Xo=r}}i&&tu(t)}function AA(n,e,t){const i=Xe(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function tu(n){n.Zo.forEach(e=>{e.next()})}class Xb{constructor(e,t,i){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=i||{}}ec(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Ua(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class wI{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class EI{constructor(e){this.O=e}Gs(e){return Bi(this.O,e)}js(e){return e.metadata.exists?gd(this.O,e.document,!1):ii.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Ai(e)}}class CI{constructor(e,t,i){this.hc=e,this.localStore=t,this.O=i,this.queries=[],this.documents=[],this.progress=II(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,i=new EI(this.O);for(const r of e)if(r.metadata.queries){const s=i.Gs(r.metadata.name);for(const c of r.metadata.queries){const h=(t.get(c)||En()).add(s);t.set(c,h)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function sA(n,e,t,i){return Ob.apply(this,arguments)}(e.localStore,new EI(e.O),e.documents,e.hc.id),i=e.fc(e.documents);for(const r of e.queries)yield oA(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",new nA(Object.assign({},e.progress),t)})()}}function II(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Jb{constructor(e){this.key=e}}class TI{constructor(e){this.key=e}}class G_{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=En(),this.mutatedKeys=En(),this.mc=Jv(e),this.gc=new uf(this.mc)}get yc(){return this.dc}Ic(e,t){const i=t?t.Ec:new Kb,r=t?t.gc:this.gc;let s=t?t.mutatedKeys:this.mutatedKeys,c=r,h=!1;const p=Xm(this.query)&&r.size===this.query.limit?r.last():null,y=Pp(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((I,D)=>{const x=r.get(I),P=Vp(this.query,D)?D:null,U=!!x&&this.mutatedKeys.has(x.key),J=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let pe=!1;x&&P?x.data.isEqual(P.data)?U!==J&&(i.track({type:3,doc:P}),pe=!0):this.Tc(x,P)||(i.track({type:2,doc:P}),pe=!0,(p&&this.mc(P,p)>0||y&&this.mc(P,y)<0)&&(h=!0)):!x&&P?(i.track({type:0,doc:P}),pe=!0):x&&!P&&(i.track({type:1,doc:x}),pe=!0,(p||y)&&(h=!0)),pe&&(P?(c=c.add(P),s=J?s.add(I):s.delete(I)):(c=c.delete(I),s=s.delete(I)))}),Xm(this.query)||Pp(this.query))for(;c.size>this.query.limit;){const I=Xm(this.query)?c.last():c.first();c=c.delete(I.key),s=s.delete(I.key),i.track({type:1,doc:I})}return{gc:c,Ec:i,ks:h,mutatedKeys:s}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const s=e.Ec.Yo();s.sort((y,I)=>function(D,x){const P=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return P(D)-P(x)}(y.type,I.type)||this.mc(y.doc,I.doc)),this.Ac(i);const c=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,p=h!==this._c;return this._c=h,0!==s.length||p?{snapshot:new Ua(this.query,e.gc,r,s,e.mutatedKeys,0===h,p,!1),Pc:c}:{Pc:c}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new Kb,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=En(),this.gc.forEach(i=>{this.bc(i.key)&&(this.wc=this.wc.add(i.key))});const t=[];return e.forEach(i=>{this.wc.has(i)||t.push(new TI(i))}),this.wc.forEach(i=>{e.has(i)||t.push(new Jb(i))}),t}vc(e){this.dc=e.Ks,this.wc=En();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return Ua.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class MA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class DI{constructor(e){this.key=e,this.Sc=!1}}class SI{constructor(e,t,i,r,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Dc={},this.Cc=new Xh(h=>pC(h),Lp),this.Nc=new Map,this.xc=new Set,this.kc=new Ui(rt.comparator),this.Oc=new Map,this.Mc=new Pb,this.$c={},this.Fc=new Map,this.Bc=Xc.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function xA(n,e){return ew.apply(this,arguments)}function ew(){return ew=(0,we.Z)(function*(n,e){const t=gw(n);let i,r;const s=t.Cc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Vc();else{const c=yield bd(t.localStore,Yi(e));t.isPrimaryClient&&Ub(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield tw(t,e,i,"current"===h)}return r}),ew.apply(this,arguments)}function tw(n,e,t,i){return hg.apply(this,arguments)}function hg(){return hg=(0,we.Z)(function*(n,e,t,i){n.Uc=(I,D,x)=>{return(P=(0,we.Z)(function*(U,J,pe,$e){let Qe=J.view.Ic(pe);Qe.ks&&(Qe=yield og(U.localStore,J.query,!1).then(({documents:en})=>J.view.Ic(en,Qe)));const it=$e&&$e.targetChanges.get(J.targetId),Ve=J.view.applyChanges(Qe,U.isPrimaryClient,it);return fg(U,J.targetId,Ve.Pc),Ve.snapshot}),function(U,J,pe,$e){return P.apply(this,arguments)})(n,I,D,x);var P};const r=yield og(n.localStore,e,!0),s=new G_(e,r.Ks),c=s.Ic(r.documents),h=zp.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,h);fg(n,t,p.Pc);const y=new MA(e,t,s);return n.Cc.set(e,y),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),p.snapshot}),hg.apply(this,arguments)}function kA(n,e){return $_.apply(this,arguments)}function $_(){return $_=(0,we.Z)(function*(n,e){const t=Xe(n),i=t.Cc.get(e),r=t.Nc.get(i.targetId);if(r.length>1)return t.Nc.set(i.targetId,r.filter(s=>!Lp(s,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wd(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),rf(t.remoteStore,i.targetId),df(t,i.targetId)}).catch(eu))):(df(t,i.targetId),yield wd(t.localStore,i.targetId,!0))}),$_.apply(this,arguments)}function nw(){return nw=(0,we.Z)(function*(n,e,t){const i=Q_(n);try{const r=yield function(s,c){const h=Xe(s),p=Zi.now(),y=c.reduce((D,x)=>D.add(x.key),En());let I;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>h.Us.Es(D,y).next(x=>{I=x;const P=[];for(const U of c){const J=CC(U,I.get(U.key));null!=J&&P.push(new cd(U.key,J,hC(J.value.mapValue),Qi.exists(!0)))}return h.gs.addMutationBatch(D,p,P,c)})).then(D=>(D.applyToLocalDocumentSet(I),{batchId:D.batchId,changes:I}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,h){let p=s.$c[s.currentUser.toKey()];p||(p=new Ui(Ft)),p=p.insert(c,h),s.$c[s.currentUser.toKey()]=p}(i,r.batchId,t),yield Kl(i,r.changes),yield Id(i.remoteStore)}catch(r){const s=cf(r,"Failed to persist write");t.reject(s)}}),nw.apply(this,arguments)}function AI(n,e){return iw.apply(this,arguments)}function iw(){return iw=(0,we.Z)(function*(n,e){const t=Xe(n);try{const i=yield aI(t.localStore,e);e.targetChanges.forEach((r,s)=>{const c=t.Oc.get(s);c&&(Rt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Sc=!0:r.modifiedDocuments.size>0?Rt(c.Sc):r.removedDocuments.size>0&&(Rt(c.Sc),c.Sc=!1))}),yield Kl(t,i,e)}catch(i){yield eu(i)}}),iw.apply(this,arguments)}function MI(n,e,t){const i=Xe(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.Cc.forEach((s,c)=>{const h=c.view.tc(e);h.snapshot&&r.push(h.snapshot)}),function(s,c){const h=Xe(s);h.onlineState=c;let p=!1;h.queries.forEach((y,I)=>{for(const D of I.listeners)D.tc(c)&&(p=!0)}),p&&tu(h)}(i.eventManager,e),r.length&&i.Dc.To(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function OA(n,e,t){return rw.apply(this,arguments)}function rw(){return rw=(0,we.Z)(function*(n,e,t){const i=Xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Oc.get(e),s=r&&r.key;if(s){let c=new Ui(rt.comparator);c=c.insert(s,ii.newNoDocument(s,St.min()));const h=En().add(s),p=new ud(St.min(),new Map,new yi(Ft),c,h);yield AI(i,p),i.kc=i.kc.remove(s),i.Oc.delete(e),pg(i)}else yield wd(i.localStore,e,!1).then(()=>df(i,e,t)).catch(eu)}),rw.apply(this,arguments)}function NA(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,we.Z)(function*(n,e){const t=Xe(n),i=e.batch.batchId;try{const r=yield Mb(t.localStore,e);aw(t,i,null),ow(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Kl(t,r)}catch(r){yield eu(r)}}),q_.apply(this,arguments)}function xI(n,e,t){return sw.apply(this,arguments)}function sw(){return sw=(0,we.Z)(function*(n,e,t){const i=Xe(n);try{const r=yield function(s,c){const h=Xe(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.gs.lookupMutationBatch(p,c).next(I=>(Rt(null!==I),y=I.keys(),h.gs.removeMutationBatch(p,I))).next(()=>h.gs.performConsistencyCheck(p)).next(()=>h.Us.Es(p,y))})}(i.localStore,e);aw(i,e,t),ow(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Kl(i,r)}catch(r){yield eu(r)}}),sw.apply(this,arguments)}function W_(){return W_=(0,we.Z)(function*(n,e){const t=Xe(n);ql(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=Xe(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===i)return void e.resolve();const r=t.Fc.get(i)||[];r.push(e),t.Fc.set(i,r)}catch(i){const r=cf(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),W_.apply(this,arguments)}function ow(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function aw(n,e,t){const i=Xe(n);let r=i.$c[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.$c[i.currentUser.toKey()]=r}}function df(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Nc.get(e))n.Cc.delete(i),t&&n.Dc.qc(i,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(i=>{n.Mc.containsKey(i)||K_(n,i)})}function K_(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(rf(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),pg(n))}function fg(n,e,t){for(const i of t)i instanceof Jb?(n.Mc.addReference(i.key,e),kI(n,i)):i instanceof TI?(ze("SyncEngine","Document no longer in limbo: "+i.key),n.Mc.removeReference(i.key,e),n.Mc.containsKey(i.key)||K_(n,i.key)):pt()}function kI(n,e){const t=e.key,i=t.path.canonicalString();n.kc.get(t)||n.xc.has(i)||(ze("SyncEngine","New document in limbo: "+t),n.xc.add(i),pg(n))}function pg(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new rt(Yt.fromString(e)),i=n.Bc.next();n.Oc.set(i,new DI(t)),n.kc=n.kc.insert(t,i),Ub(n.remoteStore,new La(Yi(Np(t.path)),i,2,Fs.A))}}function Kl(n,e,t){return lw.apply(this,arguments)}function lw(){return lw=(0,we.Z)(function*(n,e,t){const i=Xe(n),r=[],s=[],c=[];var h;i.Cc.isEmpty()||(i.Cc.forEach((h,p)=>{c.push(i.Uc(p,e,t).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),r.push(y);const I=S_.Ss(p.targetId,y);s.push(I)}}))}),yield Promise.all(c),i.Dc.To(r),yield(h=(0,we.Z)(function*(p,y){const I=Xe(p);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Ce.forEach(y,x=>Ce.forEach(x.vs,P=>I.persistence.referenceDelegate.addReference(D,x.targetId,P)).next(()=>Ce.forEach(x.Vs,P=>I.persistence.referenceDelegate.removeReference(D,x.targetId,P)))))}catch(D){if(!Zc(D))throw D;ze("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const x=D.targetId;if(!D.fromCache){const P=I.Ms.get(x),J=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);I.Ms=I.Ms.insert(x,J)}}}),function(p,y){return h.apply(this,arguments)})(i.localStore,s))}),lw.apply(this,arguments)}function cw(n,e){return uw.apply(this,arguments)}function uw(){return uw=(0,we.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const i=yield Ab(t.localStore,e);t.currentUser=e,(r=t).Fc.forEach(c=>{c.forEach(h=>{h.reject(new Pe(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Fc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Kl(t,i.qs)}var r}),uw.apply(this,arguments)}function RI(n,e){const t=Xe(n),i=t.Oc.get(e);if(i&&i.Sc)return En().add(i.key);{let r=En();const s=t.Nc.get(e);if(!s)return r;for(const c of s){const h=t.Cc.get(c);r=r.unionWith(h.view.yc)}return r}}function FA(n,e){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,we.Z)(function*(n,e){const t=Xe(n),i=yield og(t.localStore,e.query,!0),r=e.view.vc(i);return t.isPrimaryClient&&fg(t,e.targetId,r.Pc),r}),Z_.apply(this,arguments)}function LA(n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,we.Z)(function*(n){const e=Xe(n);return uI(e.localStore).then(t=>Kl(e,t))}),Y_.apply(this,arguments)}function aO(n,e,t,i){return dw.apply(this,arguments)}function dw(){return dw=(0,we.Z)(function*(n,e,t,i){const r=Xe(n),s=yield function(c,h){const p=Xe(c),y=Xe(p.gs);return p.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.Ge(I,h).next(D=>D?p.Us.Es(I,D):Ce.resolve(null)))}(r.localStore,e);var h;null!==s?("pending"===t?yield Id(r.remoteStore):"acknowledged"===t||"rejected"===t?(aw(r,e,i||null),ow(r,e),h=e,Xe(Xe(r.localStore).gs).Qe(h)):pt(),yield Kl(r,s)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),dw.apply(this,arguments)}function hw(){return hw=(0,we.Z)(function*(n,e){const t=Xe(n);if(gw(t),Q_(t),!0===e&&!0!==t.Lc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield Td(t,i.toArray());t.Lc=!0,yield vI(t.remoteStore,!0);for(const s of r)Ub(t.remoteStore,s)}else if(!1===e&&!1!==t.Lc){const i=[];let r=Promise.resolve();t.Nc.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(df(t,c),wd(t.localStore,c,!0))),rf(t.remoteStore,c)}),yield r,yield Td(t,i),function(s){const c=Xe(s);c.Oc.forEach((h,p)=>{rf(c.remoteStore,p)}),c.Mc.ii(),c.Oc=new Map,c.kc=new Ui(rt.comparator)}(t),t.Lc=!1,yield vI(t.remoteStore,!1)}}),hw.apply(this,arguments)}function Td(n,e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,we.Z)(function*(n,e,t){const i=Xe(n),r=[],s=[];for(const c of e){let h;const p=i.Nc.get(c);if(p&&0!==p.length){h=yield bd(i.localStore,Yi(p[0]));for(const y of p){const I=i.Cc.get(y),D=yield FA(i,I);D.snapshot&&s.push(D.snapshot)}}else{const y=yield cI(i.localStore,c);h=yield bd(i.localStore,y),yield tw(i,OI(y),c,!1)}r.push(h)}return i.Dc.To(s),r}),Dd.apply(this,arguments)}function OI(n){return Qm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lO(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).ds()}function NI(n,e,t,i){return fw.apply(this,arguments)}function fw(){return fw=(0,we.Z)(function*(n,e,t,i){const r=Xe(n);if(r.Lc)ze("SyncEngine","Ignoring unexpected query state notification.");else if(r.Nc.has(e))switch(t){case"current":case"not-current":{const s=yield uI(r.localStore),c=ud.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Kl(r,s,c);break}case"rejected":yield wd(r.localStore,e,!0),df(r,e,i);break;default:pt()}}),fw.apply(this,arguments)}function VA(n,e,t){return pw.apply(this,arguments)}function pw(){return pw=(0,we.Z)(function*(n,e,t){const i=gw(n);if(i.Lc){for(const r of e){if(i.Nc.has(r)){ze("SyncEngine","Adding an already active target "+r);continue}const s=yield cI(i.localStore,r),c=yield bd(i.localStore,s);yield tw(i,OI(s),c.targetId,!1),Ub(i.remoteStore,c)}for(const r of t)i.Nc.has(r)&&(yield wd(i.localStore,r,!1).then(()=>{rf(i.remoteStore,r),df(i,r)}).catch(eu))}}),pw.apply(this,arguments)}function gw(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OA.bind(null,e),e.Dc.To=SA.bind(null,e.eventManager),e.Dc.qc=AA.bind(null,e.eventManager),e}function Q_(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xI.bind(null,e),e}class X_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.O=tf(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return Sb(this.persistence,new rg,e.initialUser,this.O)}jc(e){return new fA(M_.bi,this.O)}Gc(e){return new N_}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class mg extends X_{constructor(e,t,i){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,we.Z)(function*(){yield t().call(i,e),yield function rA(n){return Rb.apply(this,arguments)}(i.localStore),yield i.zc.initialize(i,e),yield Q_(i.zc.syncEngine),yield Id(i.zc.remoteStore),yield i.persistence.Hn(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Wc(e){return Sb(this.persistence,new rg,e.initialUser,this.O)}Qc(e){return new Cb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?us.withCacheSize(this.cacheSizeBytes):us.DEFAULT;return new ig(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,P_(),Vb(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new N_}}class _g extends mg{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,we.Z)(function*(){yield t().call(i,e);const r=i.zc.syncEngine;i.sharedClientState instanceof O_&&(i.sharedClientState.syncEngine={hr:aO.bind(null,r),lr:NI.bind(null,r),dr:VA.bind(null,r),ds:lO.bind(null,r),ar:LA.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Hn(function(){var s=(0,we.Z)(function*(c){yield function gg(n,e){return hw.apply(this,arguments)}(i.zc.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):c||i.gcScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}Gc(e){const t=P_();if(!O_.Vt(t))throw new Pe(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new O_(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class mw{initialize(e,t){var i=this;return(0,we.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>MI(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=cw.bind(null,i.syncEngine),yield vI(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new DA}createDatastore(e){const t=tf(e.databaseInfo.databaseId),i=new oO(e.databaseInfo);return new yA(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=h=>MI(this.syncEngine,h,0),c=dI.Vt()?new dI:new Ed,new L_(t,i,r,s,c);var t,i,r,s,c}createSyncEngine(e,t){return function(i,r,s,c,h,p,y){const I=new SI(i,r,s,c,h,p);return y&&(I.Lc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const i=Xe(t);ze("RemoteStore","RemoteStore shutting down."),i.Ko.add(5),yield $l(i),i.jo.shutdown(),i.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _w(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UA{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new xr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(i=>{i&&i.ac()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,we.Z)(function*(){const t=yield e.tu();if(null===t)return null;const i=e.Xc.decode(t),r=Number(i);isNaN(r)&&e.eu(`length string (${i}) is not valid number`);const s=yield e.nu(r);return new wI(JSON.parse(s),t.length+r)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,we.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}nu(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const i=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,we.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class BA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,we.Z)(function*(s,c){const h=Xe(s),p=Na(h.O)+"/documents",y={documents:c.map(P=>Gc(h.O,P))},I=yield h.Lr("BatchGetDocuments",p,y),D=new Map;I.forEach(P=>{const U=function $h(n,e){return"found"in e?function(t,i){Rt(!!i.found);const r=Bi(t,i.found.name),s=Ai(i.found.updateTime),c=new kr({mapValue:{fields:i.found.fields}});return ii.newFoundDocument(r,s,c)}(n,e):"missing"in e?function(t,i){Rt(!!i.missing),Rt(!!i.readTime);const r=Bi(t,i.missing),s=Ai(i.readTime);return ii.newNoDocument(r,s)}(n,e):pt()}(h.O,P);D.set(U.key.toString(),U)});const x=[];return c.forEach(P=>{const U=D.get(P.toString());Rt(!!U),x.push(U)}),x}),function(s,c){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new s_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=rt.fromPath(r);e.mutations.push(new o_(s,e.precondition(s)))}),yield(i=(0,we.Z)(function*(r,s){const c=Xe(r),h=Na(c.O)+"/documents",p={writes:s.map(y=>Pa(c.O,y))};yield c.Mr("Commit",h,p)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=St.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Pe(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Qi.updateTime(t):Qi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Pe(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qi.updateTime(t)}return Qi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class jA{constructor(e,t,i,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=i,this.deferred=r,this.ru=5,this.ro=new F_(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,we.Z)(function*(){const t=new BA(e.datastore),i=e.cu(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.uu(s)}))}).catch(r=>{e.uu(r)})}))}cu(e){try{const t=this.updateFunction(e);return!Uc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!WS(t)}return!1}}class yw{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Mr.UNAUTHENTICATED,this.clientId=sC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,we.Z)(function*(h){ze("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(ze("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=cf(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function FI(n,e){return LI.apply(this,arguments)}function LI(){return LI=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,we.Z)(function*(s){i.isEqual(s)||(yield Ab(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),LI.apply(this,arguments)}function VI(n,e){return vw.apply(this,arguments)}function vw(){return vw=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nu(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>_I(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>_I(e.remoteStore,s)),n.onlineComponents=e}),vw.apply(this,arguments)}function nu(n){return J_.apply(this,arguments)}function J_(){return J_=(0,we.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield FI(n,new X_)),n.offlineComponents}),J_.apply(this,arguments)}function Zl(n){return UI.apply(this,arguments)}function UI(){return UI=(0,we.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield VI(n,new mw)),n.onlineComponents}),UI.apply(this,arguments)}function bw(n){return nu(n).then(e=>e.persistence)}function ww(n){return nu(n).then(e=>e.localStore)}function HA(n){return Zl(n).then(e=>e.remoteStore)}function ey(n){return Zl(n).then(e=>e.syncEngine)}function vg(n){return ty.apply(this,arguments)}function ty(){return ty=(0,we.Z)(function*(n){const e=yield Zl(n),t=e.eventManager;return t.onListen=xA.bind(null,e.syncEngine),t.onUnlisten=kA.bind(null,e.syncEngine),t}),ty.apply(this,arguments)}function BI(n,e,t={}){const i=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(r,s,c,h,p){const y=new yg({next:D=>{s.enqueueAndForget(()=>Qb(r,I));const x=D.docs.has(c);!x&&D.fromCache?p.reject(new Pe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&h&&"server"===h.source?p.reject(new Pe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),I=new Xb(Np(c.path),y,{includeMetadataChanges:!0,uc:!0});return Zb(r,I)}(yield vg(n),n.asyncQueue,e,t,i)})),i.promise}function jI(n,e,t={}){const i=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(r,s,c,h,p){const y=new yg({next:D=>{s.enqueueAndForget(()=>Qb(r,I)),D.fromCache&&"server"===h.source?p.reject(new Pe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),I=new Xb(c,y,{includeMetadataChanges:!0,uc:!0});return Zb(r,I)}(yield vg(n),n.asyncQueue,e,t,i)})),i.promise}const HI=new Map;function Sd(n,e,t){if(!t)throw new Pe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Cw(n,e,t,i){if(!0===e&&!0===i)throw new Pe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Iw(n){if(!rt.isDocumentKey(n))throw new Pe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tw(n){if(rt.isDocumentKey(n))throw new Pe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":pt()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bg(n);throw new Pe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Dw(n,e){if(e<=0)throw new Pe(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class zI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Cw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hf{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zI({}),this._settingsFrozen=!1,e instanceof Vh?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Pe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vh(r.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new eO;switch(t.type){case"gapi":const i=t.client;return Rt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new jv(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=HI.get(e);t&&(ze("ComponentProvider","Removing Datastore"),HI.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class qr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new qr(this.firestore,e,this._query)}}class Ba extends qr{constructor(e,t,i){super(e,t,Np(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new rt(e))}withConverter(e){return new Ba(this.firestore,e,this._path)}}function ff(n,e,...t){if(n=(0,N.m9)(n),Sd("collection","path",e),n instanceof hf){const i=Yt.fromString(e,...t);return Tw(i),new Ba(n,null,i)}{if(!(n instanceof Wn||n instanceof Ba))throw new Pe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Yt.fromString(e,...t));return Tw(i),new Ba(n.firestore,null,i)}}function pf(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=sC.R()),Sd("doc","path",e),n instanceof hf){const i=Yt.fromString(e,...t);return Iw(i),new Wn(n,null,new rt(i))}{if(!(n instanceof Wn||n instanceof Ba))throw new Pe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Yt.fromString(e,...t));return Iw(i),new Wn(n.firestore,n instanceof Ba?n.converter:null,new rt(i))}}function oa(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof Wn||n instanceof Ba)&&(e instanceof Wn||e instanceof Ba)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function GI(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof qr&&e instanceof qr&&n.firestore===e.firestore&&Lp(n._query,e._query)&&n.converter===e.converter}class ny{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new F_(this,"async_queue_retry"),this.yu=()=>{const t=Vb();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=Vb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Vb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new xr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,we.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!Zc(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(i=>{throw this._u=i,this.wu=!1,Vi("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.wu=!1,i))));return this.hu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const r=lf.createAndSchedule(this,e,t,i,s=>this.Tu(s));return this.du.push(r),r}pu(){this._u&&pt()}verifyOperationInProgress(){}Au(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function Ad(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class XA{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class oi extends hf{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new ny,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||$I(this),this._firestoreClient.terminate()}}function Ji(n){return n._firestoreClient||$I(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $I(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new cC(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new yw(n._authCredentials,n._appCheckCredentials,n._queue,i)}function iy(n,e,t){const i=new xr;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield FI(n,t),yield VI(n,e),i.resolve()}catch(r){if(!("FirebaseError"===(s=r).name?s.code===_e.FAILED_PRECONDITION||s.code===_e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var s})).then(()=>i.promise)}function ry(n){if(n._initialized||n._terminated)throw new Pe(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class aa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ja(sr.fromBase64String(e))}catch(t){throw new Pe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ja(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Md{constructor(e){this._methodName=e}}class sy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const QI=/^__.*__$/;class xw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new cd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bp(e,this.data,t,this.fieldTransforms)}}class kw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new cd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class wg{constructor(e,t,i,r,s,c){this.settings=e,this.databaseId=t,this.O=i,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:i,Cu:!1});return r.Nu(e),r}xu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:i,Cu:!1});return r.vu(),r}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return _f(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(Rw(this.Vu)&&QI.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class XI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=i||tf(e)}Fu(e,t,i,r=!1){return new wg({Vu:e,methodName:t,$u:i,path:mi.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function xd(n){const e=n._freezeSettings(),t=tf(n._databaseId);return new XI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Eg(n,e,t,i,r,s={}){const c=n.Fu(s.merge||s.mergeFields?2:0,e,t,r);Pw("Data must be an object, but it was:",c,i);const h=eT(i,c);let p,y;if(s.merge)p=new ka(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const I=[];for(const D of s.mergeFields){const x=ly(e,D,t);if(!c.contains(x))throw new Pe(_e.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Fw(I,x)||I.push(x)}p=new ka(I),y=c.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=c.fieldTransforms;return new xw(new kr(h),p,y)}class gf extends Md{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}function JI(n,e,t){return new wg({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class oy extends Md{_toFieldTransform(e){return new Ra(e.path,new jc)}isEqual(e){return e instanceof oy}}class nM extends Md{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=JI(this,e,!0),i=this.Bu.map(s=>la(s,t)),r=new od(i);return new Ra(e.path,r)}isEqual(e){return this===e}}class ds extends Md{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=JI(this,e,!0),i=this.Bu.map(s=>la(s,t)),r=new Hc(i);return new Ra(e.path,r)}isEqual(e){return this===e}}class mf extends Md{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new ld(e.O,n_(e.O,this.Lu));return new Ra(e.path,t)}isEqual(e){return this===e}}function Ow(n,e,t,i){const r=n.Fu(1,e,t);Pw("Data must be an object, but it was:",r,i);const s=[],c=kr.empty();nd(i,(p,y)=>{const I=cy(e,p,t);y=(0,N.m9)(y);const D=r.xu(I);if(y instanceof gf)s.push(I);else{const x=la(y,D);null!=x&&(s.push(I),c.set(I,x))}});const h=new ka(s);return new kw(c,h,r.fieldTransforms)}function Nw(n,e,t,i,r,s){const c=n.Fu(1,e,t),h=[ly(e,i,t)],p=[r];if(s.length%2!=0)throw new Pe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)h.push(ly(e,s[x])),p.push(s[x+1]);const y=[],I=kr.empty();for(let x=h.length-1;x>=0;--x)if(!Fw(y,h[x])){const P=h[x];let U=p[x];U=(0,N.m9)(U);const J=c.xu(P);if(U instanceof gf)y.push(P);else{const pe=la(U,J);null!=pe&&(y.push(P),I.set(P,pe))}}const D=new ka(y);return new kw(I,D,c.fieldTransforms)}function iM(n,e,t,i=!1){return la(t,n.Fu(i?4:3,e))}function la(n,e){if(ay(n=(0,N.m9)(n)))return Pw("Unsupported field value:",e,n),eT(n,e);if(n instanceof Md)return function(t,i){if(!Rw(i.Vu))throw i.Ou(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Ou(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const c of t){let h=la(c,i.ku(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return n_(i.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Zi.fromDate(t);return{timestampValue:qp(i.O,r)}}if(t instanceof Zi){const r=new Zi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qp(i.O,r)}}if(t instanceof sy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ja)return{bytesValue:d_(i.O,t._byteString)};if(t instanceof Wn){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.Ou(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:gr(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.Ou(`Unsupported field value: ${bg(t)}`)}(n,e)}function eT(n,e){const t={};return aC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nd(n,(i,r)=>{const s=la(r,e.Du(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function ay(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Zi||n instanceof sy||n instanceof ja||n instanceof Wn||n instanceof Md)}function Pw(n,e,t){if(!ay(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=bg(t);throw e.Ou("an object"===i?n+" a custom object":n+" "+i)}var i}function ly(n,e,t){if((e=(0,N.m9)(e))instanceof aa)return e._internalPath;if("string"==typeof e)return cy(n,e);throw _f("Field path arguments must be of type string or ",n,!1,void 0,t)}const rM=new RegExp("[~\\*/\\[\\]]");function cy(n,e,t){if(e.search(rM)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new aa(...e.split("."))._internalPath}catch(i){throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _f(n,e,t,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new Pe(_e.INVALID_ARGUMENT,h+n+p)}function Fw(n,e){return n.some(t=>t.isEqual(e))}class yf{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uy extends yf{data(){return super.data()}}function vf(n,e){return"string"==typeof e?cy(n,e):e instanceof aa?e._internalPath:e._delegate._internalPath}class bf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ha extends yf{constructor(e,t,i,r,s,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(vf("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Cg extends Ha{data(e={}){return super.data(e)}}class Yl{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bf(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Cg(this._firestore,this._userDataWriter,i.key,i,new bf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new Cg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new bf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const h=new Cg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new bf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:dy(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dy(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function Lw(n,e){return n instanceof Ha&&e instanceof Ha?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Yl&&e instanceof Yl&&n._firestore===e._firestore&&GI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function tT(n){if(Pp(n)&&0===n.explicitOrderBy.length)throw new Pe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kd{}function za(n,...e){for(const t of e)n=t._apply(n);return n}class dO extends kd{constructor(e,t,i){super(),this.Uu=e,this.qu=t,this.Ku=i,this.type="where"}_apply(e){const t=xd(e.firestore),i=function(r,s,c,h,p,y,I){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Pe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){zw(I,y);const P=[];for(const U of I)P.push(Hw(h,r,U));D={arrayValue:{values:P}}}else D=Hw(h,r,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||zw(I,y),D=iM(c,"where",I,"in"===y||"not-in"===y);const x=zr.create(p,y,D);return function(P,U){if(U.S()){const pe=e_(P);if(null!==pe&&!pe.isEqual(U.field))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${pe.toString()}' and '${U.field.toString()}'`);const $e=Jm(P);null!==$e&&sT(0,U.field,$e)}const J=function(pe,$e){for(const Qe of pe.filters)if($e.indexOf(Qe.op)>=0)return Qe.op;return null}(P,function(pe){switch(pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==J)throw new Pe(_e.INVALID_ARGUMENT,J===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${J.toString()}' filters.`)}(r,x),x}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new qr(e.firestore,e.converter,function(r,s){const c=r.filters.concat([s]);return new Ul(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class oM extends kd{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new Pe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Bc(r,s);return function(h,p){if(null===Jm(h)){const y=e_(h);null!==y&&sT(0,y,p.field)}}(i,c),c}(e._query,this.Uu,this.Gu);return new qr(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Ul(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Vw extends kd{constructor(e,t,i){super(),this.type=e,this.ju=t,this.Qu=i}_apply(e){return new qr(e.firestore,e.converter,Fp(e._query,this.ju,this.Qu))}}class Uw extends kd{constructor(e,t,i){super(),this.type=e,this.Wu=t,this.zu=i}_apply(e){const t=jw(e,this.type,this.Wu,this.zu);return new qr(e.firestore,e.converter,(r=t,new Ul((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class Bw extends kd{constructor(e,t,i){super(),this.type=e,this.Wu=t,this.zu=i}_apply(e){const t=jw(e,this.type,this.Wu,this.zu);return new qr(e.firestore,e.converter,(r=t,new Ul((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function jw(n,e,t,i){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof yf)return function(r,s,c,h,p){if(!h)throw new Pe(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const I of sd(r))if(I.field.isKeyField())y.push($v(s,h.key));else{const D=h.data.field(I.field);if(Gm(D))throw new Pe(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=I.field.canonicalString();throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(D)}return new zh(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=xd(n.firestore);return function(s,c,h,p,y,I){const D=s.explicitOrderBy;if(y.length>D.length)throw new Pe(_e.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let P=0;P<y.length;P++){const U=y[P];if(D[P].field.isKeyField()){if("string"!=typeof U)throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!t_(s)&&-1!==U.indexOf("/"))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const J=s.path.child(Yt.fromString(U));if(!rt.isDocumentKey(J))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const pe=new rt(J);x.push($v(c,pe))}else{const J=iM(h,p,U);x.push(J)}}return new zh(x,I)}(n._query,n.firestore._databaseId,r,e,t,i)}}function Hw(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new Pe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t_(e)&&-1!==t.indexOf("/"))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Yt.fromString(t));if(!rt.isDocumentKey(i))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $v(n,new rt(i))}if(t instanceof Wn)return $v(n,t._key);throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bg(t)}.`)}function zw(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sT(n,e,t){if(!t.isEqual(e))throw new Pe(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gw{convertValue(e,t="none"){switch(id(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){const i={};return nd(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new sy(ni(e.latitude),ni(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ap(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Mp(e));default:return null}}convertTimestamp(e){const t=Ll(e);return new Zi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Yt.fromString(e);Rt(ub(i));const r=new Vh(i.get(1),i.get(3)),s=new rt(i.popFirst(5));return r.isEqual(t)||Vi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function $w(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class oT extends Gw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class dM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xd(e)}set(e,t,i){this._verifyNotCommitted();const r=Rd(e,this._firestore),s=$w(r.converter,t,i),c=Eg(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Qi.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Rd(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof aa?Nw(this._dataReader,"WriteBatch.update",s._key,t,i,r):Ow(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,Qi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rd(e,this._firestore);return this._mutations=this._mutations.concat(new s_(t._key,Qi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rd(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new Pe(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wf extends Gw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function hM(n,e,t){n=sn(n,Wn);const i=sn(n.firestore,oi),r=$w(n.converter,e,t);return iu(i,[Eg(xd(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Qi.none())])}function fy(n,e,t,...i){n=sn(n,Wn);const r=sn(n.firestore,oi),s=xd(r);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof aa?Nw(s,"updateDoc",n._key,e,t,i):Ow(s,"updateDoc",n._key,e),iu(r,[c.toMutation(n._key,Qi.exists(!0))])}function lT(n,...e){var t,i,r;n=(0,N.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Ad(e[c])||(s=e[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(Ad(e[c])){const D=e[c];e[c]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[c+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),e[c+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let p,y,I;if(n instanceof Wn)y=sn(n.firestore,oi),I=Np(n._key.path),p={next:D=>{e[c]&&e[c](py(y,n,D))},error:e[c+1],complete:e[c+2]};else{const D=sn(n,qr);y=sn(D.firestore,oi),I=D._query;const x=new wf(y);p={next:P=>{e[c]&&e[c](new Yl(y,x,D,P))},error:e[c+1],complete:e[c+2]},tT(n._query)}return function(D,x,P,U){const J=new yg(U),pe=new Xb(x,J,P);return D.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Zb(yield vg(D),pe)})),()=>{J.Jc(),D.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Qb(yield vg(D),pe)}))}}(Ji(y),I,h,p)}function iu(n,e){return function(t,i){const r=new xr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function RA(n,e,t){return nw.apply(this,arguments)}(yield ey(t),i,r)})),r.promise}(Ji(n),e)}function py(n,e,t){const i=t.docs.get(e._key),r=new wf(n);return new Ha(n,r,e._key,i,new bf(t.hasPendingWrites,t.fromCache),e.converter)}class cT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xd(e)}get(e){const t=Rd(e,this._firestore),i=new oT(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return pt();const s=r[0];if(s.isFoundDocument())return new yf(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new yf(this._firestore,i,t._key,null,t.converter);throw pt()})}set(e,t,i){const r=Rd(e,this._firestore),s=$w(r.converter,t,i),c=Eg(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(e,t,i,...r){const s=Rd(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof aa?Nw(this._dataReader,"Transaction.update",s._key,t,i,r):Ow(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=Rd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rd(e,this._firestore),i=new wf(this._firestore);return super.get(e).then(r=>new Ha(this._firestore,i,t._key,r._document,new bf(!1,!1),t.converter))}}function pT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gT(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function my(){if(!function Lh(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ph=$n.SDK_VERSION,(0,$n._registerComponent)(new fr.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=new oi(r,new nO(t.getProvider("auth-internal")),new iC(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),(0,$n.registerVersion)(eC,"3.4.5",n),(0,$n.registerVersion)(eC,"3.4.5","esm2017")}();class Ig{constructor(e){this._delegate=e}static fromBase64String(e){return my(),new Ig(ja.fromBase64String(e))}static fromUint8Array(e){return gT(),new Ig(ja.fromUint8Array(e))}toBase64(){return my(),this._delegate.toBase64()}toUint8Array(){return gT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hs(n){return function gM(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Ww{enableIndexedDbPersistence(e,t){return function qI(n,e){ry(n=sn(n,oi));const t=Ji(n),i=n._freezeSettings(),r=new mw;return iy(t,r,new mg(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function WI(n){ry(n=sn(n,oi));const e=Ji(n),t=n._freezeSettings(),i=new mw;return iy(e,i,new _g(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function KI(n){if(n._initialized&&!n._terminated)throw new Pe(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(i){if(!ta.Vt())return Promise.resolve();const r=i+"main";yield ta.delete(r)}),function(i){return t.apply(this,arguments)})(D_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class mT{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function YA(n,e,t,i={}){var r;const s=(n=sn(n,hf))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Fh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let c,h;if("string"==typeof i.mockUserToken)c=i.mockUserToken,h=Mr.MOCK_USER;else{c=(0,N.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Pe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Mr(p)}n._authCredentials=new tO(new NS(c,h))}}(this._delegate,e,t,i)}enableNetwork(){return function tM(n){return function Ew(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield bw(n),t=yield HA(n);return e.setNetworkEnabled(!0),function(i){const r=Xe(i);return r.Ko.delete(0),cg(r)}(t)}))}(Ji(n=sn(n,oi)))}(this._delegate)}disableNetwork(){return function cO(n){return function zA(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield bw(n),t=yield HA(n);return e.setNetworkEnabled(!1),(i=(0,we.Z)(function*(r){const s=Xe(r);s.Ko.add(0),yield $l(s),s.Qo.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(Ji(n=sn(n,oi)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Cw("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function eM(n){return function(e){const t=new xr;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function PA(n,e){return W_.apply(this,arguments)}(yield ey(e),t)})),t.promise}(Ji(n=sn(n,oi)))}(this._delegate)}onSnapshotsInSync(e){return function fM(n,e){return function qA(n,e){const t=new yg(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return i=yield vg(n),r=t,Xe(i).Zo.add(r),void r.next();var i,r})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return i=yield vg(n),r=t,void Xe(i).Zo.delete(r);var i,r}))}}(Ji(n=sn(n,oi)),Ad(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pd(this,ff(this._delegate,e))}catch(t){throw Wr(t,"collection()","Firestore.collection()")}}doc(e){try{return new no(this,pf(this._delegate,e))}catch(t){throw Wr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ps(this,function QA(n,e){if(n=sn(n,hf),Sd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qr(n,null,(t=e,new Ul(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Wr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uT(n,e){return function WA(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const i=yield(r=n,Zl(r).then(s=>s.datastore));var r;new jA(n.asyncQueue,i,e,t).run()})),t.promise}(Ji(n=sn(n,oi)),t=>e(new cT(n,t)))}(this._delegate,t=>e(new Zw(this,t)))}batch(){return Ji(this._delegate),new Yw(new dM(this._delegate,e=>iu(this._delegate,e)))}loadBundle(e){return function Mw(n,e){const t=Ji(n=sn(n,oi)),i=new XA;return function KA(n,e,t,i){const r=function(s,c){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return _w(p,y);if(p instanceof ArrayBuffer)return _w(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new UA(p,c);var p}(t,tf(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function PI(n,e,t){const i=Xe(n);var r;(r=(0,we.Z)(function*(s,c,h){try{const p=yield c.getMetadata();if(yield function(x,P){const U=Xe(x),J=Ai(P.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",pe=>U.Kn.getBundleMetadata(pe,P.id)).then(pe=>!!pe&&pe.createTime.compareTo(J)>=0)}(s.localStore,p))return yield c.close(),void h._completeWith((x=p,{taskState:"Success",documentsLoaded:x.totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}));h._updateProgress(II(p));const y=new CI(p,s.localStore,c.O);let I=yield c.Kc();for(;I;){const x=yield y.lc(I);x&&h._updateProgress(x),I=yield c.Kc()}const D=yield y.complete();yield Kl(s,D.ws,void 0),yield function(x,P){const U=Xe(x);return U.persistence.runTransaction("Save bundle","readwrite",J=>U.Kn.saveBundleMetadata(J,P))}(s.localStore,p),h._completeWith(D.progress)}catch(p){Fh("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p)}var x}),function(s,c,h){return r.apply(this,arguments)})(i,e,t).then(()=>{i.sharedClientState.notifyBundleLoaded()})}(yield ey(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function YI(n,e){return function ZA(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,i){const r=Xe(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.Kn.getNamedQuery(s,i))}(yield ww(n),e)}))}(Ji(n=sn(n,oi)),e).then(t=>t?new qr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ps(this,t):null)}}class _y extends Gw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ig(new ja(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return no.forKey(t,this.firestore,null)}}class Zw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _y(e)}get(e){const t=Fd(e);return this._delegate.get(t).then(i=>new Nd(this._firestore,new Ha(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Fd(e);return i?(pT("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Fd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Fd(e);return this._delegate.delete(t),this}}class Yw{constructor(e){this._delegate=e}set(e,t,i){const r=Fd(e);return i?(pT("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Fd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Fd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Od{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Cg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fs(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Od.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Od(e,new _y(e),t),r.set(t,s)),s}}Od.INSTANCES=new WeakMap;class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _y(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new no(t,new Wn(t._delegate,i,new rt(e)))}static forKey(e,t,i){return new no(t,new Wn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Pd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pd(this.firestore,ff(this._delegate,e))}catch(t){throw Wr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof Wn&&oa(this._delegate,e)}set(e,t){t=pT("DocumentReference.set",t);try{return t?hM(this._delegate,e,t):hM(this._delegate,e)}catch(i){throw Wr(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?fy(this._delegate,e):fy(this._delegate,e,t,...i)}catch(r){throw Wr(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Ef(n){return iu(sn(n.firestore,oi),[new s_(n._key,Qi.none())])}(this._delegate)}onSnapshot(...e){const t=_T(e),i=yT(e,r=>new Nd(this.firestore,new Ha(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return lT(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function fO(n){n=sn(n,Wn);const e=sn(n.firestore,oi),t=Ji(e),i=new wf(e);return function GA(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(i=(0,we.Z)(function*(r,s,c){try{const h=yield function(p,y){const I=Xe(p);return I.persistence.runTransaction("read document","readonly",D=>I.Us.ys(D,y))}(r,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Pe(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=cf(h,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield ww(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Ha(e,i,n._key,r,new bf(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function pO(n){n=sn(n,Wn);const e=sn(n.firestore,oi);return BI(Ji(e),n._key,{source:"server"}).then(t=>py(e,n,t))}(this._delegate):function hO(n){n=sn(n,Wn);const e=sn(n.firestore,oi);return BI(Ji(e),n._key).then(t=>py(e,n,t))}(this._delegate),t.then(i=>new Nd(this.firestore,new Ha(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}function Wr(n,e,t){return n.message=n.message.replace(e,t),n}function _T(n){for(const e of n)if("object"==typeof e&&!hs(e))return e;return{}}function yT(n,e){var t,i;let r;return r=hs(n[0])?n[0]:hs(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Nd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new no(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Lw(this._delegate,e._delegate)}}class fs extends Nd{data(e){const t=this._delegate.data(e);return function JR(n,e){n||pt()}(void 0!==t),t}}class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _y(e)}where(e,t,i){try{return new ps(this.firestore,za(this._delegate,function sM(n,e,t){const i=e,r=vf("where",n);return new dO(r,i,t)}(e,t,i)))}catch(r){throw Wr(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ps(this.firestore,za(this._delegate,function nT(n,e="asc"){const t=e,i=vf("orderBy",n);return new oM(i,t)}(e,t)))}catch(i){throw Wr(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ps(this.firestore,za(this._delegate,function aM(n){return Dw("limit",n),new Vw("limit",n,"F")}(e)))}catch(t){throw Wr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ps(this.firestore,za(this._delegate,function iT(n){return Dw("limitToLast",n),new Vw("limitToLast",n,"L")}(e)))}catch(t){throw Wr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ps(this.firestore,za(this._delegate,function lM(...n){return new Uw("startAt",n,!0)}(...e)))}catch(t){throw Wr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ps(this.firestore,za(this._delegate,function cM(...n){return new Uw("startAfter",n,!1)}(...e)))}catch(t){throw Wr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ps(this.firestore,za(this._delegate,function uM(...n){return new Bw("endBefore",n,!1)}(...e)))}catch(t){throw Wr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ps(this.firestore,za(this._delegate,function rT(...n){return new Bw("endAt",n,!0)}(...e)))}catch(t){throw Wr(t,"endAt()","Query.endAt()")}}isEqual(e){return GI(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function mO(n){n=sn(n,qr);const e=sn(n.firestore,oi),t=Ji(e),i=new wf(e);return function $A(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(i=(0,we.Z)(function*(r,s,c){try{const h=yield og(r,s,!0),p=new G_(s,h.Ks),y=p.Ic(h.documents),I=p.applyChanges(y,!1);c.resolve(I.snapshot)}catch(h){const p=cf(h,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield ww(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Yl(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function hy(n){n=sn(n,qr);const e=sn(n.firestore,oi),t=Ji(e),i=new wf(e);return jI(t,n._query,{source:"server"}).then(r=>new Yl(e,i,n,r))}(this._delegate):function gO(n){n=sn(n,qr);const e=sn(n.firestore,oi),t=Ji(e),i=new wf(e);return tT(n._query),jI(t,n._query).then(r=>new Yl(e,i,n,r))}(this._delegate),t.then(i=>new Qw(this.firestore,new Yl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=_T(e),i=yT(e,r=>new Qw(this.firestore,new Yl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return lT(this._delegate,t,i)}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}class vO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fs(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Qw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fs(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vO(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new fs(this._firestore,i))})}isEqual(e){return Lw(this._delegate,e._delegate)}}class Pd extends ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new no(this.firestore,e):null}doc(e){try{return new no(this.firestore,void 0===e?pf(this._delegate):pf(this._delegate,e))}catch(t){throw Wr(t,"doc()","CollectionReference.doc()")}}add(e){return function aT(n,e){const t=sn(n.firestore,oi),i=pf(n),r=$w(n.converter,e);return iu(t,[Eg(xd(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Qi.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new no(this.firestore,t))}isEqual(e){return oa(this._delegate,e._delegate)}withConverter(e){return new Pd(this.firestore,this._delegate.withConverter(e?Od.getInstance(this.firestore,e):null))}}function Fd(n){return sn(n,Wn)}class Xw{constructor(...e){this._delegate=new aa(...e)}static documentId(){return new Xw(mi.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof aa&&this._delegate._internalPath.isEqual(e._internalPath)}}class ru{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dT(){return new oy("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ru(e)}static delete(){const e=function _O(){return new gf("deleteField")}();return e._methodName="FieldValue.delete",new ru(e)}static arrayUnion(...e){const t=function gy(...n){return new nM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ru(t)}static arrayRemove(...e){const t=function hT(...n){return new ds("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ru(t)}static increment(e){const t=function yO(n){return new mf("increment",n)}(e);return t._methodName="FieldValue.increment",new ru(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const mM={Firestore:mT,GeoPoint:sy,Timestamp:Zi,Blob:Ig,Transaction:Zw,WriteBatch:Yw,DocumentReference:no,DocumentSnapshot:Nd,Query:ps,QueryDocumentSnapshot:fs,QuerySnapshot:Qw,CollectionReference:Pd,FieldPath:Xw,FieldValue:ru,setLogLevel:function Kw(n){!function OS(n){Pl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function vT(n){(function bO(n,e){n.INTERNAL.registerComponent(new fr.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},mM)))})(n,(e,t)=>new mT(e,t,new Ww)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(Os.Z);var Tg=F(6451),yy=F(5363);function ar(n,e){return(0,Ii.e)((t,i)=>{let r=null,s=0,c=!1;const h=()=>c&&!r&&i.complete();t.subscribe((0,Pn.x)(i,p=>{null==r||r.unsubscribe();let y=0;const I=s++;(0,Vr.Xf)(n(p,I)).subscribe(r=(0,Pn.x)(i,D=>i.next(e?e(p,D,I,y++):D),()=>{r=null,h()}))},()=>{c=!0,h()}))})}const su=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function vy(n){return(0,Ii.e)((e,t)=>{let i=!1;e.subscribe((0,Pn.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Jw(n=_M){return(0,Ii.e)((e,t)=>{let i=!1;e.subscribe((0,Pn.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function _M(){return new su}function ou(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ti((r,s)=>n(r,s,i)):$s.y,(0,pi.q)(1),t?vy(e):Jw(()=>new su))}var ca=F(576);function wT(n,e){return(0,ca.m)(e)?ar(()=>n,e):ar(()=>n)}var e0=F(9468);F(5867);const by=new Map,s0={activated:!1,tokenObservers:[]},EM={initialized:!1,enabled:!1};function er(n){return by.get(n)||s0}function io(n,e){by.set(n,e)}function Ld(){return EM}class IM{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function TM(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Kr=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function a0(n){if(!er(n).activated)throw Kr.create("use-before-activation",{appName:n.name})}function If(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,we.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});r&&(i["X-Firebase-Client"]=r.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(e),headers:i};let c,h;try{c=yield fetch(n,s)}catch(D){throw Kr.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==c.status)throw Kr.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(D){throw Kr.create("fetch-parse-error",{originalErrorMessage:D.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),I=Date.now();return{token:h.attestationToken,expireTimeMillis:I+y,issuedAtTimeMillis:I}}),IT.apply(this,arguments)}function AM(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Ag="firebase-app-check-store";let Ey=null;function DT(){return Ey||(Ey=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Kr.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ag,{keyPath:"compositeKey"})}}catch(t){e(Kr.create("storage-open",{originalErrorMessage:t.message}))}}),Ey)}function c0(){return c0=(0,we.Z)(function*(n,e){const i=(yield DT()).transaction(Ag,"readwrite"),s=i.objectStore(Ag).put({compositeKey:n,value:e});return new Promise((c,h)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var y;h(Kr.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),c0.apply(this,arguments)}const Cy=new Rs.Yd("@firebase/app-check");function VM(n,e){return(0,N.hl)()?function OM(n,e){return function ST(n,e){return c0.apply(this,arguments)}(function LM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Cy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function UM(){return Ld().enabled}function o(){return a.apply(this,arguments)}function a(){return a=(0,we.Z)(function*(){const n=Ld();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),a.apply(this,arguments)}const u={error:"UNKNOWN_ERROR"};function f(n){return N.US.encodeString(JSON.stringify(n),!1)}function g(n){return v.apply(this,arguments)}function v(){return v=(0,we.Z)(function*(n,e=!1){const t=n.app;a0(t);const i=er(t);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&G(p)&&(r=p)}if(!e&&r&&G(r))return{token:r.token};let h,c=!1;if(UM()){i.exchangeTokenPromise||(i.exchangeTokenPromise=If(AM(t,yield o()),n.platformLoggerProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),c=!0);const p=yield i.exchangeTokenPromise;return yield VM(t,p),io(t,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),c=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Cy.warn(p.message):Cy.error(p),s=p}return r?(h={token:r.token},io(t,Object.assign(Object.assign({},i),{token:r})),yield VM(t,r)):h=ee(s),c&&V(t,h),h}),v.apply(this,arguments)}function T(n,e){const t=er(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),io(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function A(n){const{app:e}=n,t=er(e);let i=t.tokenRefresher;i||(i=function R(n){const{app:e}=n;return new IM((0,we.Z)(function*(){let i;if(i=er(e).token?yield g(n,!0):yield g(n),i.error)throw i.error}),()=>!0,()=>{const t=er(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),io(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function V(n,e){const t=er(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function G(n){return n.expireTimeMillis-Date.now()>0}function ee(n){return{token:f(u),error:n}}class Te{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=er(this.app);for(const t of e)T(this.app,t.next);return Promise.resolve()}}const NO="app-check-internal";!function aB(){(0,$n._registerComponent)(new fr.wA("app-check",n=>function je(n,e){return new Te(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(NO).initialize()})),(0,$n._registerComponent)(new fr.wA(NO,n=>function We(n){return{getToken:e=>g(n,e),addTokenListener:e=>function w(n,e,t,i){const{app:r}=n,s=er(r),c={next:t,error:i,type:e};if(io(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&G(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),A(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>A(n))}(n,"INTERNAL",e),removeTokenListener:e=>T(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$n.registerVersion)("@firebase/app-check","0.5.3")}();class p0{constructor(){return(0,qt.vb)("app-check")}}"undefined"!=typeof window&&window;var xT=F(127);const zM=new d.OlP("angularfire2.auth.use-emulator"),GM=new d.OlP("angularfire2.auth.settings"),$M=new d.OlP("angularfire2.auth.tenant-id"),qM=new d.OlP("angularfire2.auth.langugage-code"),WM=new d.OlP("angularfire2.auth.use-device-language"),KM=new d.OlP("angularfire.auth.persistence"),ZM=(n,e,t,i,r,s,c,h)=>(0,Fn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[y,I]of Object.entries(c))p.settings[y]=I;return h&&p.setPersistence(h),p},[t,i,r,s,c,h]);let g0=(()=>{class n{constructor(t,i,r,s,c,h,p,y,I,D,x,P){const U=new gt.x,J=ot(void 0).pipe((0,yy.Q)(c.outsideAngular),ar(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,tt.U)(()=>(0,Fn.on)(t,s,i)),(0,tt.U)(pe=>ZM(pe,s,h,y,I,D,p,x)),Mo({bufferSize:1,refCount:!1}));if(ll(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ot(null);else{J.pipe(ou()).subscribe();const $e=J.pipe(ar(Ve=>Ve.getRedirectResult().then(en=>en,()=>null)),qt.iC,Mo({bufferSize:1,refCount:!1})),Qe=J.pipe(ar(Ve=>new An.y(en=>({unsubscribe:s.runOutsideAngular(()=>Ve.onAuthStateChanged(Bn=>en.next(Bn),Bn=>en.error(Bn),()=>en.complete()))})))),it=J.pipe(ar(Ve=>new An.y(en=>({unsubscribe:s.runOutsideAngular(()=>Ve.onIdTokenChanged(Bn=>en.next(Bn),Bn=>en.error(Bn),()=>en.complete()))}))));this.authState=$e.pipe(wT(Qe),(0,e0.R)(c.outsideAngular),(0,yy.Q)(c.insideAngular)),this.user=$e.pipe(wT(it),(0,e0.R)(c.outsideAngular),(0,yy.Q)(c.insideAngular)),this.idToken=this.user.pipe(ar(Ve=>Ve?(0,wn.D)(Ve.getIdToken()):ot(null))),this.idTokenResult=this.user.pipe(ar(Ve=>Ve?(0,wn.D)(Ve.getIdTokenResult()):ot(null))),this.credential=(0,Tg.T)($e,U,this.authState.pipe(ti(Ve=>!Ve))).pipe((0,tt.U)(Ve=>(null==Ve?void 0:Ve.user)?Ve:null),(0,e0.R)(c.outsideAngular),(0,yy.Q)(c.insideAngular))}return(0,Fn.pX)(this,J,s,{spy:{apply:(pe,$e,Qe)=>{(pe.startsWith("signIn")||pe.startsWith("createUser"))&&Qe.then(it=>U.next(it))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fn.Dh),d.LFG(Fn.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qt.HU),d.LFG(zM,8),d.LFG(GM,8),d.LFG($M,8),d.LFG(qM,8),d.LFG(WM,8),d.LFG(KM,8),d.LFG(p0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fB=(()=>{class n{constructor(){xT.Z.registerVersion("angularfire",qt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[g0]}),n})();function FO(n,e){return function pB(n,e=ks.z){return new An.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function YM(n,e){return FO(n,e).pipe((0,tt.U)(t=>({payload:t,type:"query"})))}function kT(n,e){return YM(n,e).pipe(Lr(void 0),Sl(),(0,tt.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,h)=>{const p=r.find(I=>I.doc.ref.isEqual(c.ref)),y=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function LO(n,e,t){return kT(n,t).pipe(Wi((i,r)=>function mB(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function _B(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return QM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return QM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QM(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Al(),(0,tt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function QM(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function VO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class UO{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=kT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,tt.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Lr(void 0),Sl(),ti(([i,r])=>r.length>0||!i),(0,tt.U)(([i,r])=>r),qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wi((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=VO(e);return LO(this.query,t,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(e={}){return YM(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),qt.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(qt.iC)}add(e){return this.ref.add(e)}doc(e){return new BO(this.ref.doc(e),this.afs)}}class BO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=zO(i,t);return new UO(r,s,this.afs)}snapshotChanges(){return function gB(n,e){return FO(n,e).pipe(Lr(void 0),Sl(),(0,tt.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(qt.iC)}}class yB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kT(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),ti(t=>t.length>0),qt.iC):kT(this.query,this.afs.schedulers.outsideAngular).pipe(qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wi((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=VO(e);return LO(this.query,t,this.afs.schedulers.outsideAngular).pipe(qt.iC)}valueChanges(e={}){return YM(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),qt.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(qt.iC)}}const jO=new d.OlP("angularfire2.enableFirestorePersistence"),HO=new d.OlP("angularfire2.firestore.persistenceSettings"),vB=new d.OlP("angularfire2.firestore.settings"),bB=new d.OlP("angularfire2.firestore.use-emulator");function zO(n,e=(t=>t)){return{query:e(n),ref:n}}let GO=(()=>{class n{constructor(t,i,r,s,c,h,p,y,I,D,x,P,U,J,pe,$e,Qe){this.schedulers=p;const it=(0,Fn.on)(t,h,i),Ve=I;D&&ZM(it,h,x,U,J,pe,P,$e),[this.firestore,this.persistenceEnabled$]=(0,Fn.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const en=h.runOutsideAngular(()=>it.firestore());if(s&&en.settings(s),Ve&&en.useEmulator(...Ve),r&&!ll(c)){const Bn=()=>{try{return(0,wn.D)(en.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Ri){return"undefined"!=typeof console&&console.warn(Ri),ot(!1)}};return[en,h.runOutsideAngular(Bn)]}return[en,ot(!1)]},[s,Ve,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=zO(r,i),h=this.schedulers.ngZone.run(()=>s);return new UO(h,c,this)}collectionGroup(t,i){const r=i||(c=>c),s=this.firestore.collectionGroup(t);return new yB(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new BO(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fn.Dh),d.LFG(Fn.xv,8),d.LFG(jO,8),d.LFG(vB,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qt.HU),d.LFG(HO,8),d.LFG(bB,8),d.LFG(g0,8),d.LFG(zM,8),d.LFG(GM,8),d.LFG($M,8),d.LFG(qM,8),d.LFG(WM,8),d.LFG(KM,8),d.LFG(p0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wB=(()=>{class n{constructor(){xT.Z.registerVersion("angularfire",qt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:jO,useValue:!0},{provide:HO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[GO]}),n})();class Ln extends gt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function $O(n){return new An.y(e=>{(0,Vr.Xf)(n()).subscribe(e)})}var My=F(515),m0=F(727);function qO(){return(0,Ii.e)((n,e)=>{let t=null;n._refCount++;const i=(0,Pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class EB extends An.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ii.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new m0.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=m0.w0.EMPTY)}return e}refCount(){return qO()(this)}}function Vd(n){return(0,Ii.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,Pn.x)(t,void 0,void 0,c=>{s=(0,Vr.Xf)(n(c,Vd(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}var gs=F(5577);function xy(n,e){return(0,ca.m)(e)?(0,gs.z)(n,e,1):(0,gs.z)(n,1)}function XM(n){return n<=0?()=>My.E:(0,Ii.e)((e,t)=>{let i=[];e.subscribe((0,Pn.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}var ms=F(8505);function WO(n){return(0,Ii.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Ud{constructor(e,t){this.id=e,this.url=t}}class JM extends Ud{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _0 extends Ud{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class KO extends Ud{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class IB extends Ud{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class TB extends Ud{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DB extends Ud{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SB extends Ud{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class AB extends Ud{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MB extends Ud{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZO{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YO{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xB{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kB{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RB{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OB{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QO{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const on="primary";class NB{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ky(n){return new NB(n)}const XO="ngNavigationCancelingError";function ex(n){const e=Error("NavigationCancelingError: "+n);return e[XO]=!0,e}function FB(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],h=n[s];if(c.startsWith(":"))r[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function au(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!JO(n[r],e[r]))return!1;return!0}function JO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function eN(n){return Array.prototype.concat.apply([],n)}function tN(n){return n.length>0?n[n.length-1]:null}function _s(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function lu(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,wn.D)(Promise.resolve(n)):ot(n)}const UB={exact:function rN(n,e,t){if(!kg(n.segments,e.segments)||!RT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!rN(n.children[i],e.children[i],t))return!1;return!0},subset:sN},nN={exact:function BB(n,e){return au(n,e)},subset:function jB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JO(n[t],e[t]))},ignored:()=>!0};function iN(n,e,t){return UB[t.paths](n.root,e.root,t.matrixParams)&&nN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sN(n,e,t){return oN(n,e,e.segments,t)}function oN(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!kg(r,t)||e.hasChildren()||!RT(r,t,i))}if(n.segments.length===t.length){if(!kg(n.segments,t)||!RT(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!sN(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(kg(n.segments,r)&&RT(n.segments,r,i)&&n.children[on])&&oN(n.children[on],e,s,i)}}function RT(n,e,t){return e.every((i,r)=>nN[t](n[r].parameters,i.parameters))}class xg{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ky(this.queryParams)),this._queryParamMap}toString(){return GB.serialize(this)}}class fn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,_s(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return OT(this)}}class y0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ky(this.parameters)),this._parameterMap}toString(){return dN(this)}}function kg(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class aN{}class lN{parse(e){const t=new JB(e);return new xg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${v0(e.root,!0)}`,i=function WB(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${NT(t)}=${NT(r)}`).join("&"):`${NT(t)}=${NT(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function $B(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const GB=new lN;function OT(n){return n.segments.map(e=>dN(e)).join("/")}function v0(n,e){if(!n.hasChildren())return OT(n);if(e){const t=n.children[on]?v0(n.children[on],!1):"",i=[];return _s(n.children,(r,s)=>{s!==on&&i.push(`${s}:${v0(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function zB(n,e){let t=[];return _s(n.children,(i,r)=>{r===on&&(t=t.concat(e(i,r)))}),_s(n.children,(i,r)=>{r!==on&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===on?[v0(n.children[on],!1)]:[`${r}:${v0(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[on]?`${OT(n)}/${t[0]}`:`${OT(n)}/(${t.join("//")})`}}function cN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function NT(n){return cN(n).replace(/%3B/gi,";")}function tx(n){return cN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PT(n){return decodeURIComponent(n)}function uN(n){return PT(n.replace(/\+/g,"%20"))}function dN(n){return`${tx(n.path)}${function qB(n){return Object.keys(n).map(e=>`;${tx(e)}=${tx(n[e])}`).join("")}(n.parameters)}`}const KB=/^[^\/()?;=#]+/;function FT(n){const e=n.match(KB);return e?e[0]:""}const ZB=/^[^=?&#]+/,QB=/^[^&#]+/;class JB{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fn([],{}):new fn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[on]=new fn(e,t)),i}parseSegment(){const e=FT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new y0(PT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=FT(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=FT(this.remaining);r&&(i=r,this.capture(i))}e[PT(t)]=PT(i)}parseQueryParam(e){const t=function YB(n){const e=n.match(ZB);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const c=function XB(n){const e=n.match(QB);return e?e[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=uN(t),s=uN(i);if(e.hasOwnProperty(r)){let c=e[r];Array.isArray(c)||(c=[c],e[r]=c),c.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=FT(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=on);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[on]:new fn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class hN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nx(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=nx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ix(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ix(e,this._root).map(t=>t.value)}}function nx(n,e){if(n===e.value)return e;for(const t of e.children){const i=nx(n,t);if(i)return i}return null}function ix(n,e){if(n===e.value)return[e];for(const t of e.children){const i=ix(n,t);if(i.length)return i.unshift(e),i}return[]}class Bd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ry(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fN extends hN{constructor(e,t){super(e),this.snapshot=t,rx(this,e)}toString(){return this.snapshot.toString()}}function pN(n,e){const t=function e2(n,e){const c=new LT([],{},{},"",{},on,e,null,n.root,-1,{});return new mN("",new Bd(c,[]))}(n,e),i=new Ln([new y0("",{})]),r=new Ln({}),s=new Ln({}),c=new Ln({}),h=new Ln(""),p=new Oy(i,r,c,h,s,on,e,t.root);return p.snapshot=t.root,new fN(new Bd(p,[]),t)}class Oy{constructor(e,t,i,r,s,c,h,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,tt.U)(e=>ky(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,tt.U)(e=>ky(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gN(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function t2(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class LT{constructor(e,t,i,r,s,c,h,p,y,I,D){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=I,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ky(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ky(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mN extends hN{constructor(e,t){super(t),this.url=e,rx(this,t)}toString(){return _N(this._root)}}function rx(n,e){e.value._routerState=n,e.children.forEach(t=>rx(n,t))}function _N(n){const e=n.children.length>0?` { ${n.children.map(_N).join(", ")} } `:"";return`${n.value}${e}`}function sx(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,au(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),au(e.params,t.params)||n.params.next(t.params),function LB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!au(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),au(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ox(n,e){const t=au(n.params,e.params)&&function HB(n,e){return kg(n,e)&&n.every((t,i)=>au(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ox(n.parent,e.parent))}function b0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function r2(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return b0(n,i,r);return b0(n,i)})}(n,e,t);return new Bd(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>b0(n,h)),c}}const i=function s2(n){return new Oy(new Ln(n.url),new Ln(n.params),new Ln(n.queryParams),new Ln(n.fragment),new Ln(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>b0(n,s));return new Bd(i,r)}}function VT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function w0(n){return"object"==typeof n&&null!=n&&n.outlets}function ax(n,e,t,i,r){let s={};return i&&_s(i,(c,h)=>{s[h]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`}),new xg(t.root===n?e:yN(t.root,n,e),s,r)}function yN(n,e,t){const i={};return _s(n.children,(r,s)=>{i[s]=r===e?t:yN(r,e,t)}),new fn(n.segments,i)}class vN{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&VT(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(w0);if(r&&r!==tN(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lx{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function bN(n,e,t){if(n||(n=new fn([],{})),0===n.segments.length&&n.hasChildren())return UT(n,e,t);const i=function d2(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const c=n.segments[r],h=t[i];if(w0(h))break;const p=`${h}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!EN(p,y,c))return s;i+=2}else{if(!EN(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new fn(n.segments.slice(0,i.pathIndex),{});return s.children[on]=new fn(n.segments.slice(i.pathIndex),n.children),UT(s,0,r)}return i.match&&0===r.length?new fn(n.segments,{}):i.match&&!n.hasChildren()?cx(n,e,t):i.match?UT(n,0,r):cx(n,e,t)}function UT(n,e,t){if(0===t.length)return new fn(n.segments,{});{const i=function u2(n){return w0(n[0])?n[0].outlets:{[on]:n}}(t),r={};return _s(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=bN(n.children[c],e,s))}),_s(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new fn(n.segments,r)}}function cx(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(w0(s)){const p=h2(s.outlets);return new fn(i,p)}if(0===r&&VT(t[0])){i.push(new y0(n.segments[e].path,wN(t[0]))),r++;continue}const c=w0(s)?s.outlets[on]:`${s}`,h=r<t.length-1?t[r+1]:null;c&&h&&VT(h)?(i.push(new y0(c,wN(h))),r+=2):(i.push(new y0(c,{})),r++)}return new fn(i,{})}function h2(n){const e={};return _s(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=cx(new fn([],{}),0,t))}),e}function wN(n){const e={};return _s(n,(t,i)=>e[i]=`${t}`),e}function EN(n,e,t){return n==t.path&&au(e,t.parameters)}class p2{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),sx(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ry(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),_s(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ry(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ry(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ry(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new OB(s.value.snapshot))}),e.children.length&&this.forwardEvent(new kB(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(sx(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),sx(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function g2(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),p=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=r,c.resolver=p,c.outlet&&c.outlet.activateWith(r,p),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,i)}}class ux{constructor(e,t){this.routes=e,this.module=t}}function Tf(n){return"function"==typeof n}function Rg(n){return n instanceof xg}const E0=Symbol("INITIAL_VALUE");function C0(){return ar(n=>dr(n.map(e=>e.pipe((0,pi.q)(1),Lr(E0)))).pipe(Wi((e,t)=>{let i=!1;return t.reduce((r,s,c)=>r!==E0?r:(s===E0&&(i=!0),i||!1!==s&&c!==t.length-1&&!Rg(s)?r:s),e)},E0),ti(e=>e!==E0),(0,tt.U)(e=>Rg(e)?e:!0===e),(0,pi.q)(1)))}class w2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new I0,this.attachRef=null}}class I0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new w2,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let dx=(()=>{class n{constructor(t,i,r,s,c){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=s||on,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new E2(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(I0),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class E2{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Oy?this.route:e===I0?this.childContexts:this.parent.get(e,t)}}let CN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&d._UZ(0,"router-outlet")},directives:[dx],encapsulation:2}),n})();function IN(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];C2(i,I2(e,i))}}function C2(n,e){n.children&&IN(n.children,e)}function I2(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function hx(n){const e=n.children&&n.children.map(hx),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==on&&(t.component=CN),t}function $a(n){return n.outlet||on}function TN(n,e){const t=n.filter(i=>$a(i)===e);return t.push(...n.filter(i=>$a(i)!==e)),t}const DN={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function BT(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},DN):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||FB)(t,n,e);if(!s)return Object.assign({},DN);const c={};_s(s.posParams,(p,y)=>{c[y]=p.path});const h=s.consumed.length>0?Object.assign(Object.assign({},c),s.consumed[s.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:h,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function jT(n,e,t,i,r="corrected"){if(t.length>0&&function S2(n,e,t){return t.some(i=>HT(n,e,i)&&$a(i)!==on)}(n,t,i)){const c=new fn(e,function D2(n,e,t,i){const r={};r[on]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&$a(s)!==on){const c=new fn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,r[$a(s)]=c}return r}(n,e,i,new fn(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function A2(n,e,t){return t.some(i=>HT(n,e,i))}(n,t,i)){const c=new fn(n.segments,function T2(n,e,t,i,r,s){const c={};for(const h of i)if(HT(n,t,h)&&!r[$a(h)]){const p=new fn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,c[$a(h)]=p}return Object.assign(Object.assign({},r),c)}(n,e,t,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const s=new fn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function HT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function SN(n,e,t,i){return!!($a(n)===i||i!==on&&HT(e,t,n))&&("**"===n.path||BT(e,n,t).matched)}function AN(n,e,t){return 0===e.length&&!n.children[t]}class T0{constructor(e){this.segmentGroup=e||null}}class MN{constructor(e){this.urlTree=e}}function zT(n){return new An.y(e=>e.error(new T0(n)))}function xN(n){return new An.y(e=>e.error(new MN(n)))}function M2(n){return new An.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class R2{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=jT(this.urlTree.root,[],[],this.config).segmentGroup,t=new fn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,on).pipe((0,tt.U)(s=>this.createUrlTree(fx(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Vd(s=>{if(s instanceof MN)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof T0?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,on).pipe((0,tt.U)(r=>this.createUrlTree(fx(r),e.queryParams,e.fragment))).pipe(Vd(r=>{throw r instanceof T0?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new fn([],{[on]:e}):e;return new xg(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,tt.U)(s=>new fn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,wn.D)(r).pipe(xy(s=>{const c=i.children[s],h=TN(t,s);return this.expandSegmentGroup(e,h,c,s).pipe((0,tt.U)(p=>({segment:p,outlet:s})))}),Wi((s,c)=>(s[c.outlet]=c.segment,s),{}),function CB(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ti((r,s)=>n(r,s,i)):$s.y,XM(1),t?vy(e):Jw(()=>new su))}())}expandSegment(e,t,i,r,s,c){return(0,wn.D)(i).pipe(xy(h=>this.expandSegmentAgainstRoute(e,t,i,h,r,s,c).pipe(Vd(y=>{if(y instanceof T0)return ot(null);throw y}))),ou(h=>!!h),Vd((h,p)=>{if(h instanceof su||"EmptyError"===h.name){if(AN(t,r,s))return ot(new fn([],{}));throw new T0(t)}throw h}))}expandSegmentAgainstRoute(e,t,i,r,s,c,h){return SN(r,t,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c):zT(t):zT(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?xN(s):this.lineralizeSegments(i,s).pipe((0,gs.z)(c=>{const h=new fn(c,{});return this.expandSegment(e,h,t,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c){const{matched:h,consumedSegments:p,lastChild:y,positionalParamSegments:I}=BT(t,r,s);if(!h)return zT(t);const D=this.applyRedirectCommands(p,r.redirectTo,I);return r.redirectTo.startsWith("/")?xN(D):this.lineralizeSegments(r,D).pipe((0,gs.z)(x=>this.expandSegment(e,t,i,x.concat(s.slice(y)),c,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?ot(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,tt.U)(x=>(i._loadedConfig=x,new fn(r,{})))):ot(new fn(r,{}));const{matched:c,consumedSegments:h,lastChild:p}=BT(t,i,r);if(!c)return zT(t);const y=r.slice(p);return this.getChildConfig(e,i,r).pipe((0,gs.z)(D=>{const x=D.module,P=D.routes,{segmentGroup:U,slicedSegments:J}=jT(t,h,y,P),pe=new fn(U.segments,U.children);if(0===J.length&&pe.hasChildren())return this.expandChildren(x,P,pe).pipe((0,tt.U)(Ve=>new fn(h,Ve)));if(0===P.length&&0===J.length)return ot(new fn(h,{}));const $e=$a(i)===s;return this.expandSegment(x,pe,P,J,$e?on:s,!0).pipe((0,tt.U)(it=>new fn(h.concat(it.segments),it.children)))}))}getChildConfig(e,t,i){return t.children?ot(new ux(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ot(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,gs.z)(r=>r?this.configLoader.load(e.injector,t).pipe((0,tt.U)(s=>(t._loadedConfig=s,s))):function x2(n){return new An.y(e=>e.error(ex(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):ot(new ux([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return ot(!0);const s=r.map(c=>{const h=e.get(c);let p;if(function _2(n){return n&&Tf(n.canLoad)}(h))p=h.canLoad(t,i);else{if(!Tf(h))throw new Error("Invalid CanLoad guard");p=h(t,i)}return lu(p)});return ot(s).pipe(C0(),(0,ms.b)(c=>{if(!Rg(c))return;const h=ex(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,tt.U)(c=>!0===c))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ot(i);if(r.numberOfChildren>1||!r.children[on])return M2(e.redirectTo);r=r.children[on]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new xg(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return _s(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=t[h]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let c={};return _s(t.children,(h,p)=>{c[p]=this.createSegmentGroup(e,h,i,r)}),new fn(s,c)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function fx(n){const e={};for(const i of Object.keys(n.children)){const s=fx(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function O2(n){if(1===n.numberOfChildren&&n.children[on]){const e=n.children[on];return new fn(n.segments.concat(e.segments),e.children)}return n}(new fn(n.segments,e))}class kN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class GT{constructor(e,t){this.component=e,this.route=t}}function P2(n,e,t){const i=n._root;return D0(i,e?e._root:null,t,[i.value])}function $T(n,e,t){const i=function L2(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function D0(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ry(e);return n.children.forEach(c=>{(function V2(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function U2(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!kg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!kg(n.url,e.url)||!au(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ox(n,e)||!au(n.queryParams,e.queryParams);default:return!ox(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new kN(i)):(s.data=c.data,s._resolvedData=c._resolvedData),D0(n,e,s.component?h?h.children:null:t,i,r),p&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new GT(h.outlet.component,c))}else c&&S0(e,h,r),r.canActivateChecks.push(new kN(i)),D0(n,null,s.component?h?h.children:null:t,i,r)})(c,s[c.value.outlet],t,i.concat([c.value]),r),delete s[c.value.outlet]}),_s(s,(c,h)=>S0(c,t.getContext(h),r)),r}function S0(n,e,t){const i=Ry(n),r=n.value;_s(i,(s,c)=>{S0(s,r.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new GT(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class K2{}function RN(n){return new An.y(e=>e.error(n))}class Y2{constructor(e,t,i,r,s,c){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=c}recognize(){const e=jT(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,on);if(null===t)return null;const i=new LT([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},on,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Bd(i,t),s=new mN(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=gN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const c=t.children[s],h=TN(e,s),p=this.processSegmentGroup(h,c,s);if(null===p)return null;i.push(...p)}const r=ON(i);return function Q2(n){n.sort((e,t)=>e.value.outlet===on?-1:t.value.outlet===on?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const c=this.processSegmentAgainstRoute(s,t,i,r);if(null!==c)return c}return AN(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!SN(e,t,i,r))return null;let s,c=[],h=[];if("**"===e.path){const P=i.length>0?tN(i).parameters:{};s=new LT(i,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,FN(e),$a(e),e.component,e,NN(t),PN(t)+i.length,LN(e))}else{const P=BT(t,e,i);if(!P.matched)return null;c=P.consumedSegments,h=i.slice(P.lastChild),s=new LT(c,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,FN(e),$a(e),e.component,e,NN(t),PN(t)+c.length,LN(e))}const p=function X2(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:I}=jT(t,c,h,p.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===I.length&&y.hasChildren()){const P=this.processChildren(p,y);return null===P?null:[new Bd(s,P)]}if(0===p.length&&0===I.length)return[new Bd(s,[])];const D=$a(e)===r,x=this.processSegment(p,y,I,D?on:r);return null===x?null:[new Bd(s,x)]}}function J2(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ON(n){const e=[],t=new Set;for(const i of n){if(!J2(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=ON(i.children);e.push(new Bd(i.value,r))}return e.filter(i=>!t.has(i))}function NN(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function PN(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function FN(n){return n.data||{}}function LN(n){return n.resolve||{}}function VN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function px(n){return ar(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,tt.U)(()=>e)):ot(e)})}class aj extends class oj{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const gx=new d.OlP("ROUTES");class UN{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe((0,tt.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=s.create(e);return new ux(eN(c.injector.get(gx,void 0,d.XFs.Self|d.XFs.Optional)).map(hx),c)}),Vd(s=>{throw t._loader$=void 0,s}));return t._loader$=new EB(r,()=>new gt.x).pipe(qO()),t._loader$}loadModuleFactory(e){return lu(e()).pipe((0,gs.z)(t=>t instanceof d.YKP?ot(t):(0,wn.D)(this.compiler.compileModuleAsync(t))))}}class cj{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function uj(n){throw n}function dj(n,e,t){return e.parse("/")}function BN(n,e){return ot(null)}const hj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let so=(()=>{class n{constructor(t,i,r,s,c,h,p){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gt.x,this.errorHandler=uj,this.malformedUriErrorHandler=dj,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:BN,afterPreactivation:BN},this.urlHandlingStrategy=new cj,this.routeReuseStrategy=new aj,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const D=c.get(d.R0b);this.isNgZoneEnabled=D instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function VB(){return new xg(new fn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new UN(c,h,x=>this.triggerEvent(new ZO(x)),x=>this.triggerEvent(new YO(x))),this.routerState=pN(this.currentUrlTree,this.rootComponentType),this.transitions=new Ln({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(ti(r=>0!==r.id),(0,tt.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ar(r=>{let s=!1,c=!1;return ot(r).pipe((0,ms.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ar(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return qT(h.source)&&(this.browserUrlTree=h.extractedUrl),ot(h).pipe(ar(D=>{const x=this.transitions.getValue();return i.next(new JM(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?My.E:Promise.resolve(D)}),function N2(n,e,t,i){return ar(r=>function k2(n,e,t,i,r){return new R2(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,tt.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ms.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function ej(n,e,t,i,r){return(0,gs.z)(s=>function Z2(n,e,t,i,r="emptyOnly",s="legacy"){try{const c=new Y2(n,e,t,i,r,s).recognize();return null===c?RN(new K2):ot(c)}catch(c){return RN(c)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe((0,tt.U)(c=>Object.assign(Object.assign({},s),{targetSnapshot:c}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ms.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(P,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new TB(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:P,source:U,restoredState:J,extras:pe}=h,$e=new JM(x,this.serializeUrl(P),U,J);i.next($e);const Qe=pN(P,this.rootComponentType).snapshot;return ot(Object.assign(Object.assign({},h),{targetSnapshot:Qe,urlAfterRedirects:P,extras:Object.assign(Object.assign({},pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),My.E}),px(h=>{const{targetSnapshot:p,id:y,extractedUrl:I,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:P}}=h;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:I,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!P})}),(0,ms.b)(h=>{const p=new DB(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,tt.U)(h=>Object.assign(Object.assign({},h),{guards:P2(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function B2(n,e){return(0,gs.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?ot(Object.assign(Object.assign({},t),{guardsResult:!0})):function j2(n,e,t,i){return(0,wn.D)(n).pipe((0,gs.z)(r=>function W2(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ot(s.map(h=>{const p=$T(h,e,r);let y;if(function b2(n){return n&&Tf(n.canDeactivate)}(p))y=lu(p.canDeactivate(n,e,t,i));else{if(!Tf(p))throw new Error("Invalid CanDeactivate guard");y=lu(p(n,e,t,i))}return y.pipe(ou())})).pipe(C0()):ot(!0)}(r.component,r.route,t,e,i)),ou(r=>!0!==r,!0))}(c,i,r,n).pipe((0,gs.z)(h=>h&&function m2(n){return"boolean"==typeof n}(h)?function H2(n,e,t,i){return(0,wn.D)(e).pipe(xy(r=>qo(function G2(n,e){return null!==n&&e&&e(new xB(n)),ot(!0)}(r.route.parent,i),function z2(n,e){return null!==n&&e&&e(new RB(n)),ot(!0)}(r.route,i),function q2(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function F2(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>$O(()=>ot(c.guards.map(p=>{const y=$T(p,c.node,t);let I;if(function v2(n){return n&&Tf(n.canActivateChild)}(y))I=lu(y.canActivateChild(i,n));else{if(!Tf(y))throw new Error("Invalid CanActivateChild guard");I=lu(y(i,n))}return I.pipe(ou())})).pipe(C0())));return ot(s).pipe(C0())}(n,r.path,t),function $2(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ot(!0);const r=i.map(s=>$O(()=>{const c=$T(s,e,t);let h;if(function y2(n){return n&&Tf(n.canActivate)}(c))h=lu(c.canActivate(e,n));else{if(!Tf(c))throw new Error("Invalid CanActivate guard");h=lu(c(e,n))}return h.pipe(ou())}));return ot(r).pipe(C0())}(n,r.route,t))),ou(r=>!0!==r,!0))}(i,s,n,e):ot(h)),(0,tt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,ms.b)(h=>{if(Rg(h.guardsResult)){const y=ex(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new SB(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),ti(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),px(h=>{if(h.guards.canActivateChecks.length)return ot(h).pipe((0,ms.b)(p=>{const y=new AB(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),ar(p=>{let y=!1;return ot(p).pipe(function tj(n,e){return(0,gs.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ot(t);let s=0;return(0,wn.D)(r).pipe(xy(c=>function nj(n,e,t,i){return function ij(n,e,t,i){const r=VN(n);if(0===r.length)return ot({});const s={};return(0,wn.D)(r).pipe((0,gs.z)(c=>function rj(n,e,t,i){const r=$T(n,e,i);return lu(r.resolve?r.resolve(e,t):r(e,t))}(n[c],e,t,i).pipe((0,ms.b)(h=>{s[c]=h}))),XM(1),(0,gs.z)(()=>VN(s).length===r.length?ot(s):My.E))}(n._resolve,n,e,i).pipe((0,tt.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),gN(n,t).resolve),null)))}(c.route,i,n,e)),(0,ms.b)(()=>s++),XM(1),(0,gs.z)(c=>s===r.length?ot(t):My.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ms.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,ms.b)(p=>{const y=new MB(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),px(h=>{const{targetSnapshot:p,id:y,extractedUrl:I,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:P}}=h;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:I,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!P})}),(0,tt.U)(h=>{const p=function n2(n,e,t){const i=b0(n,e._root,t?t._root:void 0);return new fN(i,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:p})}),(0,ms.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,tt.U)(i=>(new p2(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,ms.b)({next(){s=!0},complete(){s=!0}}),WO(()=>{var h;s||c||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===r.id&&(this.currentNavigation=null)}),Vd(h=>{if(c=!0,function PB(n){return n&&n[XO]}(h)){const p=Rg(h.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const y=new KO(r.id,this.serializeUrl(r.extractedUrl),h.message);i.next(y),p?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qT(r.source)};this.scheduleNavigation(I,"imperative",null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new IB(r.id,this.serializeUrl(r.extractedUrl),h);i.next(p);try{r.resolve(this.errorHandler(h))}catch(y){r.reject(y)}}return My.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},c=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(c){const p=Object.assign({},c);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,i,c,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){IN(t),this.config=t.map(hx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:p}=i,y=r||this.routerState.root,I=p?this.currentUrlTree.fragment:c;let D=null;switch(h){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function o2(n,e,t,i,r){if(0===t.length)return ax(e.root,e.root,e,i,r);const s=function a2(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vN(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return _s(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new vN(t,e,i)}(t);if(s.toRoot())return ax(e.root,new fn([],{}),e,i,r);const c=function l2(n,e,t){if(n.isAbsolute)return new lx(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new lx(s,s===e.root,0)}const i=VT(n.commands[0])?0:1;return function c2(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new lx(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),h=c.processChildren?UT(c.segmentGroup,c.index,s.commands):bN(c.segmentGroup,c.index,s.commands);return ax(c.segmentGroup,h,e,i,r)}(y,this.currentUrlTree,t,D,null!=I?I:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Rg(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function pj(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},hj):!1===i?Object.assign({},fj):i,Rg(t))return iN(this.currentUrlTree,t,r);const s=this.parseUrl(t);return iN(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new _0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,c){var h,p,y;if(this.disposed)return Promise.resolve(!1);const I=this.transitions.value,D=qT(i)&&I&&!qT(I.source),x=I.rawUrl.toString()===t.toString(),P=I.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(D&&x&&P)return Promise.resolve(!0);let J,pe,$e;c?(J=c.resolve,pe=c.reject,$e=c.promise):$e=new Promise((Ve,en)=>{J=Ve,pe=en});const Qe=++this.navigationId;let it;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),it=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):it=0,this.setTransition({id:Qe,targetPageId:it,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:J,reject:pe,promise:$e,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),$e.catch(Ve=>Promise.reject(Ve))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===c?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new KO(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function qT(n){return"imperative"!==n}let Og=(()=>{class n{constructor(t,i,r,s,c){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new gt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Ny(this.skipLocationChange),replaceUrl:Ny(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ny(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(so),d.Y36(Oy),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&d.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function Ny(n){return""===n||!!n}class jN{}class HN{preload(e,t){return ot(null)}}let zN=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new UN(r,i,p=>t.triggerEvent(new ZO(p)),p=>t.triggerEvent(new YO(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(ti(t=>t instanceof _0),xy(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const c=s._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return(0,wn.D)(r).pipe((0,Do.J)(),(0,tt.U)(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?ot(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,gs.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(so),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(jN))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),_x=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof JM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof QO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new QO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ng=new d.OlP("ROUTER_CONFIGURATION"),GN=new d.OlP("ROUTER_FORROOT_GUARD"),yj=[De,{provide:aN,useClass:lN},{provide:so,useFactory:function Cj(n,e,t,i,r,s,c={},h,p){const y=new so(null,n,e,t,i,r,eN(s));return h&&(y.urlHandlingStrategy=h),p&&(y.routeReuseStrategy=p),function Ij(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,y),c.enableTracing&&y.events.subscribe(I=>{var D,x;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(x=console.groupEnd)||void 0===x||x.call(console)}),y},deps:[aN,I0,De,d.zs3,d.Sil,gx,Ng,[class lj{},new d.FiY],[class sj{},new d.FiY]]},I0,{provide:Oy,useFactory:function Tj(n){return n.routerState.root},deps:[so]},zN,HN,class _j{preload(e,t){return t().pipe(Vd(()=>ot(null)))}},{provide:Ng,useValue:{enableTracing:!1}}];function vj(){return new d.PXZ("Router",so)}let $N=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[yj,qN(t),{provide:GN,useFactory:Ej,deps:[[so,new d.FiY,new d.tp0]]},{provide:Ng,useValue:i||{}},{provide:Y,useFactory:wj,deps:[ue,[new d.tBr(Re),new d.FiY],Ng]},{provide:_x,useFactory:bj,deps:[so,Jd,Ng]},{provide:jN,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:HN},{provide:d.PXZ,multi:!0,useFactory:vj},[yx,{provide:d.ip1,multi:!0,useFactory:Dj,deps:[yx]},{provide:WN,useFactory:Sj,deps:[yx]},{provide:d.tb,multi:!0,useExisting:WN}]]}}static forChild(t){return{ngModule:n,providers:[qN(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(GN,8),d.LFG(so,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function bj(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new _x(n,e,t)}function wj(n,e,t={}){return t.useHash?new fe(n,e):new Oe(n,e)}function Ej(n){return"guarded"}function qN(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:gx,multi:!0,useValue:n}]}let yx=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new gt.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(h=>i=h),s=this.injector.get(so),c=this.injector.get(Ng);return"disabled"===c.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?ot(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Ng),r=this.injector.get(zN),s=this.injector.get(_x),c=this.injector.get(so),h=this.injector.get(d.z2F);t===h.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&c.initialNavigation(),r.setUpPreloading(),s.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Dj(n){return n.appInitializer.bind(n)}function Sj(n){return n.bootstrapListener.bind(n)}const WN=new d.OlP("Router Initializer");let Df=(()=>{class n{constructor(t,i,r,s){this.afs=t,this.afAuth=i,this.router=r,this.ngZone=s,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,i){return this.afAuth.signInWithEmailAndPassword(t,i).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SignUp(t,i){return this.afAuth.createUserWithEmailAndPassword(t,i).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new Ur.N).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(GO),d.LFG(g0),d.LFG(so),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Mj=F(1144);const xj=["addListener","removeListener"],kj=["addEventListener","removeEventListener"],Rj=["on","off"];function A0(n,e,t,i){if((0,ca.m)(t)&&(i=t,t=void 0),i)return A0(n,e,t).pipe($o(i));const[r,s]=function Pj(n){return(0,ca.m)(n.addEventListener)&&(0,ca.m)(n.removeEventListener)}(n)?kj.map(c=>h=>n[c](e,h,t)):function Oj(n){return(0,ca.m)(n.addListener)&&(0,ca.m)(n.removeListener)}(n)?xj.map(KN(n,e)):function Nj(n){return(0,ca.m)(n.on)&&(0,ca.m)(n.off)}(n)?Rj.map(KN(n,e)):[];if(!r&&(0,Mj.z)(n))return(0,gs.z)(c=>A0(c,e,t))((0,Vr.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new An.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return r(h),()=>s(h)})}function KN(n,e){return t=>i=>n[t](e,i)}var ZN=F(4408);const M0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=M0;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new m0.w0(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=M0;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=M0;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var YN=F(7565);new class Lj extends YN.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Fj extends ZN.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=M0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(M0.cancelAnimationFrame(t),e._scheduled=void 0)}});let vx,Uj=1;const WT={};function QN(n){return n in WT&&(delete WT[n],!0)}const Bj={setImmediate(n){const e=Uj++;return WT[e]=!0,vx||(vx=Promise.resolve()),vx.then(()=>QN(e)&&n()),e},clearImmediate(n){QN(n)}},{setImmediate:jj,clearImmediate:Hj}=Bj,KT={setImmediate(...n){const{delegate:e}=KT;return((null==e?void 0:e.setImmediate)||jj)(...n)},clearImmediate(n){const{delegate:e}=KT;return((null==e?void 0:e.clearImmediate)||Hj)(n)},delegate:void 0};new class Gj extends YN.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class zj extends ZN.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=KT.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(KT.clearImmediate(t),e._scheduled=void 0)}});var Wj=F(3532);function XN(n,e=ks.z){return function qj(n){return(0,Ii.e)((e,t)=>{let i=!1,r=null,s=null,c=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const y=r;r=null,t.next(y)}c&&t.complete()},p=()=>{s=null,c&&t.complete()};e.subscribe((0,Pn.x)(t,y=>{i=!0,r=y,s||(0,Vr.Xf)(n(y)).subscribe(s=(0,Pn.x)(t,h,p))},()=>{c=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function Zj(n=0,e,t=ks.P){let i=-1;return null!=e&&((0,Wj.K)(e)?t=e:i=e),new An.y(r=>{let s=function Kj(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let c=0;return t.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}const Yj=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function Qj(){return(0,d.f3M)(se)}}),Xj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let JN=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function Jj(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Xj.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yj,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),bx=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new gt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new An.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(XN(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ot()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ti(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Er(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>A0(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(Cr),d.LFG(se,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x0=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new gt.x,this._elementScrolled=new An.y(c=>this.ngZone.runOutsideAngular(()=>A0(this.elementRef.nativeElement,"scroll").pipe(Dt(this._destroyed)).subscribe(c)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=Cl()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==Cl()?t.left=t.right:1==Cl()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;!function ip(){if(null==Ta){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ta=!1,Ta;if("scrollBehavior"in document.documentElement.style)Ta=!0;else{const n=Element.prototype.scrollTo;Ta=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ta}()?(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left)):i.scrollTo(t)}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const c=this.dir&&"rtl"==this.dir.value;return"start"==t?t=c?r:i:"end"==t&&(t=c?i:r),c&&2==Cl()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:c&&1==Cl()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(bx),d.Y36(d.R0b),d.Y36(JN,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),nH=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new gt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(XN(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cr),d.LFG(d.R0b),d.LFG(se,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();let lP=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function IH(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function CH(n){try{return n.frameElement}catch(e){return null}}(function RH(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===uP(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=uP(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function xH(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function kH(n){return!function DH(n){return function AH(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function TH(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function SH(n){return function MH(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||cP(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cP(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function uP(n){if(!cP(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class OH{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,pi.q)(1)).subscribe(e)}}let NH=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new OH(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(lP),d.LFG(d.R0b),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dP(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function hP(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const PH=new d.OlP("cdk-input-modality-detector-options"),FH={ignoreKeys:[18,17,224,91,16]},Py=np({passive:!0,capture:!0});let LH=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ln(null),this._lastTouchMs=0,this._onKeydown=c=>{var h,p;(null===(p=null===(h=this._options)||void 0===h?void 0:h.ignoreKeys)||void 0===p?void 0:p.some(y=>y===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=qs(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(dP(c)?"keyboard":"mouse"),this._mostRecentTarget=qs(c))},this._onTouchstart=c=>{hP(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=qs(c))},this._options=Object.assign(Object.assign({},FH),s),this.modalityDetected=this._modality.pipe(Wo(1)),this.modalityChanged=this.modalityDetected.pipe(Al()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Py),r.addEventListener("mousedown",this._onMousedown,Py),r.addEventListener("touchstart",this._onTouchstart,Py)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Py),document.removeEventListener("mousedown",this._onMousedown,Py),document.removeEventListener("touchstart",this._onTouchstart,Py))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cr),d.LFG(d.R0b),d.LFG(se),d.LFG(PH,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UH=new d.OlP("cdk-focus-monitor-default-options"),YT=np({passive:!0,capture:!0});let wx=(()=>{class n{constructor(t,i,r,s,c){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new gt.x,this._rootNodeFocusAndBlurListener=h=>{const p=qs(h),y="focus"===h.type?this._onFocus:this._onBlur;for(let I=p;I;I=I.parentElement)y.call(this,h,I)},this._document=s,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(t,i=!1){const r=Er(t);if(!this._platform.isBrowser||1!==r.nodeType)return ot(null);const s=function lh(n){if(function Il(){if(null==Ec){const n="undefined"!=typeof document?document.head:null;Ec=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Ec}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const h={checkChildren:i,subject:new gt.x,rootNode:s};return this._elementInfo.set(r,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const i=Er(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Er(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=qs(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,YT),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,YT)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Dt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,YT),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,YT),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(Cr),d.LFG(LH),d.LFG(se,8),d.LFG(UH,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pP="cdk-high-contrast-black-on-white",gP="cdk-high-contrast-white-on-black",Ex="cdk-high-contrast-active";let BH=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Ex),t.remove(pP),t.remove(gP),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(Ex),t.add(pP)):2===i&&(t.add(Ex),t.add(gP))}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cr),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mP{}const jd="*";function HH(n,e){return{type:7,name:n,definitions:e,options:{}}}function _P(n,e=null){return{type:4,styles:e,timings:n}}function yP(n,e=null){return{type:2,steps:n,options:e}}function QT(n){return{type:6,styles:n,offset:null}}function vP(n,e,t){return{type:0,name:n,styles:e,options:t}}function bP(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function wP(n){Promise.resolve(null).then(n)}class k0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class EP{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?wP(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const pn=!1;function CP(n){return new d.vHH(3e3,pn)}function Cz(){return"undefined"!=typeof window&&void 0!==window.document}function Ix(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Sf(n){switch(n.length){case 0:return new k0;case 1:return n[0];default:return new EP(n)}}function IP(n,e,t,i,r={},s={}){const c=[],h=[];let p=-1,y=null;if(i.forEach(I=>{const D=I.offset,x=D==p,P=x&&y||{};Object.keys(I).forEach(U=>{let J=U,pe=I[U];if("offset"!==U)switch(J=e.normalizePropertyName(J,c),pe){case"!":pe=r[U];break;case jd:pe=s[U];break;default:pe=e.normalizeStyleValue(U,J,pe,c)}P[J]=pe}),x||h.push(P),y=P,p=D}),c.length)throw function hz(n){return new d.vHH(3502,pn)}();return h}function Tx(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Dx(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Dx(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Dx(t,"destroy",n)))}}function Dx(n,e,t){const i=t.totalTime,s=Sx(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),c=n._data;return null!=c&&(s._data=c),s}function Sx(n,e,t,i,r="",s=0,c){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function ua(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function TP(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Ax=(n,e)=>!1,DP=(n,e,t)=>[];(Ix()||"undefined"!=typeof Element)&&(Ax=Cz()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),DP=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Pg=null,SP=!1;function AP(n){Pg||(Pg=function Tz(){return"undefined"!=typeof document?document.body:null}()||{},SP=!!Pg.style&&"WebkitAppearance"in Pg.style);let e=!0;return Pg.style&&!function Iz(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Pg.style,!e&&SP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Pg.style)),e}const MP=Ax,xP=DP;let kP=(()=>{class n{validateStyleProperty(t){return AP(t)}matchesElement(t,i){return!1}containsElement(t,i){return MP(t,i)}query(t,i,r){return xP(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,c,h=[],p){return new k0(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Mx=(()=>{class n{}return n.NOOP=new kP,n})();const xx="ng-enter",JT="ng-leave",eD="ng-trigger",tD=".ng-trigger",OP="ng-animating",kx=".ng-animating";function Fg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Rx(parseFloat(e[1]),e[2])}function Rx(n,e){return"s"===e?1e3*n:n}function nD(n,e,t){return n.hasOwnProperty("duration")?n:function Az(n,e,t){let r,s=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(CP()),{duration:0,delay:0,easing:""};r=Rx(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=Rx(parseFloat(p),h[4]));const y=h[5];y&&(c=y)}else r=n;if(!t){let h=!1,p=e.length;r<0&&(e.push(function zH(){return new d.vHH(3100,pn)}()),h=!0),s<0&&(e.push(function GH(){return new d.vHH(3101,pn)}()),h=!0),h&&e.splice(p,0,CP())}return{duration:r,delay:s,easing:c}}(n,e,t)}function Fy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Af(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Fy(n,t);return t}function PP(n,e,t){return t?e+":"+t+";":""}function FP(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=PP(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=PP(0,kz(t),n.style[t]));n.setAttribute("style",e)}function cu(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=Nx(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),Ix()&&FP(n))}function Lg(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=Nx(t);n.style[i]=""}),Ix()&&FP(n))}function R0(n){return Array.isArray(n)?1==n.length?n[0]:yP(n):n}const Ox=new RegExp("{{\\s*(.+?)\\s*}}","g");function LP(n){let e=[];if("string"==typeof n){let t;for(;t=Ox.exec(n);)e.push(t[1]);Ox.lastIndex=0}return e}function iD(n,e,t){const i=n.toString(),r=i.replace(Ox,(s,c)=>{let h=e[c];return e.hasOwnProperty(c)||(t.push(function qH(n){return new d.vHH(3003,pn)}()),h=""),h.toString()});return r==i?n:r}function rD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const xz=/-+([a-z0-9])/g;function Nx(n){return n.replace(xz,(...e)=>e[1].toUpperCase())}function kz(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function da(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function WH(n){return new d.vHH(3004,pn)}()}}function VP(n,e){return window.getComputedStyle(n)[e]}function Nz(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Pz(n,e,t){if(":"==n[0]){const p=function Fz(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function lz(n){return new d.vHH(3016,pn)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function az(n){return new d.vHH(3015,pn)}()),e;const r=i[1],s=i[2],c=i[3];e.push(UP(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&e.push(UP(c,r))}(i,t,e)):t.push(n),t}const oD=new Set(["true","1"]),aD=new Set(["false","0"]);function UP(n,e){const t=oD.has(n)||aD.has(n),i=oD.has(e)||aD.has(e);return(r,s)=>{let c="*"==n||n==r,h="*"==e||e==s;return!c&&t&&"boolean"==typeof r&&(c=r?oD.has(n):aD.has(n)),!h&&i&&"boolean"==typeof s&&(h=s?oD.has(e):aD.has(e)),c&&h}}const Lz=new RegExp("s*:selfs*,?","g");function Px(n,e,t){return new Vz(n).build(e,t)}class Vz{constructor(e){this._driver=e}build(e,t){const i=new jz(t);return this._resetContextStyleTimingState(i),da(this,R0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function ZH(){return new d.vHH(3006,pn)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(I=>{p.name=I,s.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);i+=p.queryCount,r+=p.depCount,c.push(p)}else t.errors.push(function YH(){return new d.vHH(3007,pn)}())}),{type:7,name:e.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(h=>{if(lD(h)){const p=h;Object.keys(p).forEach(y=>{LP(p[y]).forEach(I=>{c.hasOwnProperty(I)||s.add(I)})})}}),s.size&&(rD(s.values()),t.errors.push(function QH(n,e){return new d.vHH(3008,pn)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=da(this,R0(e.animation),t);return{type:1,matchers:Nz(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Vg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>da(this,i,t)),options:Vg(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(c=>{t.currentTime=i;const h=da(this,c,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:s,options:Vg(e.options)}}visitAnimate(e,t){const i=function zz(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Fx(nD(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Fx(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||nD(i,e),Fx(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:QT({});if(5==s.type)r=this.visitKeyframes(s,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};i.easing&&(y.easing=i.easing),c=QT(y)}t.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,t);p.isEmptyStep=h,r=p}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==jd?i.push(c):t.errors.push(function XH(n){return new d.vHH(3002,pn)}()):i.push(c)}):i.push(e.styles);let r=!1,s=null;return i.forEach(c=>{if(lD(c)){const h=c,p=h.easing;if(p&&(s=p,delete h.easing),!r)for(let y in h)if(h[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(function JH(n){return new d.vHH(3009,pn)}());const p=t.collectedStyles[t.currentQuerySelector],y=p[h];let I=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(t.errors.push(function ez(n,e,t,i,r){return new d.vHH(3010,pn)}()),I=!1),s=y.startTime),I&&(p[h]={startTime:s,endTime:r}),t.options&&function Mz(n,e,t){const i=e.params||{},r=LP(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function $H(n){return new d.vHH(3001,pn)}())})}(c[h],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function tz(){return new d.vHH(3011,pn)}()),i;let s=0;const c=[];let h=!1,p=!1,y=0;const I=e.steps.map($e=>{const Qe=this._makeStyleAst($e,t);let it=null!=Qe.offset?Qe.offset:function Hz(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(lD(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(lD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Qe.styles),Ve=0;return null!=it&&(s++,Ve=Qe.offset=it),p=p||Ve<0||Ve>1,h=h||Ve<y,y=Ve,c.push(Ve),Qe});p&&t.errors.push(function nz(){return new d.vHH(3012,pn)}()),h&&t.errors.push(function iz(){return new d.vHH(3200,pn)}());const D=e.steps.length;let x=0;s>0&&s<D?t.errors.push(function rz(){return new d.vHH(3202,pn)}()):0==s&&(x=1/(D-1));const P=D-1,U=t.currentTime,J=t.currentAnimateTimings,pe=J.duration;return I.forEach(($e,Qe)=>{const it=x>0?Qe==P?1:x*Qe:c[Qe],Ve=it*pe;t.currentTime=U+J.delay+Ve,J.duration=Ve,this._validateStyleAst($e,t),$e.offset=it,i.styles.push($e)}),i}visitReference(e,t){return{type:8,animation:da(this,R0(e.animation),t),options:Vg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Vg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Vg(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,c]=function Uz(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Lz,"")),n=n.replace(/@\*/g,tD).replace(/@\w+/g,t=>tD+"-"+t.substr(1)).replace(/:animating/g,kx),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,ua(t.collectedStyles,t.currentQuerySelector,{});const h=da(this,R0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:Vg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function sz(){return new d.vHH(3013,pn)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:nD(e.timings,t.errors,!0);return{type:12,animation:da(this,R0(e.animation),t),timings:i,options:null}}}class jz{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function lD(n){return!Array.isArray(n)&&"object"==typeof n}function Vg(n){return n?(n=Fy(n)).params&&(n.params=function Bz(n){return n?Fy(n):null}(n.params)):n={},n}function Fx(n,e,t){return{duration:n,delay:e,easing:t}}function Lx(n,e,t,i,r,s,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:h}}class cD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const qz=new RegExp(":enter","g"),Kz=new RegExp(":leave","g");function Vx(n,e,t,i,r,s={},c={},h,p,y=[]){return(new Zz).buildKeyframes(n,e,t,i,r,s,c,h,p,y)}class Zz{buildKeyframes(e,t,i,r,s,c,h,p,y,I=[]){y=y||new cD;const D=new Ux(e,t,y,r,s,I,[]);D.options=p,D.currentTimeline.setStyles([c],null,D.errors,p),da(this,i,D);const x=D.timelines.filter(P=>P.containsAnimation());if(Object.keys(h).length){let P;for(let U=x.length-1;U>=0;U--){const J=x[U];if(J.element===t){P=J;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([h],null,D.errors,p)}return x.length?x.map(P=>P.buildKeyframes()):[Lx(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const c=null!=i.duration?Fg(i.duration):null,h=null!=i.delay?Fg(i.delay):null;return 0!==c&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,c,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),da(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=uD);const c=Fg(s.delay);r.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>da(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Fg(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),da(this,c,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return nD(t.params?iD(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Fg(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=uD);let c=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,I)=>{t.currentQueryIndex=I;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(p=D.currentTimeline),da(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,c=Math.abs(s.duration),h=c*(t.currentQueryTotal-1);let p=c*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=i.currentStaggerTime}const I=t.currentTimeline;p&&I.delayNextStep(p);const D=I.currentTime;da(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const uD={};class Ux{constructor(e,t,i,r,s,c,h,p){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=uD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new dD(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Fg(i.duration)),null!=i.delay&&(r.delay=Fg(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=iD(s[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new Ux(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=uD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new Yz(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,c){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(qz,"."+this._enterClassName)).replace(Kz,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),h.push(...y)}return!s&&0==h.length&&c.push(function oz(n){return new d.vHH(3014,pn)}()),h}}class dD{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new dD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||jd,this._currentKeyframe[t]=jd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},c=function Qz(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=jd})):Af(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(h=>{const p=iD(c[h],s,i);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:jd),this._updateStyle(h,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,p)=>{const y=Af(h,!0);Object.keys(y).forEach(I=>{const D=y[I];"!"==D?e.add(I):D==jd&&t.add(I)}),i||(y.offset=p/this.duration),r.push(y)});const s=e.size?rD(e.values()):[],c=t.size?rD(t.values()):[];if(i){const h=r[0],p=Fy(h);h.offset=0,p.offset=1,r=[h,p]}return Lx(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class Yz extends dD{constructor(e,t,i,r,s,c,h=!1){super(e,t,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],c=i+t,h=t/c,p=Af(e[0],!1);p.offset=0,s.push(p);const y=Af(e[0],!1);y.offset=HP(h),s.push(y);const I=e.length-1;for(let D=1;D<=I;D++){let x=Af(e[D],!1);x.offset=HP((t+x.offset*i)/c),s.push(x)}i=c,t=0,r="",e=s}return Lx(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function HP(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Bx{}class Xz extends Bx{normalizePropertyName(e,t){return Nx(e)}normalizeStyleValue(e,t,i,r){let s="";const c=i.toString().trim();if(Jz[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function KH(n,e){return new d.vHH(3005,pn)}())}return c+s}}const Jz=(()=>function eG(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function zP(n,e,t,i,r,s,c,h,p,y,I,D,x){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:c,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:I,totalTime:D,errors:x}}const jx={};class GP{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function tG(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],c=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):c}build(e,t,i,r,s,c,h,p,y,I){const D=[],x=this.ast.options&&this.ast.options.params||jx,U=this.buildStyles(i,h&&h.params||jx,D),J=p&&p.params||jx,pe=this.buildStyles(r,J,D),$e=new Set,Qe=new Map,it=new Map,Ve="void"===r,en={params:Object.assign(Object.assign({},x),J)},Bn=I?[]:Vx(e,t,this.ast.animation,s,c,U,pe,en,y,D);let Ri=0;if(Bn.forEach(pa=>{Ri=Math.max(pa.duration+pa.delay,Ri)}),D.length)return zP(t,this._triggerName,i,r,Ve,U,pe,[],[],Qe,it,Ri,D);Bn.forEach(pa=>{const qd=pa.element,YU=ua(Qe,qd,{});pa.preStyleProps.forEach(em=>YU[em]=!0);const EE=ua(it,qd,{});pa.postStyleProps.forEach(em=>EE[em]=!0),qd!==t&&$e.add(qd)});const fo=rD($e.values());return zP(t,this._triggerName,i,r,Ve,U,pe,Bn,fo,Qe,it,Ri)}}class nG{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Fy(this.defaultParams);return Object.keys(e).forEach(s=>{const c=e[s];null!=c&&(r[s]=c)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const c=s;Object.keys(c).forEach(h=>{let p=c[h];p.length>1&&(p=iD(p,r,t));const y=this.normalizer.normalizePropertyName(h,t);p=this.normalizer.normalizeStyleValue(h,y,p,t),i[y]=p})}}),i}}class rG{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new nG(r.style,r.options&&r.options.params||{},i)}),$P(this.states,"true","1"),$P(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new GP(e,r,this.states))}),this.fallbackTransition=function sG(n,e,t){return new GP(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(c=>c.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function $P(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const oG=new cD;class aG{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=Px(this._driver,t,i);if(i.length)throw function fz(n){return new d.vHH(3503,pn)}();this._animations[e]=r}_buildPlayer(e,t,i){const r=e.element,s=IP(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let c;const h=new Map;if(s?(c=Vx(this._driver,t,s,xx,JT,{},{},i,oG,r),c.forEach(I=>{const D=ua(h,I.element,{});I.postStyleProps.forEach(x=>D[x]=null)})):(r.push(function pz(){return new d.vHH(3300,pn)}()),c=[]),r.length)throw function gz(n){return new d.vHH(3504,pn)}();h.forEach((I,D)=>{Object.keys(I).forEach(x=>{I[x]=this._driver.computeStyle(D,x,jd)})});const y=Sf(c.map(I=>{const D=h.get(I.element);return this._buildPlayer(I,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function mz(n){return new d.vHH(3301,pn)}();return t}listen(e,t,i,r){const s=Sx(t,"","","");return Tx(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const qP="ng-animate-queued",Hx="ng-animate-disabled",hG=[],WP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qa="__ng_removed";class zx{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function _G(n){return null!=n?n:null}(i?e.value:e),i){const s=Fy(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const O0="void",Gx=new zx(O0);class pG{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Wa(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function _z(n,e){return new d.vHH(3302,pn)}();if(null==i||0==i.length)throw function yz(n){return new d.vHH(3303,pn)}();if(!function yG(n){return"start"==n||"done"==n}(i))throw function vz(n,e){return new d.vHH(3400,pn)}();const s=ua(this._elementListeners,e,[]),c={name:t,phase:i,callback:r};s.push(c);const h=ua(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(Wa(e,eD),Wa(e,eD+"-"+t),h[t]=Gx),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function bz(n){return new d.vHH(3401,pn)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),c=new $x(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Wa(e,eD),Wa(e,eD+"-"+t),this._engine.statesByElement.set(e,h={}));let p=h[t];const y=new zx(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h[t]=y,p||(p=Gx),y.value!==O0&&p.value===y.value){if(!function wG(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const J=[],pe=s.matchStyles(p.value,p.params,J),$e=s.matchStyles(y.value,y.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{Lg(e,pe),cu(e,$e)})}return}const x=ua(this._engine.playersByElement,e,[]);x.forEach(J=>{J.namespaceId==this.id&&J.triggerName==t&&J.queued&&J.destroy()});let P=s.matchTransition(p.value,y.value,e,y.params),U=!1;if(!P){if(!r)return;P=s.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:y,player:c,isFallbackTransition:U}),U||(Wa(e,qP),c.onStart(()=>{Ly(e,qP)})),c.onDone(()=>{let J=this.players.indexOf(c);J>=0&&this.players.splice(J,1);const pe=this._engine.playersByElement.get(e);if(pe){let $e=pe.indexOf(c);$e>=0&&pe.splice($e,1)}}),this.players.push(c),x.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,tD,!0);i.forEach(r=>{if(r[qa])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),c=new Map;if(s){const h=[];if(Object.keys(s).forEach(p=>{if(c.set(p,s[p].value),this._triggers[p]){const y=this.trigger(e,p,O0,r);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),i&&Sf(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers[c].fallbackTransition,y=i[c]||Gx,I=new zx(O0),D=new $x(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:p,fromState:y,toState:I,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let c=e;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[qa];(!s||s===WP)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Wa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(h=>{if(h.name==i.triggerName){const p=Sx(s,i.triggerName,i.fromState.value,i.toState.value);p._data=e,Tx(i.player,h.phase,p,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class gG{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new pG(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const c=i[r[s]].namespaceId;if(c){const h=this._fetchNamespace(c);h&&t.add(h)}}}return t}trigger(e,t,i,r){if(hD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!hD(t))return;const s=t[qa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Wa(e,Hx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ly(e,Hx))}removeNode(e,t,i,r){if(hD(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[qa]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return hD(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,tD,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,kx,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Sf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[qa];if(i&&i.setForRemoval){if(e[qa]=WP,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(Hx))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Wa(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Sf(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function wz(n){return new d.vHH(3402,pn)}()}_flushAnimations(e,t){const i=new cD,r=[],s=new Map,c=[],h=new Map,p=new Map,y=new Map,I=new Set;this.disabledNodes.forEach(mt=>{I.add(mt);const Tt=this.driver.query(mt,".ng-animate-queued",!0);for(let Ot=0;Ot<Tt.length;Ot++)I.add(Tt[Ot])});const D=this.bodyNode,x=Array.from(this.statesByElement.keys()),P=YP(x,this.collectedEnterElements),U=new Map;let J=0;P.forEach((mt,Tt)=>{const Ot=xx+J++;U.set(Tt,Ot),mt.forEach(Cn=>Wa(Cn,Ot))});const pe=[],$e=new Set,Qe=new Set;for(let mt=0;mt<this.collectedLeaveElements.length;mt++){const Tt=this.collectedLeaveElements[mt],Ot=Tt[qa];Ot&&Ot.setForRemoval&&(pe.push(Tt),$e.add(Tt),Ot.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(Cn=>$e.add(Cn)):Qe.add(Tt))}const it=new Map,Ve=YP(x,Array.from($e));Ve.forEach((mt,Tt)=>{const Ot=JT+J++;it.set(Tt,Ot),mt.forEach(Cn=>Wa(Cn,Ot))}),e.push(()=>{P.forEach((mt,Tt)=>{const Ot=U.get(Tt);mt.forEach(Cn=>Ly(Cn,Ot))}),Ve.forEach((mt,Tt)=>{const Ot=it.get(Tt);mt.forEach(Cn=>Ly(Cn,Ot))}),pe.forEach(mt=>{this.processLeaveNode(mt)})});const en=[],Bn=[];for(let mt=this._namespaceList.length-1;mt>=0;mt--)this._namespaceList[mt].drainQueuedTransitions(t).forEach(Ot=>{const Cn=Ot.player,Qr=Ot.element;if(en.push(Cn),this.collectedEnterElements.length){const po=Qr[qa];if(po&&po.setForMove){if(po.previousTriggersValues&&po.previousTriggersValues.has(Ot.triggerName)){const tm=po.previousTriggersValues.get(Ot.triggerName),$f=this.statesByElement.get(Ot.element);$f&&$f[Ot.triggerName]&&($f[Ot.triggerName].value=tm)}return void Cn.destroy()}}const _u=!D||!this.driver.containsElement(D,Qr),ga=it.get(Qr),Gf=U.get(Qr),Hi=this._buildInstruction(Ot,i,Gf,ga,_u);if(Hi.errors&&Hi.errors.length)return void Bn.push(Hi);if(_u)return Cn.onStart(()=>Lg(Qr,Hi.fromStyles)),Cn.onDestroy(()=>cu(Qr,Hi.toStyles)),void r.push(Cn);if(Ot.isFallbackTransition)return Cn.onStart(()=>Lg(Qr,Hi.fromStyles)),Cn.onDestroy(()=>cu(Qr,Hi.toStyles)),void r.push(Cn);const JU=[];Hi.timelines.forEach(po=>{po.stretchStartingKeyframe=!0,this.disabledNodes.has(po.element)||JU.push(po)}),Hi.timelines=JU,i.append(Qr,Hi.timelines),c.push({instruction:Hi,player:Cn,element:Qr}),Hi.queriedElements.forEach(po=>ua(h,po,[]).push(Cn)),Hi.preStyleProps.forEach((po,tm)=>{const $f=Object.keys(po);if($f.length){let nm=p.get(tm);nm||p.set(tm,nm=new Set),$f.forEach(KR=>nm.add(KR))}}),Hi.postStyleProps.forEach((po,tm)=>{const $f=Object.keys(po);let nm=y.get(tm);nm||y.set(tm,nm=new Set),$f.forEach(KR=>nm.add(KR))})});if(Bn.length){const mt=[];Bn.forEach(Tt=>{mt.push(function Ez(n,e){return new d.vHH(3505,pn)}())}),en.forEach(Tt=>Tt.destroy()),this.reportError(mt)}const Ri=new Map,fo=new Map;c.forEach(mt=>{const Tt=mt.element;i.has(Tt)&&(fo.set(Tt,Tt),this._beforeAnimationBuild(mt.player.namespaceId,mt.instruction,Ri))}),r.forEach(mt=>{const Tt=mt.element;this._getPreviousPlayers(Tt,!1,mt.namespaceId,mt.triggerName,null).forEach(Cn=>{ua(Ri,Tt,[]).push(Cn),Cn.destroy()})});const pa=pe.filter(mt=>XP(mt,p,y)),qd=new Map;ZP(qd,this.driver,Qe,y,jd).forEach(mt=>{XP(mt,p,y)&&pa.push(mt)});const EE=new Map;P.forEach((mt,Tt)=>{ZP(EE,this.driver,new Set(mt),p,"!")}),pa.forEach(mt=>{const Tt=qd.get(mt),Ot=EE.get(mt);qd.set(mt,Object.assign(Object.assign({},Tt),Ot))});const em=[],QU=[],XU={};c.forEach(mt=>{const{element:Tt,player:Ot,instruction:Cn}=mt;if(i.has(Tt)){if(I.has(Tt))return Ot.onDestroy(()=>cu(Tt,Cn.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(Cn.totalTime),void r.push(Ot);let Qr=XU;if(fo.size>1){let ga=Tt;const Gf=[];for(;ga=ga.parentNode;){const Hi=fo.get(ga);if(Hi){Qr=Hi;break}Gf.push(ga)}Gf.forEach(Hi=>fo.set(Hi,Qr))}const _u=this._buildAnimation(Ot.namespaceId,Cn,Ri,s,EE,qd);if(Ot.setRealPlayer(_u),Qr===XU)em.push(Ot);else{const ga=this.playersByElement.get(Qr);ga&&ga.length&&(Ot.parentPlayer=Sf(ga)),r.push(Ot)}}else Lg(Tt,Cn.fromStyles),Ot.onDestroy(()=>cu(Tt,Cn.toStyles)),QU.push(Ot),I.has(Tt)&&r.push(Ot)}),QU.forEach(mt=>{const Tt=s.get(mt.element);if(Tt&&Tt.length){const Ot=Sf(Tt);mt.setRealPlayer(Ot)}}),r.forEach(mt=>{mt.parentPlayer?mt.syncPlayerEvents(mt.parentPlayer):mt.destroy()});for(let mt=0;mt<pe.length;mt++){const Tt=pe[mt],Ot=Tt[qa];if(Ly(Tt,JT),Ot&&Ot.hasAnimation)continue;let Cn=[];if(h.size){let _u=h.get(Tt);_u&&_u.length&&Cn.push(..._u);let ga=this.driver.query(Tt,kx,!0);for(let Gf=0;Gf<ga.length;Gf++){let Hi=h.get(ga[Gf]);Hi&&Hi.length&&Cn.push(...Hi)}}const Qr=Cn.filter(_u=>!_u.destroyed);Qr.length?vG(this,Tt,Qr):this.processLeaveNode(Tt)}return pe.length=0,em.forEach(mt=>{this.players.push(mt),mt.onDone(()=>{mt.destroy();const Tt=this.players.indexOf(mt);this.players.splice(Tt,1)}),mt.play()}),em}elementContainsData(e,t){let i=!1;const r=t[qa];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==O0;h.forEach(y=>{y.queued||!p&&y.triggerName!=r||c.push(y)})}}return(i||r)&&(c=c.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),c}_beforeAnimationBuild(e,t,i){const s=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,I=y!==s,D=ua(i,y,[]);this._getPreviousPlayers(y,I,c,h,t.toState).forEach(P=>{const U=P.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),P.destroy(),D.push(P)})}Lg(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,c){const h=t.triggerName,p=t.element,y=[],I=new Set,D=new Set,x=t.timelines.map(U=>{const J=U.element;I.add(J);const pe=J[qa];if(pe&&pe.removedBeforeQueried)return new k0(U.duration,U.delay);const $e=J!==p,Qe=function bG(n){const e=[];return QP(n,e),e}((i.get(J)||hG).map(Ri=>Ri.getRealPlayer())).filter(Ri=>!!Ri.element&&Ri.element===J),it=s.get(J),Ve=c.get(J),en=IP(0,this._normalizer,0,U.keyframes,it,Ve),Bn=this._buildPlayer(U,en,Qe);if(U.subTimeline&&r&&D.add(J),$e){const Ri=new $x(e,h,J);Ri.setRealPlayer(Bn),y.push(Ri)}return Bn});y.forEach(U=>{ua(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function mG(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,U.element,U))}),I.forEach(U=>Wa(U,OP));const P=Sf(x);return P.onDestroy(()=>{I.forEach(U=>Ly(U,OP)),cu(p,t.toStyles)}),D.forEach(U=>{ua(r,U,[]).push(P)}),P}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new k0(e.duration,e.delay)}}class $x{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new k0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>Tx(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ua(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function hD(n){return n&&1===n.nodeType}function KP(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function ZP(n,e,t,i,r){const s=[];t.forEach(p=>s.push(KP(p)));const c=[];i.forEach((p,y)=>{const I={};p.forEach(D=>{const x=I[D]=e.computeStyle(y,D,r);(!x||0==x.length)&&(y[qa]=fG,c.push(y))}),n.set(y,I)});let h=0;return t.forEach(p=>KP(p,s[h++])),c}function YP(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=new Set(e),s=new Map;function c(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:r.has(y)?1:c(y),s.set(h,p),p}return e.forEach(h=>{const p=c(h);1!==p&&t.get(p).push(h)}),t}function Wa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ly(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function vG(n,e,t){Sf(t).onDone(()=>n.processLeaveNode(e))}function QP(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof EP?QP(i.players,e):e.push(i)}}function XP(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class fD{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new gG(e,t,i),this._timelineEngine=new aG(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const c=e+"-"+r;let h=this._triggerCache[c];if(!h){const p=[],y=Px(this._driver,s,p);if(p.length)throw function dz(n,e){return new d.vHH(3404,pn)}();h=function iG(n,e,t){return new rG(n,e,t)}(r,y,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,c]=TP(i);this._timelineEngine.command(s,t,c,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[c,h]=TP(i);return this._timelineEngine.listen(c,t,h,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let CG=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&cu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cu(this._element,this._initialStyles),this._endStyles&&(cu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Lg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Lg(this._element,this._endStyles),this._endStyles=null),cu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function qx(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];IG(r)&&(e=e||{},e[r]=n[r])}return e}function IG(n){return"display"===n||"position"===n}class JP{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:VP(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class TG{validateStyleProperty(e){return AP(e)}matchesElement(e,t){return!1}containsElement(e,t){return MP(e,t)}query(e,t,i){return xP(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y={},I=c.filter(x=>x instanceof JP);(function Rz(n,e){return 0===n||0===e})(i,r)&&I.forEach(x=>{let P=x.currentSnapshot;Object.keys(P).forEach(U=>y[U]=P[U])}),t=function Oz(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],c=[];if(i.forEach(h=>{s.hasOwnProperty(h)||c.push(h),s[h]=t[h]}),c.length)for(var r=1;r<e.length;r++){let h=e[r];c.forEach(function(p){h[p]=VP(n,p)})}}return e}(e,t=t.map(x=>Af(x,!1)),y);const D=function EG(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=qx(e[0]),e.length>1&&(i=qx(e[e.length-1]))):e&&(t=qx(e)),t||i?new CG(n,t,i):null}(e,t);return new JP(e,t,p,D)}}let DG=(()=>{class n extends mP{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?yP(t):t;return e1(this._renderer,null,i,"register",[r]),new SG(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(se))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class SG extends class jH{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new AG(this._id,e,t||{},this._renderer)}}class AG{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return e1(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function e1(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const t1="@.disabled";let MG=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const h=null==c?void 0:c.parentNode(s);h&&c.removeChild(h,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let I=this._rendererCache.get(s);return I||(I=new n1("",s,this.engine),this._rendererCache.set(s,I)),I}const c=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=I=>{Array.isArray(I)?I.forEach(p):this.engine.registerTrigger(c,h,t,I.name,I)};return i.data.animation.forEach(p),new xG(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,h]=s;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(fD),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class n1{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==t1?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class xG extends n1{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==t1?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function kG(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),c="";return"@"!=s.charAt(0)&&([s,c]=function RG(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}let OG=(()=>{class n extends fD{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(se),d.LFG(Mx),d.LFG(Bx))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Vy=new d.OlP("AnimationModuleType"),r1=[{provide:mP,useClass:DG},{provide:Bx,useFactory:function NG(){return new Xz}},{provide:fD,useClass:OG},{provide:d.FYo,useFactory:function PG(n,e,t){return new MG(n,e,t)},deps:[Nn,fD,d.R0b]}],s1=[{provide:Mx,useFactory:()=>new TG},{provide:Vy,useValue:"BrowserAnimations"},...r1],FG=[{provide:Mx,useClass:kP},{provide:Vy,useValue:"NoopAnimations"},...r1];let LG=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?FG:s1}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:s1,imports:[wa]}),n})();const UG=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function VG(){return!0}});let ys=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function Tl(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(BH),d.LFG(UG,8),d.LFG(se))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[eP],eP]}),n})();function a1(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=cr(e)}}}function Wx(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function N0(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=cr(e)}}}let l1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function P0(n,e,t){n.nativeElement.classList.toggle(e,t)}let u1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ys],ys]}),n})();class jG{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const d1={enterDuration:225,exitDuration:150},Kx=np({passive:!0}),h1=["mousedown","touchstart"],f1=["mouseup","mouseleave","touchend","touchcancel"];class zG{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Er(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},d1),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const c=i.radius||function $G(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),h=e-r.left,p=t-r.top,y=s.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=h-c+"px",I.style.top=p-c+"px",I.style.height=2*c+"px",I.style.width=2*c+"px",null!=i.color&&(I.style.backgroundColor=i.color),I.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(I),function GG(n){window.getComputedStyle(n).getPropertyValue("opacity")}(I),I.style.transform="scale(1)";const D=new jG(this,I,i);return D.state=0,this._activeRipples.add(D),i.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const x=D===this._mostRecentTransientRipple;D.state=1,!i.persistent&&(!x||!this._isPointerDown)&&D.fadeOut()},y),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},d1),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Er(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(h1))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(f1),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=dP(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!hP(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Kx)})})}_removeTriggerEvents(){this._triggerElement&&(h1.forEach(e=>{this._triggerElement.removeEventListener(e,this,Kx)}),this._pointerUpEventsRegistered&&f1.forEach(e=>{this._triggerElement.removeEventListener(e,this,Kx)}))}}const qG=new d.OlP("mat-ripple-global-options");let gD=(()=>{class n{constructor(t,i,r,s,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new zG(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(Cr),d.Y36(qG,8),d.Y36(Vy,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),p1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ys],ys]}),n})(),g1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ys]]}),n})();function m1(n){return(0,tt.U)(()=>n)}const mD=["*"],KG=["content"];function ZG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",2),d.NdJ("click",function(){return d.CHM(t),d.oxw()._onBackdropClicked()}),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function YG(n,e){1&n&&(d.TgZ(0,"mat-drawer-content"),d.Hsn(1,2),d.qZA())}const QG=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],XG=["mat-drawer","mat-drawer-content","*"];function JG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",2),d.NdJ("click",function(){return d.CHM(t),d.oxw()._onBackdropClicked()}),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function e$(n,e){1&n&&(d.TgZ(0,"mat-sidenav-content"),d.Hsn(1,2),d.qZA())}const t$=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],n$=["mat-sidenav","mat-sidenav-content","*"],_1={transformDrawer:HH("transform",[vP("open, open-instant",QT({transform:"none",visibility:"visible"})),vP("void",QT({"box-shadow":"none",visibility:"hidden"})),bP("void => open-instant",_P("0ms")),bP("void <=> open, open-instant => void",_P("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},r$=new d.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function s$(){return!1}}),Zx=new d.OlP("MAT_DRAWER_CONTAINER");let _D=(()=>{class n extends x0{constructor(t,i,r,s,c){super(r,s,c),this._changeDetectorRef=t,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO),d.Y36((0,d.Gpc)(()=>v1)),d.Y36(d.SBq),d.Y36(bx),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,i){2&t&&d.Udp("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[d._Bn([{provide:x0,useExisting:n}]),d.qOj],ngContentSelectors:mD,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),y1=(()=>{class n{constructor(t,i,r,s,c,h,p,y){this._elementRef=t,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=s,this._ngZone=c,this._interactivityChecker=h,this._doc=p,this._container=y,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new gt.x,this._animationEnd=new gt.x,this._animationState="void",this.openedChange=new d.vpe(!0),this._openedStream=this.openedChange.pipe(ti(I=>I),(0,tt.U)(()=>{})),this.openedStart=this._animationStarted.pipe(ti(I=>I.fromState!==I.toState&&0===I.toState.indexOf("open")),m1(void 0)),this._closedStream=this.openedChange.pipe(ti(I=>!I),(0,tt.U)(()=>{})),this.closedStart=this._animationStarted.pipe(ti(I=>I.fromState!==I.toState&&"void"===I.toState),m1(void 0)),this._destroyed=new gt.x,this.onPositionChanged=new d.vpe,this._modeChanged=new gt.x,this.openedChange.subscribe(I=>{I?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{A0(this._elementRef.nativeElement,"keydown").pipe(ti(I=>27===I.keyCode&&!this.disableClose&&!function ZT(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(I)),Dt(this._destroyed)).subscribe(I=>this._ngZone.run(()=>{this.close(),I.stopPropagation(),I.preventDefault()}))}),this._animationEnd.pipe(Al((I,D)=>I.fromState===D.fromState&&I.toState===D.toState)).subscribe(I=>{const{fromState:D,toState:x}=I;(0===x.indexOf("open")&&"void"===D||"void"===x&&0===D.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=cr(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"===this.mode?"dialog":"first-tabbable":t}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=cr(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(cr(t))}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var t;this._focusTrap&&this._focusTrap.destroy(),null===(t=this._anchor)||void 0===t||t.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,i){t&&i&&(this._openedVia=i);const r=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),r}_setOpen(t,i,r){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe((0,pi.q)(1)).subscribe(c=>s(c?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(NH),d.Y36(wx),d.Y36(Cr),d.Y36(d.R0b),d.Y36(lP),d.Y36(se,8),d.Y36(Zx,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,i){if(1&t&&d.Gf(KG,5),2&t){let r;d.iGM(r=d.CRH())&&(i._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,i){1&t&&d.WFA("@transform.start",function(s){return i._animationStarted.next(s)})("@transform.done",function(s){return i._animationEnd.next(s)}),2&t&&(d.uIk("align",null),d.d8E("@transform",i._animationState),d.ekj("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:mD,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"div",0,1),d.Hsn(2),d.qZA())},directives:[x0],encapsulation:2,data:{animation:[_1.transformDrawer]},changeDetection:0}),n})(),v1=(()=>{class n{constructor(t,i,r,s,c,h=!1,p){this._dir=t,this._element=i,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=p,this._drawers=new d.n_E,this.backdropClick=new d.vpe,this._destroyed=new gt.x,this._doCheckSubject=new gt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new gt.x,t&&t.change.pipe(Dt(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),c.change().pipe(Dt(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=h}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=cr(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:cr(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Lr(this._allDrawers),Dt(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Lr(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(So(10),Dt(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();t+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,t-=r}t=t||null,i=i||null,(t!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:t,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(ti(i=>i.fromState!==i.toState),Dt(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Dt(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Dt(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,pi.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Dt((0,Tg.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";t?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(JN,8),d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(d.sBO),d.Y36(nH),d.Y36(r$),d.Y36(Vy,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,i,r){if(1&t&&(d.Suo(r,_D,5),d.Suo(r,y1,5)),2&t){let s;d.iGM(s=d.CRH())&&(i._content=s.first),d.iGM(s=d.CRH())&&(i._allDrawers=s)}},viewQuery:function(t,i){if(1&t&&d.Gf(_D,5),2&t){let r;d.iGM(r=d.CRH())&&(i._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[d._Bn([{provide:Zx,useExisting:n}])],ngContentSelectors:XG,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(d.F$t(QG),d.YNc(0,ZG,1,2,"div",0),d.Hsn(1),d.Hsn(2,1),d.YNc(3,YG,2,0,"mat-drawer-content",1)),2&t&&(d.Q6J("ngIf",i.hasBackdrop),d.xp6(3),d.Q6J("ngIf",!i._content))},directives:[_D,zn],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),Yx=(()=>{class n extends _D{constructor(t,i,r,s,c){super(t,i,r,s,c)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO),d.Y36((0,d.Gpc)(()=>w1)),d.Y36(d.SBq),d.Y36(bx),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,i){2&t&&d.Udp("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[d._Bn([{provide:x0,useExisting:n}]),d.qOj],ngContentSelectors:mD,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),b1=(()=>{class n extends y1{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=cr(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=um(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=um(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,i){2&t&&(d.uIk("align",null),d.Udp("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),d.ekj("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened)("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[d.qOj],ngContentSelectors:mD,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"div",0,1),d.Hsn(2),d.qZA())},directives:[x0],encapsulation:2,data:{animation:[_1.transformDrawer]},changeDetection:0}),n})(),w1=(()=>{class n extends v1{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(t,i,r){if(1&t&&(d.Suo(r,Yx,5),d.Suo(r,b1,5)),2&t){let s;d.iGM(s=d.CRH())&&(i._content=s.first),d.iGM(s=d.CRH())&&(i._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[d._Bn([{provide:Zx,useExisting:n}]),d.qOj],ngContentSelectors:n$,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,i){1&t&&(d.F$t(t$),d.YNc(0,JG,1,2,"div",0),d.Hsn(1),d.Hsn(2,1),d.YNc(3,e$,2,0,"mat-sidenav-content",1)),2&t&&(d.Q6J("ngIf",i.hasBackdrop),d.xp6(3),d.Q6J("ngIf",!i._content))},directives:[Yx,zn],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),o$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[uc,ys,tP],tP,ys]}),n})();const a$=["*",[["mat-toolbar-row"]]],l$=["*","mat-toolbar-row"],c$=Wx(class{constructor(n){this._elementRef=n}});let u$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),d$=(()=>{class n extends c${constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Cr),d.Y36(se))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&d.Suo(r,u$,5),2&t){let s;d.iGM(s=d.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&d.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[d.qOj],ngContentSelectors:l$,decls:2,vars:0,template:function(t,i){1&t&&(d.F$t(a$),d.Hsn(0),d.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),h$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ys],ys]}),n})();let f3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ys],ys]}),n})();const AF=["*"],g3=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],m3=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],w3=a1(N0(class{})),E3=N0(class{}),C3=new d.OlP("MatList"),MF=new d.OlP("MatNavList");let I3=(()=>{class n extends w3{constructor(){super(...arguments),this._stateChanges=new gt.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[d._Bn([{provide:MF,useExisting:n}]),d.qOj,d.TTD],ngContentSelectors:AF,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),n})(),xF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),kF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),T3=(()=>{class n extends E3{constructor(t,i,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new gt.x,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const c=this._getHostElement();"button"===c.nodeName.toLowerCase()&&!c.hasAttribute("type")&&c.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Dt(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=cr(t)}ngAfterContentInit(){!function c1(n,e,t="mat"){n.changes.pipe(Lr(n)).subscribe(({length:i})=>{P0(e,`${t}-2-line`,!1),P0(e,`${t}-3-line`,!1),P0(e,`${t}-multi-line`,!1),2===i||3===i?P0(e,`${t}-${i}-line`,!0):i>3&&P0(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(MF,8),d.Y36(C3,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,r){if(1&t&&(d.Suo(r,xF,5),d.Suo(r,kF,5),d.Suo(r,l1,5)),2&t){let s;d.iGM(s=d.CRH())&&(i._avatar=s.first),d.iGM(s=d.CRH())&&(i._icon=s.first),d.iGM(s=d.CRH())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(t,i){2&t&&d.ekj("mat-list-item-disabled",i.disabled)("mat-list-item-avatar",i._avatar||i._icon)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[d.qOj],ngContentSelectors:m3,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(d.F$t(g3),d.TgZ(0,"span",0),d._UZ(1,"span",1),d.Hsn(2),d.TgZ(3,"span",2),d.Hsn(4,1),d.qZA(),d.Hsn(5,2),d.qZA()),2&t&&(d.xp6(1),d.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},directives:[gD],encapsulation:2,changeDetection:0}),n})(),k3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[u1,p1,ys,g1,uc],u1,ys,g1,f3]}),n})();const R3=["mat-button",""],O3=["*"],P3=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],F3=Wx(a1(N0(class{constructor(n){this._elementRef=n}})));let L3=(()=>{class n extends F3{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of P3)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(wx),d.Y36(Vy,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&d.Gf(gD,5),2&t){let r;d.iGM(r=d.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(d.uIk("disabled",i.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:R3,ngContentSelectors:O3,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"span",0),d.Hsn(1),d.qZA(),d._UZ(2,"span",1)(3,"span",2)),2&t&&(d.xp6(2),d.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),d.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[gD],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),V3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[p1,ys],ys]}),n})();class B3{}class Rf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),c=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Rf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Rf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Rf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===s.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class j3{encodeKey(e){return OF(e)}encodeValue(e){return OF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const z3=/%(\d[a-f0-9])/gi,G3={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function OF(n){return encodeURIComponent(n).replace(z3,(e,t)=>{var i;return null!==(i=G3[t])&&void 0!==i?i:e})}function NF(n){return`${n}`}class Of{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new j3,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function H3(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,h]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Of({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(NF(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(NF(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class $3{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function PF(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function FF(n){return"undefined"!=typeof Blob&&n instanceof Blob}function LF(n){return"undefined"!=typeof FormData&&n instanceof FormData}class B0{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function q3(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Rf),this.context||(this.context=new $3),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new Of,this.urlWithParams=t}serializeBody(){return null===this.body?null:PF(this.body)||FF(this.body)||LF(this.body)||function W3(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Of?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||LF(this.body)?null:FF(this.body)?this.body.type||null:PF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Of?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,I=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((x,P)=>x.set(P,e.setHeaders[P]),y)),e.setParams&&(I=Object.keys(e.setParams).reduce((x,P)=>x.set(P,e.setParams[P]),I)),new B0(i,r,c,{params:I,headers:y,context:D,reportProgress:p,responseType:s,withCredentials:h})}}var vs=(()=>((vs=vs||{})[vs.Sent=0]="Sent",vs[vs.UploadProgress=1]="UploadProgress",vs[vs.ResponseHeader=2]="ResponseHeader",vs[vs.DownloadProgress=3]="DownloadProgress",vs[vs.Response=4]="Response",vs[vs.User=5]="User",vs))();class bk extends class K3{constructor(e,t=200,i="OK"){this.headers=e.headers||new Rf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=vs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new bk({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function wk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let UF=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof B0)s=t;else{let p,y;p=r.headers instanceof Rf?r.headers:new Rf(r.headers),r.params&&(y=r.params instanceof Of?r.params:new Of({fromObject:r.params})),s=new B0(t,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=ot(s).pipe(xy(p=>this.handler.handle(p)));if(t instanceof B0||"events"===r.observe)return c;const h=c.pipe(ti(p=>p instanceof bk));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,tt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,tt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,tt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,tt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Of).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,wk(r,i))}post(t,i,r={}){return this.request("POST",t,wk(r,i))}put(t,i,r={}){return this.request("PUT",t,wk(r,i))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(B3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Y3=["*"];let SD;function j0(n){var e;return(null===(e=function Q3(){if(void 0===SD&&(SD=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(SD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return SD}())||void 0===e?void 0:e.createHTML(n))||n}function BF(n){return Error(`Unable to find icon with the name "${n}"`)}function jF(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function HF(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class jg{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let AD=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new jg(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const c=this._sanitizer.sanitize(d.q3G.HTML,r);if(!c)throw HF(r);const h=j0(c);return this._addSvgIconConfig(t,i,new jg("",h,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new jg(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(d.q3G.HTML,i);if(!s)throw HF(i);const c=j0(s);return this._addSvgIconSetConfig(t,new jg("",c,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,t);if(!i)throw jF(t);const r=this._cachedIconsByUrl.get(i);return r?ot(MD(r)):this._loadSvgIconFromConfig(new jg(t,null)).pipe((0,ms.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,tt.U)(s=>MD(s)))}getNamedSvgIcon(t,i=""){const r=zF(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(t,c):function U3(n,e){const t=(0,ca.m)(n)?n:()=>n,i=r=>r.error(t());return new An.y(e?r=>e.schedule(i,0,r):i)}(BF(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ot(MD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,tt.U)(i=>MD(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?ot(r):function C1(...n){const e=(0,Fr.jO)(n),{args:t,keys:i}=Uu(n),r=new An.y(s=>{const{length:c}=t;if(!c)return void s.complete();const h=new Array(c);let p=c,y=c;for(let I=0;I<c;I++){let D=!1;(0,Vr.Xf)(t[I]).subscribe((0,Pn.x)(s,x=>{D||(D=!0,y--),h[I]=x},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(i?ur(i,h):h),s.complete())}))}});return e?r.pipe($o(e)):r}(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Vd(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(d.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),ot(null)})))).pipe((0,tt.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,i);if(!c)throw BF(t);return c}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const c=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(c,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,ms.b)(i=>t.svgText=i),(0,tt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ot(null):this._fetchIcon(t).pipe((0,ms.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const h=this._svgElementFromString(j0("<svg></svg>"));return h.appendChild(c),this._setSvgAttributes(h,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(j0("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:c,value:h}=r[s];"id"!==c&&i.setAttribute(c,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,c=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function X3(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const h=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,r);if(!h)throw jF(r);const p=this._inProgressUrlFetches.get(h);if(p)return p;const y=this._httpClient.get(h,{responseType:"text",withCredentials:c}).pipe((0,tt.U)(I=>j0(I)),WO(()=>this._inProgressUrlFetches.delete(h)),(0,Da.B)());return this._inProgressUrlFetches.set(h,y),y}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(zF(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return eq(s)?new jg(s.url,null,s.options):new jg(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(UF,8),d.LFG(zo),d.LFG(se,8),d.LFG(d.qLn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MD(n){return n.cloneNode(!0)}function zF(n,e){return n+":"+e}function eq(n){return!(!n.url||!n.options)}const tq=Wx(class{constructor(n){this._elementRef=n}}),nq=new d.OlP("mat-icon-location",{providedIn:"root",factory:function iq(){const n=(0,d.f3M)(se),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),GF=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],rq=GF.map(n=>`[${n}]`).join(", "),sq=/^url\(['"]?#(.*?)['"]?\)$/;let oq=(()=>{class n extends tq{constructor(t,i,r,s,c){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._currentIconFetch=m0.w0.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=cr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(rq),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)GF.forEach(c=>{const h=i[s],p=h.getAttribute(c),y=p?p.match(sq):null;if(y){let I=r.get(h);I||(I=[],r.set(h,I)),I.push({name:c,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,pi.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(AD),d.$8M("aria-hidden"),d.Y36(nq),d.Y36(d.qLn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(d.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),d.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[d.qOj],ngContentSelectors:Y3,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),aq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ys],ys]}),n})();function lq(n,e){1&n&&(d.TgZ(0,"a",11),d._uU(1,"Profile"),d.qZA())}function cq(n,e){1&n&&(d.TgZ(0,"a",12,13),d._uU(2,"Login"),d.qZA())}let uq=(()=>{class n{constructor(t,i){this.breakpointObserver=t,this.authService=i,this.title="angularfiebase-authentication",this.isHandset$=this.breakpointObserver.observe(Tc_Handset).pipe((0,tt.U)(r=>r.matches),Mo()),this.loggedIn=this.authService.isLoggedIn}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hr),d.Y36(Df))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:19,vars:9,consts:[[1,"sidenav-container"],["fixedInViewport","","position","end",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","href","/dashboard",4,"ngIf"],["mat-list-item","","href","/sign-in",4,"ngIf"],[1,"matNav"],["href","/home"],["src","/assets/logoSHCL.png","alt","SHCL",2,"max-height","75px","padding","10px"],[1,"fx-spacer"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item","","href","/dashboard"],["mat-list-item","","href","/sign-in"],["login",""]],template:function(t,i){if(1&t){const r=d.EpF();d.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2),d.ALo(3,"async"),d.ALo(4,"async"),d.TgZ(5,"mat-toolbar"),d._uU(6,"Menu"),d.qZA(),d.TgZ(7,"mat-nav-list"),d.YNc(8,lq,2,0,"a",3),d.YNc(9,cq,3,0,"a",4),d.qZA()(),d.TgZ(10,"mat-sidenav-content")(11,"mat-toolbar",5)(12,"a",6),d._UZ(13,"img",7),d.qZA(),d._UZ(14,"span",8),d.TgZ(15,"button",9),d.NdJ("click",function(){return d.CHM(r),d.MAs(2).toggle()}),d.TgZ(16,"mat-icon",10),d._uU(17,"menu"),d.qZA()()(),d._UZ(18,"router-outlet"),d.qZA()()}2&t&&(d.xp6(1),d.Q6J("mode",d.lcZ(4,7,i.isHandset$)?"over":"side")("opened",!1),d.uIk("role",d.lcZ(3,5,i.isHandset$)?"dialog":"navigation"),d.xp6(7),d.Q6J("ngIf",i.loggedIn),d.xp6(1),d.Q6J("ngIf",!i.loggedIn))},directives:[w1,b1,d$,I3,zn,T3,Yx,L3,oq,dx],pipes:[qf],styles:[""]}),n})();const $F="firebasestorage.googleapis.com",qF="storageBucket";class tr extends N.ZR{constructor(e,t){super(Ek(e),`Firebase Storage: ${t} (${Ek(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tr.prototype)}_codeEquals(e){return Ek(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ek(n){return"storage/"+n}function Ck(){return new tr("unknown","An unknown error occurred, please check the error payload for server response.")}function WF(){return new tr("canceled","User canceled the upload/download.")}function KF(){return new tr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function By(n){return new tr("invalid-argument",n)}function ZF(){return new tr("app-deleted","The Firebase app was deleted.")}function YF(n){return new tr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function H0(n,e){return new tr("invalid-format","String does not match format '"+n+"': "+e)}function z0(n){throw new tr("internal-error","Internal error: "+n)}class Vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Vs.makeFromUrl(e,t)}catch(r){return new Vs(e,"")}if(""===i.path)return i;throw function bq(n){return new tr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Ve){Ve.path_=decodeURIComponent(Ve.path)}const D=t.replace(/[.]/g,"\\."),it=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Ve){"/"===Ve.path.charAt(Ve.path.length-1)&&(Ve.path_=Ve.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===$F?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ve=0;Ve<it.length;Ve++){const en=it[Ve],Bn=en.regex.exec(e);if(Bn){let fo=Bn[en.indices.path];fo||(fo=""),i=new Vs(Bn[en.indices.bucket],fo),en.postModify(i);break}}if(null==i)throw function vq(n){return new tr("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class Iq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function xD(n){return"string"==typeof n||n instanceof String}function QF(n){return Ik()&&n instanceof Blob}function Ik(){return"undefined"!=typeof Blob}function Tk(n,e,t,i){if(i<e)throw By(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw By(`Invalid value for '${n}'. Expected ${t} or less.`)}function Hd(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function XF(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Nf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Nf||(Nf={})),Nf))();class xq{constructor(e,t,i,r,s,c,h,p,y,I,D){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=I,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,P)=>{this.resolve_=x,this.reject_=P,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,c=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function Sq(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==h){const p=Ck();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(r.canceled?this.appDelete_?ZF():WF():function yq(){return new tr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new kD(!1,null,!0)):this.backoffId_=function Tq(n,e,t){let i=1,r=null,s=null,c=!1,h=0;function p(){return 2===h}let y=!1;function I(...pe){y||(y=!0,e.apply(null,pe))}function D(pe){r=setTimeout(()=>{r=null,n(P,p())},pe)}function x(){s&&clearTimeout(s)}function P(pe,...$e){if(y)return void x();if(pe)return x(),void I.call(null,pe,...$e);if(p()||c)return x(),void I.call(null,pe,...$e);let it;i<64&&(i*=2),1===h?(h=2,it=0):it=1e3*(i+Math.random()),D(it)}let U=!1;function J(pe){U||(U=!0,x(),!y&&(null!==r?(pe||(h=2),clearTimeout(r),D(0)):pe||(h=1)))}return D(0),s=setTimeout(()=>{c=!0,J(!0)},t),J}((i,r)=>{if(r)return void i(!1,new kD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===Nf.NO_ERROR,p=s.getStatus();if(!h||this.isRetryStatusCode_(p)){const I=s.getErrorCode()===Nf.ABORT;return void i(!1,new kD(!1,null,I))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new kD(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Dq(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||s}}class kD{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Lq(...n){const e=function Fq(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(Ik())return new Blob(n);throw new tr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ha={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dk{constructor(e,t){this.data=e,this.contentType=t||null}}function Sk(n,e){switch(n){case ha.RAW:return new Dk(JF(e));case ha.BASE64:case ha.BASE64URL:return new Dk(eL(n,e));case ha.DATA_URL:return new Dk(function jq(n){const e=new tL(n);return e.base64?eL(ha.BASE64,e.rest):function Bq(n){let e;try{e=decodeURIComponent(n)}catch(t){throw H0(ha.DATA_URL,"Malformed data URL.")}return JF(e)}(e.rest)}(e),function Hq(n){return new tL(n).contentType}(e))}throw Ck()}function JF(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function eL(n,e){switch(n){case ha.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw H0(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ha.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw H0(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Uq(n){return atob(n)}(e)}catch(r){throw H0(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class tL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw H0(ha.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function zq(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class uu{constructor(e,t){let i=0,r="";QF(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(QF(this.data_)){const r=function Vq(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new uu(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new uu(i,!0)}}static getBlob(...e){if(Ik()){const t=e.map(i=>i instanceof uu?i.data_:i);return new uu(Lq.apply(null,t))}{const t=e.map(c=>xD(c)?Sk(ha.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)r[s++]=c[h]}),new uu(r,!0)}}uploadData(){return this.data_}}function Ak(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function Mq(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function nL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function qq(n,e){return e}class ao{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||qq}}let RD=null;function G0(){if(RD)return RD;const n=[];n.push(new ao("bucket")),n.push(new ao("generation")),n.push(new ao("metageneration")),n.push(new ao("name","fullPath",!0));const t=new ao("name");t.xform=function e(s,c){return function Wq(n){return!xD(n)||n.length<2?n:nL(n)}(c)},n.push(t);const r=new ao("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new ao("timeCreated")),n.push(new ao("updated")),n.push(new ao("md5Hash",null,!0)),n.push(new ao("cacheControl",null,!0)),n.push(new ao("contentDisposition",null,!0)),n.push(new ao("contentEncoding",null,!0)),n.push(new ao("contentLanguage",null,!0)),n.push(new ao("contentType",null,!0)),n.push(new ao("metadata","customMetadata",!0)),RD=n,RD}function iL(n,e,t){const i=Ak(e);return null===i?null:function Zq(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const c=t[s];i[c.local]=c.xform(i,e[c.server])}return function Kq(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Vs(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function Mk(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const rL="prefixes";class du{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function hu(n){if(!n)throw Ck()}function OD(n,e){return function t(i,r){const s=iL(n,r,e);return hu(null!==s),s}}function jy(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function mq(){return new tr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function gq(){return new tr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function pq(n){return new tr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function _q(n){return new tr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function $0(n){const e=jy(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function fq(n){return new tr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function oL(n,e,t){const r=Hd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new du(r,"GET",OD(n,t),c);return h.errorHandler=$0(e),h}function tW(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const h=Hd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,I=new du(h,"GET",function Jq(n,e){return function t(i,r){const s=function Xq(n,e,t){const i=Ak(t);return null===i?null:function Qq(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[rL])for(const r of t[rL]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Vs(e,s));i.prefixes.push(c)}if(t.items)for(const r of t.items){const s=n._makeStorageReference(new Vs(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return hu(null!==s),s}}(n,e.bucket),y);return I.urlParams=s,I.errorHandler=jy(e),I}function lL(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function sW(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class ND{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function xk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){hu(!1)}return hu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const cW={STATE_CHANGED:"state_changed"},lo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function kk(n){switch(n){case"running":case"pausing":case"canceling":return lo.RUNNING;case"paused":return lo.PAUSED;case"success":return lo.SUCCESS;case"canceled":return lo.CANCELED;default:return lo.ERROR}}class uW{constructor(e,t,i){if(function Aq(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Hy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class hW extends class dW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Nf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Nf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Nf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw z0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw z0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw z0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw z0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw z0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Xl(){return new hW}class hL{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=G0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function oW(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),c=lL(e,i,r),h={name:c.fullPath},p=Hd(s,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=Mk(c,t),U=new du(p,"POST",function P(J){let pe;xk(J);try{pe=J.getResponseHeader("X-Goog-Upload-URL")}catch($e){hu(!1)}return hu(xD(pe)),pe},n.maxUploadRetryTime);return U.urlParams=h,U.headers=I,U.body=D,U.errorHandler=jy(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Xl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function aW(n,e,t,i){const p=new du(t,"POST",function s(y){const I=xk(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(P){hu(!1)}D||hu(!1);const x=Number(D);return hu(!isNaN(x)),new ND(x,i.size(),"final"===I)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=jy(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Xl,t,i);this._request=s,s.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ND(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function lW(n,e,t,i,r,s,c,h){const p=new ND(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function Eq(){return new tr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let I=y;r>0&&(I=Math.min(I,r));const D=p.current,U={"X-Goog-Upload-Command":I===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},J=i.slice(D,D+I);if(null===J)throw KF();const it=new du(t,"POST",function pe(Ve,en){const Bn=xk(Ve,["active","final"]),Ri=p.current+I,fo=i.size();let pa;return pa="final"===Bn?OD(e,s)(Ve,en):null,new ND(Ri,fo,"final"===Bn,pa)},e.maxUploadRetryTime);return it.headers=U,it.body=J.uploadData(),it.progressCallback=h||null,it.errorHandler=jy(n),it}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Xl,r,s);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=oL(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Xl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function cL(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let it="";for(let Ve=0;Ve<2;Ve++)it+=Math.random().toString().slice(2);return it}();c["Content-Type"]="multipart/related; boundary="+p;const y=lL(e,i,r),I=Mk(y,t),P=uu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===P)throw KF();const U={name:y.fullPath},J=Hd(s,n.host,n._protocol),$e=n.maxUploadRetryTime,Qe=new du(J,"POST",OD(n,t),$e);return Qe.urlParams=U,Qe.headers=c,Qe.body=P.uploadData(),Qe.errorHandler=jy(e),Qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Xl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=WF(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=kk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new uW(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(kk(this._state)){case lo.SUCCESS:Hy(this._resolve.bind(null,this.snapshot))();break;case lo.CANCELED:case lo.ERROR:Hy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(kk(this._state)){case lo.RUNNING:case lo.PAUSED:e.next&&Hy(e.next.bind(e,this.snapshot))();break;case lo.SUCCESS:e.complete&&Hy(e.complete.bind(e))();break;default:e.error&&Hy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Hg{constructor(e,t){this._service=e,this._location=t instanceof Vs?t:Vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Hg(e,t)}get root(){const e=new Vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nL(this._location.path)}get storage(){return this._service}get parent(){const e=function Gq(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Vs(this._location.bucket,e);return new Hg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw YF(e)}}function pL(n,e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,we.Z)(function*(n,e,t){const r=yield gL(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield pL(n,e,r.nextPageToken))}),Rk.apply(this,arguments)}function gL(n,e){null!=e&&"number"==typeof e.maxResults&&Tk("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=tW(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Xl)}function IW(n){n._throwIfRoot("getDownloadURL");const e=function nW(n,e,t){const r=Hd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new du(r,"GET",function eW(n,e){return function t(i,r){const s=iL(n,r,e);return hu(null!==s),function Yq(n,e,t,i){const r=Ak(e);if(null===r||!xD(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return Hd("/b/"+c(n.bucket)+"/o/"+c(D),t,i)+XF({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,t),c);return h.errorHandler=$0(e),h}(n.storage,n._location,G0());return n.storage.makeRequestWithTokens(e,Xl).then(t=>{if(null===t)throw function Cq(){return new tr("no-download-url","The given file does not have any download URLs.")}();return t})}function mL(n,e){const t=function $q(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Vs(n._location.bucket,t);return new Hg(n.storage,i)}function _L(n,e){if(n instanceof Ok){const t=n;if(null==t._bucket)throw function wq(){return new tr("no-default-bucket","No default bucket found. Did you set the '"+qF+"' property when initializing the app?")}();const i=new Hg(t,t._bucket);return null!=e?_L(i,e):i}return void 0!==e?mL(n,e):n}function AW(n,e){if(e&&function DW(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Ok)return function SW(n,e){return new Hg(n,e)}(n,e);throw By("To use ref(service, url), the first argument must be a Storage instance.")}return _L(n,e)}function yL(n,e){const t=null==e?void 0:e[qF];return null==t?null:Vs.makeFromBucketSpec(t,n)}class Ok{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=$F,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Vs.makeFromBucketSpec(r,this._host):yL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Vs.makeFromBucketSpec(this._url,e):yL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hg(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new Iq(ZF());{const s=function Pq(n,e,t,i,r,s){const c=XF(n.urlParams),h=n.url+c,p=Object.assign({},n.headers);return function Oq(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function kq(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function Rq(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(p,s),function Nq(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,i),new xq(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var i=this;return(0,we.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const vL="@firebase/storage";function EL(n,e){return AW(n=(0,N.m9)(n),e)}function UW(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Ok(t,i,r,e,$n.SDK_VERSION)}!function BW(){(0,$n._registerComponent)(new fr.wA("storage",UW,"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(vL,"0.9.2",""),(0,$n.registerVersion)(vL,"0.9.2","esm2017")}();class PD{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class CL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new PD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new PD(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?c=>t(new PD(c,this,this._ref)):{next:t.next?c=>t.next(new PD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class IL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new zd(e,this._service))}get items(){return this._delegate.items.map(e=>new zd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class zd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function LW(n,e){return mL(n,e)}(this._delegate,e);return new zd(t,this.storage)}get root(){return new zd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new zd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new CL(function xW(n,e,t){return function vW(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new hL(n,new uu(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ha.RAW,i){this._throwIfRoot("putString");const r=Sk(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new CL(new hL(this._delegate,new uu(r.data,!0),s),this)}listAll(){return function NW(n){return function wW(n){const e={prefixes:[],items:[]};return pL(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new IL(e,this.storage))}list(e){return function OW(n,e){return gL(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new IL(t,this.storage))}getMetadata(){return function kW(n){return function EW(n){n._throwIfRoot("getMetadata");const e=oL(n.storage,n._location,G0());return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function RW(n,e){return function CW(n,e){n._throwIfRoot("updateMetadata");const t=function iW(n,e,t,i){const s=Hd(e.fullServerUrl(),n.host,n._protocol),h=Mk(t,i),y=n.maxOperationRetryTime,I=new du(s,"PATCH",OD(n,i),y);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=h,I.errorHandler=$0(e),I}(n.storage,n._location,e,G0());return n.storage.makeRequestWithTokens(t,Xl)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function PW(n){return IW(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function FW(n){return function TW(n){n._throwIfRoot("deleteObject");const e=function rW(n,e){const i=Hd(e.fullServerUrl(),n.host,n._protocol),h=new du(i,"DELETE",function c(p,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=$0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw YF(e)}}class TL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(DL(e))throw By("ref() expected a child path but got a URL, use refFromURL instead.");return new zd(EL(this._delegate,e),this)}refFromURL(e){if(!DL(e))throw By("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vs.makeFromUrl(e,this._delegate.host)}catch(t){throw By("refFromUrl() expected a valid full URL but got an invalid one.")}return new zd(EL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function VW(n,e,t,i={}){!function MW(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,N.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function DL(n){return/^[A-Za-z]+:\/\//.test(n)}function GW(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new TL(t,i)}function SL(n){const e=function qW(n){return new An.y(e=>{const t=c=>e.next(c);t(n.snapshot);const s=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){s()}}).pipe(So(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,tt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function FD(n){return{getDownloadURL:()=>ot(void 0).pipe(qt.fc,ar(()=>n.getDownloadURL()),qt.iC),getMetadata:()=>ot(void 0).pipe(qt.fc,ar(()=>n.getMetadata()),qt.iC),delete:()=>(0,wn.D)(n.delete()),child:e=>FD(n.child(e)),updateMetadata:e=>(0,wn.D)(n.updateMetadata(e)),put:(e,t)=>SL(n.put(e,t)),putString:(e,t,i)=>SL(n.putString(e,t,i)),list:e=>(0,wn.D)(n.list(e)),listAll:()=>(0,wn.D)(n.listAll())}}!function $W(n){const e={TaskState:lo,TaskEvent:cW,StringFormat:ha,Storage:TL,Reference:zd};n.INTERNAL.registerComponent(new fr.wA("storage-compat",GW,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(Os.Z);const WW=new d.OlP("angularfire2.storageBucket"),KW=new d.OlP("angularfire2.storage.maxUploadRetryTime"),ZW=new d.OlP("angularfire2.storage.maxOperationRetryTime"),YW=new d.OlP("angularfire2.storage.use-emulator");let QW=(()=>{class n{constructor(t,i,r,s,c,h,p,y,I,D){const x=(0,Fn.on)(t,c,i);this.storage=(0,Fn.cc)(`${x.name}.storage.${r}`,"AngularFireStorage",x.name,()=>{const P=c.runOutsideAngular(()=>x.storage(r||void 0)),U=I;return U&&P.useEmulator(...U),p&&P.setMaxUploadRetryTime(p),y&&P.setMaxOperationRetryTime(y),P},[p,y])}ref(t){return FD(this.storage.ref(t))}refFromURL(t){return FD(this.storage.refFromURL(t))}upload(t,i,r){return FD(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fn.Dh),d.LFG(Fn.xv,8),d.LFG(WW,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qt.HU),d.LFG(KW,8),d.LFG(ZW,8),d.LFG(YW,8),d.LFG(p0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),JW=(()=>{class n{constructor(){xT.Z.registerVersion("angularfire",qt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[QW],imports:[XW]}),n})();const AL="@firebase/database";let Nk="";function xL(n){Nk=n}class n6{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class i6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const kL=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new n6(e)}}catch(e){}return new i6},zg=kL("localStorage"),Pk=kL("sessionStorage"),zy=new Rs.Yd("@firebase/database"),RL=function(){let n=1;return function(){return n++}}(),OL=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const i=t.digest();return N.US.encodeByteArray(i)},q0=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=q0.apply(null,i):e+="object"==typeof i?(0,N.Pz)(i):i,e+=" "}return e};let Gg=null,NL=!0;const PL=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(zy.logLevel=Rs.in.VERBOSE,Gg=zy.log.bind(zy),e&&Pk.set("logging_enabled",!0)):"function"==typeof n?Gg=n:(Gg=null,Pk.remove("logging_enabled"))},Zr=function(...n){if(!0===NL&&(NL=!1,null===Gg&&!0===Pk.get("logging_enabled")&&PL(!0)),Gg){const e=q0.apply(null,n);Gg(e)}},W0=function(n){return function(...e){Zr(n,...e)}},Fk=function(...n){const e="FIREBASE INTERNAL ERROR: "+q0(...n);zy.error(e)},fu=function(...n){const e=`FIREBASE FATAL ERROR: ${q0(...n)}`;throw zy.error(e),new Error(e)},co=function(...n){const e="FIREBASE WARNING: "+q0(...n);zy.warn(e)},LD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Gd="[MIN_NAME]",pu="[MAX_NAME]",$g=function(n,e){if(n===e)return 0;if(n===Gd||e===pu)return-1;if(e===Gd||n===pu)return 1;{const t=VD(n),i=VD(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},o6=function(n,e){return n===e?0:n<e?-1:1},K0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Pz)(e))},Lk=function(n){if("object"!=typeof n||null===n)return(0,N.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,N.Pz)(e[i]),t+=":",t+=Lk(n[e[i]]);return t+="}",t},FL=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const LL=function(n){(0,N.hu)(!LD(n),"Invalid JSON number");const i=1023;let r,s,c,h,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const I=y.join("");let D="";for(p=0;p<64;p+=8){let x=parseInt(I.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},u6=new RegExp("^-?(0*)\\d{1,10}$"),VL=-2147483648,Vk=2147483647,VD=function(n){if(u6.test(n)){const e=Number(n);if(e>=VL&&e<=Vk)return e}return null},Gy=function(n){try{n()}catch(e){setTimeout(()=>{throw co("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Z0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class h6{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){co(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class f6{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Zr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',co(e)}}let Y0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const zL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$L="websocket",qL="long_polling";class Bk{constructor(e,t,i,r,s=!1,c="",h=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function WL(n,e,t){let i;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===$L)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==qL)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function g6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Yr(t,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class m6{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const jk={},Hk={};function zk(n){const e=n.toString();return jk[e]||(jk[e]=new m6),jk[e]}class y6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Gy(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $y{constructor(e,t,i,r,s,c,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=W0(e),this.stats_=zk(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),WL(t,qL,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new y6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gk((...s)=>{const[c,h,p,y,I]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&zL.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$y.forceAllow_=!0}static forceDisallow(){$y.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!$y.forceAllow_&&($y.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,N.h$)(t),r=FL(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Gk{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=RL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Gk.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Zr("frame writing exception"),h.stack&&Zr(h.stack),Zr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Zr("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Zr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let Q0=null;"undefined"!=typeof MozWebSocket?Q0=MozWebSocket:"undefined"!=typeof WebSocket&&(Q0=WebSocket);let X0=(()=>{class n{constructor(t,i,r,s,c,h,p){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=W0(this.connId),this.stats_=zk(i),this.connURL=n.connectionURL_(i,h,p,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s){const c={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&zL.test(location.hostname)&&(c.r="f"),i&&(c.s=i),r&&(c.ls=r),s&&(c.ac=s),WL(t,$L,c)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zg.set("previous_websocket_failure",!0);try{if((0,N.Yr)()){const s={headers:{"User-Agent":`Firebase/5/${Nk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(s.proxy={origin:h}),this.mySock=new Q0(this.connURL,[],s)}else this.mySock=new Q0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Q0&&!n.forceDisallow_}static previouslyFailed(){return zg.isInMemoryStorage||!0===zg.get("previous_websocket_failure")}markConnectionHealthy(){zg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,N.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,N.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=FL(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class $k{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[$y,X0]}initTransports_(e){const t=X0&&X0.isAvailable();let i=t&&!X0.previouslyFailed();if(e.webSocketOnly&&(t||co("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[X0];else{const r=this.transports_=[];for(const s of $k.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class oV{constructor(e,t,i,r,s,c,h,p,y,I){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=W0("c:"+this.id+":"),this.transportManager_=new $k(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Z0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=K0("t",e),i=K0("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=K0("t",e),i=K0("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=K0("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?Fk("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&co("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Z0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Z0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class aV{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class lV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class BD extends lV{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new BD}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Vn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xn(){return new Vn("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Pf(n){return n.pieces_.length-n.pieceNum_}function Kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Vn(n.pieces_,e)}function Wk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function J0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function dV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Vn(e,0)}function ki(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Vn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Vn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function uo(n,e){const t=Xt(n),i=Xt(e);if(null===t)return e;if(t===i)return uo(Kn(n),Kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function B6(n,e){const t=J0(n,0),i=J0(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=$g(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function Kk(n,e){if(Pf(n)!==Pf(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ka(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Pf(n)>Pf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class j6{constructor(e,t){this.errorPrefix_=t,this.parts_=J0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,N.ug)(this.parts_[i]);hV(this)}}function hV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qg(n))}function qg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Zk extends lV{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Zk}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const eE=1e3;let HD,Wg=(()=>{class n extends aV{constructor(t,i,r,s,c,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=W0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=eE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&BD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,c={r:s,a:t,b:i};this.log_((0,N.Pz)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new N.BH,r={p:t._path.toString(),q:t._queryObject},s={action:"g",request:r,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(r.p,p,!1,null),i.resolve(p)):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||s!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),i.promise}listen(t,i,r,s){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};t.tag&&(c.q=i._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,I=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",p),"ok"!==I&&this.removeListen_(r,s),t.onComplete&&t.onComplete(I,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const r=(0,N.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();co(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,N.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,h=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const c={p:t};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,c){this.initConnection_();const h={p:i,d:r};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):Fk("Unrecognized action received from server: "+(0,N.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=eE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const I=function(){y?y.close():(p=!0,s())};t.realtime_={close:I,sendRequest:function(P){(0,N.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,U]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?Zr("getToken() completed but was canceled"):(Zr("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=U&&U.token,y=new oV(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,J=>{co(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(P){t.log_("Failed to get token: "+P),p||(t.repoInfo_.nodeAdmin&&co(P),I())}}})()}interrupt(t){Zr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(c=>Lk(c)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Vn(t).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Zr("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Zr("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,N.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+Nk.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=BD.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class jD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new an(Gd,e),r=new an(Gd,t);return 0!==this.compare(i,r)}minPost(){return an.MIN}}class gV extends jD{static get __EMPTY_NODE(){return HD}static set __EMPTY_NODE(e){HD=e}compare(e,t){return $g(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(pu,HD)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,HD)}toString(){return".key"}}const gu=new gV;class zD{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,r&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Qk,Jl=(()=>{class n{constructor(t,i,r,s,c){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Po.EMPTY_NODE,this.right=null!=c?c:Po.EMPTY_NODE}copy(t,i,r,s,c){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const c=r(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Po.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return Po.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Po{constructor(e,t=Po.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Po(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Jl.BLACK,null,null))}remove(e){return new Po(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Jl.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new zD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new zD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new zD(this.root_,null,this.comparator_,!0,e)}}function Y6(n,e){return $g(n.name,e.name)}function Yk(n,e){return $g(n,e)}Po.EMPTY_NODE=new class Z6{copy(e,t,i,r,s){return this}insert(e,t,i){return new Jl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const mV=function(n){return"number"==typeof n?"number:"+LL(n):"string:"+n},_V=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===Qk||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===Qk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yV,vV,bV,qy=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),_V(this.priorityNode_)}static set __childrenNodeConstructor(t){yV=t}static get __childrenNodeConstructor(){return yV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Xt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,N.hu)(".priority"!==r||1===Pf(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Kn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mV(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?LL(this.value_):this.value_,this.lazyHash_=OL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,N.hu)(s>=0,"Unknown leaf type: "+i),(0,N.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ai=new class e8 extends jD{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?$g(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(pu,new qy("[PRIORITY-POST]",bV))}makePost(e,t){const i=vV(e);return new an(t,new qy("[PRIORITY-POST]",i))}toString(){return".priority"}},t8=Math.log(2);class n8{constructor(e){this.count=parseInt(Math.log(e+1)/t8,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const GD=function(n,e,t,i){n.sort(e);const r=function(p,y){const I=y-p;let D,x;if(0===I)return null;if(1===I)return D=n[p],x=t?t(D):D,new Jl(x,D.node,Jl.BLACK,null,null);{const P=parseInt(I/2,10)+p,U=r(p,P),J=r(P+1,y);return D=n[P],x=t?t(D):D,new Jl(x,D.node,Jl.BLACK,U,J)}},h=function(p){let y=null,I=null,D=n.length;const x=function(U,J){const pe=D-U,$e=D;D-=U;const Qe=r(pe+1,$e),it=n[pe],Ve=t?t(it):it;P(new Jl(Ve,it.node,J,null,Qe))},P=function(U){y?(y.left=U,y=U):(I=U,y=U)};for(let U=0;U<p.count;++U){const J=p.nextBitIsOne(),pe=Math.pow(2,p.count-(U+1));J?x(pe,Jl.BLACK):(x(pe,Jl.BLACK),x(pe,Jl.RED))}return I}(new n8(n.length));return new Po(i||e,h)};let Xk;const Wy={};class $d{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(Wy&&ai,"ChildrenNode.ts has not been loaded"),Xk=Xk||new $d({".priority":Wy},{".priority":ai}),Xk}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Po?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==gu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(an.Wrap);let h,c=s.getNext();for(;c;)r=r||e.isDefinedOn(c.node),i.push(c),c=s.getNext();h=r?GD(i,e.getCompare()):Wy;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const I=Object.assign({},this.indexes_);return I[p]=h,new $d(I,y)}addToIndexes(e,t){const i=(0,N.UI)(this.indexes_,(r,s)=>{const c=(0,N.DV)(this.indexSet_,s);if((0,N.hu)(c,"Missing index implementation for "+s),r===Wy){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(an.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),GD(h,c.getCompare())}return Wy}{const h=t.get(e.name);let p=r;return h&&(p=p.remove(new an(e.name,h))),p.insert(e,e.node)}});return new $d(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,N.UI)(this.indexes_,r=>{if(r===Wy)return r;{const s=t.get(e.name);return s?r.remove(new an(e.name,s)):r}});return new $d(i,this.indexSet_)}}let tE,zt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&_V(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return tE||(tE=new n(new Po(Yk),null,$d.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?tE:i}}getChild(t){const i=Xt(t);return null===i?this:this.getImmediateChild(i).getChild(Kn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,N.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new an(t,i);let s,c;i.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),c=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?tE:this.priorityNode_;return new n(s,h,c)}}updateChild(t,i){const r=Xt(t);if(null===r)return i;{(0,N.hu)(".priority"!==Xt(t)||1===Pf(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Kn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(ai,(h,p)=>{i[h]=p.val(t),r++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!t&&c&&s<2*r){const h=[];for(const p in i)h[p]=i[p];return h}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+mV(this.getPriority().val())+":"),this.forEachChild(ai,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":OL(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new an(t,i));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new an(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new an(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,an.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===nE?-1:0}withIndex(t){if(t===gu||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===gu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(ai),s=i.getIterator(ai);let c=r.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=r.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===gu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const nE=new class i8 extends zt{constructor(){super(new Po(Yk),zt.EMPTY_NODE,$d.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return zt.EMPTY_NODE}isEmpty(){return!1}};function ji(n,e=null){if(null===n)return zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new qy(n,ji(e));if(n instanceof Array){let t=zt.EMPTY_NODE;return Yr(n,(i,r)=>{if((0,N.r3)(n,i)&&"."!==i.substring(0,1)){const s=ji(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(ji(e))}{const t=[];let i=!1;if(Yr(n,(c,h)=>{if("."!==c.substring(0,1)){const p=ji(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new an(c,p)))}}),0===t.length)return zt.EMPTY_NODE;const s=GD(t,Y6,c=>c.name,Yk);if(i){const c=GD(t,ai.getCompare());return new zt(s,ji(e),new $d({".priority":c},{".priority":ai}))}return new zt(s,ji(e),$d.Default)}}Object.defineProperties(an,{MIN:{value:new an(Gd,zt.EMPTY_NODE)},MAX:{value:new an(pu,nE)}}),gV.__EMPTY_NODE=zt.EMPTY_NODE,qy.__childrenNodeConstructor=zt,function Q6(n){Qk=n}(nE),function J6(n){bV=n}(nE),function X6(n){vV=n}(ji);class Jk extends jD{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!Jt(e)&&".priority"!==Xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?$g(e.name,t.name):s}makePost(e,t){const i=ji(e),r=zt.EMPTY_NODE.updateChild(this.indexPath_,i);return new an(t,r)}maxPost(){const e=zt.EMPTY_NODE.updateChild(this.indexPath_,nE);return new an(pu,e)}toString(){return J0(this.indexPath_,0).join("/")}}const eR=new class s8 extends jD{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?$g(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const i=ji(e);return new an(t,i)}toString(){return".value"}},Ky="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",o8=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Ky.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=Ky.charAt(e[r]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),CV=function(n){if(n===""+Vk)return"-";const e=VD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return pu;const s=Ky.charAt(Ky.indexOf(t[i])+1);return t[i]=s,t.slice(0,i+1).join("")},IV=function(n){if(n===""+VL)return Gd;const e=VD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+Vk:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ky.charAt(Ky.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function TV(n){return{type:"value",snapshotNode:n}}function Zy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function iE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function rE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class nR{constructor(e){this.index_=e}updateChild(e,t,i,r,s,c){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(iE(t,h)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Zy(t,i)):c.trackChildChange(rE(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(ai,(r,s)=>{t.hasChild(r)||i.trackChildChange(iE(r,s))}),t.isLeafNode()||t.forEachChild(ai,(r,s)=>{if(e.hasChild(r)){const c=e.getImmediateChild(r);c.equals(s)||i.trackChildChange(rE(r,s,c))}else i.trackChildChange(Zy(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class sE{constructor(e){this.indexedFilter_=new nR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=sE.getStartPost_(e),this.endPost_=sE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,c){return this.matches(new an(t,i))||(i=zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=zt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(zt.EMPTY_NODE);const s=this;return t.forEachChild(ai,(c,h)=>{s.matches(new an(c,h))||(r=r.updateImmediateChild(c,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class l8{constructor(e){this.rangedFilter_=new sE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,c){return this.rangedFilter_.matches(new an(t,i))||(i=zt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,c):this.fullLimitUpdateChild_(e,t,i,s,c)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=zt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(h.name,h.node),c++}}else{let s,c,h,p;if(r=t.withIndex(this.index_),r=r.updatePriority(zt.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(x,P)=>D(P,x)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,I=!1;for(;p.hasNext();){const D=p.getNext();!I&&h(s,D)<=0&&(I=!0),I&&y<this.limit_&&h(D,c)<=0?y++:r=r.updateImmediateChild(D.name,zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let c;if(this.reverse_){const D=this.index_.getCompare();c=(x,P)=>D(P,x)}else c=this.index_.getCompare();const h=e;(0,N.hu)(h.numChildren()===this.limit_,"");const p=new an(t,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),I=this.rangedFilter_.matches(p);if(h.hasChild(t)){const D=h.getImmediateChild(t);let x=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=r.getChildAfterChild(this.index_,x,this.reverse_);const P=null==x?1:c(x,p);if(I&&!i.isEmpty()&&P>=0)return null!=s&&s.trackChildChange(rE(t,i,D)),h.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(iE(t,D));const J=h.updateImmediateChild(t,zt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=s&&s.trackChildChange(Zy(x.name,x.node)),J.updateImmediateChild(x.name,x.node)):J}}return i.isEmpty()?e:I&&c(y,p)>=0?(null!=s&&(s.trackChildChange(iE(y.name,y.node)),s.trackChildChange(Zy(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(y.name,zt.EMPTY_NODE)):e}}class $D{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ai}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ai}copy(){const e=new $D;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iR(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function rR(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function qD(n,e){const t=n.copy();return t.index_=e,t}function DV(n){const e={};if(n.isDefault())return e;let t;return n.index_===ai?t="$priority":n.index_===eR?t="$value":n.index_===gu?t="$key":((0,N.hu)(n.index_ instanceof Jk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Pz)(t),n.startSet_&&(e.startAt=(0,N.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,N.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,N.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,N.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function SV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ai&&(e.i=n.index_.toString()),e}class WD extends aV{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=W0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=WD.getListenId_(e,i),h={};this.listens_[c]=h;const p=DV(e._queryParams);this.restRequest_(s+".json",p,(y,I)=>{let D=I;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,i),(0,N.DV)(this.listens_,c)===h){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(x,null)}})}unlisten(e,t){const i=WD.getListenId_(e,t);delete this.listens_[i]}get(e){const t=DV(e._queryParams),i=e._path.toString(),r=new N.BH;return this.restRequest_(i+".json",t,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,N.cI)(h.responseText)}catch(y){co("Failed to parse JSON response for "+c+": "+h.responseText)}i(null,p)}else 401!==h.status&&404!==h.status&&co("Got unsuccessful REST response for "+c+" Status: "+h.status),i(h.status);i=null}},h.open("GET",c,!0),h.send()})}}class p8{constructor(){this.rootNode_=zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function KD(){return{value:null,children:new Map}}function Yy(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Xt(e);n.children.has(i)||n.children.set(i,KD()),Yy(n.children.get(i),e=Kn(e),t)}}function sR(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ai,(i,r)=>{Yy(n,new Vn(i),r)}),sR(n,e)}}if(n.children.size>0){const t=Xt(e);return e=Kn(e),n.children.has(t)&&sR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function oR(n,e,t){null!==n.value?t(e,n.value):function g8(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{oR(r,new Vn(e.toString()+"/"+i),t)})}class m8{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Yr(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class v8{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new m8(e);const i=1e4+2e4*Math.random();Z0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Yr(e,(r,s)=>{s>0&&(0,N.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Z0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Za=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Za||(Za={})),Za))();function cR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ZD{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Za.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Vn(e));return new ZD(xn(),t,this.revert)}}return(0,N.hu)(Xt(this.path)===e,"operationForChild called for unrelated child."),new ZD(Kn(this.path),this.affectedTree,this.revert)}}class oE{constructor(e,t){this.source=e,this.path=t,this.type=Za.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new oE(this.source,xn()):new oE(this.source,Kn(this.path))}}class Kg{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Za.OVERWRITE}operationForChild(e){return Jt(this.path)?new Kg(this.source,xn(),this.snap.getImmediateChild(e)):new Kg(this.source,Kn(this.path),this.snap)}}class Qy{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Za.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new Vn(e));return t.isEmpty()?null:t.value?new Kg(this.source,xn(),t.value):new Qy(this.source,xn(),t)}return(0,N.hu)(Xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qy(this.source,Kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ff{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class b8{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function aE(n,e,t,i,r,s){const c=i.filter(h=>h.type===t);c.sort((h,p)=>function C8(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const i=new an(e.childName,e.snapshotNode),r=new an(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,h,p)),c.forEach(h=>{const p=function E8(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);r.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function YD(n,e){return{eventCache:n,serverCache:e}}function lE(n,e,t,i){return YD(new Ff(e,t,i),n.serverCache)}function MV(n,e,t,i){return YD(n.eventCache,new Ff(e,t,i))}function QD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let uR;class li{constructor(e,t=(()=>(uR||(uR=new Po(o6)),uR))()){this.value=e,this.children=t}static fromObject(e){let t=new li(null);return Yr(e,(i,r)=>{t=t.set(new Vn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xn(),value:this.value};if(Jt(e))return null;{const i=Xt(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Kn(e),t);return null!=s?{path:ki(new Vn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Xt(e),i=this.children.get(t);return null!==i?i.subtree(Kn(e)):new li(null)}}set(e,t){if(Jt(e))return new li(t,this.children);{const i=Xt(e),s=(this.children.get(i)||new li(null)).set(Kn(e),t),c=this.children.insert(i,s);return new li(this.value,c)}}remove(e){if(Jt(e))return this.children.isEmpty()?new li(null):new li(null,this.children);{const t=Xt(e),i=this.children.get(t);if(i){const r=i.remove(Kn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new li(null):new li(this.value,s)}return this}}get(e){if(Jt(e))return this.value;{const t=Xt(e),i=this.children.get(t);return i?i.get(Kn(e)):null}}setTree(e,t){if(Jt(e))return t;{const i=Xt(e),s=(this.children.get(i)||new li(null)).setTree(Kn(e),t);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new li(this.value,c)}}fold(e){return this.fold_(xn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ki(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,xn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Jt(e))return null;{const s=Xt(e),c=this.children.get(s);return c?c.findOnPath_(Kn(e),ki(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xn(),t)}foreachOnPath_(e,t,i){if(Jt(e))return this;{this.value&&i(t,this.value);const r=Xt(e),s=this.children.get(r);return s?s.foreachOnPath_(Kn(e),ki(t,r),i):new li(null)}}foreach(e){this.foreach_(xn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(ki(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class ec{constructor(e){this.writeTree_=e}static empty(){return new ec(new li(null))}}function cE(n,e,t){if(Jt(e))return new ec(new li(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const c=uo(r,e);return s=s.updateChild(c,t),new ec(n.writeTree_.set(r,s))}{const r=new li(t),s=n.writeTree_.setTree(e,r);return new ec(s)}}}function dR(n,e,t){let i=n;return Yr(t,(r,s)=>{i=cE(i,ki(e,r),s)}),i}function xV(n,e){if(Jt(e))return ec.empty();{const t=n.writeTree_.setTree(e,new li(null));return new ec(t)}}function hR(n,e){return null!=Yg(n,e)}function Yg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(uo(t.path,e)):null}function kV(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ai,(i,r)=>{e.push(new an(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new an(i,r.value))}),e}function Lf(n,e){if(Jt(e))return n;{const t=Yg(n,e);return new ec(null!=t?new li(t):n.writeTree_.subtree(e))}}function fR(n){return n.writeTree_.isEmpty()}function Xy(n,e){return RV(xn(),n.writeTree_,e)}function RV(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,N.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=RV(ki(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(ki(n,".priority"),i)),t}}function XD(n,e){return LV(e,n)}function M8(n,e){if(n.snap)return Ka(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ka(ki(n.path,t),e))return!0;return!1}function k8(n){return n.visible}function OV(n,e,t){let i=ec.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const c=s.path;let h;if(s.snap)Ka(t,c)?(h=uo(t,c),i=cE(i,h,s.snap)):Ka(c,t)&&(h=uo(c,t),i=cE(i,xn(),s.snap.getChild(h)));else{if(!s.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(Ka(t,c))h=uo(t,c),i=dR(i,h,s.children);else if(Ka(c,t))if(h=uo(c,t),Jt(h))i=dR(i,xn(),s.children);else{const p=(0,N.DV)(s.children,Xt(h));if(p){const y=p.getChild(Kn(h));i=cE(i,xn(),y)}}}}}return i}function NV(n,e,t,i,r){if(i||r){const s=Lf(n.visibleWrites,e);return!r&&fR(s)?t:r||null!=t||hR(s,xn())?Xy(OV(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Ka(y.path,e)||Ka(e,y.path))},e),t||zt.EMPTY_NODE):null}{const s=Yg(n.visibleWrites,e);if(null!=s)return s;{const c=Lf(n.visibleWrites,e);return fR(c)?t:null!=t||hR(c,xn())?Xy(c,t||zt.EMPTY_NODE):null}}}function JD(n,e,t,i){return NV(n.writeTree,n.treePath,e,t,i)}function pR(n,e){return function R8(n,e,t){let i=zt.EMPTY_NODE;const r=Yg(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ai,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(t){const s=Lf(n.visibleWrites,e);return t.forEachChild(ai,(c,h)=>{const p=Xy(Lf(s,new Vn(c)),h);i=i.updateImmediateChild(c,p)}),kV(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return kV(Lf(n.visibleWrites,e)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,e)}function PV(n,e,t,i){return function O8(n,e,t,i,r){(0,N.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=ki(e,t);if(hR(n.visibleWrites,s))return null;{const c=Lf(n.visibleWrites,s);return fR(c)?r.getChild(t):Xy(c,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function eS(n,e){return function P8(n,e){return Yg(n.visibleWrites,e)}(n.writeTree,ki(n.treePath,e))}function gR(n,e,t){return function N8(n,e,t,i){const r=ki(e,t),s=Yg(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?Xy(Lf(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function FV(n,e){return LV(ki(n.treePath,e),n.writeTree)}function LV(n,e){return{treePath:n,writeTree:e}}class U8{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,rE(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,iE(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,Zy(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,rE(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const VV=new class B8{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class mR{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Ff(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gR(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Zg(this.viewCache_),s=function V8(n,e,t,i,r,s){return function F8(n,e,t,i,r,s,c){let h;const p=Lf(n.visibleWrites,e),y=Yg(p,xn());if(null!=y)h=y;else{if(null==t)return[];h=Xy(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const I=[],D=c.getCompare(),x=s?h.getReverseIteratorFrom(i,c):h.getIteratorFrom(i,c);let P=x.getNext();for(;P&&I.length<r;)0!==D(P,i)&&I.push(P),P=x.getNext();return I}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function UV(n,e,t,i,r,s){const c=e.eventCache;if(null!=eS(i,t))return e;{let h,p;if(Jt(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Zg(e),D=pR(i,y instanceof zt?y:zt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=JD(i,Zg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Xt(t);if(".priority"===y){(0,N.hu)(1===Pf(t),"Can't have a priority with additional path components");const I=c.getNode();p=e.serverCache.getNode();const D=PV(i,t,I,p);h=null!=D?n.filter.updatePriority(I,D):c.getNode()}else{const I=Kn(t);let D;if(c.isCompleteForChild(y)){p=e.serverCache.getNode();const x=PV(i,t,c.getNode(),p);D=null!=x?c.getNode().getImmediateChild(y).updateChild(I,x):c.getNode().getImmediateChild(y)}else D=gR(i,y,e.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),y,D,I,r,s):c.getNode()}}return lE(e,h,c.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function tS(n,e,t,i,r,s,c,h){const p=e.serverCache;let y;const I=c?n.filter:n.filter.getIndexedFilter();if(Jt(t))y=I.updateFullNode(p.getNode(),i,null);else if(I.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(t,i);y=I.updateFullNode(p.getNode(),P,null)}else{const P=Xt(t);if(!p.isCompleteForPath(t)&&Pf(t)>1)return e;const U=Kn(t),pe=p.getNode().getImmediateChild(P).updateChild(U,i);y=".priority"===P?I.updatePriority(p.getNode(),pe):I.updateChild(p.getNode(),P,pe,U,VV,null)}const D=MV(e,y,p.isFullyInitialized()||Jt(t),I.filtersNodes());return UV(n,D,t,r,new mR(r,D,s),h)}function _R(n,e,t,i,r,s,c){const h=e.eventCache;let p,y;const I=new mR(r,e,s);if(Jt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,c),p=lE(e,y,!0,n.filter.filtersNodes());else{const D=Xt(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),i),p=lE(e,y,h.isFullyInitialized(),h.isFiltered());else{const x=Kn(t),P=h.getNode().getImmediateChild(D);let U;if(Jt(x))U=i;else{const J=I.getCompleteChild(D);U=null!=J?".priority"===Wk(x)&&J.getChild(dV(x)).isEmpty()?J:J.updateChild(x,i):zt.EMPTY_NODE}p=P.equals(U)?e:lE(e,n.filter.updateChild(h.getNode(),D,U,x,I,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function BV(n,e){return n.eventCache.isCompleteForChild(e)}function jV(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function yR(n,e,t,i,r,s,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Jt(t)?i:new li(null).setTree(t,i);const I=e.serverCache.getNode();return y.children.inorderTraversal((D,x)=>{if(I.hasChild(D)){const U=jV(0,e.serverCache.getNode().getImmediateChild(D),x);p=tS(n,p,new Vn(D),U,r,s,c,h)}}),y.children.inorderTraversal((D,x)=>{const P=!e.serverCache.isCompleteForChild(D)&&void 0===x.value;if(!I.hasChild(D)&&!P){const J=jV(0,e.serverCache.getNode().getImmediateChild(D),x);p=tS(n,p,new Vn(D),J,r,s,c,h)}}),p}class Z8{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new nR(i.getIndex()),s=function c8(n){return n.loadsAllData()?new nR(n.getIndex()):n.hasLimit()?new l8(n):new sE(n)}(i);this.processor_=function j8(n){return{filter:n}}(s);const c=t.serverCache,h=t.eventCache,p=r.updateFullNode(zt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(zt.EMPTY_NODE,h.getNode(),null),I=new Ff(p,c.isFullyInitialized(),r.filtersNodes()),D=new Ff(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=YD(D,I),this.eventGenerator_=new b8(this.query_)}get query(){return this.query_}}function X8(n,e){const t=Zg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Xt(e)).isEmpty())?t.getChild(e):null}function HV(n){return 0===n.eventRegistrations_.length}function zV(n,e,t){const i=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(t,r);c&&i.push(c)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function GV(n,e,t,i){e.type===Za.MERGE&&null!==e.source.queryId&&((0,N.hu)(Zg(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(QD(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function z8(n,e,t,i,r){const s=new U8;let c,h;if(t.type===Za.OVERWRITE){const y=t;y.source.fromUser?c=_R(n,e,y.path,y.snap,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Jt(y.path),c=tS(n,e,y.path,y.snap,i,r,h,s))}else if(t.type===Za.MERGE){const y=t;y.source.fromUser?c=function $8(n,e,t,i,r,s,c){let h=e;return i.foreach((p,y)=>{const I=ki(t,p);BV(e,Xt(I))&&(h=_R(n,h,I,y,r,s,c))}),i.foreach((p,y)=>{const I=ki(t,p);BV(e,Xt(I))||(h=_R(n,h,I,y,r,s,c))}),h}(n,e,y.path,y.children,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=yR(n,e,y.path,y.children,i,r,h,s))}else if(t.type===Za.ACK_USER_WRITE){const y=t;c=y.revert?function K8(n,e,t,i,r,s){let c;if(null!=eS(i,t))return e;{const h=new mR(i,e,r),p=e.eventCache.getNode();let y;if(Jt(t)||".priority"===Xt(t)){let I;if(e.serverCache.isFullyInitialized())I=JD(i,Zg(e));else{const D=e.serverCache.getNode();(0,N.hu)(D instanceof zt,"serverChildren would be complete if leaf node"),I=pR(i,D)}I=I,y=n.filter.updateFullNode(p,I,s)}else{const I=Xt(t);let D=gR(i,I,e.serverCache);null==D&&e.serverCache.isCompleteForChild(I)&&(D=p.getImmediateChild(I)),y=null!=D?n.filter.updateChild(p,I,D,Kn(t),h,s):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(p,I,zt.EMPTY_NODE,Kn(t),h,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=JD(i,Zg(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=eS(i,xn()),lE(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,i,r,s):function q8(n,e,t,i,r,s,c){if(null!=eS(r,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=i.value){if(Jt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return tS(n,e,t,p.getNode().getChild(t),r,s,h,c);if(Jt(t)){let y=new li(null);return p.getNode().forEachChild(gu,(I,D)=>{y=y.set(new Vn(I),D)}),yR(n,e,t,y,r,s,h,c)}return e}{let y=new li(null);return i.foreach((I,D)=>{const x=ki(t,I);p.isCompleteForPath(x)&&(y=y.set(I,p.getNode().getChild(x)))}),yR(n,e,t,y,r,s,h,c)}}(n,e,y.path,y.affectedTree,i,r,s)}else{if(t.type!==Za.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);c=function W8(n,e,t,i,r){const s=e.serverCache;return UV(n,MV(e,s.getNode(),s.isFullyInitialized()||Jt(t),s.isFiltered()),t,i,VV,r)}(n,e,t.path,i,s)}const p=s.getChanges();return function G8(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=QD(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(TV(QD(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,r,e,t,i);return function H8(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,$V(n,s.changes,s.viewCache.eventCache.getNode(),null)}function $V(n,e,t,i){return function w8(n,e,t,i){const r=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function a8(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),aE(n,r,"child_removed",e,i,t),aE(n,r,"child_added",e,i,t),aE(n,r,"child_moved",s,i,t),aE(n,r,"child_changed",e,i,t),aE(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let nS,rS;class qV{constructor(){this.views=new Map}}function vR(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,N.hu)(null!=s,"SyncTree gave us an op for an invalid query."),GV(s,e,t,i)}{let s=[];for(const c of n.views.values())s=s.concat(GV(c,e,t,i));return s}}function WV(n,e,t,i,r){const c=n.views.get(e._queryIdentifier);if(!c){let h=JD(t,r?i:null),p=!1;h?p=!0:i instanceof zt?(h=pR(t,i),p=!1):(h=zt.EMPTY_NODE,p=!1);const y=YD(new Ff(h,p,!1),new Ff(i,r,!1));return new Z8(e,y)}return c}function KV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Vf(n,e){let t=null;for(const i of n.views.values())t=t||X8(i,e);return t}function ZV(n,e){return e._queryParams.loadsAllData()?iS(n):n.views.get(e._queryIdentifier)}function YV(n,e){return null!=ZV(n,e)}function Uf(n){return null!=iS(n)}function iS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let lK=1;class QV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new li(null),this.pendingWriteTree_=function L8(){return{visibleWrites:ec.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bR(n,e,t,i,r){return function T8(n,e,t,i,r){(0,N.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=cE(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Jy(n,new Kg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Bf(n,e,t=!1){const i=function S8(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function A8(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&M8(h,i.path)?r=!1:Ka(i.path,h.path)&&(s=!0)),c--}return!!r&&(s?(function x8(n){n.visibleWrites=OV(n.allWrites,k8,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=xV(n.visibleWrites,i.path):Yr(i.children,p=>{n.visibleWrites=xV(n.visibleWrites,ki(i.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new li(null);return null!=i.snap?s=s.set(xn(),!0):Yr(i.children,c=>{s=s.set(new Vn(c),!0)}),Jy(n,new ZD(i.path,s,t))}return[]}function uE(n,e,t){return Jy(n,new Kg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function wR(n,e,t,i){const r=e._path,s=n.syncPointTree_.get(r);let c=[];if(s&&("default"===e._queryIdentifier||YV(s,e))){const h=function sK(n,e,t,i){const r=e._queryIdentifier,s=[];let c=[];const h=Uf(n);if("default"===r)for(const[p,y]of n.views.entries())c=c.concat(zV(y,t,i)),HV(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(c=c.concat(zV(p,t,i)),HV(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Uf(n)&&s.push(new(function nK(){return(0,N.hu)(nS,"Reference.ts has not been loaded"),nS}())(e._repo,e._path)),{removed:s,events:c}}(s,e,t,i);(function iK(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=h.removed;c=h.events;const y=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(r,(D,x)=>Uf(x));if(y&&!I){const D=n.syncPointTree_.subtree(r);if(!D.isEmpty()){const x=function mK(n){return n.fold((e,t,i)=>{if(t&&Uf(t))return[iS(t)];{let r=[];return t&&(r=KV(t)),Yr(i,(s,c)=>{r=r.concat(c)}),r}})}(D);for(let P=0;P<x.length;++P){const U=x[P],J=U.query,pe=tU(n,U);n.listenProvider_.startListening(dE(J),oS(n,J),pe.hashFn,pe.onComplete)}}}!I&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(dE(e),null):p.forEach(D=>{const x=n.queryToTagMap.get(aS(D));n.listenProvider_.stopListening(dE(D),x)})),function _K(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=aS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return c}function XV(n,e,t){const i=e._path;let r=null,s=!1;n.syncPointTree_.foreachOnPath(i,(D,x)=>{const P=uo(D,i);r=r||Vf(x,P),s=s||Uf(x)});let h,c=n.syncPointTree_.get(i);c?(s=s||Uf(c),r=r||Vf(c,xn())):(c=new qV,n.syncPointTree_=n.syncPointTree_.set(i,c)),null!=r?h=!0:(h=!1,r=zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((x,P)=>{const U=Vf(P,xn());U&&(r=r.updateImmediateChild(x,U))}));const p=YV(c,e);if(!p&&!e._queryParams.loadsAllData()){const D=aS(e);(0,N.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const x=function yK(){return lK++}();n.queryToTagMap.set(D,x),n.tagToQueryMap.set(x,D)}let I=function rK(n,e,t,i,r,s){const c=WV(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function J8(n,e){n.eventRegistrations_.push(e)}(c,t),function eK(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ai,(s,c)=>{i.push(Zy(s,c))}),t.isFullyInitialized()&&i.push(TV(t.getNode())),$V(n,i,t.getNode(),e)}(c,t)}(c,e,t,XD(n.pendingWriteTree_,i),r,h);if(!p&&!s){const D=ZV(c,e);I=I.concat(function vK(n,e,t){const i=e._path,r=oS(n,e),s=tU(n,t),c=n.listenProvider_.startListening(dE(e),r,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,N.hu)(!Uf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,I,D)=>{if(!Jt(y)&&I&&Uf(I))return[iS(I).query];{let x=[];return I&&(x=x.concat(KV(I).map(P=>P.query))),Yr(D,(P,U)=>{x=x.concat(U)}),x}});for(let y=0;y<p.length;++y){const I=p[y];n.listenProvider_.stopListening(dE(I),oS(n,I))}}return c}(n,e,D))}return I}function sS(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=Vf(h,uo(c,e));if(y)return y});return NV(r,e,s,t,!0)}function Jy(n,e){return JV(e,n.syncPointTree_,null,XD(n.pendingWriteTree_,xn()))}function JV(n,e,t,i){if(Jt(n.path))return eU(n,e,t,i);{const r=e.get(xn());null==t&&null!=r&&(t=Vf(r,xn()));let s=[];const c=Xt(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const y=t?t.getImmediateChild(c):null,I=FV(i,c);s=s.concat(JV(h,p,y,I))}return r&&(s=s.concat(vR(r,n,i,t))),s}}function eU(n,e,t,i){const r=e.get(xn());null==t&&null!=r&&(t=Vf(r,xn()));let s=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,y=FV(i,c),I=n.operationForChild(c);I&&(s=s.concat(eU(I,h,p,y)))}),r&&(s=s.concat(vR(r,n,i,t))),s}function tU(n,e){const t=e.query,i=oS(n,t);return{hashFn:()=>(function Y8(n){return n.viewCache_.serverCache.getNode()}(e)||zt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function hK(n,e,t){const i=ER(n,t);if(i){const r=CR(i),s=r.path,c=r.queryId,h=uo(s,e);return IR(n,s,new oE(cR(c),h))}return[]}(n,t._path,i):function dK(n,e){return Jy(n,new oE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function c6(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return wR(n,t,null,s)}}}}function oS(n,e){const t=aS(e);return n.queryToTagMap.get(t)}function aS(n){return n._path.toString()+"$"+n._queryIdentifier}function ER(n,e){return n.tagToQueryMap.get(e)}function CR(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Vn(n.substr(0,e))}}function IR(n,e,t){const i=n.syncPointTree_.get(e);return(0,N.hu)(i,"Missing sync point for query tag that we're tracking"),vR(i,t,XD(n.pendingWriteTree_,e),null)}function dE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function aK(){return(0,N.hu)(rS,"Reference.ts has not been loaded"),rS}())(n._repo,n._path):n}class TR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new TR(t)}node(){return this.node_}}class DR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ki(this.path_,e);return new DR(this.syncTree_,t)}node(){return sS(this.syncTree_,this.path_)}}const nU=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?wK(n[".sv"],e,t):"object"==typeof n[".sv"]?EK(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},wK=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},EK=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,N.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,N.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},iU=function(n,e,t,i){return AR(e,new DR(t,n),i)},SR=function(n,e,t){return AR(n,new TR(e),t)};function AR(n,e,t){const i=n.getPriority().val(),r=nU(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,h=nU(c.getValue(),e,t);return h!==c.getValue()||r!==c.getPriority().val()?new qy(h,ji(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new qy(r))),c.forEachChild(ai,(h,p)=>{const y=AR(p,e.getImmediateChild(h),t);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class MR{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function lS(n,e){let t=e instanceof Vn?e:new Vn(e),i=n,r=Xt(t);for(;null!==r;){const s=(0,N.DV)(i.node.children,r)||{children:{},childCount:0};i=new MR(r,i,s),t=Kn(t),r=Xt(t)}return i}function Qg(n){return n.node.value}function xR(n,e){n.node.value=e,kR(n)}function rU(n){return n.node.childCount>0}function cS(n,e){Yr(n.node.children,(t,i)=>{e(new MR(t,n,i))})}function sU(n,e,t,i){t&&!i&&e(n),cS(n,r=>{sU(r,e,!0,i)}),t&&i&&e(n)}function hE(n){return new Vn(null===n.parent?n.name:hE(n.parent)+"/"+n.name)}function kR(n){null!==n.parent&&function TK(n,e,t){const i=function CK(n){return void 0===Qg(n)&&!rU(n)}(t),r=(0,N.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,kR(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,kR(n))}(n.parent,n.name,n)}const DK=/[\[\].#$\/\u0000-\u001F\u007F]/,SK=/[\[\].#$\u0000-\u001F\u007F]/,RR=10485760,uS=function(n){return"string"==typeof n&&0!==n.length&&!DK.test(n)},oU=function(n){return"string"==typeof n&&0!==n.length&&!SK.test(n)},fE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!LD(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},mu=function(n,e,t,i){i&&void 0===e||pE((0,N.gK)(n,"value"),e,t)},pE=function(n,e,t){const i=t instanceof Vn?new j6(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+qg(i));if("function"==typeof e)throw new Error(n+"contains a function "+qg(i)+" with contents = "+e.toString());if(LD(e))throw new Error(n+"contains "+e.toString()+" "+qg(i));if("string"==typeof e&&e.length>RR/3&&(0,N.ug)(e)>RR)throw new Error(n+"contains a string greater than "+RR+" utf8 bytes "+qg(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Yr(e,(c,h)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!uS(c)))throw new Error(n+" contains an invalid key ("+c+") "+qg(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function H6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),hV(n)})(i,c),pE(n,h,i),function z6(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+qg(i)+" in addition to actual children.")}},aU=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Yr(e,(c,h)=>{const p=new Vn(c);if(pE(r,h,ki(t,p)),".priority"===Wk(p)&&!fE(h))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=J0(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!uS(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(B6);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Ka(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},OR=function(n,e,t){if(!t||void 0!==e){if(LD(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fE(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gE=function(n,e,t,i){if(!(i&&void 0===t||uS(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mE=function(n,e,t,i){if(!(i&&void 0===t||oU(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ya=function(n,e){if(".info"===Xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},lU=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!uS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oU(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class kK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dS(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!Kk(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function NR(n,e,t){dS(n,t),cU(n,i=>Kk(i,e))}function Qa(n,e,t){dS(n,t),cU(n,i=>Ka(i,e)||Ka(e,i))}function cU(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(RK(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function RK(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Gg&&Zr("event: "+t.toString()),Gy(i)}}}const uU="repo_interrupt";class NK{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=KD(),this.transactionQueueTree_=new MR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dU(n){const t=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _E(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:dU(n)})}function hU(n,e,t,i,r){n.dataUpdateCount++;const s=new Vn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(r)if(i){const p=(0,N.UI)(t,y=>ji(y));c=function pK(n,e,t,i){const r=ER(n,i);if(r){const s=CR(r),c=s.path,h=s.queryId,p=uo(c,e),y=li.fromObject(t);return IR(n,c,new Qy(cR(h),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=ji(t);c=function fK(n,e,t,i){const r=ER(n,i);if(null!=r){const s=CR(r),c=s.path,h=s.queryId,p=uo(c,e);return IR(n,c,new Kg(cR(h),p,t))}return[]}(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,N.UI)(t,y=>ji(y));c=function uK(n,e,t){const i=li.fromObject(t);return Jy(n,new Qy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,p)}else{const p=ji(t);c=uE(n.serverSyncTree_,s,p)}let h=s;c.length>0&&(h=tv(n,s)),Qa(n.eventQueue_,h,c)}function fU(n,e){PR(n,"connected",e),!1===e&&function UK(n){ev(n,"onDisconnectEvents");const e=_E(n),t=KD();oR(n.onDisconnect_,xn(),(r,s)=>{const c=iU(r,s,n.serverSyncTree_,e);Yy(t,r,c)});let i=[];oR(t,xn(),(r,s)=>{i=i.concat(uE(n.serverSyncTree_,r,s));const c=UR(n,r);tv(n,c)}),n.onDisconnect_=KD(),Qa(n.eventQueue_,xn(),i)}(n)}function PR(n,e,t){const i=new Vn("/.info/"+e),r=ji(t);n.infoData_.updateSnapshot(i,r);const s=uE(n.infoSyncTree_,i,r);Qa(n.eventQueue_,i,s)}function hS(n){return n.nextWriteId_++}function FR(n,e,t,i,r){ev(n,"set",{path:e.toString(),value:t,priority:i});const s=_E(n),c=ji(t,i),h=sS(n.serverSyncTree_,e),p=SR(c,h,s),y=hS(n),I=bR(n.serverSyncTree_,e,p,y,!0);dS(n.eventQueue_,I),n.server_.put(e.toString(),c.val(!0),(x,P)=>{const U="ok"===x;U||co("set at "+e+" failed: "+x);const J=Bf(n.serverSyncTree_,y,!U);Qa(n.eventQueue_,e,J),jf(0,r,x,P)});const D=UR(n,e);tv(n,D),Qa(n.eventQueue_,D,[])}function BK(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&sR(n.onDisconnect_,e),jf(0,t,i,r)})}function pU(n,e,t,i){const r=ji(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,c)=>{"ok"===s&&Yy(n.onDisconnect_,e,r),jf(0,i,s,c)})}function LR(n,e,t){let i;i=".info"===Xt(e._path)?wR(n.infoSyncTree_,e,t):wR(n.serverSyncTree_,e,t),NR(n.eventQueue_,e._path,i)}function gU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(uU)}function ev(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Zr(t,...e)}function jf(n,e,t,i){e&&Gy(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,e(c)}})}function VR(n,e,t){return sS(n.serverSyncTree_,e,t)||zt.EMPTY_NODE}function fS(n,e=n.transactionQueueTree_){if(e||pS(n,e),Qg(e)){const t=_U(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function qK(n,e,t){const i=t.map(y=>y.currentWriteId),r=VR(n,e,i);let s=r;const c=r.hash();for(let y=0;y<t.length;y++){const I=t[y];(0,N.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const D=uo(e,I.path);s=s.updateChild(D,I.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,y=>{ev(n,"transaction put response",{path:p.toString(),status:y});let I=[];if("ok"===y){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,I=I.concat(Bf(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();pS(n,lS(n.transactionQueueTree_,e)),fS(n,n.transactionQueueTree_),Qa(n.eventQueue_,e,I);for(let x=0;x<D.length;x++)Gy(D[x])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{co("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}tv(n,e)}},c)}(n,hE(e),t)}else rU(e)&&cS(e,t=>{fS(n,t)})}function tv(n,e){const t=mU(n,e),i=hE(t);return function WK(n,e,t){if(0===e.length)return;const i=[];let r=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=uo(t,p.path);let D,I=!1;if((0,N.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)I=!0,D=p.abortReason,r=r.concat(Bf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)I=!0,D="maxretry",r=r.concat(Bf(n.serverSyncTree_,p.currentWriteId,!0));else{const x=VR(n,p.path,c);p.currentInputSnapshot=x;const P=e[h].update(x.val());if(void 0!==P){pE("transaction failed: Data returned ",P,p.path);let U=ji(P);"object"==typeof P&&null!=P&&(0,N.r3)(P,".priority")||(U=U.updatePriority(x.getPriority()));const pe=p.currentWriteId,$e=_E(n),Qe=SR(U,x,$e);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=Qe,p.currentWriteId=hS(n),c.splice(c.indexOf(pe),1),r=r.concat(bR(n.serverSyncTree_,p.path,Qe,p.currentWriteId,p.applyLocally)),r=r.concat(Bf(n.serverSyncTree_,pe,!0))}else I=!0,D="nodata",r=r.concat(Bf(n.serverSyncTree_,p.currentWriteId,!0))}Qa(n.eventQueue_,t,r),r=[],I&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&i.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}pS(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)Gy(i[h]);fS(n,n.transactionQueueTree_)}(n,_U(n,t),i),i}function mU(n,e){let t,i=n.transactionQueueTree_;for(t=Xt(e);null!==t&&void 0===Qg(i);)i=lS(i,t),t=Xt(e=Kn(e));return i}function _U(n,e){const t=[];return yU(n,e,t),t.sort((i,r)=>i.order-r.order),t}function yU(n,e,t){const i=Qg(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);cS(e,r=>{yU(n,r,t)})}function pS(n,e){const t=Qg(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,xR(e,t.length>0?t:void 0)}cS(e,i=>{pS(n,i)})}function UR(n,e){const t=hE(mU(n,e)),i=lS(n.transactionQueueTree_,e);return function IK(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{BR(n,r)}),BR(n,i),sU(i,r=>{BR(n,r)}),t}function BR(n,e){const t=Qg(e);if(t){const i=[];let r=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,N.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,N.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),r=r.concat(Bf(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?xR(e,void 0):t.length=s+1,Qa(n.eventQueue_,hE(e),r);for(let c=0;c<i.length;c++)Gy(i[c])}}const jR=function(n,e){const t=YK(n),i=t.namespace;return"firebase.com"===t.domain&&fu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&fu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&co("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Bk(t.host,t.secure,i,e,"ws"===t.scheme||"wss"===t.scheme,"",i!==t.subdomain),path:new Vn(t.pathString)}},YK=function(n){let e="",t="",i="",r="",s="",c=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(I,D)),I<D&&(r=function KK(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(I,D)));const x=function ZK(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):co(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const P=e.slice(0,y);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const U=e.indexOf(".");i=e.substring(0,U).toLowerCase(),t=e.substring(U+1),s=i}"ns"in x&&(s=x.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:c,scheme:h,pathString:r,namespace:s}};class vU{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class bU{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wU{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class EU{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return BK(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ya("OnDisconnect.remove",this._path);const e=new N.BH;return pU(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ya("OnDisconnect.set",this._path),mu("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return pU(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ya("OnDisconnect.setWithPriority",this._path),mu("OnDisconnect.setWithPriority",e,this._path,!1),OR("OnDisconnect.setWithPriority",t,!1);const i=new N.BH;return function jK(n,e,t,i,r){const s=ji(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,h)=>{"ok"===c&&Yy(n.onDisconnect_,e,s),jf(0,r,c,h)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Ya("OnDisconnect.update",this._path),aU("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function HK(n,e,t,i){if((0,N.xb)(t))return Zr("onDisconnect().update() called with empty data.  Don't do anything."),void jf(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&Yr(t,(c,h)=>{const p=ji(h);Yy(n.onDisconnect_,ki(e,c),p)}),jf(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Fo{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Jt(this._path)?null:Wk(this._path)}get ref(){return new Xa(this._repo,this._path)}get _queryIdentifier(){const e=SV(this._queryParams),t=Lk(e);return"{}"===t?"default":t}get _queryObject(){return SV(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof Fo))return!1;const t=this._repo===e._repo,i=Kk(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function U6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function gS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Hf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===gu){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Gd)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==pu)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===ai){if(null!=e&&!fE(e)||null!=t&&!fE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof Jk||n.getIndex()===eR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Xa extends Fo{constructor(e,t){super(e,t,new $D,!1)}get parent(){const e=dV(this._path);return null===e?null:new Xa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Xg{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Vn(e),i=Jg(this.ref,e);return new Xg(this._node.getChild(t),i,ai)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Xg(r,Jg(this.ref,i),ai)))}hasChild(e){const t=new Vn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function CU(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?Jg(n._root,e):n._root}function IU(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=jR(e,n._repo.repoInfo_.nodeAdmin);lU("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&fu("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),CU(n,t.path.toString())}function Jg(n,e){return null===Xt((n=(0,N.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mE("child","path",t,!1)):mE("child","path",e,!1),new Xa(n._repo,ki(n._path,e));var t}function HR(n,e){n=(0,N.m9)(n),Ya("set",n._path),mu("set",e,n._path,!1);const t=new N.BH;return FR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function t4(n,e){aU("update",e,n._path,!1);const t=new N.BH;return function VK(n,e,t,i){ev(n,"update",{path:e.toString(),value:t});let r=!0;const s=_E(n),c={};if(Yr(t,(h,p)=>{r=!1,c[h]=iU(ki(e,h),ji(p),n.serverSyncTree_,s)}),r)Zr("update() called with empty data.  Don't do anything."),jf(0,i,"ok",void 0);else{const h=hS(n),p=function cK(n,e,t,i){!function D8(n,e,t,i){(0,N.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=dR(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=li.fromObject(t);return Jy(n,new Qy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,c,h);dS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,I)=>{const D="ok"===y;D||co("update at "+e+" failed: "+y);const x=Bf(n.serverSyncTree_,h,!D),P=x.length>0?tv(n,e):e;Qa(n.eventQueue_,P,x),jf(0,i,y,I)}),Yr(t,y=>{const I=UR(n,ki(e,y));tv(n,I)}),Qa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function n4(n){return function LK(n,e){const t=function gK(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,I)=>{const D=uo(y,t);i=i||Vf(I,D)});let r=n.syncPointTree_.get(t);r?i=i||Vf(r,xn()):(r=new qV,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,c=s?new Ff(i,!0,!1):null;return function Q8(n){return QD(n.viewCache_)}(WV(r,e,XD(n.pendingWriteTree_,e._path),s?c.getNode():zt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(i=>{const r=ji(i).withIndex(e._queryParams.getIndex()),s=uE(n.serverSyncTree_,e._path,r);return NR(n.eventQueue_,e._path,s),Promise.resolve(r)},i=>(ev(n,"get for query "+(0,N.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,N.m9)(n))._repo,n).then(e=>new Xg(e,new Xa(n._repo,n._path),n._queryParams.getIndex()))}class _S{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new vU("value",this,new Xg(e.snapshotNode,new Xa(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bU(this,e,t):null}matches(e){return e instanceof _S&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bU(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const i=Jg(new Xa(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new vU(e.type,this,new Xg(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof yS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function yE(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=t,y=(I,D)=>{LR(n._repo,n,h),p(I,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new wU(t,s||void 0),h="value"===e?new _S(c):new yS(e,c);return function zK(n,e,t){let i;i=".info"===Xt(e._path)?XV(n.infoSyncTree_,e,t):XV(n.serverSyncTree_,e,t),NR(n.eventQueue_,e._path,i)}(n._repo,n,h),()=>LR(n._repo,n,h)}function zR(n,e,t,i){return yE(n,"value",e,t,i)}function TU(n,e,t,i){return yE(n,"child_added",e,t,i)}function DU(n,e,t,i){return yE(n,"child_changed",e,t,i)}function SU(n,e,t,i){return yE(n,"child_moved",e,t,i)}function AU(n,e,t,i){return yE(n,"child_removed",e,t,i)}function MU(n,e,t){let i=null;const r=t?new wU(t):null;"value"===e?i=new _S(r):e&&(i=new yS(e,r)),LR(n._repo,n,i)}class tc{}class xU extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mu("endAt",this._value,e._path,!0);const t=rR(e._queryParams,this._value,this._key);if(mS(t),Hf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class r4 extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mu("endBefore",this._value,e._path,!1);const t=function f8(n,e,t){let i,r;return n.index_===gu?("string"==typeof e&&(e=IV(e)),r=rR(n,e,t)):(i=null==t?Gd:IV(t),r=rR(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(mS(t),Hf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class kU extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mu("startAt",this._value,e._path,!0);const t=iR(e._queryParams,this._value,this._key);if(mS(t),Hf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class a4 extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mu("startAfter",this._value,e._path,!1);const t=function h8(n,e,t){let i;if(n.index_===gu)"string"==typeof e&&(e=CV(e)),i=iR(n,e,t);else{let r;r=null==t?pu:CV(t),i=iR(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(mS(t),Hf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class c4 extends tc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fo(e._repo,e._path,function u8(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class d4 extends tc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fo(e._repo,e._path,function d8(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class f4 extends tc{constructor(e){super(),this._path=e}_apply(e){gS(e,"orderByChild");const t=new Vn(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Jk(t),r=qD(e._queryParams,i);return Hf(r),new Fo(e._repo,e._path,r,!0)}}class g4 extends tc{_apply(e){gS(e,"orderByKey");const t=qD(e._queryParams,gu);return Hf(t),new Fo(e._repo,e._path,t,!0)}}class _4 extends tc{_apply(e){gS(e,"orderByPriority");const t=qD(e._queryParams,ai);return Hf(t),new Fo(e._repo,e._path,t,!0)}}class v4 extends tc{_apply(e){gS(e,"orderByValue");const t=qD(e._queryParams,eR);return Hf(t),new Fo(e._repo,e._path,t,!0)}}class w4 extends tc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(mu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xU(this._value,this._key)._apply(new kU(this._value,this._key)._apply(e))}}function nc(n,...e){let t=(0,N.m9)(n);for(const i of e)t=i._apply(t);return t}(function tK(n){(0,N.hu)(!nS,"__referenceConstructor has already been defined"),nS=n})(Xa),function oK(n){(0,N.hu)(!rS,"__referenceConstructor has already been defined"),rS=n}(Xa);const GR={};function OU(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||fu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=jR(s,r),h=c.repoInfo;"undefined"!=typeof process&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,c=jR(s,r),h=c.repoInfo):p=!c.repoInfo.secure;const I=r&&p?new Y0(Y0.OWNER):new f6(n.name,n.options,e);lU("Invalid Firebase Database URL",c),Jt(c.path)||fu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function D4(n,e,t,i){let r=GR[e.name];r||(r={},GR[e.name]=r);let s=r[n.toURLString()];return s&&fu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new NK(n,false,t,i),r[n.toURLString()]=s,s}(h,n,I,new h6(n.name,t));return new A4(D,n)}class A4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function PK(n,e,t){if(n.stats_=zk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new WD(n.repoInfo_,(i,r,s,c)=>{hU(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fU(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Wg(n.repoInfo_,e,(i,r,s,c)=>{hU(n,i,r,s,c)},i=>{fU(n,i)},i=>{!function FK(n,e){Yr(e,(t,i)=>{PR(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function _6(n,e){const t=n.toString();return Hk[t]||(Hk[t]=e()),Hk[t]}(n.repoInfo_,()=>new v8(n.stats_,n.server_)),n.infoData_=new p8,n.infoSyncTree_=new QV({startListening:(i,r,s,c)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=uE(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),PR(n,"connected",!1),n.serverSyncTree_=new QV({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(h,p)=>{const y=c(h,p);Qa(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xa(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function T4(n,e){const t=GR[e];(!t||t[n.key]!==n)&&fu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),gU(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&fu("Cannot call "+e+" on a deleted database.")}}function R4(n,e){PL(n,e)}const N4={".sv":"timestamp"};class L4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Wg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function O4(n){xL($n.SDK_VERSION),(0,$n._registerComponent)(new fr.wA("database",(e,{instanceIdentifier:t})=>OU(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(AL,"0.12.5",n),(0,$n.registerVersion)(AL,"0.12.5","esm2017")}();const j4=new Rs.Yd("@firebase/database-compat"),NU=function(n){j4.warn("FIREBASE WARNING: "+n)};class G4{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,NU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class $4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class zf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),mE("DataSnapshot.child","path",e,!1),new zf(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new zf(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new fa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class bs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const c=bs.getCancelAndContextArgs_("Query.on",i,r),h=(y,I)=>{t.call(c.context,new zf(this.database,y),I)};h.userCallback=t,h.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return zR(this._delegate,h,p),t;case"child_added":return TU(this._delegate,h,p),t;case"child_removed":return AU(this._delegate,h,p),t;case"child_changed":return DU(this._delegate,h,p),t;case"child_moved":return SU(this._delegate,h,p),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,MU(this._delegate,e,r)}else MU(this._delegate,e)}get(){return n4(this._delegate).then(e=>new zf(this.database,e))}once(e,t,i,r){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const s=bs.getCancelAndContextArgs_("Query.once",i,r),c=new N.BH,h=(y,I)=>{const D=new zf(this.database,y);t&&t.call(s.context,D,I),c.resolve(D)};h.userCallback=t,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(e){case"value":zR(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":TU(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":AU(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":DU(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":SU(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new bs(this.database,nc(this._delegate,function u4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new c4(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new bs(this.database,nc(this._delegate,function h4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new d4(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new bs(this.database,nc(this._delegate,function p4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mE("orderByChild","path",n,!1),new f4(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new bs(this.database,nc(this._delegate,function m4(){return new g4}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new bs(this.database,nc(this._delegate,function y4(){return new _4}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new bs(this.database,nc(this._delegate,function b4(){return new v4}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new bs(this.database,nc(this._delegate,function o4(n=null,e){return gE("startAt","key",e,!0),new kU(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new bs(this.database,nc(this._delegate,function l4(n,e){return gE("startAfter","key",e,!0),new a4(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new bs(this.database,nc(this._delegate,function i4(n,e){return gE("endAt","key",e,!0),new xU(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new bs(this.database,nc(this._delegate,function s4(n,e){return gE("endBefore","key",e,!0),new r4(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new bs(this.database,nc(this._delegate,function E4(n,e){return gE("equalTo","key",e,!0),new w4(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof bs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,N.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,N.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new fa(this.database,new Xa(this._delegate._repo,this._delegate._path))}}class fa extends bs{constructor(e,t){super(e,new Fo(t._repo,t._path,new $D,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new fa(this.database,Jg(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new fa(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new fa(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const i=HR(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,NU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ya("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const i=t4(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function e4(n,e,t){if(Ya("setWithPriority",n._path),mu("setWithPriority",e,n._path,!1),OR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new N.BH;return FR(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function XK(n){return Ya("remove",n._path),HR(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function V4(n,e,t){var i;if(n=(0,N.m9)(n),Ya("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,s=new N.BH,h=zR(n,()=>{});return function $K(n,e,t,i,r,s){ev(n,"transaction on "+e);const c={path:e,update:t,onComplete:i,status:null,order:RL(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=VR(n,e,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{pE("transaction failed: Data returned ",p,c.path),c.status=0;const y=lS(n.transactionQueueTree_,e),I=Qg(y)||[];let D;I.push(c),xR(y,I),"object"==typeof p&&null!==p&&(0,N.r3)(p,".priority")?(D=(0,N.DV)(p,".priority"),(0,N.hu)(fE(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(sS(n.serverSyncTree_,e)||zt.EMPTY_NODE).getPriority().val();const x=_E(n),P=ji(p,D),U=SR(P,h,x);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=U,c.currentWriteId=hS(n);const J=bR(n.serverSyncTree_,e,U,c.currentWriteId,c.applyLocally);Qa(n.eventQueue_,e,J),fS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,I)=>{let D=null;p?s.reject(p):(D=new Xg(I,new Xa(n._repo,n._path),ai),s.resolve(new L4(y,D)))},h,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new $4(s.committed,new zf(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const i=function JK(n,e){n=(0,N.m9)(n),Ya("setPriority",n._path),OR("setPriority",e,!1);const t=new N.BH;return FR(n._repo,ki(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const i=function QK(n,e){n=(0,N.m9)(n),Ya("push",n._path),mu("push",e,n._path,!0);const t=dU(n._repo),i=o8(t),r=Jg(n,i),s=Jg(n,i);let c;return c=null!=e?HR(s,e).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,e),r=i.then(c=>new fa(this.database,c));t&&r.then(()=>t(null),c=>t(c));const s=new fa(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Ya("Reference.onDisconnect",this._delegate._path),new G4(new EU(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,i={}){!function M4(n,e,t,i={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&fu("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&fu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Y0(Y0.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,N.Sg)(i.mockUserToken,n.app.options.projectId);s=new Y0(c)}!function I4(n,e,t,i){n.repoInfo_=new Bk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof fa){const t=IU(this._delegate,e.toString());return new fa(this,t)}{const t=CU(this._delegate,e);return new fa(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const i=IU(this._delegate,e);return new fa(this,i)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function x4(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),gU(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function k4(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function GK(n){n.persistentConnection_&&n.persistentConnection_.resume(uU)}(n._repo)}(this._delegate)}}vE.ServerValue={TIMESTAMP:function P4(){return N4}(),increment:n=>function F4(n){return{".sv":{increment:n}}}(n)};var W4=Object.freeze({__proto__:null,initStandalone:function q4({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){xL(t);const c=new fr.zt("auth-internal",new fr.H0("database-standalone"));return c.setComponent(new fr.wA("auth-internal",()=>i,"PRIVATE")),{instance:new vE(OU(n,c,void 0,e,s),n),namespace:r}}});const K4=vE.ServerValue;function PU(n){return null==n}function FU(n){return"function"==typeof n.set}function LU(n,e){return FU(e)?e:n.ref(e)}function VU(n,e){if(function Y4(n){return"string"==typeof n}(n))return e.stringCase();if(FU(n))return e.firebaseCase();if(function Q4(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function bE(n,e,t="on",i=ks.z){return new An.y(r=>{let s=null;return s=n[t](e,(c,h)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:h})}),"once"===t&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,tt.U)(r=>{const{snapshot:s,prevKey:c}=r;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:c,key:h}}),(0,Da.B)())}function UU(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function eZ(n,e){const{payload:t,prevKey:i,key:r}=e,s=UU(n,r),c=function J4(n,e){if(PU(e))return 0;{const t=UU(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==i&&(n=n.filter(p=>p.payload.key!==t.key)).splice(c,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===r?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function BU(n){return(PU(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function jU(n,e,t){return function X4(n,e,t){return bE(n,"value","once",t).pipe(ar(i=>{const r=[ot(i)];return e.forEach(s=>r.push(bE(n,s,"on",t))),(0,Tg.T)(...r).pipe(Wi(eZ,[]))}),Al())}(n,e=BU(e),t)}function HU(n,e,t){const i=(e=BU(e)).map(r=>bE(n,r,"on",t));return(0,Tg.T)(...i)}function zU(n,e){return function(i,r){return VU(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function rZ(n){return function(t){return t?VU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function GU(n,e){return function(){return bE(n,"value","on",e)}}!function Z4(n){n.INTERNAL.registerComponent(new fr.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new vE(r,i)},"PUBLIC").setServiceProps({Reference:fa,Query:bs,Database:vE,DataSnapshot:zf,enableLogging:R4,INTERNAL:W4,ServerValue:K4}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(Os.Z);const aZ=new d.OlP("angularfire2.realtimeDatabaseURL"),lZ=new d.OlP("angularfire2.database.use-emulator");let cZ=(()=>{class n{constructor(t,i,r,s,c,h,p,y,I,D,x,P,U,J,pe){this.schedulers=h;const $e=p,Qe=(0,Fn.on)(t,c,i);y&&ZM(Qe,c,I,x,P,U,D,J),this.database=(0,Fn.cc)(`${Qe.name}.database.${r}`,"AngularFireDatabase",Qe.name,()=>{const it=c.runOutsideAngular(()=>Qe.database(r||void 0));return $e&&it.useEmulator(...$e),it},[$e])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>LU(this.database,t));let s=r;return i&&(s=i(r)),function sZ(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:zU(i,"update"),set:zU(i,"set"),push:r=>i.push(r),remove:rZ(i),snapshotChanges:r=>jU(n,r,t).pipe(qt.iC),stateChanges:r=>HU(n,r,t).pipe(qt.iC),auditTrail:r=>function tZ(n,e,t){return function iZ(n,e,t){return function nZ(n,e){return bE(n,"value","on",e).pipe((0,tt.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function e6(...n){const e=(0,Fr.jO)(n);return(0,Ii.e)((t,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),h=!1;for(let p=0;p<r;p++)(0,Vr.Xf)(n[p]).subscribe((0,Pn.x)(i,y=>{s[p]=y,!h&&!c[p]&&(c[p]=!0,(h=c.every($s.y))&&(c=null))},Ko.Z));t.subscribe((0,Pn.x)(i,p=>{if(h){const y=[p,...s];i.next(e?e(...y):y)}}))})}(e),(0,tt.U)(([r,s])=>{const c=r.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function t6(n){return(0,Ii.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,Pn.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,tt.U)(r=>r.actions))}(n,HU(n,e).pipe(Wi((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(qt.iC),valueChanges:(r,s)=>jU(n,r,t).pipe((0,tt.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),qt.iC)}}(s,this)}object(t){return function oZ(n,e){return{query:n,snapshotChanges:()=>GU(n,e.schedulers.outsideAngular)().pipe(qt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>GU(n,e.schedulers.outsideAngular)().pipe(qt.iC,(0,tt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>LU(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fn.Dh),d.LFG(Fn.xv,8),d.LFG(aZ,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qt.HU),d.LFG(lZ,8),d.LFG(g0,8),d.LFG(zM,8),d.LFG(GM,8),d.LFG($M,8),d.LFG(qM,8),d.LFG(WM,8),d.LFG(KM,8),d.LFG(p0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uZ=(()=>{class n{constructor(){xT.Z.registerVersion("angularfire",qt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[cZ]}),n})();const $U_firebase={apiKey:"AIzaSyAGn7Cij9a_a6idJAAt9mCgMtUnV3xcX1I",authDomain:"dream4-34466.firebaseapp.com",databaseURL:"https://dream4-34466-default-rtdb.europe-west1.firebasedatabase.app",projectId:"dream4-34466",storageBucket:"dream4-34466.appspot.com",messagingSenderId:"464520261302",appId:"1:464520261302:web:2e9c3935be777f81c68017",measurementId:"G-L36B9FPEDD"},qU=["*"];class ic{constructor(e){this._ngZone=e,this._pending=[],this._listeners=[],this._targetStream=new Ln(void 0)}_clearListeners(){for(const e of this._listeners)e.remove();this._listeners=[]}getLazyEmitter(e){return this._targetStream.pipe(ar(t=>{const i=new An.y(r=>{if(!t)return void this._pending.push({observable:i,observer:r});const s=t.addListener(e,c=>{this._ngZone.run(()=>r.next(c))});return this._listeners.push(s),()=>s.remove()});return i}))}setTarget(e){const t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(i=>i.observable.subscribe(i.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}}const wE={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"};let ho=(()=>{class n{constructor(t,i,r){if(this._elementRef=t,this._ngZone=i,this._eventManager=new ic(this._ngZone),this.height="500px",this.width="500px",this._options=wE,this.mapInitialized=new d.vpe,this.authFailure=new d.vpe,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=Dn(r),this._isBrowser){const s=window;this._existingAuthFailureCallback=s.gm_authFailure,s.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}set center(t){this._center=t}set zoom(t){this._zoom=t}set options(t){this._options=t||wE}ngOnChanges(t){(t.height||t.width)&&this._setSize();const i=this.googleMap;i&&(t.options&&i.setOptions(this._combineOptions()),t.center&&this._center&&i.setCenter(this._center),t.zoom&&null!=this._zoom&&i.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&i.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),this._ngZone.runOutsideAngular(()=>{this.googleMap=new google.maps.Map(this._mapEl,this._combineOptions())}),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap))}ngOnDestroy(){this._eventManager.destroy(),this._isBrowser&&(window.gm_authFailure=this._existingAuthFailureCallback)}fitBounds(t,i){this._assertInitialized(),this.googleMap.fitBounds(t,i)}panBy(t,i){this._assertInitialized(),this.googleMap.panBy(t,i)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,i){this._assertInitialized(),this.googleMap.panToBounds(t,i)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_setSize(){if(this._mapEl){const t=this._mapEl.style;t.height=null===this.height?"":ZU(this.height)||"500px",t.width=null===this.width?"":ZU(this.width)||"500px"}}_combineOptions(){var t,i;const r=this._options||{};return Object.assign(Object.assign({},r),{center:this._center||r.center||wE.center,zoom:null!==(i=null!==(t=this._zoom)&&void 0!==t?t:r.zoom)&&void 0!==i?i:wE.zoom,mapTypeId:this.mapTypeId||r.mapTypeId||wE.mapTypeId})}_assertInitialized(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(d.Lbi))},n.\u0275cmp=d.Xpm({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[d.TTD],ngContentSelectors:qU,decls:2,vars:0,consts:[[1,"map-container"]],template:function(t,i){1&t&&(d.F$t(),d._UZ(0,"div",0),d.Hsn(1))},encapsulation:2,changeDetection:0}),n})();const dZ=/([A-Za-z%]+)$/;function ZU(n){return null==n?"":dZ.test(n)?n:`${n}px`}let qR=(()=>{class n{constructor(t,i,r){this._googleMap=t,this._elementRef=i,this._ngZone=r,this._eventManager=new ic(this._ngZone),this._options=new Ln({}),this._position=new Ln(void 0),this._destroy=new gt.x,this.closeclick=this._eventManager.getLazyEmitter("closeclick"),this.contentChanged=this._eventManager.getLazyEmitter("content_changed"),this.domready=this._eventManager.getLazyEmitter("domready"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}set options(t){this._options.next(t||{})}set position(t){this._position.next(t)}ngOnInit(){this._googleMap._isBrowser&&(this._combineOptions().pipe((0,pi.q)(1)).subscribe(i=>{this._ngZone.runOutsideAngular(()=>{this.infoWindow=new google.maps.InfoWindow(i)}),this._eventManager.setTarget(this.infoWindow)}),this._watchForOptionsChanges(),this._watchForPositionChanges())}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}open(t,i){this._assertInitialized();const r=t?t.getAnchor():void 0;(this.infoWindow.get("anchor")!==r||!r)&&(this._elementRef.nativeElement.style.display="",this.infoWindow.open({map:this._googleMap.googleMap,anchor:r,shouldFocus:i}))}_combineOptions(){return dr([this._options,this._position]).pipe((0,tt.U)(([t,i])=>Object.assign(Object.assign({},t),{position:i||t.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(Dt(this._destroy)).subscribe(t=>{this._assertInitialized(),this.infoWindow.setOptions(t)})}_watchForPositionChanges(){this._position.pipe(Dt(this._destroy)).subscribe(t=>{t&&(this._assertInitialized(),this.infoWindow.setPosition(t))})}_assertInitialized(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ho),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged"},exportAs:["mapInfoWindow"]}),n})();const _Z={position:{lat:37.421995,lng:-122.084092}};let WR=(()=>{class n{constructor(t,i){this._googleMap=t,this._ngZone=i,this._eventManager=new ic(this._ngZone),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}set title(t){this._title=t}set position(t){this._position=t}set label(t){this._label=t}set clickable(t){this._clickable=t}set options(t){this._options=t}set icon(t){this._icon=t}set visible(t){this._visible=t}ngOnInit(){this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(()=>{this.marker=new google.maps.Marker(this._combineOptions())}),this._assertInitialized(),this.marker.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.marker))}ngOnChanges(t){const{marker:i,_title:r,_position:s,_label:c,_clickable:h,_icon:p,_visible:y}=this;i&&(t.options&&i.setOptions(this._combineOptions()),t.title&&void 0!==r&&i.setTitle(r),t.position&&s&&i.setPosition(s),t.label&&void 0!==c&&i.setLabel(c),t.clickable&&void 0!==h&&i.setClickable(h),t.icon&&p&&i.setIcon(p),t.visible&&void 0!==y&&i.setVisible(y))}ngOnDestroy(){this._eventManager.destroy(),this.marker&&this.marker.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_combineOptions(){var t,i;const r=this._options||_Z;return Object.assign(Object.assign({},r),{title:this._title||r.title,position:this._position||r.position,label:this._label||r.label,clickable:null!==(t=this._clickable)&&void 0!==t?t:r.clickable,map:this._googleMap.googleMap,icon:this._icon||r.icon,visible:null!==(i=this._visible)&&void 0!==i?i:r.visible})}_assertInitialized(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ho),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged"},exportAs:["mapMarker"],features:[d.TTD]}),n})(),SZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function AZ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"map-marker",4,5),d.NdJ("mapClick",function(){const s=d.CHM(t).$implicit,c=d.MAs(1);return d.oxw().openInfoWindow(c,s)}),d.qZA()}if(2&n){const t=e.$implicit;d.Q6J("position",t.markerPosition)("options",t.markerOptions)}}let MZ=(()=>{class n{constructor(){this.zoom=12,this.options={zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!1,disableDefaultUI:!0,mapTypeId:"hybrid",maxZoom:15,minZoom:8},this.markers=[],this.infoContent="",this.onResize()}ngOnInit(){navigator.geolocation.getCurrentPosition(t=>{this.center={lat:t.coords.latitude,lng:t.coords.longitude}}),this.markers.push({markerPosition:{lat:50.8380985302848,lng:5.702648882018022},markerOptions:{draggable:!1},info:{imgUrl:"/assets/CarnavalMatskoGif.gif"}})}onResize(t){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}openInfoWindow(t,i){this.infoContent=i.info.imgUrl,this.infoWindow.open(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],viewQuery:function(t,i){if(1&t&&d.Gf(qR,5),2&t){let r;d.iGM(r=d.CRH())&&(i.infoWindow=r.first)}},hostBindings:function(t,i){1&t&&d.NdJ("resize",function(s){return i.onResize(s)},!1,d.Jf7)},decls:5,vars:6,consts:[["width","100%",3,"height","zoom","center","options"],["map",""],[3,"position","options","mapClick",4,"ngFor","ngForOf"],["alt","this slowpoke moves","width","500px",3,"src"],[3,"position","options","mapClick"],["marker","mapMarker"]],template:function(t,i){1&t&&(d.TgZ(0,"google-map",0,1),d.YNc(2,AZ,2,2,"map-marker",2),d.TgZ(3,"map-info-window"),d._UZ(4,"img",3),d.qZA()()),2&t&&(d.s9C("height",i.screenHeight),d.Q6J("zoom",i.zoom)("center",i.center)("options",i.options),d.xp6(2),d.Q6J("ngForOf",i.markers),d.xp6(2),d.s9C("src",i.infoContent,d.LSH))},directives:[ho,Xn,WR,qR],styles:[""]}),n})(),xZ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Df))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,i){if(1&t){const r=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d._uU(4,"Sign In"),d.qZA(),d.TgZ(5,"div",3),d._UZ(6,"input",4,5),d.qZA(),d.TgZ(8,"div",3),d._UZ(9,"input",6,7),d.qZA(),d.TgZ(11,"div",3)(12,"input",8),d.NdJ("click",function(){d.CHM(r);const c=d.MAs(7),h=d.MAs(10);return i.authService.SignIn(c.value,h.value)}),d.qZA()(),d.TgZ(13,"div",3)(14,"span",9)(15,"span",10),d._uU(16,"Or"),d.qZA()()(),d.TgZ(17,"div",3)(18,"button",11),d.NdJ("click",function(){return i.authService.GoogleAuth()}),d._UZ(19,"i",12),d._uU(20," Log in with Google "),d.qZA()(),d.TgZ(21,"div",13)(22,"span",14),d._uU(23,"Forgot Password?"),d.qZA()()(),d.TgZ(24,"div",15)(25,"span"),d._uU(26,"Don't have an account?"),d.TgZ(27,"span",16),d._uU(28," Sign Up"),d.qZA()()()()()}},directives:[Og],styles:[""]}),n})(),kZ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Df))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,i){if(1&t){const r=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d._uU(4,"Sign Up"),d.qZA(),d.TgZ(5,"div",3),d._UZ(6,"input",4,5),d.qZA(),d.TgZ(8,"div",3),d._UZ(9,"input",6,7),d.qZA(),d.TgZ(11,"div",3)(12,"input",8),d.NdJ("click",function(){d.CHM(r);const c=d.MAs(7),h=d.MAs(10);return i.authService.SignUp(c.value,h.value)}),d.qZA()(),d.TgZ(13,"div",3)(14,"span",9)(15,"span",10),d._uU(16,"Or"),d.qZA()()(),d.TgZ(17,"div",3)(18,"button",11),d.NdJ("click",function(){return i.authService.GoogleAuth()}),d._UZ(19,"i",12),d._uU(20," Continue with Google "),d.qZA()()(),d.TgZ(21,"div",13)(22,"span"),d._uU(23,"Already have an account? "),d.TgZ(24,"span",14),d._uU(25,"Log In"),d.qZA()()()()()}},directives:[Og],styles:[""]}),n})();function RZ(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"div",15)(2,"div",16),d._UZ(3,"img",17),d.TgZ(4,"div",18)(5,"h1"),d._uU(6,"Hello: "),d.TgZ(7,"strong"),d._uU(8),d.qZA()(),d.TgZ(9,"p"),d._uU(10,"User ID: "),d.TgZ(11,"strong"),d._uU(12),d.qZA()(),d.TgZ(13,"p"),d._uU(14,"Email: "),d.TgZ(15,"strong"),d._uU(16),d.qZA()(),d.TgZ(17,"p"),d._uU(18,"Email Verified: "),d.TgZ(19,"strong"),d._uU(20),d.qZA()()()()()()),2&n){const t=e.ngIf;d.xp6(3),d.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",d.LSH),d.s9C("alt",t.displayName),d.xp6(5),d.Oqu(t.displayName?t.displayName:"Andy"),d.xp6(4),d.Oqu(t.uid),d.xp6(4),d.Oqu(t.email),d.xp6(4),d.Oqu(t.emailVerified)}}let OZ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Df))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dashboard"]],decls:19,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,i){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),d._UZ(7,"i",7),d._uU(8,"User Profile "),d.qZA()(),d.TgZ(9,"li",5)(10,"a",8),d.NdJ("click",function(){return i.authService.SignOut()}),d._UZ(11,"i",9),d._uU(12,"Log out "),d.qZA()()()()(),d.TgZ(13,"main",10)(14,"div",11)(15,"div",12)(16,"h1",13),d._uU(17,"User Profile"),d.qZA()(),d.YNc(18,RZ,21,6,"div",14),d.qZA()()()()),2&t&&(d.xp6(18),d.Q6J("ngIf",i.authService.userData))},directives:[zn],styles:[""]}),n})(),NZ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Df))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,i){if(1&t){const r=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d._uU(4,"Reset Password"),d.qZA(),d.TgZ(5,"p",3),d._uU(6," Please enter your email address to request a password reset. "),d.qZA(),d.TgZ(7,"div",4),d._UZ(8,"input",5,6),d.qZA(),d.TgZ(10,"div",4)(11,"input",7),d.NdJ("click",function(){d.CHM(r);const c=d.MAs(9);return i.authService.ForgotPassword(c.value)}),d.qZA()()(),d.TgZ(12,"div",8)(13,"span"),d._uU(14,"Go back to ? "),d.TgZ(15,"span",9),d._uU(16,"Log In"),d.qZA()()()()()}},directives:[Og],styles:[""]}),n})();function PZ(n,e){if(1&n&&(d.TgZ(0,"div",4)(1,"p",9),d._uU(2," We have sent a confirmation email to "),d.TgZ(3,"strong"),d._uU(4),d.qZA(),d._uU(5,". "),d.qZA(),d.TgZ(6,"p",9),d._uU(7," Please check your email and click on the link to verfiy your email address. "),d.qZA()()),2&n){const t=e.ngIf;d.xp6(4),d.Oqu(t.email)}}const FZ=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"header",component:(()=>{class n{constructor(t){this.breakpointObserver=t,this.isHandset$=this.breakpointObserver.observe(Tc_Handset).pipe((0,tt.U)(i=>i.matches),Mo())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-header"]],decls:2,vars:0,template:function(t,i){1&t&&(d.TgZ(0,"p"),d._uU(1,"dit is een test voor de content"),d.qZA())},styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}"]}),n})()},{path:"home",component:MZ},{path:"sign-in",component:xZ},{path:"register-user",component:kZ},{path:"dashboard",component:OZ,canActivate:[(()=>{class n{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Df),d.LFG(so))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:NZ},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Df))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,i){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d._uU(4,"Thank You for Registering"),d.qZA(),d.YNc(5,PZ,8,1,"div",3),d.TgZ(6,"div",4)(7,"button",5),d.NdJ("click",function(){return i.authService.SendVerificationMail()}),d._UZ(8,"i",6),d._uU(9," Resend Verification Email "),d.qZA()()(),d.TgZ(10,"div",7)(11,"span"),d._uU(12,"Go back to?"),d.TgZ(13,"span",8),d._uU(14," Sign in"),d.qZA()()()()()),2&t&&(d.xp6(5),d.Q6J("ngIf",i.authService.userData))},directives:[zn,Og],styles:[""]}),n})()}];let LZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[$N.forRoot(FZ)],$N]}),n})(),VZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[uq]}),n.\u0275inj=d.cJS({providers:[Df],imports:[[wa,Fn.hO.initializeApp($U_firebase),fB,wB,JW,uZ,SZ,LZ,LG,rp,h$,V3,o$,aq,k3]]}),n})();(0,d.G48)(),_c().bootstrapModule(VZ).catch(n=>console.error(n))},5867:(ut,Ae,F)=>{"use strict";F.d(Ae,{Mq:()=>d.getApp,C6:()=>d.getApps});var d=F(9681);(0,d.registerVersion)("firebase","9.6.7","app")},127:(ut,Ae,F)=>{"use strict";F.d(Ae,{Z:()=>d.Z});var d=F(3942);d.Z.registerVersion("firebase","9.6.7","app-compat")},5881:(ut,Ae,F)=>{"use strict";F.r(Ae);var d=F(5861),j=F(3942),O=F(4929),ce=F(2090),se=(F(9681),F(1877),F(4859));function ue(){return window}function z(){return(z=(0,d.Z)(function*(ae,Z,W){var Se;const{BuildInfo:qe}=ue();(0,O.ap)(Z.sessionId,"AuthEvent did not contain a session ID");const dt=yield de(Z.sessionId),xt={};return(0,O.aq)()?xt.ibi=qe.packageName:(0,O.ar)()?xt.apn=qe.packageName:(0,O.as)(ae,"operation-not-supported-in-this-environment"),qe.displayName&&(xt.appDisplayName=qe.displayName),xt.sessionId=dt,(0,O.at)(ae,W,Z.type,void 0,null!==(Se=Z.eventId)&&void 0!==Se?Se:void 0,xt)})).apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(ae){const{BuildInfo:Z}=ue(),W={};(0,O.aq)()?W.iosBundleId=Z.packageName:(0,O.ar)()?W.androidPackageName=Z.packageName:(0,O.as)(ae,"operation-not-supported-in-this-environment"),yield(0,O.au)(ae,W)})).apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(ae,Z,W){const{cordova:Se}=ue();let qe=()=>{};try{yield new Promise((dt,xt)=>{let Gt=null;function Lt(){var Vt;dt();const ir=null===(Vt=Se.plugins.browsertab)||void 0===Vt?void 0:Vt.close;"function"==typeof ir&&ir(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Yn(){Gt||(Gt=window.setTimeout(()=>{xt((0,O.av)(ae,"redirect-cancelled-by-user"))},2e3))}function yr(){"visible"===(null==document?void 0:document.visibilityState)&&Yn()}Z.addPassiveListener(Lt),document.addEventListener("resume",Yn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",yr,!1),qe=()=>{Z.removePassiveListener(Lt),document.removeEventListener("resume",Yn,!1),document.removeEventListener("visibilitychange",yr,!1),Gt&&window.clearTimeout(Gt)}})}finally{qe()}})).apply(this,arguments)}function de(ae){return Re.apply(this,arguments)}function Re(){return(Re=(0,d.Z)(function*(ae){const Z=Oe(ae),W=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(W)).map(qe=>qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Oe(ae){if((0,O.ap)(/[0-9a-zA-Z]+/.test(ae),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ae);const Z=new ArrayBuffer(ae.length),W=new Uint8Array(Z);for(let Se=0;Se<ae.length;Se++)W[Se]=ae.charCodeAt(Se);return W}class De extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,d.Z)(function*(){yield Z.initPromise})()}}function ie(ae){return Je.apply(this,arguments)}function Je(){return(Je=(0,d.Z)(function*(ae){const Z=yield ge()._get(be(ae));return Z&&(yield ge()._remove(be(ae))),Z})).apply(this,arguments)}function me(){const ae=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const Se=Math.floor(Math.random()*Z.length);ae.push(Z.charAt(Se))}return ae.join("")}function ge(){return(0,O.ax)(O.b)}function be(ae){return(0,O.ay)("authEvent",ae.config.apiKey,ae.name)}function Ct(ae){if(!(null==ae?void 0:ae.includes("?")))return{};const[Z,...W]=ae.split("?");return(0,ce.zd)(W.join("?"))}function lt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function Zt(){var ae;return(null===(ae=null==self?void 0:self.location)||void 0===ae?void 0:ae.protocol)||null}function On(ae=(0,ce.z$)()){return!("file:"!==Zt()&&"ionic:"!==Zt()||!ae.toLowerCase().match(/iphone|ipad|ipod|android/))}function Or(){try{const ae=self.localStorage,Z=O.aG();if(ae)return ae.setItem(Z,"1"),ae.removeItem(Z),!function ws(ae=(0,ce.z$)()){return function ci(){return(0,ce.w1)()&&11===(null==document?void 0:document.documentMode)}()||function zi(ae=(0,ce.z$)()){return/Edge\/\d+/.test(ae)}(ae)}()||(0,ce.hl)()}catch(ae){return Jr()&&(0,ce.hl)()}return!1}function Jr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zn(){return(function dn(){return"http:"===Zt()||"https:"===Zt()}()||(0,ce.ru)()||On())&&!function Xr(){return(0,ce.b$)()||(0,ce.UG)()}()&&Or()&&!Jr()}function Es(){return On()&&"undefined"!=typeof document}function nr(){return(nr=(0,d.Z)(function*(){return!!Es()&&new Promise(ae=>{const Z=setTimeout(()=>{ae(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),ae(!0)})})})).apply(this,arguments)}const tn={LOCAL:"local",NONE:"none",SESSION:"session"},Gi=O.aw,_t="persistence";function At(ae){return un.apply(this,arguments)}function un(){return(un=(0,d.Z)(function*(ae){yield ae._initializationPromise;const Z=Mt(),W=O.ay(_t,ae.config.apiKey,ae.name);Z&&Z.setItem(W,ae._getPersistence())})).apply(this,arguments)}function Mt(){var ae;try{return(null===(ae=function jn(){return"undefined"!=typeof window?window:null}())||void 0===ae?void 0:ae.sessionStorage)||null}catch(Z){return null}}const ct=O.aw;class et{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class Hn{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(Z){var W=this;return(0,d.Z)(function*(){const Se=Z._key();let qe=W.eventManagers.get(Se);return qe||(qe=new De(Z),W.eventManagers.set(Se,qe),W.attachCallbackListeners(Z,qe)),qe})()}_openPopup(Z){(0,O.as)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,W,Se,qe){var dt=this;return(0,d.Z)(function*(){!function Y(ae){var Z,W,Se,qe,dt,xt,Gt,Lt,Yn,yr;const Vt=ue();(0,O.aw)("function"==typeof(null===(Z=null==Vt?void 0:Vt.universalLinks)||void 0===Z?void 0:Z.subscribe),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(W=null==Vt?void 0:Vt.BuildInfo)||void 0===W?void 0:W.packageName),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(dt=null===(qe=null===(Se=null==Vt?void 0:Vt.cordova)||void 0===Se?void 0:Se.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===dt?void 0:dt.openUrl),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Lt=null===(Gt=null===(xt=null==Vt?void 0:Vt.cordova)||void 0===xt?void 0:xt.plugins)||void 0===Gt?void 0:Gt.browsertab)||void 0===Lt?void 0:Lt.isAvailable),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(yr=null===(Yn=null==Vt?void 0:Vt.cordova)||void 0===Yn?void 0:Yn.InAppBrowser)||void 0===yr?void 0:yr.open),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const xt=yield dt._initialize(Z);yield xt.initialized(),xt.resetRedirect(),(0,O.aB)(),yield dt._originValidation(Z);const Gt=function Ee(ae,Z,W=null){return{type:Z,eventId:W,urlResponse:null,sessionId:me(),postBody:null,tenantId:ae.tenantId,error:(0,O.av)(ae,"no-auth-event")}}(Z,Se,qe);yield function Ke(ae,Z){return ge()._set(be(ae),Z)}(Z,Gt);const Lt=yield function $(ae,Z,W){return z.apply(this,arguments)}(Z,Gt,W),Yn=yield function xe(ae){const{cordova:Z}=ue();return new Promise(W=>{Z.plugins.browsertab.isAvailable(Se=>{let qe=null;Se?Z.plugins.browsertab.openUrl(ae):qe=Z.InAppBrowser.open(ae,(0,O.ao)()?"_blank":"_system","location=yes"),W(qe)})})}(Lt);return function Fe(ae,Z,W){return He.apply(this,arguments)}(Z,xt,Yn)})()}_isIframeWebStorageSupported(Z,W){throw new Error("Method not implemented.")}_originValidation(Z){const W=Z._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function ne(ae){return Ge.apply(this,arguments)}(Z)),this.originValidationPromises[W]}attachCallbackListeners(Z,W){const{universalLinks:Se,handleOpenURL:qe,BuildInfo:dt}=ue(),xt=setTimeout((0,d.Z)(function*(){yield ie(Z),W.onEvent(lt())}),500),Gt=function(){var yr=(0,d.Z)(function*(Vt){clearTimeout(xt);const ir=yield ie(Z);let Cs=null;ir&&(null==Vt?void 0:Vt.url)&&(Cs=function X(ae,Z){var W,Se;const qe=function he(ae){const Z=Ct(ae),W=Z.link?decodeURIComponent(Z.link):void 0,Se=Ct(W).link,qe=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return Ct(qe).link||qe||Se||W||ae}(Z);if(qe.includes("/__/auth/callback")){const dt=Ct(qe),xt=dt.firebaseError?function Ue(ae){try{return JSON.parse(ae)}catch(Z){return null}}(decodeURIComponent(dt.firebaseError)):null,Gt=null===(Se=null===(W=null==xt?void 0:xt.code)||void 0===W?void 0:W.split("auth/"))||void 0===Se?void 0:Se[1],Lt=Gt?(0,O.av)(Gt):null;return Lt?{type:ae.type,eventId:ae.eventId,tenantId:ae.tenantId,error:Lt,urlResponse:null,sessionId:null,postBody:null}:{type:ae.type,eventId:ae.eventId,tenantId:ae.tenantId,sessionId:ae.sessionId,urlResponse:qe,postBody:null}}return null}(ir,Vt.url)),W.onEvent(Cs||lt())});return function(ir){return yr.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,Gt);const Lt=qe,Yn=`${dt.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var yr=(0,d.Z)(function*(Vt){if(Vt.toLowerCase().startsWith(Yn)&&Gt({url:Vt}),"function"==typeof Lt)try{Lt(Vt)}catch(ir){console.error(ir)}});return function(Vt){return yr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(Z){var W=this;return(0,d.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,W,Se,qe){var dt=this;return(0,d.Z)(function*(){return yield dt.selectUnderlyingResolver(),dt.assertedUnderlyingResolver._openPopup(Z,W,Se,qe)})()}_openRedirect(Z,W,Se,qe){var dt=this;return(0,d.Z)(function*(){return yield dt.selectUnderlyingResolver(),dt.assertedUnderlyingResolver._openRedirect(Z,W,Se,qe)})()}_isIframeWebStorageSupported(Z,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,W)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Es()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ct(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,d.Z)(function*(){if(Z.underlyingResolver)return;const W=yield function vt(){return nr.apply(this,arguments)}();Z.underlyingResolver=W?Z.cordovaResolver:Z.browserResolver})()}}function go(ae){return ae.unwrap()}function $t(ae){return ui(ae)}function ui(ae){const{_tokenResponse:Z}=ae instanceof ce.ZR?ae.customData:ae;if(!Z)return null;if(!(ae instanceof ce.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return O.P.credentialFromResult(ae);const W=Z.providerId;if(!W||W===O.o.PASSWORD)return null;let Se;switch(W){case O.o.GOOGLE:Se=O.N;break;case O.o.FACEBOOK:Se=O.M;break;case O.o.GITHUB:Se=O.Q;break;case O.o.TWITTER:Se=O.V;break;default:const{oauthIdToken:qe,oauthAccessToken:dt,oauthTokenSecret:xt,pendingToken:Gt,nonce:Lt}=Z;return dt||xt||qe||Gt?Gt?W.startsWith("saml.")?O.aJ._create(W,Gt):O.I._fromParams({providerId:W,signInMethod:W,pendingToken:Gt,idToken:qe,accessToken:dt}):new O.T(W).credential({idToken:qe,accessToken:dt,rawNonce:Lt}):null}return ae instanceof ce.ZR?Se.credentialFromError(ae):Se.credentialFromResult(ae)}function kn(ae,Z){return Z.catch(W=>{throw W instanceof ce.ZR&&function mo(ae,Z){var W;const Se=null===(W=Z.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===Z.code)Z.resolver=new K(ae,O.am(ae,Z));else if(Se){const qe=ui(Z),dt=Z;qe&&(dt.credential=qe,dt.tenantId=Se.tenantId||void 0,dt.email=Se.email||void 0,dt.phoneNumber=Se.phoneNumber||void 0)}}(ae,W),W}).then(W=>{const qe=W.user;return{operationType:W.operationType,credential:$t(W),additionalUserInfo:O.ak(W),user:Ie.getOrCreate(qe)}})}function H(ae,Z){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(ae,Z){const W=yield Z;return{verificationId:W.verificationId,confirm:Se=>kn(ae,W.confirm(Se))}})).apply(this,arguments)}class K{constructor(Z,W){this.resolver=W,this.auth=function Us(ae){return ae.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return kn(go(this.auth),this.resolver.resolveSignIn(Z))}}class Ie{constructor(Z){this._delegate=Z,this.multiFactor=O.an(Z)}static getOrCreate(Z){return Ie.USER_MAP.has(Z)||Ie.USER_MAP.set(Z,new Ie(Z)),Ie.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var W=this;return(0,d.Z)(function*(){return kn(W.auth,O.Y(W._delegate,Z))})()}linkWithPhoneNumber(Z,W){var Se=this;return(0,d.Z)(function*(){return H(Se.auth,O.l(Se._delegate,Z,W))})()}linkWithPopup(Z){var W=this;return(0,d.Z)(function*(){return kn(W.auth,O.d(W._delegate,Z,et))})()}linkWithRedirect(Z){var W=this;return(0,d.Z)(function*(){return yield At(O.aC(W.auth)),O.g(W._delegate,Z,et)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var W=this;return(0,d.Z)(function*(){return kn(W.auth,O.Z(W._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,W){return H(this.auth,O.r(this._delegate,Z,W))}reauthenticateWithPopup(Z){return kn(this.auth,O.e(this._delegate,Z,et))}reauthenticateWithRedirect(Z){var W=this;return(0,d.Z)(function*(){return yield At(O.aC(W.auth)),O.h(W._delegate,Z,et)})()}sendEmailVerification(Z){return O.aa(this._delegate,Z)}unlink(Z){var W=this;return(0,d.Z)(function*(){return yield O.aj(W._delegate,Z),W})()}updateEmail(Z){return O.af(this._delegate,Z)}updatePassword(Z){return O.ag(this._delegate,Z)}updatePhoneNumber(Z){return O.u(this._delegate,Z)}updateProfile(Z){return O.ae(this._delegate,Z)}verifyBeforeUpdateEmail(Z,W){return O.ab(this._delegate,Z,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ie.USER_MAP=new WeakMap;const re=O.aw;let Ze=(()=>{class ae{constructor(W,Se){if(this.app=W,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qe}=W.options;re(qe,"invalid-api-key",{appName:W.name}),re(qe,"invalid-api-key",{appName:W.name});const dt="undefined"!=typeof window?et:void 0;this._delegate=Se.initialize({options:{persistence:nn(qe,W.name),popupRedirectResolver:dt}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ie.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Se){O.E(this._delegate,W,Se)}applyActionCode(W){return O.a1(this._delegate,W)}checkActionCode(W){return O.a2(this._delegate,W)}confirmPasswordReset(W,Se){return O.a0(this._delegate,W,Se)}createUserWithEmailAndPassword(W,Se){var qe=this;return(0,d.Z)(function*(){return kn(qe._delegate,O.a4(qe._delegate,W,Se))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return O.a9(this._delegate,W)}isSignInWithEmailLink(W){return O.a7(this._delegate,W)}getRedirectResult(){var W=this;return(0,d.Z)(function*(){re(Zn(),W._delegate,"operation-not-supported-in-this-environment");const Se=yield O.j(W._delegate,et);return Se?kn(W._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function vi(ae,Z){(0,O.aC)(ae)._logFramework(Z)}(this._delegate,W)}onAuthStateChanged(W,Se,qe){const{next:dt,error:xt,complete:Gt}=yt(W,Se,qe);return this._delegate.onAuthStateChanged(dt,xt,Gt)}onIdTokenChanged(W,Se,qe){const{next:dt,error:xt,complete:Gt}=yt(W,Se,qe);return this._delegate.onIdTokenChanged(dt,xt,Gt)}sendSignInLinkToEmail(W,Se){return O.a6(this._delegate,W,Se)}sendPasswordResetEmail(W,Se){return O.$(this._delegate,W,Se||void 0)}setPersistence(W){var Se=this;return(0,d.Z)(function*(){let qe;switch(function ft(ae,Z){Gi(Object.values(tn).includes(Z),ae,"invalid-persistence-type"),(0,ce.b$)()?Gi(Z!==tn.SESSION,ae,"unsupported-persistence-type"):(0,ce.UG)()?Gi(Z===tn.NONE,ae,"unsupported-persistence-type"):Jr()?Gi(Z===tn.NONE||Z===tn.LOCAL&&(0,ce.hl)(),ae,"unsupported-persistence-type"):Gi(Z===tn.NONE||Or(),ae,"unsupported-persistence-type")}(Se._delegate,W),W){case tn.SESSION:qe=O.a;break;case tn.LOCAL:qe=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case tn.NONE:qe=O.K;break;default:return O.as("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(qe)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return kn(this._delegate,O.W(this._delegate))}signInWithCredential(W){return kn(this._delegate,O.X(this._delegate,W))}signInWithCustomToken(W){return kn(this._delegate,O._(this._delegate,W))}signInWithEmailAndPassword(W,Se){return kn(this._delegate,O.a5(this._delegate,W,Se))}signInWithEmailLink(W,Se){return kn(this._delegate,O.a8(this._delegate,W,Se))}signInWithPhoneNumber(W,Se){return H(this._delegate,O.s(this._delegate,W,Se))}signInWithPopup(W){var Se=this;return(0,d.Z)(function*(){return re(Zn(),Se._delegate,"operation-not-supported-in-this-environment"),kn(Se._delegate,O.c(Se._delegate,W,et))})()}signInWithRedirect(W){var Se=this;return(0,d.Z)(function*(){return re(Zn(),Se._delegate,"operation-not-supported-in-this-environment"),yield At(Se._delegate),O.f(Se._delegate,W,et)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return O.a3(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ae.Persistence=tn,ae})();function yt(ae,Z,W){let Se=ae;"function"!=typeof ae&&({next:Se,error:Z,complete:W}=ae);const qe=Se;return{next:xt=>qe(xt&&Ie.getOrCreate(xt)),error:Z,complete:W}}function nn(ae,Z){const W=function bi(ae,Z){const W=Mt();if(!W)return[];const Se=O.ay(_t,ae,Z);switch(W.getItem(Se)){case tn.NONE:return[O.K];case tn.LOCAL:return[O.i,O.a];case tn.SESSION:return[O.a];default:return[]}}(ae,Z);if("undefined"!=typeof self&&!W.includes(O.i)&&W.push(O.i),"undefined"!=typeof window)for(const Se of[O.b,O.a])W.includes(Se)||W.push(Se);return W.includes(O.K)||W.push(O.K),W}class _n{constructor(){this.providerId="phone",this._delegate=new O.P(go(j.Z.auth()))}static credential(Z,W){return O.P.credential(Z,W)}verifyPhoneNumber(Z,W){return this._delegate.verifyPhoneNumber(Z,W)}unwrap(){return this._delegate}}_n.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,_n.PROVIDER_ID=O.P.PROVIDER_ID;const di=O.aw;class wi{constructor(Z,W,Se=j.Z.app()){var qe;di(null===(qe=Se.options)||void 0===qe?void 0:qe.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new O.R(Z,W,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hi(ae){ae.INTERNAL.registerComponent(new se.wA("auth-compat",Z=>{const W=Z.getProvider("app-compat").getImmediate(),Se=Z.getProvider("auth");return new Ze(W,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:_n,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:wi,TwitterAuthProvider:O.V,Auth:Ze,AuthCredential:O.G,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ae.registerVersion("@firebase/auth-compat","0.2.9")}(j.Z)},2940:function(ut,Ae){!function(F){"use strict";function d(Y){return Array.prototype.slice.call(Y)}function j(Y){return new Promise(function(de,Re){Y.onsuccess=function(){de(Y.result)},Y.onerror=function(){Re(Y.error)}})}function O(Y,de,Re){var Oe,fe=new Promise(function(De,Ee){j(Oe=Y[de].apply(Y,Re)).then(De,Ee)});return fe.request=Oe,fe}function ce(Y,de,Re){var Oe=O(Y,de,Re);return Oe.then(function(fe){if(fe)return new $(fe,Oe.request)})}function oe(Y,de,Re){Re.forEach(function(Oe){Object.defineProperty(Y.prototype,Oe,{get:function(){return this[de][Oe]},set:function(fe){this[de][Oe]=fe}})})}function ye(Y,de,Re,Oe){Oe.forEach(function(fe){fe in Re.prototype&&(Y.prototype[fe]=function(){return O(this[de],fe,arguments)})})}function se(Y,de,Re,Oe){Oe.forEach(function(fe){fe in Re.prototype&&(Y.prototype[fe]=function(){return this[de][fe].apply(this[de],arguments)})})}function ue(Y,de,Re,Oe){Oe.forEach(function(fe){fe in Re.prototype&&(Y.prototype[fe]=function(){return ce(this[de],fe,arguments)})})}function ve(Y){this._index=Y}function $(Y,de){this._cursor=Y,this._request=de}function z(Y){this._store=Y}function ne(Y){this._tx=Y,this.complete=new Promise(function(de,Re){Y.oncomplete=function(){de()},Y.onerror=function(){Re(Y.error)},Y.onabort=function(){Re(Y.error)}})}function Ge(Y,de,Re){this._db=Y,this.oldVersion=de,this.transaction=new ne(Re)}function xe(Y){this._db=Y}oe(ve,"_index",["name","keyPath","multiEntry","unique"]),ye(ve,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(ve,"_index",IDBIndex,["openCursor","openKeyCursor"]),oe($,"_cursor",["direction","key","primaryKey","value"]),ye($,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Y){Y in IDBCursor.prototype&&($.prototype[Y]=function(){var de=this,Re=arguments;return Promise.resolve().then(function(){return de._cursor[Y].apply(de._cursor,Re),j(de._request).then(function(Oe){if(Oe)return new $(Oe,de._request)})})})}),z.prototype.createIndex=function(){return new ve(this._store.createIndex.apply(this._store,arguments))},z.prototype.index=function(){return new ve(this._store.index.apply(this._store,arguments))},oe(z,"_store",["name","keyPath","indexNames","autoIncrement"]),ye(z,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue(z,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),se(z,"_store",IDBObjectStore,["deleteIndex"]),ne.prototype.objectStore=function(){return new z(this._tx.objectStore.apply(this._tx,arguments))},oe(ne,"_tx",["objectStoreNames","mode"]),se(ne,"_tx",IDBTransaction,["abort"]),Ge.prototype.createObjectStore=function(){return new z(this._db.createObjectStore.apply(this._db,arguments))},oe(Ge,"_db",["name","version","objectStoreNames"]),se(Ge,"_db",IDBDatabase,["deleteObjectStore","close"]),xe.prototype.transaction=function(){return new ne(this._db.transaction.apply(this._db,arguments))},oe(xe,"_db",["name","version","objectStoreNames"]),se(xe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Y){[z,ve].forEach(function(de){Y in de.prototype&&(de.prototype[Y.replace("open","iterate")]=function(){var Re=d(arguments),Oe=Re[Re.length-1],fe=this._store||this._index,De=fe[Y].apply(fe,Re.slice(0,-1));De.onsuccess=function(){Oe(De.result)}})})}),[ve,z].forEach(function(Y){Y.prototype.getAll||(Y.prototype.getAll=function(de,Re){var Oe=this,fe=[];return new Promise(function(De){Oe.iterateCursor(de,function(Ee){Ee?(fe.push(Ee.value),void 0===Re||fe.length!=Re?Ee.continue():De(fe)):De(fe)})})})}),F.openDb=function Fe(Y,de,Re){var Oe=O(indexedDB,"open",[Y,de]),fe=Oe.request;return fe&&(fe.onupgradeneeded=function(De){Re&&Re(new Ge(fe.result,De.oldVersion,fe.transaction))}),Oe.then(function(De){return new xe(De)})},F.deleteDb=function He(Y){return O(indexedDB,"deleteDatabase",[Y])},Object.defineProperty(F,"__esModule",{value:!0})}(Ae)},8306:(ut,Ae,F)=>{"use strict";F.d(Ae,{y:()=>$});var d=F(930),j=F(727),O=F(8822),ce=F(4671);var se=F(2416),ue=F(576),ve=F(2806);let $=(()=>{class xe{constructor(He){He&&(this._subscribe=He)}lift(He){const Y=new xe;return Y.source=this,Y.operator=He,Y}subscribe(He,Y,de){const Re=function Ge(xe){return xe&&xe instanceof d.Lv||function ne(xe){return xe&&(0,ue.m)(xe.next)&&(0,ue.m)(xe.error)&&(0,ue.m)(xe.complete)}(xe)&&(0,j.Nn)(xe)}(He)?He:new d.Hp(He,Y,de);return(0,ve.x)(()=>{const{operator:Oe,source:fe}=this;Re.add(Oe?Oe.call(Re,fe):fe?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(He){try{return this._subscribe(He)}catch(Y){He.error(Y)}}forEach(He,Y){return new(Y=z(Y))((de,Re)=>{const Oe=new d.Hp({next:fe=>{try{He(fe)}catch(De){Re(De),Oe.unsubscribe()}},error:Re,complete:de});this.subscribe(Oe)})}_subscribe(He){var Y;return null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(He)}[O.L](){return this}pipe(...He){return function ye(xe){return 0===xe.length?ce.y:1===xe.length?xe[0]:function(He){return xe.reduce((Y,de)=>de(Y),He)}}(He)(this)}toPromise(He){return new(He=z(He))((Y,de)=>{let Re;this.subscribe(Oe=>Re=Oe,Oe=>de(Oe),()=>Y(Re))})}}return xe.create=Fe=>new xe(Fe),xe})();function z(xe){var Fe;return null!==(Fe=null!=xe?xe:se.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(ut,Ae,F)=>{"use strict";F.d(Ae,{x:()=>se});var d=F(8306),j=F(727);const ce=(0,F(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=F(8737),ye=F(2806);let se=(()=>{class ve extends d.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ne=new ue(this,this);return ne.operator=z,ne}_throwIfClosed(){if(this.closed)throw new ce}next(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ne=this.observers.slice();for(const Ge of ne)Ge.next(z)}})}error(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ne}=this;for(;ne.length;)ne.shift().error(z)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ne,isStopped:Ge,observers:xe}=this;return ne||Ge?j.Lc:(xe.push(z),new j.w0(()=>(0,oe.P)(xe,z)))}_checkFinalizedStatuses(z){const{hasError:ne,thrownError:Ge,isStopped:xe}=this;ne?z.error(Ge):xe&&z.complete()}asObservable(){const z=new d.y;return z.source=this,z}}return ve.create=($,z)=>new ue($,z),ve})();class ue extends se{constructor($,z){super(),this.destination=$,this.source=z}next($){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ne||ne.call(z,$)}error($){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ne||ne.call(z,$)}complete(){var $,z;null===(z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===z||z.call($)}_subscribe($){var z,ne;return null!==(ne=null===(z=this.source)||void 0===z?void 0:z.subscribe($))&&void 0!==ne?ne:j.Lc}}},930:(ut,Ae,F)=>{"use strict";F.d(Ae,{Hp:()=>He,Lv:()=>ne});var d=F(576),j=F(727),O=F(2416),ce=F(7849),oe=F(5032);const ye=ve("C",void 0,void 0);function ve(fe,De,Ee){return{kind:fe,value:De,error:Ee}}var $=F(3410),z=F(2806);class ne extends j.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,j.Nn)(De)&&De.add(this)):this.destination=Oe}static create(De,Ee,Ke){return new He(De,Ee,Ke)}next(De){this.isStopped?Re(function ue(fe){return ve("N",fe,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Re(function se(fe){return ve("E",void 0,fe)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Re(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function xe(fe,De){return Ge.call(fe,De)}class Fe{constructor(De){this.partialObserver=De}next(De){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(De)}catch(Ke){Y(Ke)}}error(De){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(De)}catch(Ke){Y(Ke)}else Y(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(Ee){Y(Ee)}}}class He extends ne{constructor(De,Ee,Ke){let ie;if(super(),(0,d.m)(De)||!De)ie={next:null!=De?De:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ke?Ke:void 0};else{let Je;this&&O.v.useDeprecatedNextContext?(Je=Object.create(De),Je.unsubscribe=()=>this.unsubscribe(),ie={next:De.next&&xe(De.next,Je),error:De.error&&xe(De.error,Je),complete:De.complete&&xe(De.complete,Je)}):ie=De}this.destination=new Fe(ie)}}function Y(fe){O.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(fe):(0,ce.h)(fe)}function Re(fe,De){const{onStoppedNotification:Ee}=O.v;Ee&&$.z.setTimeout(()=>Ee(fe,De))}const Oe={closed:!0,next:oe.Z,error:function de(fe){throw fe},complete:oe.Z}},727:(ut,Ae,F)=>{"use strict";F.d(Ae,{Lc:()=>ye,w0:()=>oe,Nn:()=>se});var d=F(576);const O=(0,F(3888).d)(ve=>function(z){ve(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ne,Ge)=>`${Ge+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ce=F(8737);class oe{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const xe of z)xe.remove(this);else z.remove(this);const{initialTeardown:ne}=this;if((0,d.m)(ne))try{ne()}catch(xe){$=xe instanceof O?xe.errors:[xe]}const{_teardowns:Ge}=this;if(Ge){this._teardowns=null;for(const xe of Ge)try{ue(xe)}catch(Fe){$=null!=$?$:[],Fe instanceof O?$=[...$,...Fe.errors]:$.push(Fe)}}if($)throw new O($)}}add($){var z;if($&&$!==this)if(this.closed)ue($);else{if($ instanceof oe){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._teardowns=null!==(z=this._teardowns)&&void 0!==z?z:[]).push($)}}_hasParent($){const{_parentage:z}=this;return z===$||Array.isArray(z)&&z.includes($)}_addParent($){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push($),z):z?[z,$]:$}_removeParent($){const{_parentage:z}=this;z===$?this._parentage=null:Array.isArray(z)&&(0,ce.P)(z,$)}remove($){const{_teardowns:z}=this;z&&(0,ce.P)(z,$),$ instanceof oe&&$._removeParent(this)}}oe.EMPTY=(()=>{const ve=new oe;return ve.closed=!0,ve})();const ye=oe.EMPTY;function se(ve){return ve instanceof oe||ve&&"closed"in ve&&(0,d.m)(ve.remove)&&(0,d.m)(ve.add)&&(0,d.m)(ve.unsubscribe)}function ue(ve){(0,d.m)(ve)?ve():ve.unsubscribe()}},2416:(ut,Ae,F)=>{"use strict";F.d(Ae,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ae,F)=>{"use strict";F.d(Ae,{E:()=>j});const j=new(F(8306).y)(oe=>oe.complete())},8996:(ut,Ae,F)=>{"use strict";F.d(Ae,{D:()=>De});var d=F(8421),j=F(5363),O=F(9468),ye=F(8306),ue=F(2202),ve=F(576),$=F(9672);function ne(Ee,Ke){if(!Ee)throw new Error("Iterable cannot be null");return new ye.y(ie=>{(0,$.f)(ie,Ke,()=>{const Je=Ee[Symbol.asyncIterator]();(0,$.f)(ie,Ke,()=>{Je.next().then(X=>{X.done?ie.complete():ie.next(X.value)})},0,!0)})})}var Ge=F(3670),xe=F(8239),Fe=F(1144),He=F(6495),Y=F(2206),de=F(4532),Re=F(3260);function De(Ee,Ke){return Ke?function fe(Ee,Ke){if(null!=Ee){if((0,Ge.c)(Ee))return function ce(Ee,Ke){return(0,d.Xf)(Ee).pipe((0,O.R)(Ke),(0,j.Q)(Ke))}(Ee,Ke);if((0,Fe.z)(Ee))return function se(Ee,Ke){return new ye.y(ie=>{let Je=0;return Ke.schedule(function(){Je===Ee.length?ie.complete():(ie.next(Ee[Je++]),ie.closed||this.schedule())})})}(Ee,Ke);if((0,xe.t)(Ee))return function oe(Ee,Ke){return(0,d.Xf)(Ee).pipe((0,O.R)(Ke),(0,j.Q)(Ke))}(Ee,Ke);if((0,Y.D)(Ee))return ne(Ee,Ke);if((0,He.T)(Ee))return function z(Ee,Ke){return new ye.y(ie=>{let Je;return(0,$.f)(ie,Ke,()=>{Je=Ee[ue.h](),(0,$.f)(ie,Ke,()=>{let X,me;try{({value:X,done:me}=Je.next())}catch(ge){return void ie.error(ge)}me?ie.complete():ie.next(X)},0,!0)}),()=>(0,ve.m)(null==Je?void 0:Je.return)&&Je.return()})}(Ee,Ke);if((0,Re.L)(Ee))return function Oe(Ee,Ke){return ne((0,Re.Q)(Ee),Ke)}(Ee,Ke)}throw(0,de.z)(Ee)}(Ee,Ke):(0,d.Xf)(Ee)}},8421:(ut,Ae,F)=>{"use strict";F.d(Ae,{Xf:()=>Ge});var d=F(655),j=F(1144),O=F(8239),ce=F(8306),oe=F(3670),ye=F(2206),se=F(4532),ue=F(6495),ve=F(3260),$=F(576),z=F(7849),ne=F(8822);function Ge(fe){if(fe instanceof ce.y)return fe;if(null!=fe){if((0,oe.c)(fe))return function xe(fe){return new ce.y(De=>{const Ee=fe[ne.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(fe);if((0,j.z)(fe))return function Fe(fe){return new ce.y(De=>{for(let Ee=0;Ee<fe.length&&!De.closed;Ee++)De.next(fe[Ee]);De.complete()})}(fe);if((0,O.t)(fe))return function He(fe){return new ce.y(De=>{fe.then(Ee=>{De.closed||(De.next(Ee),De.complete())},Ee=>De.error(Ee)).then(null,z.h)})}(fe);if((0,ye.D)(fe))return de(fe);if((0,ue.T)(fe))return function Y(fe){return new ce.y(De=>{for(const Ee of fe)if(De.next(Ee),De.closed)return;De.complete()})}(fe);if((0,ve.L)(fe))return function Re(fe){return de((0,ve.Q)(fe))}(fe)}throw(0,se.z)(fe)}function de(fe){return new ce.y(De=>{(function Oe(fe,De){var Ee,Ke,ie,Je;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,d.KL)(fe);!(Ke=yield Ee.next()).done;)if(De.next(Ke.value),De.closed)return}catch(X){ie={error:X}}finally{try{Ke&&!Ke.done&&(Je=Ee.return)&&(yield Je.call(Ee))}finally{if(ie)throw ie.error}}De.complete()})})(fe,De).catch(Ee=>De.error(Ee))})}},6451:(ut,Ae,F)=>{"use strict";F.d(Ae,{T:()=>ye});var d=F(8189),j=F(8421),O=F(515),ce=F(3269),oe=F(8996);function ye(...se){const ue=(0,ce.yG)(se),ve=(0,ce._6)(se,1/0),$=se;return $.length?1===$.length?(0,j.Xf)($[0]):(0,d.J)(ve)((0,oe.D)($,ue)):O.E}},5403:(ut,Ae,F)=>{"use strict";F.d(Ae,{x:()=>j});var d=F(930);function j(ce,oe,ye,se,ue){return new O(ce,oe,ye,se,ue)}class O extends d.Lv{constructor(oe,ye,se,ue,ve,$){super(oe),this.onFinalize=ve,this.shouldUnsubscribe=$,this._next=ye?function(z){try{ye(z)}catch(ne){oe.error(ne)}}:super._next,this._error=ue?function(z){try{ue(z)}catch(ne){oe.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(z){oe.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(ut,Ae,F)=>{"use strict";F.d(Ae,{U:()=>O});var d=F(4482),j=F(5403);function O(ce,oe){return(0,d.e)((ye,se)=>{let ue=0;ye.subscribe((0,j.x)(se,ve=>{se.next(ce.call(oe,ve,ue++))}))})}},8189:(ut,Ae,F)=>{"use strict";F.d(Ae,{J:()=>O});var d=F(5577),j=F(4671);function O(ce=1/0){return(0,d.z)(j.y,ce)}},5577:(ut,Ae,F)=>{"use strict";F.d(Ae,{z:()=>ue});var d=F(4004),j=F(8421),O=F(4482),ce=F(9672),oe=F(5403),se=F(576);function ue(ve,$,z=1/0){return(0,se.m)($)?ue((ne,Ge)=>(0,d.U)((xe,Fe)=>$(ne,xe,Ge,Fe))((0,j.Xf)(ve(ne,Ge))),z):("number"==typeof $&&(z=$),(0,O.e)((ne,Ge)=>function ye(ve,$,z,ne,Ge,xe,Fe,He){const Y=[];let de=0,Re=0,Oe=!1;const fe=()=>{Oe&&!Y.length&&!de&&$.complete()},De=Ke=>de<ne?Ee(Ke):Y.push(Ke),Ee=Ke=>{xe&&$.next(Ke),de++;let ie=!1;(0,j.Xf)(z(Ke,Re++)).subscribe((0,oe.x)($,Je=>{null==Ge||Ge(Je),xe?De(Je):$.next(Je)},()=>{ie=!0},void 0,()=>{if(ie)try{for(de--;Y.length&&de<ne;){const Je=Y.shift();Fe?(0,ce.f)($,Fe,()=>Ee(Je)):Ee(Je)}fe()}catch(Je){$.error(Je)}}))};return ve.subscribe((0,oe.x)($,De,()=>{Oe=!0,fe()})),()=>{null==He||He()}}(ne,Ge,ve,z)))}},5363:(ut,Ae,F)=>{"use strict";F.d(Ae,{Q:()=>ce});var d=F(9672),j=F(4482),O=F(5403);function ce(oe,ye=0){return(0,j.e)((se,ue)=>{se.subscribe((0,O.x)(ue,ve=>(0,d.f)(ue,oe,()=>ue.next(ve),ye),()=>(0,d.f)(ue,oe,()=>ue.complete(),ye),ve=>(0,d.f)(ue,oe,()=>ue.error(ve),ye)))})}},3099:(ut,Ae,F)=>{"use strict";F.d(Ae,{B:()=>ye});var d=F(8996),j=F(5698),O=F(7579),ce=F(930),oe=F(4482);function ye(ue={}){const{connector:ve=(()=>new O.x),resetOnError:$=!0,resetOnComplete:z=!0,resetOnRefCountZero:ne=!0}=ue;return Ge=>{let xe=null,Fe=null,He=null,Y=0,de=!1,Re=!1;const Oe=()=>{null==Fe||Fe.unsubscribe(),Fe=null},fe=()=>{Oe(),xe=He=null,de=Re=!1},De=()=>{const Ee=xe;fe(),null==Ee||Ee.unsubscribe()};return(0,oe.e)((Ee,Ke)=>{Y++,!Re&&!de&&Oe();const ie=He=null!=He?He:ve();Ke.add(()=>{Y--,0===Y&&!Re&&!de&&(Fe=se(De,ne))}),ie.subscribe(Ke),xe||(xe=new ce.Hp({next:Je=>ie.next(Je),error:Je=>{Re=!0,Oe(),Fe=se(fe,$,Je),ie.error(Je)},complete:()=>{de=!0,Oe(),Fe=se(fe,z),ie.complete()}}),(0,d.D)(Ee).subscribe(xe))})(Ge)}}function se(ue,ve,...$){return!0===ve?(ue(),null):!1===ve?null:ve(...$).pipe((0,j.q)(1)).subscribe(()=>ue())}},9468:(ut,Ae,F)=>{"use strict";F.d(Ae,{R:()=>j});var d=F(4482);function j(O,ce=0){return(0,d.e)((oe,ye)=>{ye.add(O.schedule(()=>oe.subscribe(ye),ce))})}},5698:(ut,Ae,F)=>{"use strict";F.d(Ae,{q:()=>ce});var d=F(515),j=F(4482),O=F(5403);function ce(oe){return oe<=0?()=>d.E:(0,j.e)((ye,se)=>{let ue=0;ye.subscribe((0,O.x)(se,ve=>{++ue<=oe&&(se.next(ve),oe<=ue&&se.complete())}))})}},8505:(ut,Ae,F)=>{"use strict";F.d(Ae,{b:()=>oe});var d=F(576),j=F(4482),O=F(5403),ce=F(4671);function oe(ye,se,ue){const ve=(0,d.m)(ye)||se||ue?{next:ye,error:se,complete:ue}:ye;return ve?(0,j.e)(($,z)=>{var ne;null===(ne=ve.subscribe)||void 0===ne||ne.call(ve);let Ge=!0;$.subscribe((0,O.x)(z,xe=>{var Fe;null===(Fe=ve.next)||void 0===Fe||Fe.call(ve,xe),z.next(xe)},()=>{var xe;Ge=!1,null===(xe=ve.complete)||void 0===xe||xe.call(ve),z.complete()},xe=>{var Fe;Ge=!1,null===(Fe=ve.error)||void 0===Fe||Fe.call(ve,xe),z.error(xe)},()=>{var xe,Fe;Ge&&(null===(xe=ve.unsubscribe)||void 0===xe||xe.call(ve)),null===(Fe=ve.finalize)||void 0===Fe||Fe.call(ve)}))}):ce.y}},4408:(ut,Ae,F)=>{"use strict";F.d(Ae,{o:()=>oe});var d=F(727);class j extends d.w0{constructor(se,ue){super()}schedule(se,ue=0){return this}}const O={setInterval(...ye){const{delegate:se}=O;return((null==se?void 0:se.setInterval)||setInterval)(...ye)},clearInterval(ye){const{delegate:se}=O;return((null==se?void 0:se.clearInterval)||clearInterval)(ye)},delegate:void 0};var ce=F(8737);class oe extends j{constructor(se,ue){super(se,ue),this.scheduler=se,this.work=ue,this.pending=!1}schedule(se,ue=0){if(this.closed)return this;this.state=se;const ve=this.id,$=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId($,ve,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId($,this.id,ue),this}requestAsyncId(se,ue,ve=0){return O.setInterval(se.flush.bind(se,this),ve)}recycleAsyncId(se,ue,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return ue;O.clearInterval(ue)}execute(se,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(se,ue);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,ue){let $,ve=!1;try{this.work(se)}catch(z){ve=!0,$=z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:se,scheduler:ue}=this,{actions:ve}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(ve,this),null!=se&&(this.id=this.recycleAsyncId(ue,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ae,F)=>{"use strict";F.d(Ae,{v:()=>O});var d=F(6063);class j{constructor(oe,ye=j.now){this.schedulerActionCtor=oe,this.now=ye}schedule(oe,ye=0,se){return new this.schedulerActionCtor(this,oe).schedule(se,ye)}}j.now=d.l.now;class O extends j{constructor(oe,ye=j.now){super(oe,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:ye}=this;if(this._active)return void ye.push(oe);let se;this._active=!0;do{if(se=oe.execute(oe.state,oe.delay))break}while(oe=ye.shift());if(this._active=!1,se){for(;oe=ye.shift();)oe.unsubscribe();throw se}}}},4986:(ut,Ae,F)=>{"use strict";F.d(Ae,{z:()=>O,P:()=>ce});var d=F(4408);const O=new(F(7565).v)(d.o),ce=O},6063:(ut,Ae,F)=>{"use strict";F.d(Ae,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ut,Ae,F)=>{"use strict";F.d(Ae,{z:()=>d});const d={setTimeout(...j){const{delegate:O}=d;return((null==O?void 0:O.setTimeout)||setTimeout)(...j)},clearTimeout(j){const{delegate:O}=d;return((null==O?void 0:O.clearTimeout)||clearTimeout)(j)},delegate:void 0}},2202:(ut,Ae,F)=>{"use strict";F.d(Ae,{h:()=>j});const j=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ae,F)=>{"use strict";F.d(Ae,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ut,Ae,F)=>{"use strict";F.d(Ae,{jO:()=>ce,yG:()=>oe,_6:()=>ye});var d=F(576),j=F(3532);function O(se){return se[se.length-1]}function ce(se){return(0,d.m)(O(se))?se.pop():void 0}function oe(se){return(0,j.K)(O(se))?se.pop():void 0}function ye(se,ue){return"number"==typeof O(se)?se.pop():ue}},8737:(ut,Ae,F)=>{"use strict";function d(j,O){if(j){const ce=j.indexOf(O);0<=ce&&j.splice(ce,1)}}F.d(Ae,{P:()=>d})},3888:(ut,Ae,F)=>{"use strict";function d(j){const ce=j(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}F.d(Ae,{d:()=>d})},2806:(ut,Ae,F)=>{"use strict";F.d(Ae,{x:()=>O,O:()=>ce});var d=F(2416);let j=null;function O(oe){if(d.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),oe(),ye){const{errorThrown:se,error:ue}=j;if(j=null,se)throw ue}}else oe()}function ce(oe){d.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=oe)}},9672:(ut,Ae,F)=>{"use strict";function d(j,O,ce,oe=0,ye=!1){const se=O.schedule(function(){ce(),ye?j.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(j.add(se),!ye)return se}F.d(Ae,{f:()=>d})},4671:(ut,Ae,F)=>{"use strict";function d(j){return j}F.d(Ae,{y:()=>d})},1144:(ut,Ae,F)=>{"use strict";F.d(Ae,{z:()=>d});const d=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(ut,Ae,F)=>{"use strict";F.d(Ae,{D:()=>j});var d=F(576);function j(O){return Symbol.asyncIterator&&(0,d.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ut,Ae,F)=>{"use strict";function d(j){return"function"==typeof j}F.d(Ae,{m:()=>d})},3670:(ut,Ae,F)=>{"use strict";F.d(Ae,{c:()=>O});var d=F(8822),j=F(576);function O(ce){return(0,j.m)(ce[d.L])}},6495:(ut,Ae,F)=>{"use strict";F.d(Ae,{T:()=>O});var d=F(2202),j=F(576);function O(ce){return(0,j.m)(null==ce?void 0:ce[d.h])}},8239:(ut,Ae,F)=>{"use strict";F.d(Ae,{t:()=>j});var d=F(576);function j(O){return(0,d.m)(null==O?void 0:O.then)}},3260:(ut,Ae,F)=>{"use strict";F.d(Ae,{Q:()=>O,L:()=>ce});var d=F(655),j=F(576);function O(oe){return(0,d.FC)(this,arguments,function*(){const se=oe.getReader();try{for(;;){const{value:ue,done:ve}=yield(0,d.qq)(se.read());if(ve)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ue)}}finally{se.releaseLock()}})}function ce(oe){return(0,j.m)(null==oe?void 0:oe.getReader)}},3532:(ut,Ae,F)=>{"use strict";F.d(Ae,{K:()=>j});var d=F(576);function j(O){return O&&(0,d.m)(O.schedule)}},4482:(ut,Ae,F)=>{"use strict";F.d(Ae,{A:()=>j,e:()=>O});var d=F(576);function j(ce){return(0,d.m)(null==ce?void 0:ce.lift)}function O(ce){return oe=>{if(j(oe))return oe.lift(function(ye){try{return ce(ye,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Ae,F)=>{"use strict";function d(){}F.d(Ae,{Z:()=>d})},7849:(ut,Ae,F)=>{"use strict";F.d(Ae,{h:()=>O});var d=F(2416),j=F(3410);function O(ce){j.z.setTimeout(()=>{const{onUnhandledError:oe}=d.v;if(!oe)throw ce;oe(ce)})}},4532:(ut,Ae,F)=>{"use strict";function d(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ae,{z:()=>d})},655:(ut,Ae,F)=>{"use strict";function ce(X,me){var ge={};for(var be in X)Object.prototype.hasOwnProperty.call(X,be)&&me.indexOf(be)<0&&(ge[be]=X[be]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(be=Object.getOwnPropertySymbols(X);Ue<be.length;Ue++)me.indexOf(be[Ue])<0&&Object.prototype.propertyIsEnumerable.call(X,be[Ue])&&(ge[be[Ue]]=X[be[Ue]])}return ge}function ue(X,me,ge,be){return new(ge||(ge=Promise))(function(he,Ct){function ln(lt){try{ht(be.next(lt))}catch(vi){Ct(vi)}}function Hn(lt){try{ht(be.throw(lt))}catch(vi){Ct(vi)}}function ht(lt){lt.done?he(lt.value):function Ue(he){return he instanceof ge?he:new ge(function(Ct){Ct(he)})}(lt.value).then(ln,Hn)}ht((be=be.apply(X,me||[])).next())})}function Y(X){return this instanceof Y?(this.v=X,this):new Y(X)}function de(X,me,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,be=ge.apply(X,me||[]),he=[];return Ue={},Ct("next"),Ct("throw"),Ct("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function Ct(mn){be[mn]&&(Ue[mn]=function(Oi){return new Promise(function(cn,Zt){he.push([mn,Oi,cn,Zt])>1||ln(mn,Oi)})})}function ln(mn,Oi){try{!function Hn(mn){mn.value instanceof Y?Promise.resolve(mn.value.v).then(ht,lt):vi(he[0][2],mn)}(be[mn](Oi))}catch(cn){vi(he[0][3],cn)}}function ht(mn){ln("next",mn)}function lt(mn){ln("throw",mn)}function vi(mn,Oi){mn(Oi),he.shift(),he.length&&ln(he[0][0],he[0][1])}}function Oe(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,me=X[Symbol.asyncIterator];return me?me.call(X):(X=function ne(X){var me="function"==typeof Symbol&&Symbol.iterator,ge=me&&X[me],be=0;if(ge)return ge.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&be>=X.length&&(X=void 0),{value:X&&X[be++],done:!X}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),ge={},be("next"),be("throw"),be("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function be(he){ge[he]=X[he]&&function(Ct){return new Promise(function(ln,Hn){!function Ue(he,Ct,ln,Hn){Promise.resolve(Hn).then(function(ht){he({value:ht,done:ln})},Ct)}(ln,Hn,(Ct=X[he](Ct)).done,Ct.value)})}}}F.d(Ae,{_T:()=>ce,mG:()=>ue,qq:()=>Y,FC:()=>de,KL:()=>Oe})},5e3:(ut,Ae,F)=>{"use strict";F.d(Ae,{deG:()=>dm,tb:()=>uT,AFp:()=>aT,ip1:()=>fy,CZH:()=>Ef,hGG:()=>c0,z2F:()=>su,sBO:()=>wO,Sil:()=>qw,_Vd:()=>gg,EJc:()=>hT,SBq:()=>Dd,qLn:()=>xc,vpe:()=>oa,tBr:()=>Yo,XFs:()=>vt,OlP:()=>Rn,zs3:()=>cs,ZZ4:()=>If,aQg:()=>wy,soG:()=>gy,YKP:()=>J_,h0i:()=>nu,PXZ:()=>Fd,R0b:()=>hs,FiY:()=>Br,Lbi:()=>cT,g9A:()=>py,n_E:()=>ny,Qsj:()=>fw,FYo:()=>NI,JOm:()=>Zs,q3G:()=>Si,tp0:()=>Dr,Rgc:()=>Ad,dDg:()=>no,q4F:()=>PI,GfV:()=>Q_,s_b:()=>Aw,ifc:()=>Mt,eFA:()=>ru,G48:()=>e0,Gpc:()=>z,f3M:()=>rn,X6Q:()=>wT,_c5:()=>Ey,VLi:()=>yT,c2e:()=>dT,zSh:()=>eb,wAp:()=>It,vHH:()=>Fe,EiD:()=>Yu,mCW:()=>k,qzn:()=>Nl,JVY:()=>dp,pB0:()=>hp,eBb:()=>Wu,L6k:()=>uv,LAX:()=>Ku,cg1:()=>P_,kL8:()=>tf,yhl:()=>Ac,dqk:()=>$t,sIi:()=>$p,CqO:()=>gb,QGY:()=>tg,F4k:()=>p_,RDi:()=>eh,AaK:()=>ue,z3N:()=>as,qOj:()=>sb,TTD:()=>rl,_Bn:()=>RI,xp6:()=>Dp,uIk:()=>Wp,ekj:()=>Ib,Suo:()=>wg,Xpm:()=>_n,lG2:()=>Se,Yz7:()=>cn,cJS:()=>dn,oAB:()=>ae,Yjl:()=>qe,Y36:()=>_d,_UZ:()=>eg,qZA:()=>Jp,TgZ:()=>Xp,EpF:()=>pb,n5z:()=>So,LFG:()=>Be,$8M:()=>Vr,$Z:()=>f_,NdJ:()=>mb,CRH:()=>XI,oxw:()=>WC,ALo:()=>Dw,lcZ:()=>hf,Hsn:()=>YC,F$t:()=>ZC,Q6J:()=>Qp,s9C:()=>_b,iGM:()=>kw,MAs:()=>PC,Jf7:()=>kE,CHM:()=>Du,LSH:()=>vm,Udp:()=>Cb,WFA:()=>g_,d8E:()=>N_,YNc:()=>NC,_uU:()=>Ab,Oqu:()=>sg,Gf:()=>Rw});var d=F(7579),j=F(727),O=F(8306),ce=F(6451),oe=F(3099);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function se(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function ue(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ue).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const $=ye({__forward_ref__:ye});function z(o){return o.__forward_ref__=z,o.toString=function(){return ue(this())},o}function ne(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty($)&&o.__forward_ref__===z}class Fe extends Error{constructor(a,l){super(function He(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,l)),this.code=a}}function Y(o){return"string"==typeof o?o:null==o?"":String(o)}function de(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Y(o)}function De(o,a){const l=a?` in ${a}`:"";throw new Fe(-201,`No provider for ${de(o)} found${l}`)}function ht(o,a){null==o&&function lt(o,a,l,u){throw new Error(`ASSERTION ERROR: ${o}`+(null==u?"":` [Expected=> ${l} ${u} ${a} <=Actual]`))}(a,o,null,"!=")}function cn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function dn(o){return{providers:o.providers||[],imports:o.imports||[]}}function On(o){return Xr(o,Or)||Xr(o,Zn)}function Xr(o,a){return o.hasOwnProperty(a)?o[a]:null}function ws(o){return o&&(o.hasOwnProperty(Jr)||o.hasOwnProperty(Es))?o[Jr]:null}const Or=ye({\u0275prov:ye}),Jr=ye({\u0275inj:ye}),Zn=ye({ngInjectableDef:ye}),Es=ye({ngInjectorDef:ye});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let nr;function tn(o){const a=nr;return nr=o,a}function Gi(o,a,l){const u=On(o);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&vt.Optional?null:void 0!==a?a:void De(ue(o),"Injector")}function ft(o){return{toString:o}.toString()}var At=(()=>((At=At||{})[At.OnPush=0]="OnPush",At[At.Default=1]="Default",At))(),Mt=(()=>{return(o=Mt||(Mt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Mt;var o})();const ct="undefined"!=typeof globalThis&&globalThis,et="undefined"!=typeof window&&window,go="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=ct||"undefined"!=typeof global&&global||et||go,kn={},H=[],q=ye({\u0275cmp:ye}),K=ye({\u0275dir:ye}),Ie=ye({\u0275pipe:ye}),re=ye({\u0275mod:ye}),Ze=ye({\u0275fac:ye}),yt=ye({__NG_ELEMENT_ID__:ye});let nn=0;function _n(o){return ft(()=>{const l={},u={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===At.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||H,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Mt.Emulated,id:"c",styles:o.styles||H,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,g=o.features,v=o.pipes;return u.id+=nn++,u.inputs=W(o.inputs,l),u.outputs=W(o.outputs),g&&g.forEach(w=>w(u)),u.directiveDefs=f?()=>("function"==typeof f?f():f).map(wi):null,u.pipeDefs=v?()=>("function"==typeof v?v():v).map(Pt):null,u})}function wi(o){return dt(o)||function xt(o){return o[K]||null}(o)}function Pt(o){return function Gt(o){return o[Ie]||null}(o)}const hi={};function ae(o){return ft(()=>{const a={type:o.type,bootstrap:o.bootstrap||H,declarations:o.declarations||H,imports:o.imports||H,exports:o.exports||H,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(hi[o.id]=o.type),a})}function W(o,a){if(null==o)return kn;const l={};for(const u in o)if(o.hasOwnProperty(u)){let f=o[u],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=u,a&&(a[f]=g)}return l}const Se=_n;function qe(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function dt(o){return o[q]||null}function Lt(o,a){const l=o[re]||null;if(!l&&!0===a)throw new Error(`Type ${ue(o)} does not have '\u0275mod' property.`);return l}function br(o){return Array.isArray(o)&&"object"==typeof o[1]}function Ts(o){return Array.isArray(o)&&!0===o[1]}function ac(o){return 0!=(8&o.flags)}function Wd(o){return 2==(2&o.flags)}function Ds(o){return 1==(1&o.flags)}function Ss(o){return null!==o.template}function yu(o){return 0!=(512&o[2])}function ts(o,a){return o.hasOwnProperty(Ze)?o[Ze]:null}class Xd{constructor(a,l,u){this.previousValue=a,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function rl(){return sl}function sl(o){return o.type.prototype.ngOnChanges&&(o.setInput=ol),Wf}function Wf(){const o=al(this),a=null==o?void 0:o.current;if(a){const l=o.previous;if(l===kn)o.previous=a;else for(let u in a)l[u]=a[u];o.current=null,this.ngOnChanges(a)}}function ol(o,a,l,u){const f=al(o)||function _a(o,a){return o[uc]=a}(o,{previous:kn,current:null}),g=f.current||(f.current={}),v=f.previous,w=this.declaredInputs[l],T=v[w];g[w]=new Xd(T&&T.currentValue,a,v===kn),o[u]=a}rl.ngInherit=!0;const uc="__ngSimpleChanges__";function al(o){return o[uc]||null}let hc;function eh(o){hc=o}function Sn(o){return!!o.listen}const ya={createRenderer:(o,a)=>function ns(){return void 0!==hc?hc:"undefined"!=typeof document?document:void 0}()};function bn(o){for(;Array.isArray(o);)o=o[0];return o}function Eo(o,a){return bn(a[o])}function Ei(o,a){return bn(a[o.index])}function Jn(o,a){return o.data[a]}function As(o,a){return o[a]}function $i(o,a){const l=a[o];return br(l)?l:l[0]}function Uo(o){return 4==(4&o[2])}function Co(o){return 128==(128&o[2])}function is(o,a){return null==a?null:o[a]}function Ms(o){o[18]=0}function js(o,a){o[5]+=a;let l=o,u=o[3];for(;null!==u&&(1===a&&1===l[5]||-1===a&&0===l[5]);)u[5]+=a,l=u,u=u[3]}const bt={lFrame:Ru(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function hl(){return bt.bindingsEnabled}function Me(){return bt.lFrame.lView}function Bt(){return bt.lFrame.tView}function Du(o){return bt.lFrame.contextLView=o,o[8]}function Nn(){let o=ba();for(;null!==o&&64===o.type;)o=o.parent;return o}function ba(){return bt.lFrame.currentTNode}function Pr(o,a){const l=bt.lFrame;l.currentTNode=o,l.isParent=a}function Su(){return bt.lFrame.isParent}function fl(){bt.lFrame.isParent=!1}function jo(){return bt.isInCheckNoChangesMode}function gc(o){bt.isInCheckNoChangesMode=o}function Io(){return bt.lFrame.bindingIndex++}function Mu(o,a){const l=bt.lFrame;l.bindingIndex=l.bindingRootIndex=o,gl(a)}function gl(o){bt.lFrame.currentDirectiveIndex=o}function wa(o){const a=bt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function xu(){return bt.lFrame.currentQueryIndex}function ku(o){bt.lFrame.currentQueryIndex=o}function Zf(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function ml(o,a,l){if(l&vt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||l&vt.Host||(f=Zf(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const u=bt.lFrame=To();return u.currentTNode=a,u.lView=o,!0}function _l(o){const a=To(),l=o[1];bt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function To(){const o=bt.lFrame,a=null===o?null:o.child;return null===a?Ru(o):a}function Ru(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Yf(){const o=bt.lFrame;return bt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Qf=Yf;function Ea(){const o=Yf();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function qi(){return bt.lFrame.selectedIndex}function zs(o){bt.lFrame.selectedIndex=o}function Gn(){const o=bt.lFrame;return Jn(o.tView,o.selectedIndex)}function vl(o,a){for(let l=a.directiveStart,u=a.directiveEnd;l<u;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:T,ngAfterViewChecked:A,ngOnDestroy:R}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-l,v),w&&((o.contentHooks||(o.contentHooks=[])).push(l,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,w)),T&&(o.viewHooks||(o.viewHooks=[])).push(-l,T),A&&((o.viewHooks||(o.viewHooks=[])).push(l,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,A)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(l,R)}}function Ou(o,a,l){Pi(o,a,3,l)}function Nu(o,a,l,u){(3&o[2])===l&&Pi(o,a,l,u)}function yc(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function Pi(o,a,l,u){const g=null!=u?u:-1,v=a.length-1;let w=0;for(let T=void 0!==u?65535&o[18]:0;T<v;T++)if("number"==typeof a[T+1]){if(w=a[T],null!=u&&w>=u)break}else a[T]<0&&(o[18]+=65536),(w<g||-1==g)&&(Pu(o,l,a,T),o[18]=(4294901760&o[18])+T+2),T++}function Pu(o,a,l,u){const f=l[u]<0,g=l[u+1],w=o[f?-l[u]:l[u]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class vc{constructor(a,l,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function Ci(o,a,l){const u=Sn(o);let f=0;for(;f<l.length;){const g=l[f];if("number"==typeof g){if(0!==g)break;f++;const v=l[f++],w=l[f++],T=l[f++];u?o.setAttribute(a,w,T,v):a.setAttributeNS(v,w,T)}else{const v=g,w=l[++f];rh(v)?u&&o.setProperty(a,v,w):u?o.setAttribute(a,v,w):a.setAttribute(v,w),f++}}return f}function Vu(o){return 3===o||4===o||6===o}function rh(o){return 64===o.charCodeAt(0)}function Er(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let u=0;u<a.length;u++){const f=a[u];"number"==typeof f?l=f:0===l||sh(o,l,f,null,-1===l||2===l?a[++u]:null)}}return o}function sh(o,a,l,u,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const w=o[g++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=g-1;break}}}for(;g<o.length;){const w=o[g];if("number"==typeof w)break;if(w===l){if(null===u)return void(null!==f&&(o[g+1]=f));if(u===o[g+1])return void(o[g+2]=f)}g++,null!==u&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,l),null!==u&&o.splice(g++,0,u),null!==f&&o.splice(g++,0,f)}function gt(o){return-1!==o}function An(o){return 32767&o}function Ca(o,a){let l=function wl(o){return o>>16}(o),u=a;for(;l>0;)u=u[15],l--;return u}let Go=!0;function El(o){const a=Go;return Go=o,a}let $s=0;function ss(o,a){const l=$o(o,a);if(-1!==l)return l;const u=a[1];u.firstCreatePass&&(o.injectorIndex=a.length,Ia(u.data,o),Ia(a,null),Ia(u.blueprint,null));const f=Fr(o,a),g=o.injectorIndex;if(gt(f)){const v=An(f),w=Ca(f,a),T=w[1].data;for(let A=0;A<8;A++)a[g+A]=w[v+A]|T[v+A]}return a[g+8]=f,g}function Ia(o,a){o.push(0,0,0,0,0,0,0,0,a)}function $o(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Fr(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,u=null,f=a;for(;null!==f;){const g=f[1],v=g.type;if(u=2===v?g.declTNode:1===v?f[6]:null,null===u)return-1;if(l++,f=f[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function ur(o,a,l){!function tt(o,a,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(yt)&&(u=l[yt]),null==u&&(u=l[yt]=$s++);const f=255&u;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function ju(o,a,l){if(l&vt.Optional)return o;De(a,"NodeInjector")}function dr(o,a,l,u){if(l&vt.Optional&&void 0===u&&(u=null),0==(l&(vt.Self|vt.Host))){const f=o[9],g=tn(void 0);try{return f?f.get(a,u,l&vt.Optional):Gi(a,u,l&vt.Optional)}finally{tn(g)}}return ju(u,a,l)}function bc(o,a,l,u=vt.Default,f){if(null!==o){const g=function Ii(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(yt)?o[yt]:void 0;return"number"==typeof a?a>=0?255&a:Do:a}(l);if("function"==typeof g){if(!ml(a,o,u))return u&vt.Host?ju(f,l,u):dr(a,l,u,f);try{const v=g(u);if(null!=v||u&vt.Optional)return v;De(l)}finally{Qf()}}else if("number"==typeof g){let v=null,w=$o(o,a),T=-1,A=u&vt.Host?a[16][6]:null;for((-1===w||u&vt.SkipSelf)&&(T=-1===w?Fr(o,a):a[w+8],-1!==T&&Wo(u,!1)?(v=a[1],w=An(T),a=Ca(T,a)):w=-1);-1!==w;){const R=a[1];if(ti(g,w,R.data)){const V=oh(w,a,l,v,u,A);if(V!==wc)return V}T=a[w+8],-1!==T&&Wo(u,a[1].data[w+8]===A)&&ti(g,w,a)?(v=R,w=An(T),a=Ca(T,a)):w=-1}}}return dr(a,l,u,f)}const wc={};function Do(){return new ks(Nn(),Me())}function oh(o,a,l,u,f,g){const v=a[1],w=v.data[o+8],R=qo(w,v,l,null==u?Wd(w)&&Go:u!=v&&0!=(3&w.type),f&vt.Host&&g===w);return null!==R?pi(a,v,R,w):wc}function qo(o,a,l,u,f){const g=o.providerIndexes,v=a.data,w=1048575&g,T=o.directiveStart,R=g>>20,G=f?w+R:o.directiveEnd;for(let ee=u?w:w+R;ee<G;ee++){const Te=v[ee];if(ee<T&&l===Te||ee>=T&&Te.type===l)return ee}if(f){const ee=v[T];if(ee&&Ss(ee)&&ee.type===l)return T}return null}function pi(o,a,l,u){let f=o[l];const g=a.data;if(function Fu(o){return o instanceof vc}(f)){const v=f;v.resolving&&function Re(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${o}${l}`)}(de(g[l]));const w=El(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?tn(v.injectImpl):null;ml(o,u,vt.Default);try{f=o[l]=v.factory(void 0,g,o,u),a.firstCreatePass&&l>=u.directiveStart&&function Ho(o,a,l){const{ngOnChanges:u,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(u){const v=sl(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==T&&tn(T),El(w),v.resolving=!1,Qf()}}return f}function ti(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function Wo(o,a){return!(o&vt.Self||o&vt.Host&&a)}class ks{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,u){return bc(this._tNode,this._lView,a,u,l)}}function So(o){return ft(()=>{const a=o.prototype.constructor,l=a[Ze]||Lr(a),u=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==u;){const g=f[Ze]||Lr(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Lr(o){return Ge(o)?()=>{const a=Lr(ne(o));return a&&a()}:ts(o)}function Vr(o){return function Pn(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const u=l.length;let f=0;for(;f<u;){const g=l[f];if(Vu(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<u&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(Nn(),o)}const Dt="__parameters__";function Ir(o,a,l){return ft(()=>{const u=function ep(o){return function(...l){if(o){const u=o(...l);for(const f in u)this[f]=u[f]}}}(a);function f(...g){if(this instanceof f)return u.apply(this,g),this;const v=new f(...g);return w.annotation=v,w;function w(T,A,R){const V=T.hasOwnProperty(Dt)?T[Dt]:Object.defineProperty(T,Dt,{value:[]})[Dt];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(v),T}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Rn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=cn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const dm=new Rn("AnalyzeForEntryComponents");function gi(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let u=o[l];Array.isArray(u)?(a===o&&(a=o.slice(0,l)),gi(u,a)):a!==o&&a.push(u)}return a}function os(o,a){o.forEach(l=>Array.isArray(l)?os(l,a):a(l))}function Cc(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function Ic(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function hr(o,a){const l=[];for(let u=0;u<o;u++)l.push(a);return l}function Ur(o,a,l){let u=$n(o,a);return u>=0?o[1|u]=l:(u=~u,function zu(o,a,l,u){let f=o.length;if(f==a)o.push(l,u);else if(1===f)o.push(u,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=u}}(o,u,a,l)),u}function N(o,a){const l=$n(o,a);if(l>=0)return o[1|l]}function $n(o,a){return function fr(o,a,l){let u=0,f=o.length>>l;for(;f!==u;){const g=u+(f-u>>1),v=o[g<<l];if(a===v)return g<<l;v>a?f=g:u=g+1}return~(f<<l)}(o,a,1)}const Os={},we="__NG_DI_FLAG__",Ml="ngTempTokenPath",C=/\n/gm,M="__source",B=ye({provide:String,useValue:ye});let Q;function le(o){const a=Q;return Q=o,a}function Le(o,a=vt.Default){if(void 0===Q)throw new Fe(203,"");return null===Q?Gi(o,void 0,a):Q.get(o,a&vt.Optional?null:void 0,a)}function Be(o,a=vt.Default){return(function jn(){return nr}()||Le)(ne(o),a)}const rn=Be;function hn(o){const a=[];for(let l=0;l<o.length;l++){const u=ne(o[l]);if(Array.isArray(u)){if(0===u.length)throw new Fe(900,"");let f,g=vt.Default;for(let v=0;v<u.length;v++){const w=u[v],T=Fi(w);"number"==typeof T?-1===T?f=w.token:g|=T:f=w}a.push(Be(f,g))}else a.push(Be(u))}return a}function Wt(o,a){return o[we]=a,o.prototype[we]=a,o}function Fi(o){return o[we]}const Yo=Wt(Ir("Inject",o=>({token:o})),-1),Br=Wt(Ir("Optional"),8),Dr=Wt(Ir("SkipSelf"),4);let Qo;function Sa(o){var a;return(null===(a=function hh(){if(void 0===Qo&&(Qo=null,$t.trustedTypes))try{Qo=$t.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Qo}())||void 0===a?void 0:a.createHTML(o))||o}class Ol{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class cp extends Ol{getTypeName(){return"HTML"}}class mm extends Ol{getTypeName(){return"Style"}}class up extends Ol{getTypeName(){return"Script"}}class cv extends Ol{getTypeName(){return"URL"}}class Ki extends Ol{getTypeName(){return"ResourceURL"}}function as(o){return o instanceof Ol?o.changingThisBreaksApplicationSecurity:o}function Nl(o,a){const l=Ac(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function Ac(o){return o instanceof Ol&&o.getTypeName()||null}function dp(o){return new cp(o)}function uv(o){return new mm(o)}function Wu(o){return new up(o)}function Ku(o){return new cv(o)}function hp(o){return new Ki(o)}class fp{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(Sa(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class _m{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const u=this.inertDocument.createElement("body");l.appendChild(u)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Sa(a),l;const u=this.inertDocument.createElement("body");return u.innerHTML=Sa(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const v=l.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let u=a.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const m=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,E=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function k(o){return(o=String(o)).match(m)||o.match(E)?o:"unsafe:"+o}function te(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function Ne(...o){const a={};for(const l of o)for(const u in l)l.hasOwnProperty(u)&&(a[u]=!0);return a}const st=te("area,br,col,hr,img,wbr"),Et=te("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jt=te("rp,rt"),Aa=Ne(st,Ne(Et,te("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ne(jt,te("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ne(jt,Et)),mh=te("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zu=te("srcset"),_h=Ne(mh,Zu,te("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),te("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yh=te("script,style,template");class vh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,u=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?u=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,u&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Aa.hasOwnProperty(l))return this.sanitizedSomething=!0,!yh.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const u=a.attributes;for(let f=0;f<u.length;f++){const g=u.item(f),v=g.name,w=v.toLowerCase();if(!_h.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let T=g.value;mh[w]&&(T=k(T)),Zu[w]&&(o=T,T=(o=String(o)).split(",").map(a=>k(a.trim())).join(", ")),this.buf.push(" ",v,'="',gp(T),'"')}var o;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Aa.hasOwnProperty(l)&&!st.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(gp(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const pp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bh=/([^\#-~ |!])/g;function gp(o){return o.replace(/&/g,"&amp;").replace(pp,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(bh,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mc;function Yu(o,a){let l=null;try{Mc=Mc||function gh(o){const a=new _m(o);return function b(){try{return!!(new window.DOMParser).parseFromString(Sa(""),"text/html")}catch(o){return!1}}()?new fp(a):a}(o);let u=a?String(a):"";l=Mc.getInertBodyElement(u);let f=5,g=u;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,u=g,g=l.innerHTML,l=Mc.getInertBodyElement(u)}while(u!==g);return Sa((new vh).sanitizeChildren(mp(l)||l))}finally{if(l){const u=mp(l)||l;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function mp(o){return"content"in o&&function hv(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Si=(()=>((Si=Si||{})[Si.NONE=0]="NONE",Si[Si.HTML=1]="HTML",Si[Si.STYLE=2]="STYLE",Si[Si.SCRIPT=3]="SCRIPT",Si[Si.URL=4]="URL",Si[Si.RESOURCE_URL=5]="RESOURCE_URL",Si))();function vm(o){const a=function Xo(){const o=Me();return o&&o[12]}();return a?a.sanitize(Si.URL,o)||"":Nl(o,"URL")?as(o):k(Y(o))}const Ch="__ngContext__";function Ar(o,a){o[Ch]=a}function wm(o){const a=function rr(o){return o[Ch]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Im(o){return o.ngOriginalError}function bv(o,...a){o.error(...a)}class xc{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),u=function ES(o){return o&&o.ngErrorLogger||bv}(a);u(this._console,"ERROR",a),l&&u(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Im(a);for(;l&&Im(l);)l=Im(l);return l||null}}const Dm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function kE(o){return o.ownerDocument.defaultView}function Hr(o){return o instanceof Function?o():o}var Zs=(()=>((Zs=Zs||{})[Zs.Important=1]="Important",Zs[Zs.DashCase=2]="DashCase",Zs))();function Ah(o,a){return undefined(o,a)}function Nc(o){const a=o[3];return Ts(a)?a[3]:a}function Xu(o){return PE(o[13])}function Ju(o){return PE(o[4])}function PE(o){for(;null!==o&&!Ts(o);)o=o[4];return o}function Mh(o,a,l,u,f){if(null!=u){let g,v=!1;Ts(u)?g=u:br(u)&&(v=!0,u=u[0]);const w=bn(u);0===o&&null!==l?null==f?xm(a,l,w):Fc(a,l,w,f||null,!0):1===o&&null!==l?Fc(a,l,w,f||null,!0):2===o?function GE(o,a,l){const u=km(o,a);u&&function AS(o,a,l,u){Sn(o)?o.removeChild(a,l,u):a.removeChild(l)}(o,u,a,l)}(a,w,v):3===o&&a.destroyNode(w),null!=g&&function $E(o,a,l,u,f){const g=l[7];g!==bn(l)&&Mh(a,o,u,g,f);for(let w=10;w<l.length;w++){const T=l[w];Cp(T[1],T,o,a,u,g)}}(a,o,g,l,f)}}function ed(o,a,l){if(Sn(o))return o.createElement(a,l);{const u=null!==l?function Jd(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(l):null;return null===u?o.createElement(a):o.createElementNS(u,a)}}function BE(o,a){const l=o[9],u=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,js(f,-1)),l.splice(u,1)}function Sm(o,a){if(o.length<=10)return;const l=10+a,u=o[l];if(u){const f=u[17];null!==f&&f!==o&&BE(f,u),a>0&&(o[l-1][4]=u[4]);const g=Ic(o,10+a);!function Pc(o,a){Cp(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(u[1],u);const v=g[19];null!==v&&v.detachView(g[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function jE(o,a){if(!(256&a[2])){const l=a[11];Sn(l)&&l.destroyNode&&Cp(o,a,l,3,null,null),function UE(o){let a=o[13];if(!a)return Am(o[1],o);for(;a;){let l=null;if(br(a))l=a[13];else{const u=a[10];u&&(l=u)}if(!l){for(;a&&!a[4]&&a!==o;)br(a)&&Am(a[1],a),a=a[3];null===a&&(a=o),br(a)&&Am(a[1],a),l=a&&a[4]}a=l}}(a)}}function Am(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function Iv(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let u=0;u<l.length;u+=2){const f=a[l[u]];if(!(f instanceof vc)){const g=l[u+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=f[g[v]],T=g[v+1];try{T.call(w)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function HE(o,a){const l=o.cleanup,u=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],w="function"==typeof v?v(a):bn(a[v]),T=u[f=l[g+2]],A=l[g+3];"boolean"==typeof A?w.removeEventListener(l[g],T,A):A>=0?u[f=A]():u[f=-A].unsubscribe(),g+=2}else{const v=u[f=l[g+1]];l[g].call(v)}if(null!==u){for(let g=f+1;g<u.length;g++)u[g]();a[7]=null}}(o,a),1===a[1].type&&Sn(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&Ts(a[3])){l!==a[3]&&BE(l,a);const u=a[19];null!==u&&u.detachView(o)}}}function Mm(o,a,l){return function Tv(o,a,l){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return l[0];if(2&u.flags){const f=o.data[u.directiveStart].encapsulation;if(f===Mt.None||f===Mt.Emulated)return null}return Ei(u,l)}(o,a.parent,l)}function Fc(o,a,l,u,f){Sn(o)?o.insertBefore(a,l,u,f):a.insertBefore(l,u,f)}function xm(o,a,l){Sn(o)?o.appendChild(a,l):a.appendChild(l)}function zE(o,a,l,u,f){null!==u?Fc(o,a,l,u,f):xm(o,a,l)}function km(o,a){return Sn(o)?o.parentNode(a):a.parentNode}function kh(o,a,l){return Om(o,a,l)}let Om=function Ep(o,a,l){return 40&o.type?Ei(o,l):null};function Lc(o,a,l,u){const f=Mm(o,u,a),g=a[11],w=kh(u.parent||a[6],u,a);if(null!=f)if(Array.isArray(l))for(let T=0;T<l.length;T++)zE(g,f,l[T],w,!1);else zE(g,f,l,w,!1)}function Pm(o,a){if(null!==a){const l=a.type;if(3&l)return Ei(a,o);if(4&l)return Fm(-1,o[a.index]);if(8&l){const u=a.child;if(null!==u)return Pm(o,u);{const f=o[a.index];return Ts(f)?Fm(-1,f):bn(f)}}if(32&l)return Ah(a,o)()||bn(o[a.index]);{const u=Li(o,a);return null!==u?Array.isArray(u)?u[0]:Pm(Nc(o[16]),u):Pm(o,a.next)}}return null}function Li(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Fm(o,a){const l=10+o+1;if(l<a.length){const u=a[l],f=u[1].firstChild;if(null!==f)return Pm(u,f)}return a[7]}function Dv(o,a,l,u,f,g,v){for(;null!=l;){const w=u[l.index],T=l.type;if(v&&0===a&&(w&&Ar(bn(w),u),l.flags|=4),64!=(64&l.flags))if(8&T)Dv(o,a,l.child,u,f,g,!1),Mh(a,o,f,w,g);else if(32&T){const A=Ah(l,u);let R;for(;R=A();)Mh(a,o,f,R,g);Mh(a,o,f,w,g)}else 16&T?Sv(o,a,u,l,f,g):Mh(a,o,f,w,g);l=v?l.projectionNext:l.next}}function Cp(o,a,l,u,f,g){Dv(l,u,o.firstChild,a,f,g,!1)}function Sv(o,a,l,u,f,g){const v=l[16],T=v[6].projection[u.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)Mh(a,o,f,T[A],g);else Dv(o,a,T,v[3],f,g,!0)}function Ip(o,a,l){Sn(o)?o.setAttribute(a,"style",l):a.style.cssText=l}function Lm(o,a,l){Sn(o)?""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l):a.className=l}function Ma(o,a,l){let u=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===u||o.charCodeAt(f+g)<=32)return f}l=f+1}}const WE="ng-template";function Av(o,a,l){let u=0;for(;u<o.length;){let f=o[u++];if(l&&"class"===f){if(f=o[u],-1!==Ma(f.toLowerCase(),a,0))return!0}else if(1===f){for(;u<o.length&&"string"==typeof(f=o[u++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Oh(o){return 4===o.type&&o.value!==WE}function KE(o,a,l){return a===(4!==o.type||l?o.value:WE)}function Mv(o,a,l){let u=4;const f=o.attrs||[],g=function kS(o){for(let a=0;a<o.length;a++)if(Vu(o[a]))return a;return o.length}(f);let v=!1;for(let w=0;w<a.length;w++){const T=a[w];if("number"!=typeof T){if(!v)if(4&u){if(u=2|1&u,""!==T&&!KE(o,T,l)||""===T&&1===a.length){if(Ps(u))return!1;v=!0}}else{const A=8&u?T:a[++w];if(8&u&&null!==o.attrs){if(!Av(o.attrs,A,l)){if(Ps(u))return!1;v=!0}continue}const V=ZE(8&u?"class":T,f,Oh(o),l);if(-1===V){if(Ps(u))return!1;v=!0;continue}if(""!==A){let G;G=V>g?"":f[V+1].toLowerCase();const ee=8&u?G:null;if(ee&&-1!==Ma(ee,A,0)||2&u&&A!==G){if(Ps(u))return!1;v=!0}}}}else{if(!v&&!Ps(u)&&!Ps(T))return!1;if(v&&Ps(T))continue;v=!1,u=T|1&u}}return Ps(u)||v}function Ps(o){return 0==(1&o)}function ZE(o,a,l,u){if(null===a)return-1;let f=0;if(u||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=a[++f];for(;"string"==typeof w;)w=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function YE(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const u=o[l];if("number"==typeof u)return-1;if(u===a)return l;l++}return-1}(a,o)}function Vm(o,a,l=!1){for(let u=0;u<a.length;u++)if(Mv(o,a[u],l))return!0;return!1}function Tp(o,a){e:for(let l=0;l<a.length;l++){const u=a[l];if(o.length===u.length){for(let f=0;f<o.length;f++)if(o[f]!==u[f])continue e;return!0}}return!1}function xv(o,a){return o?":not("+a.trim()+")":a}function QE(o){let a=o[0],l=1,u=2,f="",g=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&u){const w=o[++l];f+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?f+="."+v:4&u&&(f+=" "+v);else""!==f&&!Ps(v)&&(a+=xv(g,f),f=""),u=v,g=g||!Ps(u);l++}return""!==f&&(a+=xv(g,f)),a}const Nt={};function Dp(o){Ov(Bt(),Me(),qi()+o,jo())}function Ov(o,a,l,u){if(!u)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&Ou(a,g,l)}else{const g=o.preOrderHooks;null!==g&&Nu(a,g,0,l)}zs(l)}function xa(o,a){return o<<17|a<<2}function ko(o){return o>>17&32767}function Bm(o){return 2|o}function Ro(o){return(131068&o)>>2}function ls(o,a){return-131069&o|a<<2}function jm(o){return 1|o}function zv(o,a){const l=o.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const f=l[u],g=l[u+1];if(-1!==g){const v=o.data[g];ku(f),v.contentQueries(2,a[g],g)}}}function Fl(o,a,l,u,f,g,v,w,T,A){const R=a.blueprint.slice();return R[0]=f,R[2]=140|u,Ms(R),R[3]=R[15]=o,R[8]=l,R[10]=v||o&&o[10],R[11]=w||o&&o[11],R[12]=T||o&&o[12]||null,R[9]=A||o&&o[9]||null,R[6]=g,R[16]=2==a.type?o[16]:R,R}function Yt(o,a,l,u,f){let g=o.data[a];if(null===g)g=function Gv(o,a,l,u,f){const g=ba(),v=Su(),T=o.data[a]=function uC(o,a,l,u,f,g){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,u,f);return null===o.firstChild&&(o.firstChild=T),null!==g&&(v?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T)),T}(o,a,l,u,f),function Au(){return bt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=u,g.attrs=f;const v=function Bo(){const o=bt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Pr(g,!0),g}function mi(o,a,l,u){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(u),o.blueprint.push(u),o.data.push(null);return f}function ka(o,a,l){_l(a);try{const u=o.viewQuery;null!==u&&Qm(1,u,l);const f=o.template;null!==f&&lC(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&zv(o,a),o.staticViewQueries&&Qm(2,o.viewQuery,l);const g=o.components;null!==g&&function aC(o,a){for(let l=0;l<a.length;l++)HS(o,a[l])}(a,g)}catch(u){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),u}finally{a[2]&=-5,Ea()}}function Lh(o,a,l,u){const f=a[2];if(256==(256&f))return;_l(a);const g=jo();try{Ms(a),function pl(o){return bt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&lC(o,a,l,2,u);const v=3==(3&f);if(!g)if(v){const A=o.preOrderCheckHooks;null!==A&&Ou(a,A,null)}else{const A=o.preOrderHooks;null!==A&&Nu(a,A,0,null),yc(a,0)}if(function BS(o){for(let a=Xu(o);null!==a;a=Ju(a)){if(!a[2])continue;const l=a[9];for(let u=0;u<l.length;u++){const f=l[u],g=f[3];0==(1024&f[2])&&js(g,1),f[2]|=1024}}}(a),function US(o){for(let a=Xu(o);null!==a;a=Ju(a))for(let l=10;l<a.length;l++){const u=a[l],f=u[1];Co(u)&&Lh(f,u,f.template,u[8])}}(a),null!==o.contentQueries&&zv(o,a),!g)if(v){const A=o.contentCheckHooks;null!==A&&Ou(a,A)}else{const A=o.contentHooks;null!==A&&Nu(a,A,1),yc(a,1)}!function St(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const f=l[u];if(f<0)zs(~f);else{const g=f,v=l[++u],w=l[++u];Mu(v,g),w(2,a[g])}}}finally{zs(-1)}}(o,a);const w=o.components;null!==w&&function nd(o,a){for(let l=0;l<a.length;l++)jS(o,a[l])}(a,w);const T=o.viewQuery;if(null!==T&&Qm(2,T,u),!g)if(v){const A=o.viewCheckHooks;null!==A&&Ou(a,A)}else{const A=o.viewHooks;null!==A&&Nu(a,A,2),yc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),g||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,js(a[3],-1))}finally{Ea()}}function sr(o,a,l,u){const f=a[10],g=!jo(),v=Uo(a);try{g&&!v&&f.begin&&f.begin(),v&&ka(o,a,u),Lh(o,a,l,u)}finally{g&&!v&&f.end&&f.end()}}function lC(o,a,l,u,f){const g=qi(),v=2&u;try{zs(-1),v&&a.length>20&&Ov(o,a,20,jo()),l(u,f)}finally{zs(g)}}function ni(o,a,l){!hl()||(function qm(o,a,l,u){const f=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||ss(l,a),Ar(u,a);const v=l.initialInputs;for(let w=f;w<g;w++){const T=o.data[w],A=Ss(T);A&&LS(a,l,T);const R=pi(a,o,w,l);Ar(R,a),null!==v&&VS(0,w-f,R,T,0,v),A&&($i(l.index,a)[8]=R)}}(o,a,l,Ei(l,a)),128==(128&l.flags)&&function Rp(o,a,l){const u=l.directiveStart,f=l.directiveEnd,v=l.index,w=function _c(){return bt.lFrame.currentDirectiveIndex}();try{zs(v);for(let T=u;T<f;T++){const A=o.data[T],R=a[T];gl(T),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&kr(A,R)}}finally{zs(-1),gl(w)}}(o,a,l))}function Vl(o,a,l=Ei){const u=a.localNames;if(null!==u){let f=a.index+1;for(let g=0;g<u.length;g+=2){const v=u[g+1],w=-1===v?l(a,o):o[v];o[f++]=w}}}function Gm(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Ap(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Ap(o,a,l,u,f,g,v,w,T,A){const R=20+u,V=R+f,G=function Mp(o,a){const l=[];for(let u=0;u<a;u++)l.push(u<o?null:Nt);return l}(R,V),ee="function"==typeof A?A():A;return G[1]={type:o,blueprint:G,template:l,queries:null,viewQuery:w,declTNode:a,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:ee,incompleteFirstPass:!1}}function Uh(o,a,l,u){const f=Pp(a);null===l?f.push(u):(f.push(l),o.firstCreatePass&&Jm(o).push(u,f.length-1))}function rt(o,a,l){for(let u in o)if(o.hasOwnProperty(u)){const f=o[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(a,f):l[u]=[a,f]}return l}function _i(o,a,l,u,f,g,v,w){const T=Ei(a,l);let R,A=a.inputs;!w&&null!=A&&(R=A[u])?(sd(o,l,R,u,f),Wd(a)&&function xp(o,a){const l=$i(a,o);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(u=function id(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(u),f=null!=v?v(f,a.value||"",u):f,Sn(g)?g.setProperty(T,u,f):rh(u)||(T.setProperty?T.setProperty(u,f):T[u]=f))}function jh(o,a,l,u){let f=!1;if(hl()){const g=function hC(o,a,l){const u=o.directiveRegistry;let f=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];Vm(l,v.selectors,!1)&&(f||(f=[]),ur(ss(l,a),o,v.type),Ss(v)?(ii(o,l),f.unshift(v)):f.push(v))}return f}(o,a,l),v=null===u?null:{"":-1};if(null!==g){f=!0,Hh(l,o.data.length,g.length);for(let R=0;R<g.length;R++){const V=g[R];V.providersResolver&&V.providersResolver(V)}let w=!1,T=!1,A=mi(o,a,g.length,null);for(let R=0;R<g.length;R++){const V=g[R];l.mergedAttrs=Er(l.mergedAttrs,V.hostAttrs),Op(o,l,a,A,V),Wm(A,V,v),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const G=V.type.prototype;!w&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),w=!0),!T&&(G.ngOnChanges||G.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),T=!0),A++}!function PS(o,a){const u=a.directiveEnd,f=o.data,g=a.attrs,v=[];let w=null,T=null;for(let A=a.directiveStart;A<u;A++){const R=f[A],V=R.inputs,G=null===g||Oh(a)?null:Km(V,g);v.push(G),w=rt(V,A,w),T=rt(R.outputs,A,T)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=w,a.outputs=T}(o,l)}v&&function Kv(o,a,l){if(a){const u=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new Fe(-301,!1);u.push(a[f],g)}}}(l,u,v)}return l.mergedAttrs=Er(l.mergedAttrs,l.attrs),f}function Wv(o,a,l,u,f,g){const v=g.hostBindings;if(v){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const T=~a.index;(function dC(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(w)!=T&&w.push(T),w.push(u,f,v)}}function kr(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function ii(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Wm(o,a,l){if(l){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)l[a.exportAs[u]]=o;Ss(a)&&(l[""]=o)}}function Hh(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function Op(o,a,l,u,f){o.data[u]=f;const g=f.factory||(f.factory=ts(f.type)),v=new vc(g,Ss(f),null);o.blueprint[u]=v,l[u]=v,Wv(o,a,0,u,mi(o,l,f.hostVars,Nt),f)}function LS(o,a,l){const u=Ei(a,o),f=Gm(l),g=o[10],v=Ym(o,Fl(o,f,null,l.onPush?64:16,u,a,g,g.createRenderer(u,l),null,null));o[a.index]=v}function Jo(o,a,l,u,f,g){const v=Ei(o,a);!function rd(o,a,l,u,f,g,v){if(null==g)Sn(o)?o.removeAttribute(a,f,l):a.removeAttribute(f);else{const w=null==v?Y(g):v(g,u||"",f);Sn(o)?o.setAttribute(a,f,w,l):l?a.setAttributeNS(l,f,w):a.setAttribute(f,w)}}(a[11],v,g,o.value,l,u,f)}function VS(o,a,l,u,f,g){const v=g[a];if(null!==v){const w=u.setInput;for(let T=0;T<v.length;){const A=v[T++],R=v[T++],V=v[T++];null!==w?u.setInput(l,V,A,R):l[R]=V}}}function Km(o,a){let l=null,u=0;for(;u<a.length;){const f=a[u];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[u+1])),u+=2}else u+=2;else u+=4}return l}function zr(o,a,l,u){return new Array(o,!0,!1,a,null,0,u,l,null,null)}function jS(o,a){const l=$i(a,o);if(Co(l)){const u=l[1];80&l[2]?Lh(u,l,u.template,l[8]):l[5]>0&&Zm(l)}}function Zm(o){for(let u=Xu(o);null!==u;u=Ju(u))for(let f=10;f<u.length;f++){const g=u[f];if(1024&g[2]){const v=g[1];Lh(v,g,v.template,g[8])}else g[5]>0&&Zm(g)}const l=o[1].components;if(null!==l)for(let u=0;u<l.length;u++){const f=$i(l[u],o);Co(f)&&f[5]>0&&Zm(f)}}function HS(o,a){const l=$i(a,o),u=l[1];(function zS(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(u,l),ka(u,l,l[8])}function Ym(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Yv(o){for(;o;){o[2]|=64;const a=Nc(o);if(yu(o)&&!a)return o;o=a}return null}function Qv(o,a,l){const u=a[10];u.begin&&u.begin();try{Lh(o,a,o.template,l)}catch(f){throw t_(a,f),f}finally{u.end&&u.end()}}function Xv(o){!function Bc(o){for(let a=0;a<o.components.length;a++){const l=o.components[a],u=wm(l),f=u[1];sr(f,u,f.template,l)}}(o[8])}function Qm(o,a,l){ku(0),a(o,l)}const Xm=(()=>Promise.resolve(null))();function Pp(o){return o[7]||(o[7]=[])}function Jm(o){return o.cleanup||(o.cleanup=[])}function e_(o,a,l){return(null===o||Ss(o))&&(l=function ul(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(l[a.index])),l[11]}function t_(o,a){const l=o[9],u=l?l.get(xc,null):null;u&&u.handleError(a)}function sd(o,a,l,u,f){for(let g=0;g<l.length;){const v=l[g++],w=l[g++],T=a[v],A=o.data[v];null!==A.setInput?A.setInput(T,f,u,w):T[w]=f}}function Yi(o,a,l){const u=Eo(a,o);!function FE(o,a,l){Sn(o)?o.setValue(a,l):a.textContent=l}(o[11],u,l)}function Fp(o,a,l){let u=l?o.styles:null,f=l?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?g=w:1==g?f=ve(f,w):2==g&&(u=ve(u,w+": "+a[++v]+";"))}l?o.styles=u:o.stylesWithoutHost=u,l?o.classes=f:o.classesWithoutHost=f}const Vp=new Rn("INJECTOR",-1);class Jv{get(a,l=Os){if(l===Os){const u=new Error(`NullInjectorError: No provider for ${ue(a)}!`);throw u.name="NullInjectorError",u}return l}}const eb=new Rn("Set Injector scope."),Gh={},mC={};let n_;function Up(){return void 0===n_&&(n_=new Jv),n_}function _C(o,a=null,l=null,u){const f=yC(o,a,l,u);return f._resolveInjectorDefTypes(),f}function yC(o,a=null,l=null,u){return new vC(o,l,a||Up(),u)}class vC{constructor(a,l,u,f=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&os(l,w=>this.processProvider(w,a,l)),os([a],w=>this.processInjectorType(w,[],g)),this.records.set(Vp,ad(void 0,this));const v=this.records.get(eb);this.scope=null!=v?v.value:null,this.source=f||("object"==typeof a?null:ue(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=Os,u=vt.Default){this.assertNotDestroyed();const f=le(this),g=tn(void 0);try{if(!(u&vt.SkipSelf)){let w=this.records.get(a);if(void 0===w){const T=function i_(o){return"function"==typeof o||"object"==typeof o&&o instanceof Rn}(a)&&On(a);w=T&&this.injectableDefInScope(T)?ad(jc(a),Gh):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(u&vt.Self?Up():this.parent).get(a,l=u&vt.Optional&&l===Os?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Ml]=v[Ml]||[]).unshift(ue(a)),f)throw v;return function Kt(o,a,l,u){const f=o[Ml];throw a[M]&&f.unshift(a[M]),o.message=function Tr(o,a,l,u=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=ue(a);if(Array.isArray(a))f=a.map(ue).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):ue(w)))}f=`{${g.join(", ")}}`}return`${l}${u?"("+u+")":""}[${f}]: ${o.replace(C,"\n  ")}`}("\n"+o.message,f,l,u),o.ngTokenPath=f,o[Ml]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{tn(g),le(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((u,f)=>a.push(ue(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(a,l,u){if(!(a=ne(a)))return!1;let f=ws(a);const g=null==f&&a.ngModule||void 0,v=void 0===g?a:g,w=-1!==u.indexOf(v);if(void 0!==g&&(f=ws(g)),null==f)return!1;if(null!=f.imports&&!w){let R;u.push(v);try{os(f.imports,V=>{this.processInjectorType(V,l,u)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:G,providers:ee}=R[V];os(ee,Te=>this.processProvider(Te,G,ee||H))}}this.injectorDefTypes.add(v);const T=ts(v)||(()=>new v);this.records.set(v,ad(T,Gh));const A=f.providers;if(null!=A&&!w){const R=a;os(A,V=>this.processProvider(V,R,A))}return void 0!==g&&void 0!==a.providers}processProvider(a,l,u){let f=Ra(a=ne(a))?a:ne(a&&a.provide);const g=function bC(o,a,l){return ld(o)?ad(void 0,o.useValue):ad(Hc(o),Gh)}(a);if(Ra(a)||!0!==a.multi)this.records.get(f);else{let v=this.records.get(f);v||(v=ad(void 0,Gh,!0),v.factory=()=>hn(v.multi),this.records.set(f,v)),f=a,v.multi.push(a)}this.records.set(f,g)}hydrate(a,l){return l.value===Gh&&(l.value=mC,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Qi(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=ne(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function jc(o){const a=On(o),l=null!==a?a.factory:ts(o);if(null!==l)return l;if(o instanceof Rn)throw new Fe(204,!1);if(o instanceof Function)return function od(o){const a=o.length;if(a>0)throw hr(a,"?"),new Fe(204,!1);const l=function ci(o){const a=o&&(o[Or]||o[Zn]);if(a){const l=function zi(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Fe(204,!1)}function Hc(o,a,l){let u;if(Ra(o)){const f=ne(o);return ts(f)||jc(f)}if(ld(o))u=()=>ne(o.useValue);else if(function EC(o){return!(!o||!o.useFactory)}(o))u=()=>o.useFactory(...hn(o.deps||[]));else if(function wC(o){return!(!o||!o.useExisting)}(o))u=()=>Be(ne(o.useExisting));else{const f=ne(o&&(o.useClass||o.provide));if(!function $S(o){return!!o.deps}(o))return ts(f)||jc(f);u=()=>new f(...hn(o.deps))}return u}function ad(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function ld(o){return null!==o&&"object"==typeof o&&B in o}function Ra(o){return"function"==typeof o}let cs=(()=>{class o{static create(l,u){var f;if(Array.isArray(l))return _C({name:""},u,l,"");{const g=null!==(f=l.name)&&void 0!==f?f:"";return _C({name:g},l.parent,l.providers,g)}}}return o.THROW_IF_NOT_FOUND=Os,o.NULL=new Jv,o.\u0275prov=cn({token:o,providedIn:"any",factory:()=>Be(Vp)}),o.__NG_ELEMENT_ID__=-1,o})();function KS(o,a){vl(wm(o)[1],Nn())}function sb(o){let a=function En(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const u=[o];for(;a;){let f;if(Ss(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Fe(903,"");f=a.\u0275dir}if(f){if(l){u.push(f);const v=o;v.inputs=ud(o.inputs),v.declaredInputs=ud(o.declaredInputs),v.outputs=ud(o.outputs);const w=f.hostBindings;w&&SC(o,w);const T=f.viewQuery,A=f.contentQueries;if(T&&zp(o,T),A&&u_(o,A),se(o.inputs,f.inputs),se(o.declaredInputs,f.declaredInputs),se(o.outputs,f.outputs),Ss(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(o),w===sb&&(l=!1)}}a=Object.getPrototypeOf(a)}!function c_(o){let a=0,l=null;for(let u=o.length-1;u>=0;u--){const f=o[u];f.hostVars=a+=f.hostVars,f.hostAttrs=Er(f.hostAttrs,l=Er(l,f.hostAttrs))}}(u)}function ud(o){return o===kn?{}:o===H?[]:o}function zp(o,a){const l=o.viewQuery;o.viewQuery=l?(u,f)=>{a(u,f),l(u,f)}:a}function u_(o,a){const l=o.contentQueries;o.contentQueries=l?(u,f,g)=>{a(u,f,g),l(u,f,g)}:a}function SC(o,a){const l=o.hostBindings;o.hostBindings=l?(u,f)=>{a(u,f),l(u,f)}:a}let Gp=null;function dd(){if(!Gp){const o=$t.Symbol;if(o&&o.iterator)Gp=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const u=a[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Gp=u)}}}return Gp}function $p(o){return!!d_(o)&&(Array.isArray(o)||!(o instanceof Map)&&dd()in o)}function d_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function gr(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Wp(o,a,l,u){const f=Me();return gr(f,Io(),a)&&(Bt(),Jo(Gn(),f,o,a,l,u)),Wp}function Na(o,a,l,u){return gr(o,Io(),l)?a+Y(l)+u:Nt}function NC(o,a,l,u,f,g,v,w){const T=Me(),A=Bt(),R=o+20,V=A.firstCreatePass?function Wh(o,a,l,u,f,g,v,w,T){const A=a.consts,R=Yt(a,o,4,v||null,is(A,w));jh(a,l,R,is(A,T)),vl(a,R);const V=R.tViews=Ap(2,R,u,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,R),V.queries=a.queries.embeddedTView(R)),R}(R,A,T,a,l,u,f,g,v):A.data[R];Pr(V,!1);const G=T[11].createComment("");Lc(A,T,G,V),Ar(G,T),Ym(T,T[R]=zr(G,T,G,V)),Ds(V)&&ni(A,T,V),null!=v&&Vl(T,V,w)}function PC(o){return As(function nh(){return bt.lFrame.contextLView}(),20+o)}function _d(o,a=vt.Default){const l=Me();return null===l?Be(o,a):bc(Nn(),l,ne(o),a)}function f_(){throw new Error("invalid")}function Qp(o,a,l){const u=Me();return gr(u,Io(),a)&&_i(Bt(),Gn(),u,o,a,u[11],l,!1),Qp}function La(o,a,l,u,f){const v=f?"class":"style";sd(o,l,a.inputs[v],v,u)}function Xp(o,a,l,u){const f=Me(),g=Bt(),v=20+o,w=f[11],T=f[v]=ed(w,a,function yl(){return bt.lFrame.currentNamespace}()),A=g.firstCreatePass?function GC(o,a,l,u,f,g,v){const w=a.consts,A=Yt(a,o,2,f,is(w,g));return jh(a,l,A,is(w,v)),null!==A.attrs&&Fp(A,A.attrs,!1),null!==A.mergedAttrs&&Fp(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,g,f,0,a,l,u):g.data[v];Pr(A,!0);const R=A.mergedAttrs;null!==R&&Ci(w,T,R);const V=A.classes;null!==V&&Lm(w,T,V);const G=A.styles;return null!==G&&Ip(w,T,G),64!=(64&A.flags)&&Lc(g,f,T,A),0===function th(){return bt.lFrame.elementDepthCount}()&&Ar(T,f),function pc(){bt.lFrame.elementDepthCount++}(),Ds(A)&&(ni(g,f,A),function Ll(o,a,l){if(ac(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}(g,A,f)),null!==u&&Vl(f,A),Xp}function Jp(){let o=Nn();Su()?fl():(o=o.parent,Pr(o,!1));const a=o;!function Cu(){bt.lFrame.elementDepthCount--}();const l=Bt();return l.firstCreatePass&&(vl(l,o),ac(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function ih(o){return 0!=(16&o.flags)}(a)&&La(l,a,Me(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function iv(o){return 0!=(32&o.flags)}(a)&&La(l,a,Me(),a.stylesWithoutHost,!1),Jp}function eg(o,a,l,u){return Xp(o,a,l,u),Jp(),eg}function pb(){return Me()}function tg(o){return!!o&&"function"==typeof o.then}function p_(o){return!!o&&"function"==typeof o.subscribe}const gb=p_;function mb(o,a,l,u){const f=Me(),g=Bt(),v=Nn();return m_(g,f,f[11],v,o,a,!!l,u),mb}function g_(o,a){const l=Nn(),u=Me(),f=Bt();return m_(f,u,e_(wa(f.data),l,u),l,o,a,!1),g_}function m_(o,a,l,u,f,g,v,w){const T=Ds(u),R=o.firstCreatePass&&Jm(o),V=a[8],G=Pp(a);let ee=!0;if(3&u.type||w){const We=Ei(u,a),at=w?w(We):We,ke=G.length,wt=w?Qt=>w(bn(Qt[u.index])):u.index;if(Sn(l)){let Qt=null;if(!w&&T&&(Qt=function qC(o,a,l,u){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===u){const w=a[7],T=f[g+2];return w.length>T?w[T]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,u.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=g,Qt.__ngLastListenerFn__=g,ee=!1;else{g=Qh(u,a,V,g,!1);const Mn=l.listen(at,f,g);G.push(g,Mn),R&&R.push(f,wt,ke,ke+1)}}else g=Qh(u,a,V,g,!0),at.addEventListener(f,g,v),G.push(g),R&&R.push(f,wt,ke,v)}else g=Qh(u,a,V,g,!1);const Te=u.outputs;let je;if(ee&&null!==Te&&(je=Te[f])){const We=je.length;if(We)for(let at=0;at<We;at+=2){const ro=a[je[at]][je[at+1]].subscribe(g),Ga=G.length;G.push(g,ro),R&&R.push(f,u.index,Ga,-(Ga+1))}}}function Yh(o,a,l,u){try{return!1!==l(u)}catch(f){return t_(o,f),!1}}function Qh(o,a,l,u,f){return function g(v){if(v===Function)return u;const w=2&o.flags?$i(o.index,a):a;0==(32&a[2])&&Yv(w);let T=Yh(a,0,u,v),A=g.__ngNextListenerFn__;for(;A;)T=Yh(a,0,A,v)&&T,A=A.__ngNextListenerFn__;return f&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function WC(o=1){return function xs(o){return(bt.lFrame.contextLView=function Xf(o,a){for(;o>0;)a=a[15],o--;return a}(o,bt.lFrame.contextLView))[8]}(o)}function KC(o,a){let l=null;const u=function Um(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===u?Vm(o,g,!0):Tp(u,g))return f}else l=f}return l}function ZC(o){const a=Me()[16][6];if(!a.projection){const u=a.projection=hr(o?o.length:1,null),f=u.slice();let g=a.child;for(;null!==g;){const v=o?KC(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:u[v]=g,f[v]=g),g=g.next}}}function YC(o,a=0,l){const u=Me(),f=Bt(),g=Yt(f,20+o,16,null,l||null);null===g.projection&&(g.projection=a),fl(),64!=(64&g.flags)&&function MS(o,a,l){Sv(a[11],0,a,l,Mm(o,l,a),kh(l.parent||a[6],l,a))}(f,u,g)}function _b(o,a,l){return __(o,"",a,"",l),_b}function __(o,a,l,u,f){const g=Me(),v=Na(g,a,l,u);return v!==Nt&&_i(Bt(),Gn(),g,o,v,g[11],f,!1),__}function us(o,a,l,u,f){const g=o[l+1],v=null===a;let w=u?ko(g):Ro(g),T=!1;for(;0!==w&&(!1===T||v);){const R=o[w+1];eI(o[w],a)&&(T=!0,o[w+1]=u?jm(R):Bm(R)),w=u?ko(R):Ro(R)}T&&(o[l+1]=u?Bm(g):jm(g))}function eI(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&$n(o,a)>=0}function Cb(o,a,l){return ra(o,a,l,!1),Cb}function Ib(o,a){return ra(o,a,null,!0),Ib}function ra(o,a,l,u){const f=Me(),g=Bt(),v=function rs(o){const a=bt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}(2);g.firstUpdatePass&&function zl(o,a,l,u){const f=o.data;if(null===f[l+1]){const g=f[qi()],v=function Tb(o,a){return a>=o.expandoStartIndex}(o,l);(function Sb(o,a){return 0!=(o.flags&(a?16:32))})(g,u)&&null===a&&!v&&(a=!1),a=function I_(o,a,l,u){const f=wa(o);let g=u?a.residualClasses:a.residualStyles;if(null===f)0===(u?a.classBindings:a.styleBindings)&&(l=Gl(l=ig(null,o,a,l,u),a.attrs,u),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(l=ig(f,o,a,l,u),null===g){let T=function tA(o,a,l){const u=l?a.classBindings:a.styleBindings;if(0!==Ro(u))return o[ko(u)]}(o,a,u);void 0!==T&&Array.isArray(T)&&(T=ig(null,o,a,T[1],u),T=Gl(T,a.attrs,u),function sI(o,a,l,u){o[ko(l?a.classBindings:a.styleBindings)]=u}(o,a,u,T))}else g=function Db(o,a,l){let u;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)u=Gl(u,o[g].hostAttrs,l);return Gl(u,a.attrs,l)}(o,a,u)}return void 0!==g&&(u?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,u),function w_(o,a,l,u,f,g){let v=g?a.classBindings:a.styleBindings,w=ko(v),T=Ro(v);o[u]=l;let R,A=!1;if(Array.isArray(l)){const V=l;R=V[1],(null===R||$n(V,R)>0)&&(A=!0)}else R=l;if(f)if(0!==T){const G=ko(o[w+1]);o[u+1]=xa(G,w),0!==G&&(o[G+1]=ls(o[G+1],u)),o[w+1]=function XE(o,a){return 131071&o|a<<17}(o[w+1],u)}else o[u+1]=xa(w,0),0!==w&&(o[w+1]=ls(o[w+1],u)),w=u;else o[u+1]=xa(T,0),0===w?w=u:o[T+1]=ls(o[T+1],u),T=u;A&&(o[u+1]=Bm(o[u+1])),us(o,R,u,!0),us(o,R,u,!1),function JC(o,a,l,u,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&$n(g,a)>=0&&(l[u+1]=jm(l[u+1]))}(a,R,o,u,g),v=xa(w,T),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,u)}}(g,o,v,u),a!==Nt&&gr(f,v,a)&&function oI(o,a,l,u,f,g,v,w){if(!(3&a.type))return;const T=o.data,A=T[w+1];rg(function Fv(o){return 1==(1&o)}(A)?S_(T,a,l,f,Ro(A),v):void 0)||(rg(g)||function Pv(o){return 2==(2&o)}(A)&&(g=S_(T,null,l,f,w,v)),function qE(o,a,l,u,f){const g=Sn(o);if(a)f?g?o.addClass(l,u):l.classList.add(u):g?o.removeClass(l,u):l.classList.remove(u);else{let v=-1===u.indexOf("-")?void 0:Zs.DashCase;if(null==f)g?o.removeStyle(l,u,v):l.style.removeProperty(u);else{const w="string"==typeof f&&f.endsWith("!important");w&&(f=f.slice(0,-10),v|=Zs.Important),g?o.setStyle(l,u,f,v):l.style.setProperty(u,f,w?"important":"")}}}(u,v,Eo(qi(),l),f,g))}(g,g.data[qi()],f,f[11],o,f[v+1]=function iA(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ue(as(o)))),o}(a,l),u,v)}function ig(o,a,l,u,f){let g=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(g=a[w],u=Gl(u,g.hostAttrs,f),g!==o);)w++;return null!==o&&(l.directiveStylingLast=w),u}function Gl(o,a,l){const u=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===u&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Ur(o,v,!!l||a[++g]))}return void 0===o?null:o}function S_(o,a,l,u,f,g){const v=null===a;let w;for(;f>0;){const T=o[f],A=Array.isArray(T),R=A?T[1]:T,V=null===R;let G=l[f+1];G===Nt&&(G=V?H:void 0);let ee=V?N(G,u):R===u?G:void 0;if(A&&!rg(ee)&&(ee=N(T,u)),rg(ee)&&(w=ee,v))return w;const Te=o[f+1];f=v?ko(Te):Ro(Te)}if(null!==a){let T=g?a.residualClasses:a.residualStyles;null!=T&&(w=N(T,u))}return w}function rg(o){return void 0!==o}function Ab(o,a=""){const l=Me(),u=Bt(),f=o+20,g=u.firstCreatePass?Yt(u,f,1,a,null):u.data[f],v=l[f]=function Cv(o,a){return Sn(o)?o.createText(a):o.createTextNode(a)}(l[11],a);Lc(u,l,v,g),Pr(g,!1)}function sg(o){return Mb("",o,""),sg}function Mb(o,a,l){const u=Me(),f=Na(u,o,a,l);return f!==Nt&&Yi(u,qi(),f),Mb}function N_(o,a,l){const u=Me();if(gr(u,Io(),a)){const g=Bt(),v=Gn();_i(g,v,u,o,a,e_(wa(g.data),v,u),l,!0)}return N_}const Ed=void 0;var gA=["en",[["a","p"],["AM","PM"],Ed],[["AM","PM"],Ed,Ed],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ed,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ed,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ed,"{1} 'at' {0}",Ed],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dI(o){const l=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let ef={};function P_(o){const a=function _A(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=F_(a);if(l)return l;const u=a.split("-")[0];if(l=F_(u),l)return l;if("en"===u)return gA;throw new Error(`Missing locale data for the locale "${o}".`)}function tf(o){return P_(o)[It.PluralCase]}function F_(o){return o in ef||(ef[o]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[o]),ef[o]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const L_="en-US";let rf=L_;function K_(o,a,l,u,f){if(o=ne(o),Array.isArray(o))for(let g=0;g<o.length;g++)K_(o[g],a,l,u,f);else{const g=Bt(),v=Me();let w=Ra(o)?o:ne(o.provide),T=Hc(o);const A=Nn(),R=1048575&A.providerIndexes,V=A.directiveStart,G=A.providerIndexes>>20;if(Ra(o)||!o.multi){const ee=new vc(T,f,_d),Te=pg(w,a,f?R:R+G,V);-1===Te?(ur(ss(A,v),g,w),fg(g,o,a.length),a.push(w),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(ee),v.push(ee)):(l[Te]=ee,v[Te]=ee)}else{const ee=pg(w,a,R+G,V),Te=pg(w,a,R,R+G),je=ee>=0&&l[ee],We=Te>=0&&l[Te];if(f&&!We||!f&&!je){ur(ss(A,v),g,w);const at=function uw(o,a,l,u,f){const g=new vc(o,l,_d);return g.multi=[],g.index=a,g.componentProviders=0,kI(g,f,u&&!l),g}(f?lw:Kl,l.length,f,u,T);!f&&We&&(l[Te].providerFactory=at),fg(g,o,a.length,0),a.push(w),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(at),v.push(at)}else fg(g,o,ee>-1?ee:Te,kI(l[f?Te:ee],T,!f&&u));!f&&u&&We&&l[Te].componentProviders++}}}function fg(o,a,l,u){const f=Ra(a),g=function GS(o){return!!o.useClass}(a);if(f||g){const T=(g?ne(a.useClass):a).prototype.ngOnDestroy;if(T){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=A.indexOf(l);-1===R?A.push(l,[u,T]):A[R+1].push(u,T)}else A.push(l,T)}}}function kI(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function pg(o,a,l,u){for(let f=l;f<u;f++)if(a[f]===o)return f;return-1}function Kl(o,a,l,u){return cw(this.multi,[])}function lw(o,a,l,u){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=pi(l,l[1],this.providerFactory.index,u);g=w.slice(0,v),cw(f,g);for(let T=v;T<w.length;T++)g.push(w[T])}else g=[],cw(f,g);return g}function cw(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function RI(o,a=[]){return l=>{l.providersResolver=(u,f)=>function df(o,a,l){const u=Bt();if(u.firstCreatePass){const f=Ss(o);K_(l,u.data,u.blueprint,f,!0),K_(a,u.data,u.blueprint,f,!1)}}(u,f?f(o):o,a)}}class Z_{}class dw{resolveComponentFactory(a){throw function LA(o){const a=Error(`No component factory found for ${ue(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let gg=(()=>{class o{}return o.NULL=new dw,o})();function hw(){return Td(Nn(),Me())}function Td(o,a){return new Dd(Ei(o,a))}let Dd=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=hw,o})();function OI(o){return o instanceof Dd?o.nativeElement:o}class NI{}let fw=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function pw(){const o=Me(),l=$i(Nn().index,o);return function VA(o){return o[11]}(br(l)?l:o)}(),o})(),gw=(()=>{class o{}return o.\u0275prov=cn({token:o,providedIn:"root",factory:()=>null}),o})();class Q_{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const PI=new Q_("13.2.3"),X_={};function mg(o,a,l,u,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&u.push(bn(g)),Ts(g))for(let w=10;w<g.length;w++){const T=g[w],A=T[1].firstChild;null!==A&&mg(T[1],T,A,u)}const v=l.type;if(8&v)mg(o,a,l.child,u);else if(32&v){const w=Ah(l,a);let T;for(;T=w();)u.push(T)}else if(16&v){const w=Li(a,l);if(Array.isArray(w))u.push(...w);else{const T=Nc(a[16]);mg(T[1],T,w,u,!0)}}l=f?l.projectionNext:l.next}return u}class _g{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return mg(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Ts(a)){const l=a[8],u=l?l.indexOf(this):-1;u>-1&&(Sm(a,u),Ic(l,u))}this._attachedToViewContainer=!1}jE(this._lView[1],this._lView)}onDestroy(a){Uh(this._lView[1],this._lView,null,a)}markForCheck(){Yv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Qv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function fC(o,a,l){gc(!0);try{Qv(o,a,l)}finally{gc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function VE(o,a){Cp(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=a}}class mw extends _g{constructor(a){super(a),this._view=a}detectChanges(){Xv(this._view)}checkNoChanges(){!function Ul(o){gc(!0);try{Xv(o)}finally{gc(!1)}}(this._view)}get context(){return null}}class _w extends gg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=dt(a);return new yw(l,this.ngModule)}}function yg(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}const BA=new Rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Dm});class yw extends Z_{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function kv(o){return o.map(QE).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return yg(this.componentDef.inputs)}get outputs(){return yg(this.componentDef.outputs)}create(a,l,u,f){const g=(f=f||this.ngModule)?function jA(o,a){return{get:(l,u,f)=>{const g=o.get(l,X_,f);return g!==X_||u===X_?g:a.get(l,u,f)}}}(a,f.injector):a,v=g.get(NI,ya),w=g.get(gw,null),T=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=u?function Uc(o,a,l){if(Sn(o))return o.selectRootElement(a,l===Mt.ShadowDom);let u="string"==typeof a?o.querySelector(a):a;return u.textContent="",u}(T,u,this.componentDef.encapsulation):ed(v.createRenderer(null,this.componentDef),A,function UA(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(A)),V=this.componentDef.onPush?576:528,G=function l_(o,a){return{components:[],scheduler:o||Dm,clean:Xm,playerHandler:a||null,flags:0}}(),ee=Ap(0,null,null,1,0,null,null,null,null,null),Te=Fl(null,ee,G,V,null,null,v,T,w,g);let je,We;_l(Te);try{const at=function Ys(o,a,l,u,f,g){const v=l[1];l[20]=o;const T=Yt(v,20,2,"#host",null),A=T.mergedAttrs=a.hostAttrs;null!==A&&(Fp(T,A,!0),null!==o&&(Ci(f,o,A),null!==T.classes&&Lm(f,o,T.classes),null!==T.styles&&Ip(f,o,T.styles)));const R=u.createRenderer(o,a),V=Fl(l,Gm(a),null,a.onPush?64:16,l[20],T,u,R,g||null,null);return v.firstCreatePass&&(ur(ss(T,l),v,a.type),ii(v,T),Hh(T,l.length,1)),Ym(l,V),l[20]=V}(R,this.componentDef,Te,v,T);if(R)if(u)Ci(T,R,["ng-version",PI.full]);else{const{attrs:ke,classes:wt}=function Rv(o){const a=[],l=[];let u=1,f=2;for(;u<o.length;){let g=o[u];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++u]):8===f&&l.push(g);else{if(!Ps(f))break;f=g}u++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);ke&&Ci(T,R,ke),wt&&wt.length>0&&Lm(T,R,wt.join(" "))}if(We=Jn(ee,20),void 0!==l){const ke=We.projection=[];for(let wt=0;wt<this.ngContentSelectors.length;wt++){const Qt=l[wt];ke.push(null!=Qt?Array.from(Qt):null)}}je=function DC(o,a,l,u,f){const g=l[1],v=function qv(o,a,l){const u=Nn();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Op(o,u,a,mi(o,a,1,null),l));const f=pi(a,o,u.directiveStart,u);Ar(f,a);const g=Ei(u,a);return g&&Ar(g,a),f}(g,l,a);if(u.components.push(v),o[8]=v,f&&f.forEach(T=>T(v,a)),a.contentQueries){const T=Nn();a.contentQueries(1,v,T.directiveStart)}const w=Nn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(zs(w.index),Wv(l[1],w,0,w.directiveStart,w.directiveEnd,a),kr(a,v)),v}(at,this.componentDef,Te,G,[KS]),ka(ee,Te,null)}finally{Ea()}return new VI(this.componentType,je,Td(We,Te),Te,We)}}class VI extends class FA{}{constructor(a,l,u,f,g){super(),this.location=u,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new mw(f),this.componentType=a}get injector(){return new ks(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class nu{}class J_{}const Zl=new Map;class ty extends nu{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _w(this);const u=Lt(a);this._bootstrapComponents=Hr(u.bootstrap),this._r3Injector=yC(a,l,[{provide:nu,useValue:this},{provide:gg,useValue:this.componentFactoryResolver}],ue(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=cs.THROW_IF_NOT_FOUND,u=vt.Default){return a===cs||a===nu||a===Vp?this:this._r3Injector.get(a,l,u)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Ew extends J_{constructor(a){super(),this.moduleType=a,null!==Lt(a)&&function ww(o){const a=new Set;!function l(u){const f=Lt(u,!0),g=f.id;null!==g&&(function bw(o,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${o} - ${ue(a)} vs ${ue(a.name)}`)}(g,Zl.get(g),u),Zl.set(g,u));const v=Hr(f.imports);for(const w of v)a.has(w)||(a.add(w),l(w))}(o)}(a)}create(a){return new ty(this.moduleType,a)}}function Cw(o,a,l,u,f,g){const v=a+l;return gr(o,v,f)?function Oa(o,a,l){return o[a]=l}(o,v+1,g?u.call(g,f):u(f)):function Sd(o,a){const l=o[a];return l===Nt?void 0:l}(o,v+1)}function Dw(o,a){const l=Bt();let u;const f=o+20;l.firstCreatePass?(u=function zI(o,a){if(a)for(let l=a.length-1;l>=0;l--){const u=a[l];if(o===u.name)return u}}(a,l.pipeRegistry),l.data[f]=u,u.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,u.onDestroy)):u=l.data[f];const g=u.factory||(u.factory=ts(u.type)),v=tn(_d);try{const w=El(!1),T=g();return El(w),function XS(o,a,l,u){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),a[l]=u}(l,Me(),f,T),T}finally{tn(v)}}function hf(o,a,l){const u=o+20,f=Me(),g=As(f,u);return function ff(o,a){return o[1].data[a].pure}(f,u)?Cw(f,function ei(){const o=bt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),a,g.transform,l,g):g.transform(l)}function pf(o){return a=>{setTimeout(o,void 0,a)}}const oa=class QA extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,u){var f,g,v;let w=a,T=l||(()=>null),A=u;if(a&&"object"==typeof a){const V=a;w=null===(f=V.next)||void 0===f?void 0:f.bind(V),T=null===(g=V.error)||void 0===g?void 0:g.bind(V),A=null===(v=V.complete)||void 0===v?void 0:v.bind(V)}this.__isAsync&&(T=pf(T),w&&(w=pf(w)),A&&(A=pf(A)));const R=super.subscribe({next:w,error:T,complete:A});return a instanceof j.w0&&a.add(R),R}};function GI(){return this._results[dd()]()}class ny{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=dd(),u=ny.prototype;u[l]||(u[l]=GI)}get changes(){return this._changes||(this._changes=new oa)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const u=this;u.dirty=!1;const f=gi(a);(this._changesDetected=!function Dl(o,a,l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++){let f=o[u],g=a[u];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(u._results,f,l))&&(u._results=f,u.length=f.length,u.last=f[this.length-1],u.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ad=(()=>{class o{}return o.__NG_ELEMENT_ID__=oi,o})();const XA=Ad,JA=class extends XA{constructor(a,l,u){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(a){const l=this._declarationTContainer.tViews,u=Fl(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(u[19]=g.createEmbeddedView(l)),ka(l,u,a),new _g(u)}};function oi(){return Sw(Nn(),Me())}function Sw(o,a){return 4&o.type?new JA(a,o,Td(o,a)):null}let Aw=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ji,o})();function Ji(){return KI(Nn(),Me())}const $I=Aw,qI=class extends $I{constructor(a,l,u){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=u}get element(){return Td(this._hostTNode,this._hostLView)}get injector(){return new ks(this._hostTNode,this._hostLView)}get parentInjector(){const a=Fr(this._hostTNode,this._hostLView);if(gt(a)){const l=Ca(a,this._hostLView),u=An(a);return new ks(l[1].data[u+8],l)}return new ks(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=WI(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,u){const f=a.createEmbeddedView(l||{});return this.insert(f,u),f}createComponent(a,l,u,f,g){const v=a&&!function Tl(o){return"function"==typeof o}(a);let w;if(v)w=l;else{const V=l||{};w=V.index,u=V.injector,f=V.projectableNodes,g=V.ngModuleRef}const T=v?a:new yw(dt(a)),A=u||this.parentInjector;if(!g&&null==T.ngModule){const G=(v?A:this.parentInjector).get(nu,null);G&&(g=G)}const R=T.create(A,f,void 0,g);return this.insert(R.hostView,w),R}insert(a,l){const u=a._lView,f=u[1];if(function dl(o){return Ts(o[3])}(u)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const V=u[3],G=new qI(V,V[6],V[3]);G.detach(G.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function xh(o,a,l,u){const f=10+u,g=l.length;u>0&&(l[f-1][4]=a),u<g-10?(a[4]=l[f],Cc(l,10+u,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function SS(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(v,a);const w=a[19];null!==w&&w.insertView(o),a[2]|=128}(f,u,v,g);const w=Fm(g,v),T=u[11],A=km(T,v[7]);return null!==A&&function LE(o,a,l,u,f,g){u[0]=f,u[6]=a,Cp(o,u,l,1,f,g)}(f,v[6],T,u,A,w),a.attachToViewContainerRef(),Cc(iy(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=WI(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),u=Sm(this._lContainer,l);u&&(Ic(iy(this._lContainer),l),jE(u[1],u))}detach(a){const l=this._adjustIndex(a,-1),u=Sm(this._lContainer,l);return u&&null!=Ic(iy(this._lContainer),l)?new _g(u):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function WI(o){return o[8]}function iy(o){return o[8]||(o[8]=[])}function KI(o,a){let l;const u=a[o.index];if(Ts(u))l=u;else{let f;if(8&o.type)f=bn(u);else{const g=a[11];f=g.createComment("");const v=Ei(o,a);Fc(g,km(g,v),f,function Rm(o,a){return Sn(o)?o.nextSibling(a):a.nextSibling}(g,v),!1)}a[o.index]=l=zr(u,a,f,o),Ym(a,l)}return new qI(l,o,a)}class ZI{constructor(a){this.queryList=a,this.matches=null}clone(){return new ZI(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mw{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const u=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<u;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new Mw(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==oy(a,l).matches&&this.queries[l].setDirty()}}class YI{constructor(a,l,u=null){this.predicate=a,this.flags=l,this.read=u}}class ry{constructor(a=[]){this.queries=a}elementStart(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let u=0;u<this.length;u++){const f=null!==l?l.length:0,g=this.getByIndex(u).embeddedTView(a,f);g&&(g.indexInDeclarationView=u,null!==l?l.push(g):l=[g])}return null!==l?new ry(l):null}template(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class aa{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new aa(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let f=0;f<u.length;f++){const g=u[f];this.matchTNodeWithReadOption(a,l,uO(l,g)),this.matchTNodeWithReadOption(a,l,qo(l,a,g,!1,!1))}else u===Ad?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,qo(l,a,u,!1,!1))}matchTNodeWithReadOption(a,l,u){if(null!==u){const f=this.metadata.read;if(null!==f)if(f===Dd||f===Aw||f===Ad&&4&l.type)this.addMatch(l.index,-2);else{const g=qo(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,u)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function uO(o,a){const l=o.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===a)return l[u+1];return null}function Md(o,a,l,u){return-1===l?function ja(o,a){return 11&o.type?Td(o,a):4&o.type?Sw(o,a):null}(a,o):-2===l?function sy(o,a,l){return l===Dd?Td(a,o):l===Ad?Sw(a,o):l===Aw?KI(a,o):void 0}(o,a,u):pi(o,o[1],l,a)}function QI(o,a,l,u){const f=a[19].queries[u];if(null===f.matches){const g=o.data,v=l.matches,w=[];for(let T=0;T<v.length;T+=2){const A=v[T];w.push(A<0?null:Md(a,g[A],v[T+1],l.metadata.read))}f.matches=w}return f.matches}function xw(o,a,l,u){const f=o.queries.getByIndex(l),g=f.matches;if(null!==g){const v=QI(o,a,f,l);for(let w=0;w<g.length;w+=2){const T=g[w];if(T>0)u.push(v[w/2]);else{const A=g[w+1],R=a[-T];for(let V=10;V<R.length;V++){const G=R[V];G[17]===G[3]&&xw(G[1],G,A,u)}if(null!==R[9]){const V=R[9];for(let G=0;G<V.length;G++){const ee=V[G];xw(ee[1],ee,A,u)}}}}}return u}function kw(o){const a=Me(),l=Bt(),u=xu();ku(u+1);const f=oy(l,u);if(o.dirty&&Uo(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?xw(l,a,u,[]):QI(l,a,f,u);o.reset(g,OI),o.notifyOnChanges()}return!0}return!1}function Rw(o,a,l){const u=Bt();u.firstCreatePass&&(gf(u,new YI(o,a,l),-1),2==(2&a)&&(u.staticViewQueries=!0)),Eg(u,Me(),a)}function wg(o,a,l,u){const f=Bt();if(f.firstCreatePass){const g=Nn();gf(f,new YI(a,l,u),g.index),function JI(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}Eg(f,Me(),l)}function XI(){return function xd(o,a){return o[19].queries[a].queryList}(Me(),xu())}function Eg(o,a,l){const u=new ny(4==(4&l));Uh(o,a,u,u.destroy),null===a[19]&&(a[19]=new Mw),a[19].queries.push(new ZI(u))}function gf(o,a,l){null===o.queries&&(o.queries=new ry),o.queries.track(new aa(a,l))}function oy(o,a){return o.queries.getByIndex(a)}function hy(...o){}const fy=new Rn("Application Initializer");let Ef=(()=>{class o{constructor(l){this.appInits=l,this.resolve=hy,this.reject=hy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(tg(g))l.push(g);else if(gb(g)){const v=new Promise((w,T)=>{g.subscribe({complete:w,error:T})});l.push(v)}}Promise.all(l).then(()=>{u()}).catch(f=>{this.reject(f)}),0===l.length&&u(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(Be(fy,8))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();const aT=new Rn("AppId"),fM={provide:aT,useFactory:function lT(){return`${iu()}${iu()}${iu()}`},deps:[]};function iu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const py=new Rn("Platform Initializer"),cT=new Rn("Platform ID"),uT=new Rn("appBootstrapListener");let dT=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();const gy=new Rn("LocaleId"),hT=new Rn("DefaultCurrencyCode");class fT{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let qw=(()=>{class o{compileModuleSync(l){return new Ew(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),g=Hr(Lt(l).declarations).reduce((v,w)=>{const T=dt(w);return T&&v.push(new yw(T)),v},[]);return new fT(u,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();const gT=(()=>Promise.resolve(0))();function my(o){"undefined"==typeof Zone?gT.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class hs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oa(!1),this.onMicrotaskEmpty=new oa(!1),this.onStable=new oa(!1),this.onError=new oa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!u&&l,f.shouldCoalesceRunChangeDetection=u,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Ig(){let o=$t.requestAnimationFrame,a=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function _y(o){const a=()=>{!function mT(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call($t,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Kw(o),o.isCheckStableRunning=!0,Ww(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Kw(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,f,g,v,w)=>{try{return Zw(o),l.invokeTask(f,g,v,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),Yw(o)}},onInvoke:(l,u,f,g,v,w,T)=>{try{return Zw(o),l.invoke(f,g,v,w,T)}finally{o.shouldCoalesceRunChangeDetection&&a(),Yw(o)}},onHasTask:(l,u,f,g)=>{l.hasTask(f,g),u===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,Kw(o),Ww(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,u,f,g)=>(l.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,u){return this._inner.run(a,l,u)}runTask(a,l,u,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,gM,hy,hy);try{return g.runTask(v,l,u)}finally{g.cancelTask(v)}}runGuarded(a,l,u){return this._inner.runGuarded(a,l,u)}runOutsideAngular(a){return this._outer.run(a)}}const gM={};function Ww(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Kw(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Zw(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Yw(o){o._nesting--,Ww(o)}class Od{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oa,this.onMicrotaskEmpty=new oa,this.onStable=new oa,this.onError=new oa}run(a,l,u){return a.apply(l,u)}runGuarded(a,l,u){return a.apply(l,u)}runOutsideAngular(a){return a()}runTask(a,l,u,f){return a.apply(l,u)}}let no=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hs.assertNotInAngularZone(),my(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())my(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,f){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,u,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(Be(hs))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})(),Wr=(()=>{class o{constructor(){this._applications=new Map,Nd.addToWindow(this)}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return Nd.findTestabilityInTree(this,l,u)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();class _T{addToWindow(a){}findTestabilityInTree(a,l,u){return null}}function yT(o){Nd=o}let fs,Nd=new _T;const Pd=new Rn("AllowMultipleToken");class Fd{constructor(a,l){this.name=a,this.token=l}}function ru(o,a,l=[]){const u=`Platform: ${a}`,f=new Rn(u);return(g=[])=>{let v=vT();if(!v||v.injector.get(Pd,!1))if(o)o(l.concat(g).concat({provide:f,useValue:!0}));else{const w=l.concat(g).concat({provide:f,useValue:!0},{provide:eb,useValue:"platform"});!function Xw(o){if(fs&&!fs.destroyed&&!fs.injector.get(Pd,!1))throw new Fe(400,"");fs=o.get(Tg);const a=o.get(py,null);a&&a.forEach(l=>l())}(cs.create({providers:w,name:u}))}return function mM(o){const a=vT();if(!a)throw new Fe(401,"");return a}()}}function vT(){return fs&&!fs.destroyed?fs:null}let Tg=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const w=function yy(o,a){let l;return l="noop"===o?new Od:("zone.js"===o?void 0:o)||new hs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),T=[{provide:hs,useValue:w}];return w.run(()=>{const A=cs.create({providers:T,parent:this.injector,name:l.moduleType.name}),R=l.create(A),V=R.injector.get(xc,null);if(!V)throw new Fe(402,"");return w.runOutsideAngular(()=>{const G=w.onError.subscribe({next:ee=>{V.handleError(ee)}});R.onDestroy(()=>{vy(this._modules,R),G.unsubscribe()})}),function ar(o,a,l){try{const u=l();return tg(u)?u.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):u}catch(u){throw a.runOutsideAngular(()=>o.handleError(u)),u}}(V,w,()=>{const G=R.injector.get(Ef);return G.runInitializers(),G.donePromise.then(()=>(function Bb(o){ht(o,"Expected localeId to be defined"),"string"==typeof o&&(rf=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get(gy,L_)||L_),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,u=[]){const f=bT({},u);return function ps(o,a,l){const u=new Ew(l);return Promise.resolve(u)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const u=l.injector.get(su);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Fe(403,"");l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(Be(cs))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();function bT(o,a){return Array.isArray(a)?a.reduce(bT,o):Object.assign(Object.assign({},o),a)}let su=(()=>{class o{constructor(l,u,f,g,v){this._zone=l,this._injector=u,this._exceptionHandler=f,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),T=new O.y(A=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{hs.assertNotInAngularZone(),my(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,ce.T)(w,T.pipe((0,oe.B)()))}bootstrap(l,u){if(!this._initStatus.done)throw new Fe(405,"");let f;f=l instanceof Z_?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const g=function Qw(o){return o.isBoundToModule}(f)?void 0:this._injector.get(nu),w=f.create(cs.NULL,[],u||f.selector,g),T=w.location.nativeElement,A=w.injector.get(no,null),R=A&&w.injector.get(Wr);return A&&R&&R.registerApplication(T,A),w.onDestroy(()=>{this.detachView(w.hostView),vy(this.components,w),R&&R.unregisterApplication(T)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;vy(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(uT,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(Be(hs),Be(cs),Be(xc),Be(gg),Be(Ef))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})();function vy(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let ou=!0,ca=!1;function wT(){return ca=!0,ou}function e0(){if(ca)throw new Error("Cannot enable prod mode after platform setup.");ou=!1}let wO=(()=>{class o{}return o.__NG_ELEMENT_ID__=vM,o})();function vM(o){return function n0(o,a,l){if(Wd(o)&&!l){const u=$i(o.index,a);return new _g(u,u)}return 47&o.type?new _g(a[16],a):null}(Nn(),Me(),16==(16&o))}class o0{constructor(){}supports(a){return $p(a)}create(a){return new IM(a)}}const CM=(o,a)=>a;class IM{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||CM}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,u=this._removalsHead,f=0,g=null;for(;l||u;){const v=!u||l&&l.currentIndex<Dg(u,f,g)?l:u,w=Dg(v,f,g),T=v.currentIndex;if(v===u)f--,u=u._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const A=w-f,R=T-f;if(A!=R){for(let G=0;G<A;G++){const ee=G<g.length?g[G]:g[G]=0,Te=ee+G;R<=Te&&Te<A&&(g[G]=ee+1)}g[v.previousIndex]=R-A}}w!==T&&a(v,w,T)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!$p(a))throw new Fe(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],v=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,g,v,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,w),u=!0),l=l._next}else f=0,function qp(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[dd()]();let u;for(;!(u=l.next()).done;)a(u.value)}}(a,w=>{v=this._trackByFn(f,w),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,w,v,f)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,f),u=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,u,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new TM(l,u),g,f),a}_verifyReinsertion(a,l,u,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,u),this._addToMoves(a,u),a}_moveAfter(a,l,u){return this._unlink(a),this._insertAfter(a,l,u),this._addToMoves(a,u),a}_addAfter(a,l,u){return this._insertAfter(a,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,u){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new Kr),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,u=a._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Kr),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class TM{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DM{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const l=a._prevDup,u=a._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class Kr{constructor(){this.map=new Map}put(a){const l=a.trackById;let u=this.map.get(l);u||(u=new DM,this.map.set(l,u)),u.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Dg(o,a,l){const u=o.previousIndex;if(null===u)return u;let f=0;return l&&u<l.length&&(f=l[u]),u+a+f}class a0{constructor(){}supports(a){return a instanceof Map||d_(a)}create(){return new SM}}class SM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||d_(a)))throw new Fe(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,u);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const u=a._prev;return l._next=a,l._prev=u,a._prev=l,u&&(u._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const u=new l0(a);return this._records.set(a,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(u=>l(a[u],u))}}class l0{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sg(){return new If([new o0])}let If=(()=>{class o{constructor(l){this.factories=l}static create(l,u){if(null!=u){const f=u.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:u=>o.create(l,u||Sg()),deps:[[o,new Dr,new Br]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(null!=u)return u;throw new Fe(901,"")}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:Sg}),o})();function TT(){return new wy([new a0])}let wy=(()=>{class o{constructor(l){this.factories=l}static create(l,u){if(u){const f=u.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:u=>o.create(l,u||TT()),deps:[[o,new Dr,new Br]]}}find(l){const u=this.factories.find(g=>g.supports(l));if(u)return u;throw new Fe(901,"")}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:TT}),o})();const AM=[new a0],xM=new If([new o0]),Ag=new wy(AM),Ey=ru(null,"core",[{provide:cT,useValue:"unknown"},{provide:Tg,deps:[cs]},{provide:Wr,deps:[]},{provide:dT,deps:[]}]),PM=[{provide:su,useClass:su,deps:[hs,cs,xc,gg,Ef]},{provide:BA,deps:[hs],useFactory:function ST(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:Ef,useClass:Ef,deps:[[new Br,fy]]},{provide:qw,useClass:qw,deps:[]},fM,{provide:If,useFactory:function DT(){return xM},deps:[]},{provide:wy,useFactory:function RM(){return Ag},deps:[]},{provide:gy,useFactory:function OM(o){return o||function NM(){return"undefined"!=typeof $localize&&$localize.locale||L_}()},deps:[[new Yo(gy),new Br,new Dr]]},{provide:hT,useValue:"USD"}];let c0=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(Be(su))},o.\u0275mod=ae({type:o}),o.\u0275inj=dn({providers:PM}),o})()},3942:(ut,Ae,F)=>{"use strict";F.d(Ae,{Z:()=>Fe});var d=F(2090),j=F(4859),O=F(9681),ce=F(1877);class oe{constructor(Y,de){this._delegate=Y,this.firebase=de,(0,O._addComponent)(Y,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Y.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this._delegate.automaticDataCollectionEnabled=Y}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Y=>{this._delegate.checkDestroyed(),Y()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Y,de=O._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Oe=this._delegate.container.getProvider(Y);return!Oe.isInitialized()&&"EXPLICIT"===(null===(Re=Oe.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Oe.initialize(),Oe.getImmediate({identifier:de})}_removeServiceInstance(Y,de=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Y).clearInstance(de)}_addComponent(Y){(0,O._addComponent)(this._delegate,Y)}_addOrOverwriteComponent(Y){(0,O._addOrOverwriteComponent)(this._delegate,Y)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ve(){const He=function ue(He){const Y={},de={__esModule:!0,initializeApp:function fe(ie,Je={}){const X=O.initializeApp(ie,Je);if((0,d.r3)(Y,X.name))return Y[X.name];const me=new He(X,de);return Y[X.name]=me,me},app:Oe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(ie){const Je=ie.name,X=Je.replace("-compat","");if(O._registerComponent(ie)&&"PUBLIC"===ie.type){const me=(ge=Oe())=>{if("function"!=typeof ge[X])throw se.create("invalid-app-argument",{appName:Je});return ge[X]()};void 0!==ie.serviceProps&&(0,d.ZB)(me,ie.serviceProps),de[X]=me,He.prototype[X]=function(...ge){return this._getService.bind(this,Je).apply(this,ie.multipleInstances?ge:[])}}return"PUBLIC"===ie.type?de[X]:null},removeApp:function Re(ie){delete Y[ie]},useAsService:function Ke(ie,Je){return"serverAuth"===Je?null:Je},modularAPIs:O}};function Oe(ie){if(!(0,d.r3)(Y,ie=ie||O._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:ie});return Y[ie]}return de.default=de,Object.defineProperty(de,"apps",{get:function De(){return Object.keys(Y).map(ie=>Y[ie])}}),Oe.App=He,de}(oe);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Y(de){(0,d.ZB)(He,de)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),He}(),z=new ce.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=$;!function xe(He){(0,O.registerVersion)("@firebase/app-compat","0.1.18",He)}()},9681:(ut,Ae,F)=>{"use strict";F.r(Ae),F.d(Ae,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>ws,_DEFAULT_ENTRY_NAME:()=>Hn,_addComponent:()=>mn,_addOrOverwriteComponent:()=>Oi,_apps:()=>lt,_clearComponents:()=>On,_components:()=>vi,_getProvider:()=>Zt,_registerComponent:()=>cn,_removeServiceInstance:()=>dn,deleteApp:()=>Es,getApp:()=>Jr,getApps:()=>Zn,initializeApp:()=>Or,onLog:()=>jn,registerVersion:()=>nr,setLogLevel:()=>tn});var d=F(5861),j=F(4859),O=F(1877),ce=F(2090);class oe{constructor(ft){this.container=ft}getPlatformInfoString(){return this.container.getProviders().map(At=>{if(function ye(_t){const ft=_t.getComponent();return"VERSION"===(null==ft?void 0:ft.type)}(At)){const un=At.getImmediate();return`${un.library}/${un.version}`}return null}).filter(At=>At).join(" ")}}const se="@firebase/app",ve=new O.Yd("@firebase/app"),Hn="[DEFAULT]",ht={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,vi=new Map;function mn(_t,ft){try{_t.container.addComponent(ft)}catch(At){ve.debug(`Component ${ft.name} failed to register with FirebaseApp ${_t.name}`,At)}}function Oi(_t,ft){_t.container.addOrOverwriteComponent(ft)}function cn(_t){const ft=_t.name;if(vi.has(ft))return ve.debug(`There were multiple attempts to register component ${ft}.`),!1;vi.set(ft,_t);for(const At of lt.values())mn(At,_t);return!0}function Zt(_t,ft){return _t.container.getProvider(ft)}function dn(_t,ft,At=Hn){Zt(_t,ft).clearInstance(At)}function On(){vi.clear()}const ci=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class zi{constructor(ft,At,un){this._isDeleted=!1,this._options=Object.assign({},ft),this._config=Object.assign({},At),this._name=At.name,this._automaticDataCollectionEnabled=At.automaticDataCollectionEnabled,this._container=un,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ft){this.checkDestroyed(),this._automaticDataCollectionEnabled=ft}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ft){this._isDeleted=ft}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}const ws="9.6.7";function Or(_t,ft={}){"object"!=typeof ft&&(ft={name:ft});const At=Object.assign({name:Hn,automaticDataCollectionEnabled:!1},ft),un=At.name;if("string"!=typeof un||!un)throw ci.create("bad-app-name",{appName:String(un)});const bi=lt.get(un);if(bi){if((0,ce.vZ)(_t,bi.options)&&(0,ce.vZ)(At,bi.config))return bi;throw ci.create("duplicate-app",{appName:un})}const Mt=new j.H0(un);for(const et of vi.values())Mt.addComponent(et);const ct=new zi(_t,At,Mt);return lt.set(un,ct),ct}function Jr(_t=Hn){const ft=lt.get(_t);if(!ft)throw ci.create("no-app",{appName:_t});return ft}function Zn(){return Array.from(lt.values())}function Es(_t){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(_t){const ft=_t.name;lt.has(ft)&&(lt.delete(ft),yield Promise.all(_t.container.getProviders().map(At=>At.delete())),_t.isDeleted=!0)})).apply(this,arguments)}function nr(_t,ft,At){var un;let bi=null!==(un=ht[_t])&&void 0!==un?un:_t;At&&(bi+=`-${At}`);const Mt=bi.match(/\s|\//),ct=ft.match(/\s|\//);if(Mt||ct){const et=[`Unable to register library "${bi}" with version "${ft}":`];return Mt&&et.push(`library name "${bi}" contains illegal characters (whitespace or "/")`),Mt&&ct&&et.push("and"),ct&&et.push(`version name "${ft}" contains illegal characters (whitespace or "/")`),void ve.warn(et.join(" "))}cn(new j.wA(`${bi}-version`,()=>({library:bi,version:ft}),"VERSION"))}function jn(_t,ft){if(null!==_t&&"function"!=typeof _t)throw ci.create("invalid-log-argument");(0,O.Am)(_t,ft)}function tn(_t){(0,O.Ub)(_t)}!function Gi(_t){cn(new j.wA("platform-logger",ft=>new oe(ft),"PRIVATE")),nr(se,"0.7.17",_t),nr(se,"0.7.17","esm2017"),nr("fire-js","")}("")},4859:(ut,Ae,F)=>{"use strict";F.d(Ae,{wA:()=>O,H0:()=>ue,zt:()=>oe});var d=F(5861),j=F(2090);class O{constructor($,z,ne){this.name=$,this.instanceFactory=z,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ce="[DEFAULT]";class oe{constructor($,z){this.name=$,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(z)){const ne=new j.BH;if(this.instancesDeferred.set(z,ne),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:z});Ge&&ne.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(z).promise}getImmediate($){var z;const ne=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ge=null!==(z=null==$?void 0:$.optional)&&void 0!==z&&z;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(xe){if(Ge)return null;throw xe}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function se(ve){return"EAGER"===ve.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(z){}for(const[z,ne]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(z);try{const xe=this.getOrInitializeService({instanceIdentifier:Ge});ne.resolve(xe)}catch(xe){}}}}clearInstance($=ce){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,d.Z)(function*(){const z=Array.from($.instances.values());yield Promise.all([...z.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...z.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ce){return this.instances.has($)}getOptions($=ce){return this.instancesOptions.get($)||{}}initialize($={}){const{options:z={}}=$,ne=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ne,options:z});for(const[xe,Fe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(xe)&&Fe.resolve(Ge);return Ge}onInit($,z){var ne;const Ge=this.normalizeInstanceIdentifier(z),xe=null!==(ne=this.onInitCallbacks.get(Ge))&&void 0!==ne?ne:new Set;xe.add($),this.onInitCallbacks.set(Ge,xe);const Fe=this.instances.get(Ge);return Fe&&$(Fe,Ge),()=>{xe.delete($)}}invokeOnInitCallbacks($,z){const ne=this.onInitCallbacks.get(z);if(ne)for(const Ge of ne)try{Ge($,z)}catch(xe){}}getOrInitializeService({instanceIdentifier:$,options:z={}}){let ne=this.instances.get($);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=$,ve===ce?void 0:ve),options:z}),this.instances.set($,ne),this.instancesOptions.set($,z),this.invokeOnInitCallbacks(ne,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ne)}catch(Ge){}var ve;return ne||null}normalizeInstanceIdentifier($=ce){return this.component?this.component.multipleInstances?$:ce:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor($){this.name=$,this.providers=new Map}addComponent($){const z=this.getProvider($.name);if(z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const z=new oe($,this);return this.providers.set($,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ae,F)=>{"use strict";F.d(Ae,{in:()=>j,Yd:()=>se,Ub:()=>ue,Am:()=>ve});const d=[];var j=(()=>{return($=j||(j={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",j;var $})();const O={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ce=j.INFO,oe={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=($,z,...ne)=>{if(z<$.logLevel)return;const Ge=(new Date).toISOString(),xe=oe[z];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[xe](`[${Ge}]  ${$.name}:`,...ne)};class se{constructor(z){this.name=z,this._logLevel=ce,this._logHandler=ye,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in j))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?O[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...z),this._logHandler(this,j.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...z),this._logHandler(this,j.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,j.INFO,...z),this._logHandler(this,j.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,j.WARN,...z),this._logHandler(this,j.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...z),this._logHandler(this,j.ERROR,...z)}}function ue($){d.forEach(z=>{z.setLogLevel($)})}function ve($,z){for(const ne of d){let Ge=null;z&&z.level&&(Ge=O[z.level]),ne.userLogHandler=null===$?null:(xe,Fe,...He)=>{const Y=He.map(de=>{if(null==de)return null;if("string"==typeof de)return de;if("number"==typeof de||"boolean"==typeof de)return de.toString();if(de instanceof Error)return de.message;try{return JSON.stringify(de)}catch(Re){return null}}).filter(de=>de).join(" ");Fe>=(null!=Ge?Ge:xe.logLevel)&&$({level:j[Fe].toLowerCase(),message:Y,args:He,type:xe.name})}}}},5861:(ut,Ae,F)=>{"use strict";function d(O,ce,oe,ye,se,ue,ve){try{var $=O[ue](ve),z=$.value}catch(ne){return void oe(ne)}$.done?ce(z):Promise.resolve(z).then(ye,se)}function j(O){return function(){var ce=this,oe=arguments;return new Promise(function(ye,se){var ue=O.apply(ce,oe);function ve(z){d(ue,ye,se,ve,$,"next",z)}function $(z){d(ue,ye,se,ve,$,"throw",z)}ve(void 0)})}}F.d(Ae,{Z:()=>j})}},ut=>{ut(ut.s=7917)}]);